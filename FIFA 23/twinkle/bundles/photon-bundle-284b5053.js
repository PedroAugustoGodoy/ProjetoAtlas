/* Twinkle Signature v1 MkKoX4L39cCj8R0AHGgfcD3mrqQXT7X3t1UgHVrSGki4F8+JmFdwSQdU1t8HEQQKXPh2ipIedBjcsousb6FABQ== *//*!
*   Version: main_51551
*   Build #: 51551
*    Branch: main
*  Revision: d8b0c3a542017d995f1f47ec6de5739562c6b460
* Timestamp: 2023-10-03 11:10:22 UTC
*/
!function() {
var e = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
function t(e, t, r) {
return e(r = {
path: t,
exports: {},
require: function(e, t) {
return n(null == t && r.path);
}
}, r.exports), r.exports;
}
function n() {
throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
}
/**
	 * @license React
	 * react.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */ var r = Symbol.for("react.element"), i = Symbol.for("react.portal"), o = Symbol.for("react.fragment"), a = Symbol.for("react.strict_mode"), s = Symbol.for("react.profiler"), l = Symbol.for("react.provider"), c = Symbol.for("react.context"), d = Symbol.for("react.forward_ref"), u = Symbol.for("react.suspense"), p = Symbol.for("react.memo"), f = Symbol.for("react.lazy"), h = Symbol.iterator;
function m(e) {
return null === e || "object" != typeof e ? null : "function" == typeof (e = h && e[h] || e["@@iterator"]) ? e : null;
}
var g = {
isMounted: function() {
return !1;
},
enqueueForceUpdate: function() {},
enqueueReplaceState: function() {},
enqueueSetState: function() {}
}, y = Object.assign, I = {};
function _(e, t, n) {
this.props = e, this.context = t, this.refs = I, this.updater = n || g;
}
function b() {}
function S(e, t, n) {
this.props = e, this.context = t, this.refs = I, this.updater = n || g;
}
_.prototype.isReactComponent = {}, _.prototype.setState = function(e, t) {
if ("object" != typeof e && "function" != typeof e && null != e) throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");
this.updater.enqueueSetState(this, e, t, "setState");
}, _.prototype.forceUpdate = function(e) {
this.updater.enqueueForceUpdate(this, e, "forceUpdate");
}, b.prototype = _.prototype;
var v = S.prototype = new b;
v.constructor = S, y(v, _.prototype), v.isPureReactComponent = !0;
var T = Array.isArray, E = Object.prototype.hasOwnProperty, P = {
current: null
}, O = {
key: !0,
ref: !0,
__self: !0,
__source: !0
};
function C(e, t, n) {
var i, o = {}, a = null, s = null;
if (null != t) for (i in void 0 !== t.ref && (s = t.ref), void 0 !== t.key && (a = "" + t.key), 
t) E.call(t, i) && !O.hasOwnProperty(i) && (o[i] = t[i]);
var l = arguments.length - 2;
if (1 === l) o.children = n; else if (1 < l) {
for (var c = Array(l), d = 0; d < l; d++) c[d] = arguments[d + 2];
o.children = c;
}
if (e && e.defaultProps) for (i in l = e.defaultProps) void 0 === o[i] && (o[i] = l[i]);
return {
$$typeof: r,
type: e,
key: a,
ref: s,
props: o,
_owner: P.current
};
}
function N(e, t) {
return {
$$typeof: r,
type: e.type,
key: t,
ref: e.ref,
props: e.props,
_owner: e._owner
};
}
function A(e) {
return "object" == typeof e && null !== e && e.$$typeof === r;
}
function L(e) {
var t = {
"=": "=0",
":": "=2"
};
return "$" + e.replace(/[=:]/g, (function(e) {
return t[e];
}));
}
var w = /\/+/g;
function k(e, t) {
return "object" == typeof e && null !== e && null != e.key ? L("" + e.key) : t.toString(36);
}
function R(e, t, n, o, a) {
var s = typeof e;
"undefined" !== s && "boolean" !== s || (e = null);
var l = !1;
if (null === e) l = !0; else switch (s) {
case "string":
case "number":
l = !0;
break;

case "object":
switch (e.$$typeof) {
case r:
case i:
l = !0;
}
}
if (l) return a = a(l = e), e = "" === o ? "." + k(l, 0) : o, T(a) ? (n = "", null != e && (n = e.replace(w, "$&/") + "/"), 
R(a, t, n, "", (function(e) {
return e;
}))) : null != a && (A(a) && (a = N(a, n + (!a.key || l && l.key === a.key ? "" : ("" + a.key).replace(w, "$&/") + "/") + e)), 
t.push(a)), 1;
if (l = 0, o = "" === o ? "." : o + ":", T(e)) for (var c = 0; c < e.length; c++) {
var d = o + k(s = e[c], c);
l += R(s, t, n, d, a);
} else if ("function" == typeof (d = m(e))) for (e = d.call(e), c = 0; !(s = e.next()).done; ) l += R(s = s.value, t, n, d = o + k(s, c++), a); else if ("object" === s) throw t = String(e), 
Error("Objects are not valid as a React child (found: " + ("[object Object]" === t ? "object with keys {" + Object.keys(e).join(", ") + "}" : t) + "). If you meant to render a collection of children, use an array instead.");
return l;
}
function x(e, t, n) {
if (null == e) return e;
var r = [], i = 0;
return R(e, r, "", "", (function(e) {
return t.call(n, e, i++);
})), r;
}
function B(e) {
if (-1 === e._status) {
var t = e._result;
(t = t()).then((function(t) {
0 !== e._status && -1 !== e._status || (e._status = 1, e._result = t);
}), (function(t) {
0 !== e._status && -1 !== e._status || (e._status = 2, e._result = t);
})), -1 === e._status && (e._status = 0, e._result = t);
}
if (1 === e._status) return e._result.default;
throw e._result;
}
var D = {
current: null
}, F = {
transition: null
}, M = {
map: x,
forEach: function(e, t, n) {
x(e, (function() {
t.apply(this, arguments);
}), n);
},
count: function(e) {
var t = 0;
return x(e, (function() {
t++;
})), t;
},
toArray: function(e) {
return x(e, (function(e) {
return e;
})) || [];
},
only: function(e) {
if (!A(e)) throw Error("React.Children.only expected to receive a single React element child.");
return e;
}
}, U = {
Children: M,
Component: _,
Fragment: o,
Profiler: s,
PureComponent: S,
StrictMode: a,
Suspense: u,
__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {
ReactCurrentDispatcher: D,
ReactCurrentBatchConfig: F,
ReactCurrentOwner: P
},
cloneElement: function(e, t, n) {
if (null == e) throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + e + ".");
var i = y({}, e.props), o = e.key, a = e.ref, s = e._owner;
if (null != t) {
if (void 0 !== t.ref && (a = t.ref, s = P.current), void 0 !== t.key && (o = "" + t.key), 
e.type && e.type.defaultProps) var l = e.type.defaultProps;
for (c in t) E.call(t, c) && !O.hasOwnProperty(c) && (i[c] = void 0 === t[c] && void 0 !== l ? l[c] : t[c]);
}
var c = arguments.length - 2;
if (1 === c) i.children = n; else if (1 < c) {
l = Array(c);
for (var d = 0; d < c; d++) l[d] = arguments[d + 2];
i.children = l;
}
return {
$$typeof: r,
type: e.type,
key: o,
ref: a,
props: i,
_owner: s
};
},
createContext: function(e) {
return (e = {
$$typeof: c,
_currentValue: e,
_currentValue2: e,
_threadCount: 0,
Provider: null,
Consumer: null,
_defaultValue: null,
_globalName: null
}).Provider = {
$$typeof: l,
_context: e
}, e.Consumer = e;
},
createElement: C,
createFactory: function(e) {
var t = C.bind(null, e);
return t.type = e, t;
},
createRef: function() {
return {
current: null
};
},
forwardRef: function(e) {
return {
$$typeof: d,
render: e
};
},
isValidElement: A,
lazy: function(e) {
return {
$$typeof: f,
_payload: {
_status: -1,
_result: e
},
_init: B
};
},
memo: function(e, t) {
return {
$$typeof: p,
type: e,
compare: void 0 === t ? null : t
};
},
startTransition: function(e) {
var t = F.transition;
F.transition = {};
try {
e();
} finally {
F.transition = t;
}
},
unstable_act: function() {
throw Error("act(...) is not supported in production builds of React.");
},
useCallback: function(e, t) {
return D.current.useCallback(e, t);
},
useContext: function(e) {
return D.current.useContext(e);
},
useDebugValue: function() {},
useDeferredValue: function(e) {
return D.current.useDeferredValue(e);
},
useEffect: function(e, t) {
return D.current.useEffect(e, t);
},
useId: function() {
return D.current.useId();
},
useImperativeHandle: function(e, t, n) {
return D.current.useImperativeHandle(e, t, n);
},
useInsertionEffect: function(e, t) {
return D.current.useInsertionEffect(e, t);
},
useLayoutEffect: function(e, t) {
return D.current.useLayoutEffect(e, t);
},
useMemo: function(e, t) {
return D.current.useMemo(e, t);
},
useReducer: function(e, t, n) {
return D.current.useReducer(e, t, n);
},
useRef: function(e) {
return D.current.useRef(e);
},
useState: function(e) {
return D.current.useState(e);
},
useSyncExternalStore: function(e, t, n) {
return D.current.useSyncExternalStore(e, t, n);
},
useTransition: function() {
return D.current.useTransition();
},
version: "18.2.0"
}, H = (t((function(e, t) {})), t((function(e) {
e.exports = U;
}))), V = t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.isUsingStaticRendering = t.enableStaticRendering = void 0;
var n = !1;
t.enableStaticRendering = function(e) {
n = e;
}, t.isUsingStaticRendering = function() {
return n;
};
}));
function J(e) {
for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) n[r - 1] = arguments[r];
throw new Error("number" == typeof e ? "[MobX] minified error nr: " + e + (n.length ? " " + n.map(String).join(",") : "") + ". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts" : "[MobX] " + e);
}
var G = {};
function z() {
return "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : G;
}
var j = Object.assign, q = Object.getOwnPropertyDescriptor, Y = Object.defineProperty, K = Object.prototype, W = [];
Object.freeze(W);
var X = {};
Object.freeze(X);
var Q = "undefined" != typeof Proxy, $ = Object.toString();
function Z(e) {
var t = !1;
return function() {
if (!t) return t = !0, e.apply(this, arguments);
};
}
Q || J("Proxy not available");
var ee = function() {};
function te(e) {
return "function" == typeof e;
}
function ne(e) {
switch (typeof e) {
case "string":
case "symbol":
case "number":
return !0;
}
return !1;
}
function re(e) {
return null !== e && "object" == typeof e;
}
function ie(e) {
if (!re(e)) return !1;
var t = Object.getPrototypeOf(e);
if (null == t) return !0;
var n = Object.hasOwnProperty.call(t, "constructor") && t.constructor;
return "function" == typeof n && n.toString() === $;
}
function oe(e) {
var t = null == e ? void 0 : e.constructor;
return !!t && ("GeneratorFunction" === t.name || "GeneratorFunction" === t.displayName);
}
function ae(e, t, n) {
Y(e, t, {
enumerable: !1,
writable: !0,
configurable: !0,
value: n
});
}
function se(e, t) {
var n = "isMobX" + e;
return t.prototype[n] = !0, function(e) {
return re(e) && !0 === e[n];
};
}
function le(e) {
return e instanceof Map;
}
function ce(e) {
return e instanceof Set;
}
var de = void 0 !== Object.getOwnPropertySymbols;
function ue(e) {
var t = Object.keys(e);
if (!de) return t;
var n = Object.getOwnPropertySymbols(e);
return n.length ? [].concat(t, n.filter((function(t) {
return K.propertyIsEnumerable.call(e, t);
}))) : t;
}
var pe = "undefined" != typeof Reflect && Reflect.ownKeys ? Reflect.ownKeys : de ? function(e) {
return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
} : Object.getOwnPropertyNames;
function fe(e) {
return null === e ? null : "object" == typeof e ? "" + e : e;
}
function he(e, t) {
return K.hasOwnProperty.call(e, t);
}
var me = Object.getOwnPropertyDescriptors || function(e) {
var t = {};
return pe(e).forEach((function(n) {
t[n] = q(e, n);
})), t;
};
function ge(e, t) {
for (var n = 0; n < t.length; n++) {
var r = t[n];
r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
Object.defineProperty(e, r.key, r);
}
}
function ye(e, t, n) {
return t && ge(e.prototype, t), n && ge(e, n), Object.defineProperty(e, "prototype", {
writable: !1
}), e;
}
function Ie() {
return Ie = Object.assign || function(e) {
for (var t = 1; t < arguments.length; t++) {
var n = arguments[t];
for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
}
return e;
}, Ie.apply(this, arguments);
}
function _e(e, t) {
return _e = Object.setPrototypeOf || function(e, t) {
return e.__proto__ = t, e;
}, _e(e, t);
}
function be(e, t) {
if (e) {
if ("string" == typeof e) return Se(e, t);
var n = Object.prototype.toString.call(e).slice(8, -1);
return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? Se(e, t) : void 0;
}
}
function Se(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
return r;
}
function ve(e, t) {
var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (n) return (n = n.call(e)).next.bind(n);
if (Array.isArray(e) || (n = be(e)) || t && e && "number" == typeof e.length) {
n && (e = n);
var r = 0;
return function() {
return r >= e.length ? {
done: !0
} : {
done: !1,
value: e[r++]
};
};
}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
var Te = Symbol("mobx-stored-annotations");
function Ee(e) {
return Object.assign((function(t, n) {
Pe(t, n, e);
}), e);
}
function Pe(e, t, n) {
he(e, Te) || ae(e, Te, Ie({}, e[Te])), De(n) || (e[Te][t] = n);
}
function Oe(e) {
return he(e, Te) || ae(e, Te, Ie({}, e[Te])), e[Te];
}
var Ce = Symbol("mobx administration"), Ne = function() {
function e(e) {
void 0 === e && (e = "Atom"), this.name_ = void 0, this.isPendingUnobservation_ = !1, 
this.isBeingObserved_ = !1, this.observers_ = new Set, this.diffValue_ = 0, this.lastAccessedBy_ = 0, 
this.lowestObserverState_ = Rt.NOT_TRACKING_, this.onBOL = void 0, this.onBUOL = void 0, 
this.name_ = e;
}
var t = e.prototype;
return t.onBO = function() {
this.onBOL && this.onBOL.forEach((function(e) {
return e();
}));
}, t.onBUO = function() {
this.onBUOL && this.onBUOL.forEach((function(e) {
return e();
}));
}, t.reportObserved = function() {
return pn(this);
}, t.reportChanged = function() {
dn(), fn(this), un();
}, t.toString = function() {
return this.name_;
}, e;
}(), Ae = se("Atom", Ne);
function Le(e, t, n) {
void 0 === t && (t = ee), void 0 === n && (n = ee);
var r = new Ne(e);
return t !== ee && Mn(r, t), n !== ee && Un(r, n), r;
}
var we = {
identity: function(e, t) {
return e === t;
},
structural: function(e, t) {
return li(e, t);
},
default: function(e, t) {
return Object.is ? Object.is(e, t) : e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t;
},
shallow: function(e, t) {
return li(e, t, 1);
}
};
function ke(e, t, n) {
return nr(e) ? e : Array.isArray(e) ? gt.array(e, {
name: n
}) : ie(e) ? gt.object(e, void 0, {
name: n
}) : le(e) ? gt.map(e, {
name: n
}) : ce(e) ? gt.set(e, {
name: n
}) : "function" != typeof e || Rn(e) || Qn(e) ? e : oe(e) ? Wn(e) : wn(n, e);
}
function Re(e) {
return e;
}
var xe = "override", Be = Ee({
annotationType_: xe,
make_: function(e, t) {
return 0;
},
extend_: function(e, t, n, r) {
J("'" + this.annotationType_ + "' can only be used with 'makeObservable'");
}
});
function De(e) {
return e.annotationType_ === xe;
}
function Fe(e, t) {
return {
annotationType_: e,
options_: t,
make_: Me,
extend_: Ue
};
}
function Me(e, t, n, r) {
var i;
if (null != (i = this.options_) && i.bound) return null === this.extend_(e, t, n, !1) ? 0 : 1;
if (r === e.target_) return null === this.extend_(e, t, n, !1) ? 0 : 2;
if (Rn(n.value)) return 1;
var o = He(e, this, t, n, !1);
return Y(r, t, o), 2;
}
function Ue(e, t, n, r) {
var i = He(e, this, t, n);
return e.defineProperty_(t, i, r);
}
function He(e, t, n, r, i) {
var o, a, s, l, c, d, u, p;
void 0 === i && (i = nn.safeDescriptors), p = r, t.annotationType_, p.value;
var f, h = r.value;
null != (o = t.options_) && o.bound && (h = h.bind(null != (f = e.proxy_) ? f : e.target_));
return {
value: Ot(null != (a = null == (s = t.options_) ? void 0 : s.name) ? a : n.toString(), h, null != (l = null == (c = t.options_) ? void 0 : c.autoAction) && l, null != (d = t.options_) && d.bound ? null != (u = e.proxy_) ? u : e.target_ : void 0),
configurable: !i || e.isPlainObject_,
enumerable: !1,
writable: !i
};
}
function Ve(e, t) {
return {
annotationType_: e,
options_: t,
make_: Je,
extend_: Ge
};
}
function Je(e, t, n, r) {
var i;
if (r === e.target_) return null === this.extend_(e, t, n, !1) ? 0 : 2;
if (null != (i = this.options_) && i.bound && (!he(e.target_, t) || !Qn(e.target_[t])) && null === this.extend_(e, t, n, !1)) return 0;
if (Qn(n.value)) return 1;
var o = ze(e, this, t, n, !1, !1);
return Y(r, t, o), 2;
}
function Ge(e, t, n, r) {
var i, o = ze(e, this, t, n, null == (i = this.options_) ? void 0 : i.bound);
return e.defineProperty_(t, o, r);
}
function ze(e, t, n, r, i, o) {
var a;
void 0 === o && (o = nn.safeDescriptors), a = r, t.annotationType_, a.value;
var s, l = r.value;
(Qn(l) || (l = Wn(l)), i) && ((l = l.bind(null != (s = e.proxy_) ? s : e.target_)).isMobXFlow = !0);
return {
value: l,
configurable: !o || e.isPlainObject_,
enumerable: !1,
writable: !o
};
}
function je(e, t) {
return {
annotationType_: e,
options_: t,
make_: qe,
extend_: Ye
};
}
function qe(e, t, n) {
return null === this.extend_(e, t, n, !1) ? 0 : 1;
}
function Ye(e, t, n, r) {
return Ke(e, this, t, n), e.defineComputedProperty_(t, Ie({}, this.options_, {
get: n.get,
set: n.set
}), r);
}
function Ke(e, t, n, r) {
t.annotationType_, r.get;
}
function We(e, t) {
return {
annotationType_: e,
options_: t,
make_: Xe,
extend_: Qe
};
}
function Xe(e, t, n) {
return null === this.extend_(e, t, n, !1) ? 0 : 1;
}
function Qe(e, t, n, r) {
var i, o;
return $e(e, this), e.defineObservableProperty_(t, n.value, null != (i = null == (o = this.options_) ? void 0 : o.enhancer) ? i : ke, r);
}
function $e(e, t, n, r) {
t.annotationType_;
}
var Ze = et();
function et(e) {
return {
annotationType_: "true",
options_: e,
make_: tt,
extend_: nt
};
}
function tt(e, t, n, r) {
var i, o, a, s;
if (n.get) return bt.make_(e, t, n, r);
if (n.set) {
var l = Ot(t.toString(), n.set);
return r === e.target_ ? null === e.defineProperty_(t, {
configurable: !nn.safeDescriptors || e.isPlainObject_,
set: l
}) ? 0 : 2 : (Y(r, t, {
configurable: !0,
set: l
}), 2);
}
if (r !== e.target_ && "function" == typeof n.value) return oe(n.value) ? (null != (s = this.options_) && s.autoBind ? Wn.bound : Wn).make_(e, t, n, r) : (null != (a = this.options_) && a.autoBind ? wn.bound : wn).make_(e, t, n, r);
var c, d = !1 === (null == (i = this.options_) ? void 0 : i.deep) ? gt.ref : gt;
"function" == typeof n.value && null != (o = this.options_) && o.autoBind && (n.value = n.value.bind(null != (c = e.proxy_) ? c : e.target_));
return d.make_(e, t, n, r);
}
function nt(e, t, n, r) {
var i, o, a;
if (n.get) return bt.extend_(e, t, n, r);
if (n.set) return e.defineProperty_(t, {
configurable: !nn.safeDescriptors || e.isPlainObject_,
set: Ot(t.toString(), n.set)
}, r);
"function" == typeof n.value && null != (i = this.options_) && i.autoBind && (n.value = n.value.bind(null != (a = e.proxy_) ? a : e.target_));
return (!1 === (null == (o = this.options_) ? void 0 : o.deep) ? gt.ref : gt).extend_(e, t, n, r);
}
var rt = {
deep: !0,
name: void 0,
defaultDecorator: void 0
};
function it(e) {
return e || rt;
}
Object.freeze(rt);
var ot = We("observable"), at = We("observable.ref", {
enhancer: Re
}), st = We("observable.shallow", {
enhancer: function(e, t, n) {
return null == e || ni(e) || Hr(e) || jr(e) || Wr(e) ? e : Array.isArray(e) ? gt.array(e, {
name: n,
deep: !1
}) : ie(e) ? gt.object(e, void 0, {
name: n,
deep: !1
}) : le(e) ? gt.map(e, {
name: n,
deep: !1
}) : ce(e) ? gt.set(e, {
name: n,
deep: !1
}) : void 0;
}
}), lt = We("observable.struct", {
enhancer: function(e, t) {
return li(e, t) ? t : e;
}
}), ct = Ee(ot);
function dt(e) {
return !0 === e.deep ? ke : !1 === e.deep ? Re : (t = e.defaultDecorator) && null != (n = null == (r = t.options_) ? void 0 : r.enhancer) ? n : ke;
var t, n, r;
}
function ut(e) {
var t;
return e ? null != (t = e.defaultDecorator) ? t : et(e) : void 0;
}
function pt(e, t, n) {
if (!ne(t)) return nr(e) ? e : ie(e) ? gt.object(e, t, n) : Array.isArray(e) ? gt.array(e, t) : le(e) ? gt.map(e, t) : ce(e) ? gt.set(e, t) : "object" == typeof e && null !== e ? e : gt.box(e, t);
Pe(e, t, ot);
}
Object.assign(pt, ct);
var ft, ht, mt = {
box: function(e, t) {
var n = it(t);
return new Bt(e, dt(n), n.name, !0, n.equals);
},
array: function(e, t) {
var n = it(t);
return Rr(e, dt(n), n.name);
},
map: function(e, t) {
var n = it(t);
return new zr(e, dt(n), n.name);
},
set: function(e, t) {
var n = it(t);
return new Kr(e, dt(n), n.name);
},
object: function(e, t, n) {
return Jn(br({}, n), e, t);
},
ref: Ee(at),
shallow: Ee(st),
deep: ct,
struct: Ee(lt)
}, gt = j(pt, mt), yt = "computed", It = je(yt), _t = je("computed.struct", {
equals: we.structural
}), bt = function(e, t) {
if (ne(t)) return Pe(e, t, It);
if (ie(e)) return Ee(je(yt, e));
var n = ie(t) ? t : {};
return n.get = e, n.name || (n.name = e.name || ""), new Ft(n);
};
Object.assign(bt, It), bt.struct = Ee(_t);
var St, vt = 0, Tt = 1, Et = null != (ft = null == (ht = q((function() {}), "name")) ? void 0 : ht.configurable) && ft, Pt = {
value: "action",
configurable: !0,
writable: !1,
enumerable: !1
};
function Ot(e, t, n, r) {
function i() {
return Ct(e, n, t, r || this, arguments);
}
return void 0 === n && (n = !1), i.isMobxAction = !0, Et && (Pt.value = e, Object.defineProperty(i, "name", Pt)), 
i;
}
function Ct(e, t, n, r, i) {
var o = Nt(e, t);
try {
return n.apply(r, i);
} catch (e) {
throw o.error_ = e, e;
} finally {
At(o);
}
}
function Nt(e, t, n, r) {
var i = nn.trackingDerivation, o = !t || !i;
dn();
var a = nn.allowStateChanges;
o && (Yt(), a = wt(!0));
var s = {
runAsAction_: o,
prevDerivation_: i,
prevAllowStateChanges_: a,
prevAllowStateReads_: Wt(!0),
notifySpy_: !1,
startTime_: 0,
actionId_: Tt++,
parentActionId_: vt
};
return vt = s.actionId_, s;
}
function At(e) {
vt !== e.actionId_ && J(30), vt = e.parentActionId_, void 0 !== e.error_ && (nn.suppressReactionErrors = !0), 
kt(e.prevAllowStateChanges_), Xt(e.prevAllowStateReads_), un(), e.runAsAction_ && Kt(e.prevDerivation_), 
nn.suppressReactionErrors = !1;
}
function Lt(e, t) {
var n = wt(e);
try {
return t();
} finally {
kt(n);
}
}
function wt(e) {
var t = nn.allowStateChanges;
return nn.allowStateChanges = e, t;
}
function kt(e) {
nn.allowStateChanges = e;
}
St = Symbol.toPrimitive;
var Rt, xt, Bt = function(e, t) {
var n, r;
function i(t, n, r, i, o) {
var a;
return void 0 === r && (r = "ObservableValue"), void 0 === o && (o = we.default), 
(a = e.call(this, r) || this).enhancer = void 0, a.name_ = void 0, a.equals = void 0, 
a.interceptors_ = void 0, a.changeListeners_ = void 0, a.value_ = void 0, a.dehancer = void 0, 
a.enhancer = n, a.name_ = r, a.equals = o, a.value_ = n(t, void 0, r), a;
}
r = e, (n = i).prototype = Object.create(r.prototype), n.prototype.constructor = n, 
_e(n, r);
var o = i.prototype;
return o.dehanceValue = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, o.set = function(e) {
this.value_;
(e = this.prepareNewValue_(e)) !== nn.UNCHANGED && this.setNewValue_(e);
}, o.prepareNewValue_ = function(e) {
if (Sr(this)) {
var t = Tr(this, {
object: this,
type: Lr,
newValue: e
});
if (!t) return nn.UNCHANGED;
e = t.newValue;
}
return e = this.enhancer(e, this.value_, this.name_), this.equals(this.value_, e) ? nn.UNCHANGED : e;
}, o.setNewValue_ = function(e) {
var t = this.value_;
this.value_ = e, this.reportChanged(), Er(this) && Or(this, {
type: Lr,
object: this,
newValue: e,
oldValue: t
});
}, o.get = function() {
return this.reportObserved(), this.dehanceValue(this.value_);
}, o.intercept_ = function(e) {
return vr(this, e);
}, o.observe_ = function(e, t) {
return t && e({
observableKind: "value",
debugObjectName: this.name_,
object: this,
type: Lr,
newValue: this.value_,
oldValue: void 0
}), Pr(this, e);
}, o.raw = function() {
return this.value_;
}, o.toJSON = function() {
return this.get();
}, o.toString = function() {
return this.name_ + "[" + this.value_ + "]";
}, o.valueOf = function() {
return fe(this.get());
}, o[t] = function() {
return this.valueOf();
}, i;
}(Ne, St), Dt = se("ObservableValue", Bt), Ft = function(e) {
function t(e) {
this.dependenciesState_ = Rt.NOT_TRACKING_, this.observing_ = [], this.newObserving_ = null, 
this.isBeingObserved_ = !1, this.isPendingUnobservation_ = !1, this.observers_ = new Set, 
this.diffValue_ = 0, this.runId_ = 0, this.lastAccessedBy_ = 0, this.lowestObserverState_ = Rt.UP_TO_DATE_, 
this.unboundDepsCount_ = 0, this.value_ = new Ut(null), this.name_ = void 0, this.triggeredBy_ = void 0, 
this.isComputing_ = !1, this.isRunningSetter_ = !1, this.derivation = void 0, this.setter_ = void 0, 
this.isTracing_ = xt.NONE, this.scope_ = void 0, this.equals_ = void 0, this.requiresReaction_ = void 0, 
this.keepAlive_ = void 0, this.onBOL = void 0, this.onBUOL = void 0, e.get || J(31), 
this.derivation = e.get, this.name_ = e.name || "ComputedValue", e.set && (this.setter_ = Ot("ComputedValue-setter", e.set)), 
this.equals_ = e.equals || (e.compareStructural || e.struct ? we.structural : we.default), 
this.scope_ = e.context, this.requiresReaction_ = e.requiresReaction, this.keepAlive_ = !!e.keepAlive;
}
var n = t.prototype;
return n.onBecomeStale_ = function() {
mn(this);
}, n.onBO = function() {
this.onBOL && this.onBOL.forEach((function(e) {
return e();
}));
}, n.onBUO = function() {
this.onBUOL && this.onBUOL.forEach((function(e) {
return e();
}));
}, n.get = function() {
if (this.isComputing_ && J(32, this.name_, this.derivation), 0 !== nn.inBatch || 0 !== this.observers_.size || this.keepAlive_) {
if (pn(this), Vt(this)) {
var e = nn.trackingContext;
this.keepAlive_ && !e && (nn.trackingContext = this), this.trackAndCompute() && hn(this), 
nn.trackingContext = e;
}
} else Vt(this) && (this.warnAboutUntrackedRead_(), dn(), this.value_ = this.computeValue_(!1), 
un());
var t = this.value_;
if (Ht(t)) throw t.cause;
return t;
}, n.set = function(e) {
if (this.setter_) {
this.isRunningSetter_ && J(33, this.name_), this.isRunningSetter_ = !0;
try {
this.setter_.call(this.scope_, e);
} finally {
this.isRunningSetter_ = !1;
}
} else J(34, this.name_);
}, n.trackAndCompute = function() {
var e = this.value_, t = this.dependenciesState_ === Rt.NOT_TRACKING_, n = this.computeValue_(!0), r = t || Ht(e) || Ht(n) || !this.equals_(e, n);
return r && (this.value_ = n), r;
}, n.computeValue_ = function(e) {
this.isComputing_ = !0;
var t, n = wt(!1);
if (e) t = Gt(this, this.derivation, this.scope_); else if (!0 === nn.disableErrorBoundaries) t = this.derivation.call(this.scope_); else try {
t = this.derivation.call(this.scope_);
} catch (e) {
t = new Ut(e);
}
return kt(n), this.isComputing_ = !1, t;
}, n.suspend_ = function() {
this.keepAlive_ || (jt(this), this.value_ = void 0);
}, n.observe_ = function(e, t) {
var n = this, r = !0, i = void 0;
return xn((function() {
var o = n.get();
if (!r || t) {
var a = Yt();
e({
observableKind: "computed",
debugObjectName: n.name_,
type: Lr,
object: n,
newValue: o,
oldValue: i
}), Kt(a);
}
r = !1, i = o;
}));
}, n.warnAboutUntrackedRead_ = function() {}, n.toString = function() {
return this.name_ + "[" + this.derivation.toString() + "]";
}, n.valueOf = function() {
return fe(this.get());
}, n[e] = function() {
return this.valueOf();
}, t;
}(Symbol.toPrimitive), Mt = se("ComputedValue", Ft);
!function(e) {
e[e.NOT_TRACKING_ = -1] = "NOT_TRACKING_", e[e.UP_TO_DATE_ = 0] = "UP_TO_DATE_", 
e[e.POSSIBLY_STALE_ = 1] = "POSSIBLY_STALE_", e[e.STALE_ = 2] = "STALE_";
}(Rt || (Rt = {})), function(e) {
e[e.NONE = 0] = "NONE", e[e.LOG = 1] = "LOG", e[e.BREAK = 2] = "BREAK";
}(xt || (xt = {}));
var Ut = function(e) {
this.cause = void 0, this.cause = e;
};
function Ht(e) {
return e instanceof Ut;
}
function Vt(e) {
switch (e.dependenciesState_) {
case Rt.UP_TO_DATE_:
return !1;

case Rt.NOT_TRACKING_:
case Rt.STALE_:
return !0;

case Rt.POSSIBLY_STALE_:
for (var t = Wt(!0), n = Yt(), r = e.observing_, i = r.length, o = 0; o < i; o++) {
var a = r[o];
if (Mt(a)) {
if (nn.disableErrorBoundaries) a.get(); else try {
a.get();
} catch (e) {
return Kt(n), Xt(t), !0;
}
if (e.dependenciesState_ === Rt.STALE_) return Kt(n), Xt(t), !0;
}
}
return Qt(e), Kt(n), Xt(t), !1;
}
}
function Jt() {
return null !== nn.trackingDerivation;
}
function Gt(e, t, n) {
var r = Wt(!0);
Qt(e), e.newObserving_ = new Array(e.observing_.length + 100), e.unboundDepsCount_ = 0, 
e.runId_ = ++nn.runId;
var i, o = nn.trackingDerivation;
if (nn.trackingDerivation = e, nn.inBatch++, !0 === nn.disableErrorBoundaries) i = t.call(n); else try {
i = t.call(n);
} catch (e) {
i = new Ut(e);
}
return nn.inBatch--, nn.trackingDerivation = o, zt(e), Xt(r), i;
}
function zt(e) {
for (var t = e.observing_, n = e.observing_ = e.newObserving_, r = Rt.UP_TO_DATE_, i = 0, o = e.unboundDepsCount_, a = 0; a < o; a++) {
var s = n[a];
0 === s.diffValue_ && (s.diffValue_ = 1, i !== a && (n[i] = s), i++), s.dependenciesState_ > r && (r = s.dependenciesState_);
}
for (n.length = i, e.newObserving_ = null, o = t.length; o--; ) {
var l = t[o];
0 === l.diffValue_ && ln(l, e), l.diffValue_ = 0;
}
for (;i--; ) {
var c = n[i];
1 === c.diffValue_ && (c.diffValue_ = 0, sn(c, e));
}
r !== Rt.UP_TO_DATE_ && (e.dependenciesState_ = r, e.onBecomeStale_());
}
function jt(e) {
var t = e.observing_;
e.observing_ = [];
for (var n = t.length; n--; ) ln(t[n], e);
e.dependenciesState_ = Rt.NOT_TRACKING_;
}
function qt(e) {
var t = Yt();
try {
return e();
} finally {
Kt(t);
}
}
function Yt() {
var e = nn.trackingDerivation;
return nn.trackingDerivation = null, e;
}
function Kt(e) {
nn.trackingDerivation = e;
}
function Wt(e) {
var t = nn.allowStateReads;
return nn.allowStateReads = e, t;
}
function Xt(e) {
nn.allowStateReads = e;
}
function Qt(e) {
if (e.dependenciesState_ !== Rt.UP_TO_DATE_) {
e.dependenciesState_ = Rt.UP_TO_DATE_;
for (var t = e.observing_, n = t.length; n--; ) t[n].lowestObserverState_ = Rt.UP_TO_DATE_;
}
}
var $t = [ "mobxGuid", "spyListeners", "enforceActions", "computedRequiresReaction", "reactionRequiresObservable", "observableRequiresReaction", "allowStateReads", "disableErrorBoundaries", "runId", "UNCHANGED" ], Zt = function() {
this.version = 6, this.UNCHANGED = {}, this.trackingDerivation = null, this.trackingContext = null, 
this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], 
this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !1, 
this.allowStateReads = !0, this.enforceActions = !0, this.spyListeners = [], this.globalReactionErrorHandlers = [], 
this.computedRequiresReaction = !1, this.reactionRequiresObservable = !1, this.observableRequiresReaction = !1, 
this.disableErrorBoundaries = !1, this.suppressReactionErrors = !1, this.safeDescriptors = !0;
}, en = !0, tn = !1, nn = function() {
var e = z();
return e.__mobxInstanceCount > 0 && !e.__mobxGlobals && (en = !1), e.__mobxGlobals && e.__mobxGlobals.version !== (new Zt).version && (en = !1), 
en ? e.__mobxGlobals ? (e.__mobxInstanceCount += 1, e.__mobxGlobals.UNCHANGED || (e.__mobxGlobals.UNCHANGED = {}), 
e.__mobxGlobals) : (e.__mobxInstanceCount = 1, e.__mobxGlobals = new Zt) : (setTimeout((function() {
tn || J(35);
}), 1), new Zt);
}();
function rn() {
if ((nn.pendingReactions.length || nn.inBatch || nn.isRunningReactions) && J(36), 
tn = !0, en) {
var e = z();
0 == --e.__mobxInstanceCount && (e.__mobxGlobals = void 0), nn = new Zt;
}
}
function on(e) {
return e.observers_ && e.observers_.size > 0;
}
function an(e) {
return e.observers_;
}
function sn(e, t) {
e.observers_.add(t), e.lowestObserverState_ > t.dependenciesState_ && (e.lowestObserverState_ = t.dependenciesState_);
}
function ln(e, t) {
e.observers_.delete(t), 0 === e.observers_.size && cn(e);
}
function cn(e) {
!1 === e.isPendingUnobservation_ && (e.isPendingUnobservation_ = !0, nn.pendingUnobservations.push(e));
}
function dn() {
nn.inBatch++;
}
function un() {
if (0 == --nn.inBatch) {
In();
for (var e = nn.pendingUnobservations, t = 0; t < e.length; t++) {
var n = e[t];
n.isPendingUnobservation_ = !1, 0 === n.observers_.size && (n.isBeingObserved_ && (n.isBeingObserved_ = !1, 
n.onBUO()), n instanceof Ft && n.suspend_());
}
nn.pendingUnobservations = [];
}
}
function pn(e) {
var t = nn.trackingDerivation;
return null !== t ? (t.runId_ !== e.lastAccessedBy_ && (e.lastAccessedBy_ = t.runId_, 
t.newObserving_[t.unboundDepsCount_++] = e, !e.isBeingObserved_ && nn.trackingContext && (e.isBeingObserved_ = !0, 
e.onBO())), !0) : (0 === e.observers_.size && nn.inBatch > 0 && cn(e), !1);
}
function fn(e) {
e.lowestObserverState_ !== Rt.STALE_ && (e.lowestObserverState_ = Rt.STALE_, e.observers_.forEach((function(e) {
e.dependenciesState_ === Rt.UP_TO_DATE_ && e.onBecomeStale_(), e.dependenciesState_ = Rt.STALE_;
})));
}
function hn(e) {
e.lowestObserverState_ !== Rt.STALE_ && (e.lowestObserverState_ = Rt.STALE_, e.observers_.forEach((function(t) {
t.dependenciesState_ === Rt.POSSIBLY_STALE_ ? t.dependenciesState_ = Rt.STALE_ : t.dependenciesState_ === Rt.UP_TO_DATE_ && (e.lowestObserverState_ = Rt.UP_TO_DATE_);
})));
}
function mn(e) {
e.lowestObserverState_ === Rt.UP_TO_DATE_ && (e.lowestObserverState_ = Rt.POSSIBLY_STALE_, 
e.observers_.forEach((function(e) {
e.dependenciesState_ === Rt.UP_TO_DATE_ && (e.dependenciesState_ = Rt.POSSIBLY_STALE_, 
e.onBecomeStale_());
})));
}
var gn = function() {
function e(e, t, n, r) {
void 0 === e && (e = "Reaction"), this.name_ = void 0, this.onInvalidate_ = void 0, 
this.errorHandler_ = void 0, this.requiresObservable_ = void 0, this.observing_ = [], 
this.newObserving_ = [], this.dependenciesState_ = Rt.NOT_TRACKING_, this.diffValue_ = 0, 
this.runId_ = 0, this.unboundDepsCount_ = 0, this.isDisposed_ = !1, this.isScheduled_ = !1, 
this.isTrackPending_ = !1, this.isRunning_ = !1, this.isTracing_ = xt.NONE, this.name_ = e, 
this.onInvalidate_ = t, this.errorHandler_ = n, this.requiresObservable_ = r;
}
var t = e.prototype;
return t.onBecomeStale_ = function() {
this.schedule_();
}, t.schedule_ = function() {
this.isScheduled_ || (this.isScheduled_ = !0, nn.pendingReactions.push(this), In());
}, t.isScheduled = function() {
return this.isScheduled_;
}, t.runReaction_ = function() {
if (!this.isDisposed_) {
dn(), this.isScheduled_ = !1;
var e = nn.trackingContext;
if (nn.trackingContext = this, Vt(this)) {
this.isTrackPending_ = !0;
try {
this.onInvalidate_();
} catch (e) {
this.reportExceptionInDerivation_(e);
}
}
nn.trackingContext = e, un();
}
}, t.track = function(e) {
if (!this.isDisposed_) {
dn(), this.isRunning_ = !0;
var t = nn.trackingContext;
nn.trackingContext = this;
var n = Gt(this, e, void 0);
nn.trackingContext = t, this.isRunning_ = !1, this.isTrackPending_ = !1, this.isDisposed_ && jt(this), 
Ht(n) && this.reportExceptionInDerivation_(n.cause), un();
}
}, t.reportExceptionInDerivation_ = function(e) {
var t = this;
if (this.errorHandler_) this.errorHandler_(e, this); else {
if (nn.disableErrorBoundaries) throw e;
var n = "[mobx] uncaught error in '" + this + "'";
nn.suppressReactionErrors || console.error(n, e), nn.globalReactionErrorHandlers.forEach((function(n) {
return n(e, t);
}));
}
}, t.dispose = function() {
this.isDisposed_ || (this.isDisposed_ = !0, this.isRunning_ || (dn(), jt(this), 
un()));
}, t.getDisposer_ = function() {
var e = this.dispose.bind(this);
return e[Ce] = this, e;
}, t.toString = function() {
return "Reaction[" + this.name_ + "]";
}, t.trace = function(e) {
void 0 === e && (e = !1), pr(this, e);
}, e;
}();
var yn = function(e) {
return e();
};
function In() {
nn.inBatch > 0 || nn.isRunningReactions || yn(_n);
}
function _n() {
nn.isRunningReactions = !0;
for (var e = nn.pendingReactions, t = 0; e.length > 0; ) {
100 == ++t && (console.error("[mobx] cycle in reaction: " + e[0]), e.splice(0));
for (var n = e.splice(0), r = 0, i = n.length; r < i; r++) n[r].runReaction_();
}
nn.isRunningReactions = !1;
}
var bn = se("Reaction", gn);
function Sn(e) {
return console.warn("[mobx.spy] Is a no-op in production builds"), function() {};
}
var vn = "action", Tn = "autoAction", En = "<unnamed action>", Pn = Fe(vn), On = Fe("action.bound", {
bound: !0
}), Cn = Fe(Tn, {
autoAction: !0
}), Nn = Fe("autoAction.bound", {
autoAction: !0,
bound: !0
});
function An(e) {
return function(t, n) {
return te(t) ? Ot(t.name || En, t, e) : te(n) ? Ot(t, n, e) : ne(n) ? Pe(t, n, e ? Cn : Pn) : ne(t) ? Ee(Fe(e ? Tn : vn, {
name: t,
autoAction: e
})) : void 0;
};
}
var Ln = An(!1);
Object.assign(Ln, Pn);
var wn = An(!0);
function kn(e) {
return Ct(e.name || En, !1, e, this, void 0);
}
function Rn(e) {
return te(e) && !0 === e.isMobxAction;
}
function xn(e, t) {
var n, r;
void 0 === t && (t = X);
var i, o = null != (n = null == (r = t) ? void 0 : r.name) ? n : "Autorun";
if (!t.scheduler && !t.delay) i = new gn(o, (function() {
this.track(l);
}), t.onError, t.requiresObservable); else {
var a = Dn(t), s = !1;
i = new gn(o, (function() {
s || (s = !0, a((function() {
s = !1, i.isDisposed_ || i.track(l);
})));
}), t.onError, t.requiresObservable);
}
function l() {
e(i);
}
return i.schedule_(), i.getDisposer_();
}
Object.assign(wn, Cn), Ln.bound = Ee(On), wn.bound = Ee(Nn);
var Bn = function(e) {
return e();
};
function Dn(e) {
return e.scheduler ? e.scheduler : e.delay ? function(t) {
return setTimeout(t, e.delay);
} : Bn;
}
function Fn(e, t, n) {
var r;
void 0 === n && (n = X);
var i, o, a, s, l = null != (r = n.name) ? r : "Reaction", c = Ln(l, n.onError ? (i = n.onError, 
o = t, function() {
try {
return o.apply(this, arguments);
} catch (e) {
i.call(this, e);
}
}) : t), d = !n.scheduler && !n.delay, u = Dn(n), p = !0, f = !1, h = n.compareStructural ? we.structural : n.equals || we.default, m = new gn(l, (function() {
p || d ? g() : f || (f = !0, u(g));
}), n.onError, n.requiresObservable);
function g() {
if (f = !1, !m.isDisposed_) {
var t = !1;
m.track((function() {
var n = Lt(!1, (function() {
return e(m);
}));
t = p || !h(a, n), s = a, a = n;
})), (p && n.fireImmediately || !p && t) && c(a, s, m), p = !1;
}
}
return m.schedule_(), m.getDisposer_();
}
function Mn(e, t, n) {
return Hn("onBO", e, t, n);
}
function Un(e, t, n) {
return Hn("onBUO", e, t, n);
}
function Hn(e, t, n, r) {
var i = "function" == typeof r ? ii(t, n) : ii(t), o = te(r) ? r : n, a = e + "L";
return i[a] ? i[a].add(o) : i[a] = new Set([ o ]), function() {
var e = i[a];
e && (e.delete(o), 0 === e.size && delete i[a]);
};
}
var Vn = "always";
function Jn(e, t, n, r) {
var i = me(t), o = Zr(e, r)[Ce];
dn();
try {
pe(i).forEach((function(e) {
o.extend_(e, i[e], !n || (!(e in n) || n[e]));
}));
} finally {
un();
}
return e;
}
function Gn(e) {
var t, n = {
name: e.name_
};
return e.observing_ && e.observing_.length > 0 && (n.dependencies = (t = e.observing_, 
Array.from(new Set(t))).map(Gn)), n;
}
function zn(e) {
var t = {
name: e.name_
};
return on(e) && (t.observers = Array.from(an(e)).map(zn)), t;
}
var jn = 0;
function qn() {
this.message = "FLOW_CANCELLED";
}
qn.prototype = Object.create(Error.prototype);
var Yn = Ve("flow"), Kn = Ve("flow.bound", {
bound: !0
}), Wn = Object.assign((function(e, t) {
if (ne(t)) return Pe(e, t, Yn);
var n = e, r = n.name || "<unnamed flow>", i = function() {
var e, t = this, i = arguments, o = ++jn, a = Ln(r + " - runid: " + o + " - init", n).apply(t, i), s = void 0, l = new Promise((function(t, n) {
var i = 0;
function l(e) {
var t;
s = void 0;
try {
t = Ln(r + " - runid: " + o + " - yield " + i++, a.next).call(a, e);
} catch (e) {
return n(e);
}
d(t);
}
function c(e) {
var t;
s = void 0;
try {
t = Ln(r + " - runid: " + o + " - yield " + i++, a.throw).call(a, e);
} catch (e) {
return n(e);
}
d(t);
}
function d(e) {
if (!te(null == e ? void 0 : e.then)) return e.done ? t(e.value) : (s = Promise.resolve(e.value)).then(l, c);
e.then(d, n);
}
e = n, l(void 0);
}));
return l.cancel = Ln(r + " - runid: " + o + " - cancel", (function() {
try {
s && Xn(s);
var t = a.return(void 0), n = Promise.resolve(t.value);
n.then(ee, ee), Xn(n), e(new qn);
} catch (t) {
e(t);
}
})), l;
};
return i.isMobXFlow = !0, i;
}), Yn);
function Xn(e) {
te(e.cancel) && e.cancel();
}
function Qn(e) {
return !0 === (null == e ? void 0 : e.isMobXFlow);
}
function $n(e, t) {
return oi(e).intercept_(t);
}
function Zn(e, t, n) {
return oi(e, t).intercept_(n);
}
function er(e, t) {
if (void 0 === t) return Mt(e);
if (!1 === ni(e)) return !1;
if (!e[Ce].values_.has(t)) return !1;
var n = ii(e, t);
return Mt(n);
}
function tr(e, t) {
return !!e && (void 0 !== t ? !!ni(e) && e[Ce].values_.has(t) : ni(e) || !!e[Ce] || Ae(e) || bn(e) || Mt(e));
}
function nr(e) {
return tr(e);
}
function rr(e) {
return ni(e) ? e[Ce].keys_() : jr(e) || Wr(e) ? Array.from(e.keys()) : Hr(e) ? e.map((function(e, t) {
return t;
})) : void J(5);
}
function ir(e, t) {
return ni(e) ? e[Ce].has_(t) : jr(e) || Wr(e) ? e.has(t) : Hr(e) ? t >= 0 && t < e.length : void J(10);
}
function or(e) {
if (ni(e)) return e[Ce].ownKeys_();
J(38);
}
function ar(e, t, n, r) {
return te(n) ? lr(e, t, n, r) : sr(e, t, n);
}
function sr(e, t, n) {
return oi(e).observe_(t, n);
}
function lr(e, t, n, r) {
return oi(e, t).observe_(n, r);
}
function cr(e, t, n) {
return e.set(t, n), n;
}
function dr(e, t) {
if (null == e || "object" != typeof e || e instanceof Date || !nr(e)) return e;
if (Dt(e) || Mt(e)) return dr(e.get(), t);
if (t.has(e)) return t.get(e);
if (Hr(e)) {
var n = cr(t, e, new Array(e.length));
return e.forEach((function(e, r) {
n[r] = dr(e, t);
})), n;
}
if (Wr(e)) {
var r = cr(t, e, new Set);
return e.forEach((function(e) {
r.add(dr(e, t));
})), r;
}
if (jr(e)) {
var i = cr(t, e, new Map);
return e.forEach((function(e, n) {
i.set(n, dr(e, t));
})), i;
}
var o = cr(t, e, {});
return or(e).forEach((function(n) {
K.propertyIsEnumerable.call(e, n) && (o[n] = dr(e[n], t));
})), o;
}
function ur(e, t) {
return dr(e, new Map);
}
function pr() {
J("trace() is not available in production builds");
for (var e = !1, t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];
"boolean" == typeof n[n.length - 1] && (e = n.pop());
var i = fr(n);
if (!i) return J("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");
i.isTracing_ === xt.NONE && console.log("[mobx.trace] '" + i.name_ + "' tracing enabled"), 
i.isTracing_ = e ? xt.BREAK : xt.LOG;
}
function fr(e) {
switch (e.length) {
case 0:
return nn.trackingDerivation;

case 1:
return ii(e[0]);

case 2:
return ii(e[0], e[1]);
}
}
function hr(e, t) {
void 0 === t && (t = void 0), dn();
try {
return e.apply(t);
} finally {
un();
}
}
function mr(e, t, n) {
return 1 === arguments.length || t && "object" == typeof t ? yr(e, t) : gr(e, t, n || {});
}
function gr(e, t, n) {
var r;
if ("number" == typeof n.timeout) {
var i = new Error("WHEN_TIMEOUT");
r = setTimeout((function() {
if (!a[Ce].isDisposed_) {
if (a(), !n.onError) throw i;
n.onError(i);
}
}), n.timeout);
}
n.name = "When";
var o = Ot("When-effect", t), a = xn((function(t) {
Lt(!1, e) && (t.dispose(), r && clearTimeout(r), o());
}), n);
return a;
}
function yr(e, t) {
var n, r = new Promise((function(r, i) {
var o = gr(e, r, Ie({}, t, {
onError: i
}));
n = function() {
o(), i(new Error("WHEN_CANCELLED"));
};
}));
return r.cancel = n, r;
}
function Ir(e) {
return e[Ce];
}
Wn.bound = Ee(Kn);
var _r = {
has: function(e, t) {
return Ir(e).has_(t);
},
get: function(e, t) {
return Ir(e).get_(t);
},
set: function(e, t, n) {
var r;
return !!ne(t) && (null == (r = Ir(e).set_(t, n, !0)) || r);
},
deleteProperty: function(e, t) {
var n;
return !!ne(t) && (null == (n = Ir(e).delete_(t, !0)) || n);
},
defineProperty: function(e, t, n) {
var r;
return null == (r = Ir(e).defineProperty_(t, n)) || r;
},
ownKeys: function(e) {
return Ir(e).ownKeys_();
},
preventExtensions: function(e) {
J(13);
}
};
function br(e, t) {
var n, r;
return null != (r = (n = (e = Zr(e, t))[Ce]).proxy_) ? r : n.proxy_ = new Proxy(e, _r);
}
function Sr(e) {
return void 0 !== e.interceptors_ && e.interceptors_.length > 0;
}
function vr(e, t) {
var n = e.interceptors_ || (e.interceptors_ = []);
return n.push(t), Z((function() {
var e = n.indexOf(t);
-1 !== e && n.splice(e, 1);
}));
}
function Tr(e, t) {
var n = Yt();
try {
for (var r = [].concat(e.interceptors_ || []), i = 0, o = r.length; i < o && ((t = r[i](t)) && !t.type && J(14), 
t); i++) ;
return t;
} finally {
Kt(n);
}
}
function Er(e) {
return void 0 !== e.changeListeners_ && e.changeListeners_.length > 0;
}
function Pr(e, t) {
var n = e.changeListeners_ || (e.changeListeners_ = []);
return n.push(t), Z((function() {
var e = n.indexOf(t);
-1 !== e && n.splice(e, 1);
}));
}
function Or(e, t) {
var n = Yt(), r = e.changeListeners_;
if (r) {
for (var i = 0, o = (r = r.slice()).length; i < o; i++) r[i](t);
Kt(n);
}
}
function Cr(e, t, n) {
var r = Zr(e, n)[Ce];
dn();
try {
0, null != t || (t = Oe(e)), pe(t).forEach((function(e) {
return r.make_(e, t[e]);
}));
} finally {
un();
}
return e;
}
var Nr = Symbol("mobx-keys");
var Ar = "splice", Lr = "update", wr = {
get: function(e, t) {
var n = e[Ce];
return t === Ce ? n : "length" === t ? n.getArrayLength_() : "string" != typeof t || isNaN(t) ? he(xr, t) ? xr[t] : e[t] : n.get_(parseInt(t));
},
set: function(e, t, n) {
var r = e[Ce];
return "length" === t && r.setArrayLength_(n), "symbol" == typeof t || isNaN(t) ? e[t] = n : r.set_(parseInt(t), n), 
!0;
},
preventExtensions: function() {
J(15);
}
}, kr = function() {
function e(e, t, n) {
void 0 === e && (e = "ObservableArray"), this.owned_ = void 0, this.atom_ = void 0, 
this.values_ = [], this.interceptors_ = void 0, this.changeListeners_ = void 0, 
this.enhancer_ = void 0, this.dehancer = void 0, this.proxy_ = void 0, this.lastKnownLength_ = 0, 
this.owned_ = n, this.atom_ = new Ne(e), this.enhancer_ = function(e, n) {
return t(e, n, "ObservableArray[..]");
};
}
var t = e.prototype;
return t.dehanceValue_ = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, t.dehanceValues_ = function(e) {
return void 0 !== this.dehancer && e.length > 0 ? e.map(this.dehancer) : e;
}, t.intercept_ = function(e) {
return vr(this, e);
}, t.observe_ = function(e, t) {
return void 0 === t && (t = !1), t && e({
observableKind: "array",
object: this.proxy_,
debugObjectName: this.atom_.name_,
type: "splice",
index: 0,
added: this.values_.slice(),
addedCount: this.values_.length,
removed: [],
removedCount: 0
}), Pr(this, e);
}, t.getArrayLength_ = function() {
return this.atom_.reportObserved(), this.values_.length;
}, t.setArrayLength_ = function(e) {
("number" != typeof e || isNaN(e) || e < 0) && J("Out of range: " + e);
var t = this.values_.length;
if (e !== t) if (e > t) {
for (var n = new Array(e - t), r = 0; r < e - t; r++) n[r] = void 0;
this.spliceWithArray_(t, 0, n);
} else this.spliceWithArray_(e, t - e);
}, t.updateArrayLength_ = function(e, t) {
e !== this.lastKnownLength_ && J(16), this.lastKnownLength_ += t;
}, t.spliceWithArray_ = function(e, t, n) {
var r = this;
this.atom_;
var i = this.values_.length;
if (void 0 === e ? e = 0 : e > i ? e = i : e < 0 && (e = Math.max(0, i + e)), t = 1 === arguments.length ? i - e : null == t ? 0 : Math.max(0, Math.min(t, i - e)), 
void 0 === n && (n = W), Sr(this)) {
var o = Tr(this, {
object: this.proxy_,
type: Ar,
index: e,
removedCount: t,
added: n
});
if (!o) return W;
t = o.removedCount, n = o.added;
}
n = 0 === n.length ? n : n.map((function(e) {
return r.enhancer_(e, void 0);
}));
var a = this.spliceItemsIntoValues_(e, t, n);
return 0 === t && 0 === n.length || this.notifyArraySplice_(e, n, a), this.dehanceValues_(a);
}, t.spliceItemsIntoValues_ = function(e, t, n) {
var r;
if (n.length < 1e4) return (r = this.values_).splice.apply(r, [ e, t ].concat(n));
var i = this.values_.slice(e, e + t), o = this.values_.slice(e + t);
this.values_.length += n.length - t;
for (var a = 0; a < n.length; a++) this.values_[e + a] = n[a];
for (var s = 0; s < o.length; s++) this.values_[e + n.length + s] = o[s];
return i;
}, t.notifyArrayChildUpdate_ = function(e, t, n) {
var r = !this.owned_ && !1, i = Er(this), o = i || r ? {
observableKind: "array",
object: this.proxy_,
type: Lr,
debugObjectName: this.atom_.name_,
index: e,
newValue: t,
oldValue: n
} : null;
this.atom_.reportChanged(), i && Or(this, o);
}, t.notifyArraySplice_ = function(e, t, n) {
var r = !this.owned_ && !1, i = Er(this), o = i || r ? {
observableKind: "array",
object: this.proxy_,
debugObjectName: this.atom_.name_,
type: Ar,
index: e,
removed: n,
added: t,
removedCount: n.length,
addedCount: t.length
} : null;
this.atom_.reportChanged(), i && Or(this, o);
}, t.get_ = function(e) {
if (e < this.values_.length) return this.atom_.reportObserved(), this.dehanceValue_(this.values_[e]);
console.warn("[mobx.array] Attempt to read an array index (" + e + ") that is out of bounds (" + this.values_.length + "). Please check length first. Out of bound indices will not be tracked by MobX");
}, t.set_ = function(e, t) {
var n = this.values_;
if (e < n.length) {
this.atom_;
var r = n[e];
if (Sr(this)) {
var i = Tr(this, {
type: Lr,
object: this.proxy_,
index: e,
newValue: t
});
if (!i) return;
t = i.newValue;
}
(t = this.enhancer_(t, r)) !== r && (n[e] = t, this.notifyArrayChildUpdate_(e, t, r));
} else e === n.length ? this.spliceWithArray_(e, 0, [ t ]) : J(17, e, n.length);
}, e;
}();
function Rr(e, t, n, r) {
void 0 === n && (n = "ObservableArray"), void 0 === r && (r = !1);
var i, o = new kr(n, t, r);
i = o.values_, Y(i, Ce, {
enumerable: !1,
writable: !1,
configurable: !0,
value: o
});
var a = new Proxy(o.values_, wr);
if (o.proxy_ = a, e && e.length) {
var s = wt(!0);
o.spliceWithArray_(0, 0, e), kt(s);
}
return a;
}
var xr = {
clear: function() {
return this.splice(0);
},
replace: function(e) {
var t = this[Ce];
return t.spliceWithArray_(0, t.values_.length, e);
},
toJSON: function() {
return this.slice();
},
splice: function(e, t) {
for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), i = 2; i < n; i++) r[i - 2] = arguments[i];
var o = this[Ce];
switch (arguments.length) {
case 0:
return [];

case 1:
return o.spliceWithArray_(e);

case 2:
return o.spliceWithArray_(e, t);
}
return o.spliceWithArray_(e, t, r);
},
spliceWithArray: function(e, t, n) {
return this[Ce].spliceWithArray_(e, t, n);
},
push: function() {
for (var e = this[Ce], t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];
return e.spliceWithArray_(e.values_.length, 0, n), e.values_.length;
},
pop: function() {
return this.splice(Math.max(this[Ce].values_.length - 1, 0), 1)[0];
},
shift: function() {
return this.splice(0, 1)[0];
},
unshift: function() {
for (var e = this[Ce], t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];
return e.spliceWithArray_(0, 0, n), e.values_.length;
},
reverse: function() {
return nn.trackingDerivation && J(37, "reverse"), this.replace(this.slice().reverse()), 
this;
},
sort: function() {
nn.trackingDerivation && J(37, "sort");
var e = this.slice();
return e.sort.apply(e, arguments), this.replace(e), this;
},
remove: function(e) {
var t = this[Ce], n = t.dehanceValues_(t.values_).indexOf(e);
return n > -1 && (this.splice(n, 1), !0);
}
};
function Br(e, t) {
"function" == typeof Array.prototype[e] && (xr[e] = t(e));
}
function Dr(e) {
return function() {
var t = this[Ce];
t.atom_.reportObserved();
var n = t.dehanceValues_(t.values_);
return n[e].apply(n, arguments);
};
}
function Fr(e) {
return function(t, n) {
var r = this, i = this[Ce];
return i.atom_.reportObserved(), i.dehanceValues_(i.values_)[e]((function(e, i) {
return t.call(n, e, i, r);
}));
};
}
function Mr(e) {
return function() {
var t = this, n = this[Ce];
n.atom_.reportObserved();
var r = n.dehanceValues_(n.values_), i = arguments[0];
return arguments[0] = function(e, n, r) {
return i(e, n, r, t);
}, r[e].apply(r, arguments);
};
}
Br("concat", Dr), Br("flat", Dr), Br("includes", Dr), Br("indexOf", Dr), Br("join", Dr), 
Br("lastIndexOf", Dr), Br("slice", Dr), Br("toString", Dr), Br("toLocaleString", Dr), 
Br("every", Fr), Br("filter", Fr), Br("find", Fr), Br("findIndex", Fr), Br("flatMap", Fr), 
Br("forEach", Fr), Br("map", Fr), Br("some", Fr), Br("reduce", Mr), Br("reduceRight", Mr);
var Ur = se("ObservableArrayAdministration", kr);
function Hr(e) {
return re(e) && Ur(e[Ce]);
}
var Vr = {}, Jr = "add", Gr = "delete", zr = function(e, t) {
function n(e, t, n) {
var r = this;
void 0 === t && (t = ke), void 0 === n && (n = "ObservableMap"), this.enhancer_ = void 0, 
this.name_ = void 0, this[Ce] = Vr, this.data_ = void 0, this.hasMap_ = void 0, 
this.keysAtom_ = void 0, this.interceptors_ = void 0, this.changeListeners_ = void 0, 
this.dehancer = void 0, this.enhancer_ = t, this.name_ = n, te(Map) || J(18), this.keysAtom_ = Le("ObservableMap.keys()"), 
this.data_ = new Map, this.hasMap_ = new Map, Lt(!0, (function() {
r.merge(e);
}));
}
var r = n.prototype;
return r.has_ = function(e) {
return this.data_.has(e);
}, r.has = function(e) {
var t = this;
if (!nn.trackingDerivation) return this.has_(e);
var n = this.hasMap_.get(e);
if (!n) {
var r = n = new Bt(this.has_(e), Re, "ObservableMap.key?", !1);
this.hasMap_.set(e, r), Un(r, (function() {
return t.hasMap_.delete(e);
}));
}
return n.get();
}, r.set = function(e, t) {
var n = this.has_(e);
if (Sr(this)) {
var r = Tr(this, {
type: n ? Lr : Jr,
object: this,
newValue: t,
name: e
});
if (!r) return this;
t = r.newValue;
}
return n ? this.updateValue_(e, t) : this.addValue_(e, t), this;
}, r.delete = function(e) {
var t = this;
if ((this.keysAtom_, Sr(this)) && !Tr(this, {
type: Gr,
object: this,
name: e
})) return !1;
if (this.has_(e)) {
var n = Er(this), r = n ? {
observableKind: "map",
debugObjectName: this.name_,
type: Gr,
object: this,
oldValue: this.data_.get(e).value_,
name: e
} : null;
return hr((function() {
var n;
t.keysAtom_.reportChanged(), null == (n = t.hasMap_.get(e)) || n.setNewValue_(!1), 
t.data_.get(e).setNewValue_(void 0), t.data_.delete(e);
})), n && Or(this, r), !0;
}
return !1;
}, r.updateValue_ = function(e, t) {
var n = this.data_.get(e);
if ((t = n.prepareNewValue_(t)) !== nn.UNCHANGED) {
var r = Er(this), i = r ? {
observableKind: "map",
debugObjectName: this.name_,
type: Lr,
object: this,
oldValue: n.value_,
name: e,
newValue: t
} : null;
n.setNewValue_(t), r && Or(this, i);
}
}, r.addValue_ = function(e, t) {
var n = this;
this.keysAtom_, hr((function() {
var r, i = new Bt(t, n.enhancer_, "ObservableMap.key", !1);
n.data_.set(e, i), t = i.value_, null == (r = n.hasMap_.get(e)) || r.setNewValue_(!0), 
n.keysAtom_.reportChanged();
}));
var r = Er(this), i = r ? {
observableKind: "map",
debugObjectName: this.name_,
type: Jr,
object: this,
name: e,
newValue: t
} : null;
r && Or(this, i);
}, r.get = function(e) {
return this.has(e) ? this.dehanceValue_(this.data_.get(e).get()) : this.dehanceValue_(void 0);
}, r.dehanceValue_ = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, r.keys = function() {
return this.keysAtom_.reportObserved(), this.data_.keys();
}, r.values = function() {
var e = this, t = this.keys();
return ui({
next: function() {
var n = t.next(), r = n.done, i = n.value;
return {
done: r,
value: r ? void 0 : e.get(i)
};
}
});
}, r.entries = function() {
var e = this, t = this.keys();
return ui({
next: function() {
var n = t.next(), r = n.done, i = n.value;
return {
done: r,
value: r ? void 0 : [ i, e.get(i) ]
};
}
});
}, r[e] = function() {
return this.entries();
}, r.forEach = function(e, t) {
for (var n, r = ve(this); !(n = r()).done; ) {
var i = n.value, o = i[0], a = i[1];
e.call(t, a, o, this);
}
}, r.merge = function(e) {
var t = this;
return jr(e) && (e = new Map(e)), hr((function() {
ie(e) ? ue(e).forEach((function(n) {
return t.set(n, e[n]);
})) : Array.isArray(e) ? e.forEach((function(e) {
var n = e[0], r = e[1];
return t.set(n, r);
})) : le(e) ? (e.constructor !== Map && J(19, e), e.forEach((function(e, n) {
return t.set(n, e);
}))) : null != e && J(20, e);
})), this;
}, r.clear = function() {
var e = this;
hr((function() {
qt((function() {
for (var t, n = ve(e.keys()); !(t = n()).done; ) {
var r = t.value;
e.delete(r);
}
}));
}));
}, r.replace = function(e) {
var t = this;
return hr((function() {
for (var n, r = qr(e), i = new Map, o = !1, a = ve(t.data_.keys()); !(n = a()).done; ) {
var s = n.value;
if (!r.has(s)) if (t.delete(s)) o = !0; else {
var l = t.data_.get(s);
i.set(s, l);
}
}
for (var c, d = ve(r.entries()); !(c = d()).done; ) {
var u = c.value, p = u[0], f = u[1], h = t.data_.has(p);
if (t.set(p, f), t.data_.has(p)) {
var m = t.data_.get(p);
i.set(p, m), h || (o = !0);
}
}
if (!o) if (t.data_.size !== i.size) t.keysAtom_.reportChanged(); else for (var g = t.data_.keys(), y = i.keys(), I = g.next(), _ = y.next(); !I.done; ) {
if (I.value !== _.value) {
t.keysAtom_.reportChanged();
break;
}
I = g.next(), _ = y.next();
}
t.data_ = i;
})), this;
}, r.toString = function() {
return "[object ObservableMap]";
}, r.toJSON = function() {
return Array.from(this);
}, r.observe_ = function(e, t) {
return Pr(this, e);
}, r.intercept_ = function(e) {
return vr(this, e);
}, ye(n, [ {
key: "size",
get: function() {
return this.keysAtom_.reportObserved(), this.data_.size;
}
}, {
key: t,
get: function() {
return "Map";
}
} ]), n;
}(Symbol.iterator, Symbol.toStringTag), jr = se("ObservableMap", zr);
function qr(e) {
if (le(e) || jr(e)) return e;
if (Array.isArray(e)) return new Map(e);
if (ie(e)) {
var t = new Map;
for (var n in e) t.set(n, e[n]);
return t;
}
return J(21, e);
}
var Yr = {}, Kr = function(e, t) {
function n(e, t, n) {
void 0 === t && (t = ke), void 0 === n && (n = "ObservableSet"), this.name_ = void 0, 
this[Ce] = Yr, this.data_ = new Set, this.atom_ = void 0, this.changeListeners_ = void 0, 
this.interceptors_ = void 0, this.dehancer = void 0, this.enhancer_ = void 0, this.name_ = n, 
te(Set) || J(22), this.atom_ = Le(this.name_), this.enhancer_ = function(e, r) {
return t(e, r, n);
}, e && this.replace(e);
}
var r = n.prototype;
return r.dehanceValue_ = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, r.clear = function() {
var e = this;
hr((function() {
qt((function() {
for (var t, n = ve(e.data_.values()); !(t = n()).done; ) {
var r = t.value;
e.delete(r);
}
}));
}));
}, r.forEach = function(e, t) {
for (var n, r = ve(this); !(n = r()).done; ) {
var i = n.value;
e.call(t, i, i, this);
}
}, r.add = function(e) {
var t = this;
if ((this.atom_, Sr(this)) && !Tr(this, {
type: Jr,
object: this,
newValue: e
})) return this;
if (!this.has(e)) {
hr((function() {
t.data_.add(t.enhancer_(e, void 0)), t.atom_.reportChanged();
}));
var n = Er(this), r = n ? {
observableKind: "set",
debugObjectName: this.name_,
type: Jr,
object: this,
newValue: e
} : null;
n && Or(this, r);
}
return this;
}, r.delete = function(e) {
var t = this;
if (Sr(this) && !Tr(this, {
type: Gr,
object: this,
oldValue: e
})) return !1;
if (this.has(e)) {
var n = Er(this), r = n ? {
observableKind: "set",
debugObjectName: this.name_,
type: Gr,
object: this,
oldValue: e
} : null;
return hr((function() {
t.atom_.reportChanged(), t.data_.delete(e);
})), n && Or(this, r), !0;
}
return !1;
}, r.has = function(e) {
return this.atom_.reportObserved(), this.data_.has(this.dehanceValue_(e));
}, r.entries = function() {
var e = 0, t = Array.from(this.keys()), n = Array.from(this.values());
return ui({
next: function() {
var r = e;
return e += 1, r < n.length ? {
value: [ t[r], n[r] ],
done: !1
} : {
done: !0
};
}
});
}, r.keys = function() {
return this.values();
}, r.values = function() {
this.atom_.reportObserved();
var e = this, t = 0, n = Array.from(this.data_.values());
return ui({
next: function() {
return t < n.length ? {
value: e.dehanceValue_(n[t++]),
done: !1
} : {
done: !0
};
}
});
}, r.replace = function(e) {
var t = this;
return Wr(e) && (e = new Set(e)), hr((function() {
Array.isArray(e) || ce(e) ? (t.clear(), e.forEach((function(e) {
return t.add(e);
}))) : null != e && J("Cannot initialize set from " + e);
})), this;
}, r.observe_ = function(e, t) {
return Pr(this, e);
}, r.intercept_ = function(e) {
return vr(this, e);
}, r.toJSON = function() {
return Array.from(this);
}, r.toString = function() {
return "[object ObservableSet]";
}, r[e] = function() {
return this.values();
}, ye(n, [ {
key: "size",
get: function() {
return this.atom_.reportObserved(), this.data_.size;
}
}, {
key: t,
get: function() {
return "Set";
}
} ]), n;
}(Symbol.iterator, Symbol.toStringTag), Wr = se("ObservableSet", Kr), Xr = Object.create(null), Qr = "remove", $r = function() {
function e(e, t, n, r) {
void 0 === t && (t = new Map), void 0 === r && (r = Ze), this.target_ = void 0, 
this.values_ = void 0, this.name_ = void 0, this.defaultAnnotation_ = void 0, this.keysAtom_ = void 0, 
this.changeListeners_ = void 0, this.interceptors_ = void 0, this.proxy_ = void 0, 
this.isPlainObject_ = void 0, this.appliedAnnotations_ = void 0, this.pendingKeys_ = void 0, 
this.target_ = e, this.values_ = t, this.name_ = n, this.defaultAnnotation_ = r, 
this.keysAtom_ = new Ne("ObservableObject.keys"), this.isPlainObject_ = ie(this.target_);
}
var t = e.prototype;
return t.getObservablePropValue_ = function(e) {
return this.values_.get(e).get();
}, t.setObservablePropValue_ = function(e, t) {
var n = this.values_.get(e);
if (n instanceof Ft) return n.set(t), !0;
if (Sr(this)) {
var r = Tr(this, {
type: Lr,
object: this.proxy_ || this.target_,
name: e,
newValue: t
});
if (!r) return null;
t = r.newValue;
}
if ((t = n.prepareNewValue_(t)) !== nn.UNCHANGED) {
var i = Er(this), o = i ? {
type: Lr,
observableKind: "object",
debugObjectName: this.name_,
object: this.proxy_ || this.target_,
oldValue: n.value_,
name: e,
newValue: t
} : null;
n.setNewValue_(t), i && Or(this, o);
}
return !0;
}, t.get_ = function(e) {
return nn.trackingDerivation && !he(this.target_, e) && this.has_(e), this.target_[e];
}, t.set_ = function(e, t, n) {
return void 0 === n && (n = !1), he(this.target_, e) ? this.values_.has(e) ? this.setObservablePropValue_(e, t) : n ? Reflect.set(this.target_, e, t) : (this.target_[e] = t, 
!0) : this.extend_(e, {
value: t,
enumerable: !0,
writable: !0,
configurable: !0
}, this.defaultAnnotation_, n);
}, t.has_ = function(e) {
if (!nn.trackingDerivation) return e in this.target_;
this.pendingKeys_ || (this.pendingKeys_ = new Map);
var t = this.pendingKeys_.get(e);
return t || (t = new Bt(e in this.target_, Re, "ObservableObject.key?", !1), this.pendingKeys_.set(e, t)), 
t.get();
}, t.make_ = function(e, t) {
if (!0 === t && (t = this.defaultAnnotation_), !1 !== t) {
if (!(e in this.target_)) {
var n;
if (null != (n = this.target_[Te]) && n[e]) return;
J(1, t.annotationType_, this.name_ + "." + e.toString());
}
for (var r = this.target_; r && r !== K; ) {
var i = q(r, e);
if (i) {
var o = t.make_(this, e, i, r);
if (0 === o) return;
if (1 === o) break;
}
r = Object.getPrototypeOf(r);
}
ri(this, t, e);
}
}, t.extend_ = function(e, t, n, r) {
if (void 0 === r && (r = !1), !0 === n && (n = this.defaultAnnotation_), !1 === n) return this.defineProperty_(e, t, r);
var i = n.extend_(this, e, t, r);
return i && ri(this, n, e), i;
}, t.defineProperty_ = function(e, t, n) {
void 0 === n && (n = !1);
try {
dn();
var r = this.delete_(e);
if (!r) return r;
if (Sr(this)) {
var i = Tr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Jr,
newValue: t.value
});
if (!i) return null;
var o = i.newValue;
t.value !== o && (t = Ie({}, t, {
value: o
}));
}
if (n) {
if (!Reflect.defineProperty(this.target_, e, t)) return !1;
} else Y(this.target_, e, t);
this.notifyPropertyAddition_(e, t.value);
} finally {
un();
}
return !0;
}, t.defineObservableProperty_ = function(e, t, n, r) {
void 0 === r && (r = !1);
try {
dn();
var i = this.delete_(e);
if (!i) return i;
if (Sr(this)) {
var o = Tr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Jr,
newValue: t
});
if (!o) return null;
t = o.newValue;
}
var a = ti(e), s = {
configurable: !nn.safeDescriptors || this.isPlainObject_,
enumerable: !0,
get: a.get,
set: a.set
};
if (r) {
if (!Reflect.defineProperty(this.target_, e, s)) return !1;
} else Y(this.target_, e, s);
var l = new Bt(t, n, "ObservableObject.key", !1);
this.values_.set(e, l), this.notifyPropertyAddition_(e, l.value_);
} finally {
un();
}
return !0;
}, t.defineComputedProperty_ = function(e, t, n) {
void 0 === n && (n = !1);
try {
dn();
var r = this.delete_(e);
if (!r) return r;
if (Sr(this)) if (!Tr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Jr,
newValue: void 0
})) return null;
t.name || (t.name = "ObservableObject.key"), t.context = this.proxy_ || this.target_;
var i = ti(e), o = {
configurable: !nn.safeDescriptors || this.isPlainObject_,
enumerable: !1,
get: i.get,
set: i.set
};
if (n) {
if (!Reflect.defineProperty(this.target_, e, o)) return !1;
} else Y(this.target_, e, o);
this.values_.set(e, new Ft(t)), this.notifyPropertyAddition_(e, void 0);
} finally {
un();
}
return !0;
}, t.delete_ = function(e, t) {
if (void 0 === t && (t = !1), !he(this.target_, e)) return !0;
if (Sr(this) && !Tr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Qr
})) return null;
try {
var n, r;
dn();
var i, o = Er(this), a = this.values_.get(e), s = void 0;
if (!a && o) s = null == (i = q(this.target_, e)) ? void 0 : i.value;
if (t) {
if (!Reflect.deleteProperty(this.target_, e)) return !1;
} else delete this.target_[e];
if (a && (this.values_.delete(e), a instanceof Bt && (s = a.value_), fn(a)), this.keysAtom_.reportChanged(), 
null == (n = this.pendingKeys_) || null == (r = n.get(e)) || r.set(e in this.target_), 
o) {
var l = {
type: Qr,
observableKind: "object",
object: this.proxy_ || this.target_,
debugObjectName: this.name_,
oldValue: s,
name: e
};
0, o && Or(this, l);
}
} finally {
un();
}
return !0;
}, t.observe_ = function(e, t) {
return Pr(this, e);
}, t.intercept_ = function(e) {
return vr(this, e);
}, t.notifyPropertyAddition_ = function(e, t) {
var n, r, i = Er(this);
if (i) {
var o = i ? {
type: Jr,
observableKind: "object",
debugObjectName: this.name_,
object: this.proxy_ || this.target_,
name: e,
newValue: t
} : null;
i && Or(this, o);
}
null == (n = this.pendingKeys_) || null == (r = n.get(e)) || r.set(!0), this.keysAtom_.reportChanged();
}, t.ownKeys_ = function() {
return this.keysAtom_.reportObserved(), pe(this.target_);
}, t.keys_ = function() {
return this.keysAtom_.reportObserved(), Object.keys(this.target_);
}, e;
}();
function Zr(e, t) {
var n;
if (he(e, Ce)) return e;
var r = null != (n = null == t ? void 0 : t.name) ? n : "ObservableObject", i = new $r(e, new Map, String(r), ut(t));
return ae(e, Ce, i), e;
}
var ei = se("ObservableObjectAdministration", $r);
function ti(e) {
return Xr[e] || (Xr[e] = {
get: function() {
return this[Ce].getObservablePropValue_(e);
},
set: function(t) {
return this[Ce].setObservablePropValue_(e, t);
}
});
}
function ni(e) {
return !!re(e) && ei(e[Ce]);
}
function ri(e, t, n) {
var r;
null == (r = e.target_[Te]) || delete r[n];
}
function ii(e, t) {
if ("object" == typeof e && null !== e) {
if (Hr(e)) return void 0 !== t && J(23), e[Ce].atom_;
if (Wr(e)) return e[Ce];
if (jr(e)) {
if (void 0 === t) return e.keysAtom_;
var n = e.data_.get(t) || e.hasMap_.get(t);
return n || J(25, t, ai(e)), n;
}
if (ni(e)) {
if (!t) return J(26);
var r = e[Ce].values_.get(t);
return r || J(27, t, ai(e)), r;
}
if (Ae(e) || Mt(e) || bn(e)) return e;
} else if (te(e) && bn(e[Ce])) return e[Ce];
J(28);
}
function oi(e, t) {
return e || J(29), void 0 !== t ? oi(ii(e, t)) : Ae(e) || Mt(e) || bn(e) || jr(e) || Wr(e) ? e : e[Ce] ? e[Ce] : void J(24, e);
}
function ai(e, t) {
var n;
if (void 0 !== t) n = ii(e, t); else {
if (Rn(e)) return e.name;
n = ni(e) || jr(e) || Wr(e) ? oi(e) : ii(e);
}
return n.name_;
}
var si = K.toString;
function li(e, t, n) {
return void 0 === n && (n = -1), ci(e, t, n);
}
function ci(e, t, n, r, i) {
if (e === t) return 0 !== e || 1 / e == 1 / t;
if (null == e || null == t) return !1;
if (e != e) return t != t;
var o = typeof e;
if ("function" !== o && "object" !== o && "object" != typeof t) return !1;
var a = si.call(e);
if (a !== si.call(t)) return !1;
switch (a) {
case "[object RegExp]":
case "[object String]":
return "" + e == "" + t;

case "[object Number]":
return +e != +e ? +t != +t : 0 == +e ? 1 / +e == 1 / t : +e == +t;

case "[object Date]":
case "[object Boolean]":
return +e == +t;

case "[object Symbol]":
return "undefined" != typeof Symbol && Symbol.valueOf.call(e) === Symbol.valueOf.call(t);

case "[object Map]":
case "[object Set]":
n >= 0 && n++;
}
e = di(e), t = di(t);
var s = "[object Array]" === a;
if (!s) {
if ("object" != typeof e || "object" != typeof t) return !1;
var l = e.constructor, c = t.constructor;
if (l !== c && !(te(l) && l instanceof l && te(c) && c instanceof c) && "constructor" in e && "constructor" in t) return !1;
}
if (0 === n) return !1;
n < 0 && (n = -1), i = i || [];
for (var d = (r = r || []).length; d--; ) if (r[d] === e) return i[d] === t;
if (r.push(e), i.push(t), s) {
if ((d = e.length) !== t.length) return !1;
for (;d--; ) if (!ci(e[d], t[d], n - 1, r, i)) return !1;
} else {
var u, p = Object.keys(e);
if (d = p.length, Object.keys(t).length !== d) return !1;
for (;d--; ) if (!he(t, u = p[d]) || !ci(e[u], t[u], n - 1, r, i)) return !1;
}
return r.pop(), i.pop(), !0;
}
function di(e) {
return Hr(e) ? e.slice() : le(e) || jr(e) || ce(e) || Wr(e) ? Array.from(e.entries()) : e;
}
function ui(e) {
return e[Symbol.iterator] = pi, e;
}
function pi() {
return this;
}
[ "Symbol", "Map", "Set" ].forEach((function(e) {
void 0 === z()[e] && J("MobX requires global '" + e + "' to be available or polyfilled");
})), "object" == typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
spy: Sn,
extras: {
getDebugName: ai
},
$mobx: Ce
});
var fi = Object.freeze({
__proto__: null,
$mobx: Ce,
FlowCancellationError: qn,
ObservableMap: zr,
ObservableSet: Kr,
Reaction: gn,
_allowStateChanges: Lt,
_allowStateChangesInsideComputed: kn,
_allowStateReadsEnd: Xt,
_allowStateReadsStart: Wt,
_autoAction: wn,
_endAction: At,
_getAdministration: oi,
_getGlobalState: function() {
return nn;
},
_interceptReads: function(e, t, n) {
var r;
return jr(e) || Hr(e) || Dt(e) ? r = oi(e) : ni(e) && (r = oi(e, t)), r.dehancer = "function" == typeof t ? t : n, 
function() {
r.dehancer = void 0;
};
},
_isComputingDerivation: Jt,
_resetGlobalState: function() {
var e = new Zt;
for (var t in e) -1 === $t.indexOf(t) && (nn[t] = e[t]);
nn.allowStateChanges = !nn.enforceActions;
},
_startAction: Nt,
action: Ln,
autorun: xn,
comparer: we,
computed: bt,
configure: function(e) {
!0 === e.isolateGlobalState && rn();
var t, n, r = e.enforceActions;
if (void 0 !== r) {
var i = r === Vn ? Vn : "observed" === r;
nn.enforceActions = i, nn.allowStateChanges = !0 !== i && i !== Vn;
}
[ "computedRequiresReaction", "reactionRequiresObservable", "observableRequiresReaction", "disableErrorBoundaries", "safeDescriptors" ].forEach((function(t) {
t in e && (nn[t] = !!e[t]);
})), nn.allowStateReads = !nn.observableRequiresReaction, e.reactionScheduler && (t = e.reactionScheduler, 
n = yn, yn = function(e) {
return t((function() {
return n(e);
}));
});
},
createAtom: Le,
defineProperty: function(e, t, n) {
if (ni(e)) return e[Ce].defineProperty_(t, n);
J(39);
},
entries: function(e) {
return ni(e) ? rr(e).map((function(t) {
return [ t, e[t] ];
})) : jr(e) ? rr(e).map((function(t) {
return [ t, e.get(t) ];
})) : Wr(e) ? Array.from(e.entries()) : Hr(e) ? e.map((function(e, t) {
return [ t, e ];
})) : void J(7);
},
extendObservable: Jn,
flow: Wn,
flowResult: function(e) {
return e;
},
get: function(e, t) {
if (ir(e, t)) return ni(e) ? e[Ce].get_(t) : jr(e) ? e.get(t) : Hr(e) ? e[t] : void J(11);
},
getAtom: ii,
getDebugName: ai,
getDependencyTree: function(e, t) {
return Gn(ii(e, t));
},
getObserverTree: function(e, t) {
return zn(ii(e, t));
},
has: ir,
intercept: function(e, t, n) {
return te(n) ? Zn(e, t, n) : $n(e, t);
},
isAction: Rn,
isBoxedObservable: Dt,
isComputed: function(e) {
return er(e);
},
isComputedProp: function(e, t) {
return er(e, t);
},
isFlow: Qn,
isFlowCancellationError: function(e) {
return e instanceof qn;
},
isObservable: nr,
isObservableArray: Hr,
isObservableMap: jr,
isObservableObject: ni,
isObservableProp: function(e, t) {
return tr(e, t);
},
isObservableSet: Wr,
keys: rr,
makeAutoObservable: function(e, t, n) {
if (ie(e)) return Jn(e, e, t, n);
var r = Zr(e, n)[Ce];
if (!e[Nr]) {
var i = Object.getPrototypeOf(e), o = new Set([].concat(pe(e), pe(i)));
o.delete("constructor"), o.delete(Ce), ae(i, Nr, o);
}
dn();
try {
e[Nr].forEach((function(e) {
return r.make_(e, !t || (!(e in t) || t[e]));
}));
} finally {
un();
}
return e;
},
makeObservable: Cr,
observable: gt,
observe: ar,
onBecomeObserved: Mn,
onBecomeUnobserved: Un,
onReactionError: function(e) {
return nn.globalReactionErrorHandlers.push(e), function() {
var t = nn.globalReactionErrorHandlers.indexOf(e);
t >= 0 && nn.globalReactionErrorHandlers.splice(t, 1);
};
},
override: Be,
ownKeys: or,
reaction: Fn,
remove: function(e, t) {
ni(e) ? e[Ce].delete_(t) : jr(e) || Wr(e) ? e.delete(t) : Hr(e) ? ("number" != typeof t && (t = parseInt(t, 10)), 
e.splice(t, 1)) : J(9);
},
runInAction: kn,
set: function e(t, n, r) {
if (2 !== arguments.length || Wr(t)) ni(t) ? t[Ce].set_(n, r) : jr(t) ? t.set(n, r) : Wr(t) ? t.add(n) : Hr(t) ? ("number" != typeof n && (n = parseInt(n, 10)), 
n < 0 && J("Invalid index: '" + n + "'"), dn(), n >= t.length && (t.length = n + 1), 
t[n] = r, un()) : J(8); else {
dn();
var i = n;
try {
for (var o in i) e(t, o, i[o]);
} finally {
un();
}
}
},
spy: Sn,
toJS: ur,
trace: pr,
transaction: hr,
untracked: qt,
values: function(e) {
return ni(e) ? rr(e).map((function(t) {
return e[t];
})) : jr(e) ? rr(e).map((function(t) {
return e.get(t);
})) : Wr(e) ? Array.from(e.values()) : Hr(e) ? e.slice() : void J(6);
},
when: mr
}), hi = (t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.printDebugValue = void 0, t.printDebugValue = function(e) {
return (0, fi.getDependencyTree)(e);
};
})), t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.CLEANUP_TIMER_LOOP_MILLIS = t.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = t.createTrackingData = void 0, 
t.createTrackingData = function(e) {
return {
reaction: e,
mounted: !1,
changedBeforeMount: !1,
cleanAt: Date.now() + t.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS
};
}, t.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = 1e4, t.CLEANUP_TIMER_LOOP_MILLIS = 1e4;
}))), mi = t((function(t, n) {
var r = e && e.__values || function(e) {
var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0;
if (n) return n.call(e);
if (e && "number" == typeof e.length) return {
next: function() {
return e && r >= e.length && (e = void 0), {
value: e && e[r++],
done: !e
};
}
};
throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(n, "__esModule", {
value: !0
}), n.createTimerBasedReactionCleanupTracking = void 0, n.createTimerBasedReactionCleanupTracking = function() {
var e, t = new Set;
function n() {
void 0 === e && (e = setTimeout(i, hi.CLEANUP_TIMER_LOOP_MILLIS));
}
function i() {
e = void 0;
var r = Date.now();
t.forEach((function(e) {
var n = e.current;
n && r >= n.cleanAt && (n.reaction.dispose(), e.current = null, t.delete(e));
})), t.size > 0 && n();
}
return {
addReactionToTrack: function(e, r, i) {
var o;
return e.current = (0, hi.createTrackingData)(r), o = e, t.add(o), n(), e.current;
},
recordReactionAsCommitted: function(e) {
t.delete(e);
},
forceCleanupTimerToRunNowForTests: function() {
e && (clearTimeout(e), i());
},
resetCleanupScheduleForTests: function() {
var n, i;
if (t.size > 0) {
try {
for (var o = r(t), a = o.next(); !a.done; a = o.next()) {
var s = a.value, l = s.current;
l && (l.reaction.dispose(), s.current = null);
}
} catch (e) {
n = {
error: e
};
} finally {
try {
a && !a.done && (i = o.return) && i.call(o);
} finally {
if (n) throw n.error;
}
}
t.clear();
}
e && (clearTimeout(e), e = void 0);
}
};
};
})), gi = t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.forceCleanupTimerToRunNowForTests = t.resetCleanupScheduleForTests = t.recordReactionAsCommitted = t.addReactionToTrack = void 0;
var n = (0, mi.createTimerBasedReactionCleanupTracking)(), r = n.addReactionToTrack, i = n.recordReactionAsCommitted, o = n.resetCleanupScheduleForTests, a = n.forceCleanupTimerToRunNowForTests;
t.addReactionToTrack = r, t.recordReactionAsCommitted = i, t.resetCleanupScheduleForTests = o, 
t.forceCleanupTimerToRunNowForTests = a;
})), yi = t((function(t, n) {
var r = e && e.__importDefault || function(e) {
return e && e.__esModule ? e : {
default: e
};
};
Object.defineProperty(n, "__esModule", {
value: !0
}), n.useObserver = void 0;
var i = r(H);
function o(e) {
return "observer".concat(e);
}
n.useObserver = function(e, t) {
void 0 === t && (t = "observed");
var n = i.default.useState()[1], r = function() {
return n([]);
}, a = i.default.useRef(null);
if (!a.current) var s = new fi.Reaction(o(t), (function() {
l.mounted ? r() : l.changedBeforeMount = !0;
})), l = (0, gi.addReactionToTrack)(a, s);
var c, d, u = a.current.reaction;
if (i.default.useEffect((function() {
return (0, gi.recordReactionAsCommitted)(a), a.current ? (a.current.mounted = !0, 
a.current.changedBeforeMount && (a.current.changedBeforeMount = !1, r())) : (a.current = {
reaction: new fi.Reaction(o(t), (function() {
r();
})),
mounted: !0,
changedBeforeMount: !1,
cleanAt: 1 / 0
}, r()), function() {
a.current.reaction.dispose(), a.current = null;
};
}), []), u.track((function() {
try {
c = e();
} catch (e) {
d = e;
}
})), d) throw d;
return c;
};
})), Ii = t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.observer = void 0;
var n = "function" == typeof Symbol && Symbol.for, r = n ? Symbol.for("react.forward_ref") : "function" == typeof H.forwardRef && (0, 
H.forwardRef)((function(e) {
return null;
})).$$typeof, i = n ? Symbol.for("react.memo") : "function" == typeof H.memo && (0, 
H.memo)((function(e) {
return null;
})).$$typeof;
t.observer = function(e, t) {
var n;
if (i && e.$$typeof === i) throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");
if ((0, V.isUsingStaticRendering)()) return e;
var a = null !== (n = null == t ? void 0 : t.forwardRef) && void 0 !== n && n, s = e, l = e.displayName || e.name;
if (r && e.$$typeof === r && (a = !0, "function" != typeof (s = e.render))) throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
var c, d, u = function(e, t) {
return (0, yi.useObserver)((function() {
return s(e, t);
}), l);
};
return "" !== l && (u.displayName = l), e.contextTypes && (u.contextTypes = e.contextTypes), 
a && (u = (0, H.forwardRef)(u)), u = (0, H.memo)(u), c = e, d = u, Object.keys(c).forEach((function(e) {
o[e] || Object.defineProperty(d, e, Object.getOwnPropertyDescriptor(c, e));
})), u;
};
var o = {
$$typeof: !0,
render: !0,
compare: !0,
type: !0,
displayName: !0
};
}));
function _i(e, t) {
return _i = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
return e.__proto__ = t, e;
}, _i(e, t);
}
function bi(e, t) {
e.prototype = Object.create(t.prototype), e.prototype.constructor = e, _i(e, t);
}
/**
	 * @license React
	 * react-is.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */ var Si, vi = Symbol.for("react.element"), Ti = Symbol.for("react.portal"), Ei = Symbol.for("react.fragment"), Pi = Symbol.for("react.strict_mode"), Oi = Symbol.for("react.profiler"), Ci = Symbol.for("react.provider"), Ni = Symbol.for("react.context"), Ai = Symbol.for("react.server_context"), Li = Symbol.for("react.forward_ref"), wi = Symbol.for("react.suspense"), ki = Symbol.for("react.suspense_list"), Ri = Symbol.for("react.memo"), xi = Symbol.for("react.lazy"), Bi = Symbol.for("react.offscreen");
function Di(e) {
if ("object" == typeof e && null !== e) {
var t = e.$$typeof;
switch (t) {
case vi:
switch (e = e.type) {
case Ei:
case Oi:
case Pi:
case wi:
case ki:
return e;

default:
switch (e = e && e.$$typeof) {
case Ai:
case Ni:
case Li:
case xi:
case Ri:
case Ci:
return e;

default:
return t;
}
}

case Ti:
return t;
}
}
}
Si = Symbol.for("react.module.reference");
var Fi = {
ContextConsumer: Ni,
ContextProvider: Ci,
Element: vi,
ForwardRef: Li,
Fragment: Ei,
Lazy: xi,
Memo: Ri,
Portal: Ti,
Profiler: Oi,
StrictMode: Pi,
Suspense: wi,
SuspenseList: ki,
isAsyncMode: function() {
return !1;
},
isConcurrentMode: function() {
return !1;
},
isContextConsumer: function(e) {
return Di(e) === Ni;
},
isContextProvider: function(e) {
return Di(e) === Ci;
},
isElement: function(e) {
return "object" == typeof e && null !== e && e.$$typeof === vi;
},
isForwardRef: function(e) {
return Di(e) === Li;
},
isFragment: function(e) {
return Di(e) === Ei;
},
isLazy: function(e) {
return Di(e) === xi;
},
isMemo: function(e) {
return Di(e) === Ri;
},
isPortal: function(e) {
return Di(e) === Ti;
},
isProfiler: function(e) {
return Di(e) === Oi;
},
isStrictMode: function(e) {
return Di(e) === Pi;
},
isSuspense: function(e) {
return Di(e) === wi;
},
isSuspenseList: function(e) {
return Di(e) === ki;
},
isValidElementType: function(e) {
return "string" == typeof e || "function" == typeof e || e === Ei || e === Oi || e === Pi || e === wi || e === ki || e === Bi || "object" == typeof e && null !== e && (e.$$typeof === xi || e.$$typeof === Ri || e.$$typeof === Ci || e.$$typeof === Ni || e.$$typeof === Li || e.$$typeof === Si || void 0 !== e.getModuleId);
},
typeOf: Di
}, Mi = (t((function(e, t) {})), t((function(e) {
e.exports = Fi;
}))), Ui = Object.getOwnPropertySymbols, Hi = Object.prototype.hasOwnProperty, Vi = Object.prototype.propertyIsEnumerable;
function Ji(e) {
if (null == e) throw new TypeError("Object.assign cannot be called with null or undefined");
return Object(e);
}
(function() {
try {
if (!Object.assign) return !1;
var e = new String("abc");
if (e[5] = "de", "5" === Object.getOwnPropertyNames(e)[0]) return !1;
for (var t = {}, n = 0; n < 10; n++) t["_" + String.fromCharCode(n)] = n;
var r = Object.getOwnPropertyNames(t).map((function(e) {
return t[e];
}));
if ("0123456789" !== r.join("")) return !1;
var i = {};
return "abcdefghijklmnopqrst".split("").forEach((function(e) {
i[e] = e;
})), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, i)).join("");
} catch (e) {
return !1;
}
})() && Object.assign, Function.call.bind(Object.prototype.hasOwnProperty);
function Gi() {}
function zi() {}
zi.resetWarningCache = Gi;
var ji = function() {
function e(e, t, n, r, i, o) {
if ("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED" !== o) {
var a = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
throw a.name = "Invariant Violation", a;
}
}
function t() {
return e;
}
e.isRequired = e;
var n = {
array: e,
bool: e,
func: e,
number: e,
object: e,
string: e,
symbol: e,
any: e,
arrayOf: t,
element: e,
elementType: e,
instanceOf: t,
node: e,
objectOf: t,
oneOf: t,
oneOfType: t,
shape: t,
exact: t,
checkPropTypes: zi,
resetWarningCache: Gi
};
return n.PropTypes = n, n;
};
t((function(e) {
e.exports = ji();
}));
function qi() {
return qi = Object.assign ? Object.assign.bind() : function(e) {
for (var t = 1; t < arguments.length; t++) {
var n = arguments[t];
for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
}
return e;
}, qi.apply(this, arguments);
}
function Yi(e) {
return "/" === e.charAt(0);
}
function Ki(e, t) {
for (var n = t, r = n + 1, i = e.length; r < i; n += 1, r += 1) e[n] = e[r];
e.pop();
}
function Wi(e, t) {
void 0 === t && (t = "");
var n, r = e && e.split("/") || [], i = t && t.split("/") || [], o = e && Yi(e), a = t && Yi(t), s = o || a;
if (e && Yi(e) ? i = r : r.length && (i.pop(), i = i.concat(r)), !i.length) return "/";
if (i.length) {
var l = i[i.length - 1];
n = "." === l || ".." === l || "" === l;
} else n = !1;
for (var c = 0, d = i.length; d >= 0; d--) {
var u = i[d];
"." === u ? Ki(i, d) : ".." === u ? (Ki(i, d), c++) : c && (Ki(i, d), c--);
}
if (!s) for (;c--; c) i.unshift("..");
!s || "" === i[0] || i[0] && Yi(i[0]) || i.unshift("");
var p = i.join("/");
return n && "/" !== p.substr(-1) && (p += "/"), p;
}
function Xi(e, t) {
if (!e) throw new Error("Invariant failed");
}
function Qi(e) {
var t = e || "/", n = "", r = "", i = t.indexOf("#");
-1 !== i && (r = t.substr(i), t = t.substr(0, i));
var o = t.indexOf("?");
return -1 !== o && (n = t.substr(o), t = t.substr(0, o)), {
pathname: t,
search: "?" === n ? "" : n,
hash: "#" === r ? "" : r
};
}
function $i(e) {
var t = e.pathname, n = e.search, r = e.hash, i = t || "/";
return n && "?" !== n && (i += "?" === n.charAt(0) ? n : "?" + n), r && "#" !== r && (i += "#" === r.charAt(0) ? r : "#" + r), 
i;
}
function Zi(e, t, n, r) {
var i;
"string" == typeof e ? (i = Qi(e)).state = t : (void 0 === (i = qi({}, e)).pathname && (i.pathname = ""), 
i.search ? "?" !== i.search.charAt(0) && (i.search = "?" + i.search) : i.search = "", 
i.hash ? "#" !== i.hash.charAt(0) && (i.hash = "#" + i.hash) : i.hash = "", void 0 !== t && void 0 === i.state && (i.state = t));
try {
i.pathname = decodeURI(i.pathname);
} catch (e) {
throw e instanceof URIError ? new URIError('Pathname "' + i.pathname + '" could not be decoded. This is likely caused by an invalid percent-encoding.') : e;
}
return n && (i.key = n), r ? i.pathname ? "/" !== i.pathname.charAt(0) && (i.pathname = Wi(i.pathname, r.pathname)) : i.pathname = r.pathname : i.pathname || (i.pathname = "/"), 
i;
}
function eo(e, t, n) {
return Math.min(Math.max(e, t), n);
}
function to(e) {
void 0 === e && (e = {});
var t, n, r = e, i = r.getUserConfirmation, o = r.initialEntries, a = void 0 === o ? [ "/" ] : o, s = r.initialIndex, l = void 0 === s ? 0 : s, c = r.keyLength, d = void 0 === c ? 6 : c, u = (t = null, 
n = [], {
setPrompt: function(e) {
return t = e, function() {
t === e && (t = null);
};
},
confirmTransitionTo: function(e, n, r, i) {
if (null != t) {
var o = "function" == typeof t ? t(e, n) : t;
"string" == typeof o ? "function" == typeof r ? r(o, i) : i(!0) : i(!1 !== o);
} else i(!0);
},
appendListener: function(e) {
var t = !0;
function r() {
t && e.apply(void 0, arguments);
}
return n.push(r), function() {
t = !1, n = n.filter((function(e) {
return e !== r;
}));
};
},
notifyListeners: function() {
for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++) t[r] = arguments[r];
n.forEach((function(e) {
return e.apply(void 0, t);
}));
}
});
function p(e) {
qi(I, e), I.length = I.entries.length, u.notifyListeners(I.location, I.action);
}
function f() {
return Math.random().toString(36).substr(2, d);
}
var h = eo(l, 0, a.length - 1), m = a.map((function(e) {
return Zi(e, void 0, "string" == typeof e ? f() : e.key || f());
})), g = $i;
function y(e) {
var t = eo(I.index + e, 0, I.entries.length - 1), n = I.entries[t];
u.confirmTransitionTo(n, "POP", i, (function(e) {
e ? p({
action: "POP",
location: n,
index: t
}) : p();
}));
}
var I = {
length: m.length,
action: "POP",
location: m[h],
index: h,
entries: m,
createHref: g,
push: function(e, t) {
var n = "PUSH", r = Zi(e, t, f(), I.location);
u.confirmTransitionTo(r, n, i, (function(e) {
if (e) {
var t = I.index + 1, i = I.entries.slice(0);
i.length > t ? i.splice(t, i.length - t, r) : i.push(r), p({
action: n,
location: r,
index: t,
entries: i
});
}
}));
},
replace: function(e, t) {
var n = "REPLACE", r = Zi(e, t, f(), I.location);
u.confirmTransitionTo(r, n, i, (function(e) {
e && (I.entries[I.index] = r, p({
action: n,
location: r
}));
}));
},
go: y,
goBack: function() {
y(-1);
},
goForward: function() {
y(1);
},
canGo: function(e) {
var t = I.index + e;
return t >= 0 && t < I.entries.length;
},
block: function(e) {
return void 0 === e && (e = !1), u.setPrompt(e);
},
listen: function(e) {
return u.appendListener(e);
}
};
return I;
}
var no = Array.isArray || function(e) {
return "[object Array]" == Object.prototype.toString.call(e);
}, ro = So, io = co, oo = function(e, t) {
return po(co(e, t), t);
}, ao = po, so = bo, lo = new RegExp([ "(\\\\.)", "([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))" ].join("|"), "g");
function co(e, t) {
for (var n, r = [], i = 0, o = 0, a = "", s = t && t.delimiter || "/"; null != (n = lo.exec(e)); ) {
var l = n[0], c = n[1], d = n.index;
if (a += e.slice(o, d), o = d + l.length, c) a += c[1]; else {
var u = e[o], p = n[2], f = n[3], h = n[4], m = n[5], g = n[6], y = n[7];
a && (r.push(a), a = "");
var I = null != p && null != u && u !== p, _ = "+" === g || "*" === g, b = "?" === g || "*" === g, S = n[2] || s, v = h || m;
r.push({
name: f || i++,
prefix: p || "",
delimiter: S,
optional: b,
repeat: _,
partial: I,
asterisk: !!y,
pattern: v ? ho(v) : y ? ".*" : "[^" + fo(S) + "]+?"
});
}
}
return o < e.length && (a += e.substr(o)), a && r.push(a), r;
}
function uo(e) {
return encodeURI(e).replace(/[\/?#]/g, (function(e) {
return "%" + e.charCodeAt(0).toString(16).toUpperCase();
}));
}
function po(e, t) {
for (var n = new Array(e.length), r = 0; r < e.length; r++) "object" == typeof e[r] && (n[r] = new RegExp("^(?:" + e[r].pattern + ")$", go(t)));
return function(t, r) {
for (var i = "", o = t || {}, a = (r || {}).pretty ? uo : encodeURIComponent, s = 0; s < e.length; s++) {
var l = e[s];
if ("string" != typeof l) {
var c, d = o[l.name];
if (null == d) {
if (l.optional) {
l.partial && (i += l.prefix);
continue;
}
throw new TypeError('Expected "' + l.name + '" to be defined');
}
if (no(d)) {
if (!l.repeat) throw new TypeError('Expected "' + l.name + '" to not repeat, but received `' + JSON.stringify(d) + "`");
if (0 === d.length) {
if (l.optional) continue;
throw new TypeError('Expected "' + l.name + '" to not be empty');
}
for (var u = 0; u < d.length; u++) {
if (c = a(d[u]), !n[s].test(c)) throw new TypeError('Expected all "' + l.name + '" to match "' + l.pattern + '", but received `' + JSON.stringify(c) + "`");
i += (0 === u ? l.prefix : l.delimiter) + c;
}
} else {
if (c = l.asterisk ? encodeURI(d).replace(/[?#]/g, (function(e) {
return "%" + e.charCodeAt(0).toString(16).toUpperCase();
})) : a(d), !n[s].test(c)) throw new TypeError('Expected "' + l.name + '" to match "' + l.pattern + '", but received "' + c + '"');
i += l.prefix + c;
}
} else i += l;
}
return i;
};
}
function fo(e) {
return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g, "\\$1");
}
function ho(e) {
return e.replace(/([=!:$\/()])/g, "\\$1");
}
function mo(e, t) {
return e.keys = t, e;
}
function go(e) {
return e && e.sensitive ? "" : "i";
}
function yo(e, t) {
var n = e.source.match(/\((?!\?)/g);
if (n) for (var r = 0; r < n.length; r++) t.push({
name: r,
prefix: null,
delimiter: null,
optional: !1,
repeat: !1,
partial: !1,
asterisk: !1,
pattern: null
});
return mo(e, t);
}
function Io(e, t, n) {
for (var r = [], i = 0; i < e.length; i++) r.push(So(e[i], t, n).source);
return mo(new RegExp("(?:" + r.join("|") + ")", go(n)), t);
}
function _o(e, t, n) {
return bo(co(e, n), t, n);
}
function bo(e, t, n) {
no(t) || (n = t || n, t = []);
for (var r = (n = n || {}).strict, i = !1 !== n.end, o = "", a = 0; a < e.length; a++) {
var s = e[a];
if ("string" == typeof s) o += fo(s); else {
var l = fo(s.prefix), c = "(?:" + s.pattern + ")";
t.push(s), s.repeat && (c += "(?:" + l + c + ")*"), o += c = s.optional ? s.partial ? l + "(" + c + ")?" : "(?:" + l + "(" + c + "))?" : l + "(" + c + ")";
}
}
var d = fo(n.delimiter || "/"), u = o.slice(-d.length) === d;
return r || (o = (u ? o.slice(0, -d.length) : o) + "(?:" + d + "(?=$))?"), o += i ? "$" : r && u ? "" : "(?=" + d + "|$)", 
mo(new RegExp("^" + o, go(n)), t);
}
function So(e, t, n) {
return no(t) || (n = t || n, t = []), n = n || {}, e instanceof RegExp ? yo(e, t) : no(e) ? Io(e, t, n) : _o(e, t, n);
}
function vo(e, t) {
if (null == e) return {};
var n, r, i = {}, o = Object.keys(e);
for (r = 0; r < o.length; r++) n = o[r], t.indexOf(n) >= 0 || (i[n] = e[n]);
return i;
}
ro.parse = io, ro.compile = oo, ro.tokensToFunction = ao, ro.tokensToRegExp = so;
var To = {};
To[Mi.ForwardRef] = {
$$typeof: !0,
render: !0,
defaultProps: !0,
displayName: !0,
propTypes: !0
}, To[Mi.Memo] = {
$$typeof: !0,
compare: !0,
defaultProps: !0,
displayName: !0,
propTypes: !0,
type: !0
};
var Eo = H.createContext, Po = function(e) {
var t = Eo();
return t.displayName = e, t;
}, Oo = Po("Router-History"), Co = Po("Router"), No = function(e) {
function t(t) {
var n;
return (n = e.call(this, t) || this).state = {
location: t.history.location
}, n._isMounted = !1, n._pendingLocation = null, t.staticContext || (n.unlisten = t.history.listen((function(e) {
n._pendingLocation = e;
}))), n;
}
bi(t, e), t.computeRootMatch = function(e) {
return {
path: "/",
url: "/",
params: {},
isExact: "/" === e
};
};
var n = t.prototype;
return n.componentDidMount = function() {
var e = this;
this._isMounted = !0, this.unlisten && this.unlisten(), this.props.staticContext || (this.unlisten = this.props.history.listen((function(t) {
e._isMounted && e.setState({
location: t
});
}))), this._pendingLocation && this.setState({
location: this._pendingLocation
});
}, n.componentWillUnmount = function() {
this.unlisten && (this.unlisten(), this._isMounted = !1, this._pendingLocation = null);
}, n.render = function() {
return H.createElement(Co.Provider, {
value: {
history: this.props.history,
location: this.state.location,
match: t.computeRootMatch(this.state.location.pathname),
staticContext: this.props.staticContext
}
}, H.createElement(Oo.Provider, {
children: this.props.children || null,
value: this.props.history
}));
}, t;
}(H.Component), Ao = (H.Component, H.Component, {}), Lo = 0;
function wo(e) {
if (Ao[e]) return Ao[e];
var t = ro.compile(e);
return Lo < 1e4 && (Ao[e] = t, Lo++), t;
}
var ko = {}, Ro = 0;
function xo(e, t) {
var n = "" + t.end + t.strict + t.sensitive, r = ko[n] || (ko[n] = {});
if (r[e]) return r[e];
var i = [], o = {
regexp: ro(e, i, t),
keys: i
};
return Ro < 1e4 && (r[e] = o, Ro++), o;
}
function Bo(e, t) {
void 0 === t && (t = {}), ("string" == typeof t || Array.isArray(t)) && (t = {
path: t
});
var n = t, r = n.path, i = n.exact, o = void 0 !== i && i, a = n.strict, s = void 0 !== a && a, l = n.sensitive, c = void 0 !== l && l;
return [].concat(r).reduce((function(t, n) {
if (!n && "" !== n) return null;
if (t) return t;
var r = xo(n, {
end: o,
strict: s,
sensitive: c
}), i = r.regexp, a = r.keys, l = i.exec(e);
if (!l) return null;
var d = l[0], u = l.slice(1), p = e === d;
return o && !p ? null : {
path: n,
url: "/" === n && "" === d ? "/" : d,
isExact: p,
params: a.reduce((function(e, t, n) {
return e[t.name] = u[n], e;
}), {})
};
}), null);
}
function Do(e) {
return 0 === H.Children.count(e);
}
var Fo = function(e) {
function t() {
return e.apply(this, arguments) || this;
}
return bi(t, e), t.prototype.render = function() {
var e = this;
return H.createElement(Co.Consumer, null, (function(t) {
t || Xi(!1);
var n = e.props.location || t.location, r = qi({}, t, {
location: n,
match: e.props.computedMatch ? e.props.computedMatch : e.props.path ? Bo(n.pathname, e.props) : t.match
}), i = e.props, o = i.children, a = i.component, s = i.render;
return Array.isArray(o) && Do(o) && (o = null), H.createElement(Co.Provider, {
value: r
}, r.match ? o ? "function" == typeof o ? o(r) : o : a ? H.createElement(a, r) : s ? s(r) : null : "function" == typeof o ? o(r) : null);
}));
}, t;
}(H.Component);
function Mo(e) {
return "/" === e.charAt(0) ? e : "/" + e;
}
function Uo(e, t) {
return e ? qi({}, t, {
pathname: Mo(e) + t.pathname
}) : t;
}
function Ho(e, t) {
if (!e) return t;
var n = Mo(e);
return 0 !== t.pathname.indexOf(n) ? t : qi({}, t, {
pathname: t.pathname.substr(n.length)
});
}
function Vo(e) {
return "string" == typeof e ? e : $i(e);
}
function Jo(e) {
return function() {
Xi(!1);
};
}
function Go() {}
H.Component, H.Component;
var zo = H.useContext;
function jo() {
return zo(Oo);
}
function qo() {
return zo(Co).location;
}
function Yo() {
var e = zo(Co).match;
return e ? e.params : {};
}
var Ko = t((function(e, t) {
function n(e, t) {
var n = e.length;
e.push(t);
e: for (;0 < n; ) {
var r = n - 1 >>> 1, i = e[r];
if (!(0 < o(i, t))) break e;
e[r] = t, e[n] = i, n = r;
}
}
function r(e) {
return 0 === e.length ? null : e[0];
}
function i(e) {
if (0 === e.length) return null;
var t = e[0], n = e.pop();
if (n !== t) {
e[0] = n;
e: for (var r = 0, i = e.length, a = i >>> 1; r < a; ) {
var s = 2 * (r + 1) - 1, l = e[s], c = s + 1, d = e[c];
if (0 > o(l, n)) c < i && 0 > o(d, l) ? (e[r] = d, e[c] = n, r = c) : (e[r] = l, 
e[s] = n, r = s); else {
if (!(c < i && 0 > o(d, n))) break e;
e[r] = d, e[c] = n, r = c;
}
}
}
return t;
}
function o(e, t) {
var n = e.sortIndex - t.sortIndex;
return 0 !== n ? n : e.id - t.id;
}
if ("object" == typeof performance && "function" == typeof performance.now) {
var a = performance;
t.unstable_now = function() {
return a.now();
};
} else {
var s = Date.now();
t.unstable_now = function() {
return Date.now() - s;
};
}
var l = [], c = [], d = 1, u = null, p = 3, f = !1, h = !1, m = !1;
function g(e) {
for (var t = r(c); null !== t; ) {
if (null === t.callback) i(c); else {
if (!(t.startTime <= e)) break;
i(c), t.sortIndex = t.expirationTime, n(l, t);
}
t = r(c);
}
}
function y(e) {
if (m = !1, g(e), !h) if (null !== r(l)) h = !0, A(I); else {
var t = r(c);
null !== t && L(y, t.startTime - e);
}
}
function I(e, n) {
h = !1, m && (m = !1, clearTimeout(v), v = -1), f = !0;
var o = p;
try {
for (g(n), u = r(l); null !== u && (!(u.expirationTime > n) || e && !P()); ) {
var a = u.callback;
if ("function" == typeof a) {
u.callback = null, p = u.priorityLevel;
var s = a(u.expirationTime <= n);
n = t.unstable_now(), "function" == typeof s ? u.callback = s : u === r(l) && i(l), 
g(n);
} else i(l);
u = r(l);
}
if (null !== u) var d = !0; else {
var I = r(c);
null !== I && L(y, I.startTime - n), d = !1;
}
return d;
} finally {
u = null, p = o, f = !1;
}
}
"undefined" != typeof navigator && void 0 !== navigator.scheduling && void 0 !== navigator.scheduling.isInputPending && navigator.scheduling.isInputPending.bind(navigator.scheduling);
var _, b = !1, S = null, v = -1, T = 5, E = -1;
function P() {
return !(t.unstable_now() - E < T);
}
function O() {
if (null !== S) {
var e = t.unstable_now();
E = e;
var n = !0;
try {
n = S(!0, e);
} finally {
n ? _() : (b = !1, S = null);
}
} else b = !1;
}
if ("undefined" != typeof MessageChannel) {
var C = new MessageChannel, N = C.port2;
C.port1.onmessage = O, _ = function() {
N.postMessage(null);
};
} else _ = function() {
setTimeout(O, 0);
};
function A(e) {
S = e, b || (b = !0, _());
}
function L(e, n) {
v = setTimeout((function() {
e(t.unstable_now());
}), n);
}
t.unstable_IdlePriority = 5, t.unstable_ImmediatePriority = 1, t.unstable_LowPriority = 4, 
t.unstable_NormalPriority = 3, t.unstable_Profiling = null, t.unstable_UserBlockingPriority = 2, 
t.unstable_cancelCallback = function(e) {
e.callback = null;
}, t.unstable_continueExecution = function() {
h || f || (h = !0, A(I));
}, t.unstable_forceFrameRate = function(e) {
0 > e || 125 < e ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : T = 0 < e ? Math.floor(1e3 / e) : 5;
}, t.unstable_getCurrentPriorityLevel = function() {
return p;
}, t.unstable_getFirstCallbackNode = function() {
return r(l);
}, t.unstable_next = function(e) {
switch (p) {
case 1:
case 2:
case 3:
var t = 3;
break;

default:
t = p;
}
var n = p;
p = t;
try {
return e();
} finally {
p = n;
}
}, t.unstable_pauseExecution = function() {}, t.unstable_requestPaint = function() {}, 
t.unstable_runWithPriority = function(e, t) {
switch (e) {
case 1:
case 2:
case 3:
case 4:
case 5:
break;

default:
e = 3;
}
var n = p;
p = e;
try {
return t();
} finally {
p = n;
}
}, t.unstable_scheduleCallback = function(e, i, o) {
var a = t.unstable_now();
switch ("object" == typeof o && null !== o ? o = "number" == typeof (o = o.delay) && 0 < o ? a + o : a : o = a, 
e) {
case 1:
var s = -1;
break;

case 2:
s = 250;
break;

case 5:
s = 1073741823;
break;

case 4:
s = 1e4;
break;

default:
s = 5e3;
}
return e = {
id: d++,
callback: i,
priorityLevel: e,
startTime: o,
expirationTime: s = o + s,
sortIndex: -1
}, o > a ? (e.sortIndex = o, n(c, e), null === r(l) && e === r(c) && (m ? (clearTimeout(v), 
v = -1) : m = !0, L(y, o - a))) : (e.sortIndex = s, n(l, e), h || f || (h = !0, 
A(I))), e;
}, t.unstable_shouldYield = P, t.unstable_wrapCallback = function(e) {
var t = p;
return function() {
var n = p;
p = t;
try {
return e.apply(this, arguments);
} finally {
p = n;
}
};
};
})), Wo = (t((function(e, t) {})), t((function(e) {
e.exports = Ko;
}))), Xo = function(e) {
var t = {}, n = H, r = Wo, i = Object.assign;
function o(e) {
for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++) t += "&args[]=" + encodeURIComponent(arguments[n]);
return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
}
var a = n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, s = Symbol.for("react.element"), l = Symbol.for("react.portal"), c = Symbol.for("react.fragment"), d = Symbol.for("react.strict_mode"), u = Symbol.for("react.profiler"), p = Symbol.for("react.provider"), f = Symbol.for("react.context"), h = Symbol.for("react.forward_ref"), m = Symbol.for("react.suspense"), g = Symbol.for("react.suspense_list"), y = Symbol.for("react.memo"), I = Symbol.for("react.lazy"), _ = Symbol.for("react.offscreen"), b = Symbol.iterator;
function S(e) {
return null === e || "object" != typeof e ? null : "function" == typeof (e = b && e[b] || e["@@iterator"]) ? e : null;
}
function v(e) {
if (null == e) return null;
if ("function" == typeof e) return e.displayName || e.name || null;
if ("string" == typeof e) return e;
switch (e) {
case c:
return "Fragment";

case l:
return "Portal";

case u:
return "Profiler";

case d:
return "StrictMode";

case m:
return "Suspense";

case g:
return "SuspenseList";
}
if ("object" == typeof e) switch (e.$$typeof) {
case f:
return (e.displayName || "Context") + ".Consumer";

case p:
return (e._context.displayName || "Context") + ".Provider";

case h:
var t = e.render;
return (e = e.displayName) || (e = "" !== (e = t.displayName || t.name || "") ? "ForwardRef(" + e + ")" : "ForwardRef"), 
e;

case y:
return null !== (t = e.displayName || null) ? t : v(e.type) || "Memo";

case I:
t = e._payload, e = e._init;
try {
return v(e(t));
} catch (e) {}
}
return null;
}
function T(e) {
var t = e.type;
switch (e.tag) {
case 24:
return "Cache";

case 9:
return (t.displayName || "Context") + ".Consumer";

case 10:
return (t._context.displayName || "Context") + ".Provider";

case 18:
return "DehydratedFragment";

case 11:
return e = (e = t.render).displayName || e.name || "", t.displayName || ("" !== e ? "ForwardRef(" + e + ")" : "ForwardRef");

case 7:
return "Fragment";

case 5:
return t;

case 4:
return "Portal";

case 3:
return "Root";

case 6:
return "Text";

case 16:
return v(t);

case 8:
return t === d ? "StrictMode" : "Mode";

case 22:
return "Offscreen";

case 12:
return "Profiler";

case 21:
return "Scope";

case 13:
return "Suspense";

case 19:
return "SuspenseList";

case 25:
return "TracingMarker";

case 1:
case 0:
case 17:
case 2:
case 14:
case 15:
if ("function" == typeof t) return t.displayName || t.name || null;
if ("string" == typeof t) return t;
}
return null;
}
function E(e) {
var t = e, n = e;
if (e.alternate) for (;t.return; ) t = t.return; else {
e = t;
do {
0 != (4098 & (t = e).flags) && (n = t.return), e = t.return;
} while (e);
}
return 3 === t.tag ? n : null;
}
function P(e) {
if (E(e) !== e) throw Error(o(188));
}
function O(e) {
var t = e.alternate;
if (!t) {
if (null === (t = E(e))) throw Error(o(188));
return t !== e ? null : e;
}
for (var n = e, r = t; ;) {
var i = n.return;
if (null === i) break;
var a = i.alternate;
if (null === a) {
if (null !== (r = i.return)) {
n = r;
continue;
}
break;
}
if (i.child === a.child) {
for (a = i.child; a; ) {
if (a === n) return P(i), e;
if (a === r) return P(i), t;
a = a.sibling;
}
throw Error(o(188));
}
if (n.return !== r.return) n = i, r = a; else {
for (var s = !1, l = i.child; l; ) {
if (l === n) {
s = !0, n = i, r = a;
break;
}
if (l === r) {
s = !0, r = i, n = a;
break;
}
l = l.sibling;
}
if (!s) {
for (l = a.child; l; ) {
if (l === n) {
s = !0, n = a, r = i;
break;
}
if (l === r) {
s = !0, r = a, n = i;
break;
}
l = l.sibling;
}
if (!s) throw Error(o(189));
}
}
if (n.alternate !== r) throw Error(o(190));
}
if (3 !== n.tag) throw Error(o(188));
return n.stateNode.current === n ? e : t;
}
function C(e) {
return null !== (e = O(e)) ? N(e) : null;
}
function N(e) {
if (5 === e.tag || 6 === e.tag) return e;
for (e = e.child; null !== e; ) {
var t = N(e);
if (null !== t) return t;
e = e.sibling;
}
return null;
}
function A(e) {
if (5 === e.tag || 6 === e.tag) return e;
for (e = e.child; null !== e; ) {
if (4 !== e.tag) {
var t = A(e);
if (null !== t) return t;
}
e = e.sibling;
}
return null;
}
var L, w = Array.isArray, k = e.getPublicInstance, R = e.getRootHostContext, x = e.getChildHostContext, B = e.prepareForCommit, D = e.resetAfterCommit, F = e.createInstance, M = e.appendInitialChild, U = e.finalizeInitialChildren, V = e.prepareUpdate, J = e.shouldSetTextContent, G = e.createTextInstance, z = e.scheduleTimeout, j = e.cancelTimeout, q = e.noTimeout, Y = e.isPrimaryRenderer, K = e.supportsMutation, W = e.supportsPersistence, X = e.supportsHydration, Q = e.getInstanceFromNode, $ = e.preparePortalMount, Z = e.getCurrentEventPriority, ee = e.detachDeletedInstance, te = e.supportsMicrotasks, ne = e.scheduleMicrotask, re = e.supportsTestSelectors, ie = e.findFiberRoot, oe = e.getBoundingRect, ae = e.getTextContent, se = e.isHiddenSubtree, le = e.matchAccessibilityRole, ce = e.setFocusIfFocusable, de = e.setupIntersectionObserver, ue = e.appendChild, pe = e.appendChildToContainer, fe = e.commitTextUpdate, he = e.commitMount, me = e.commitUpdate, ge = e.insertBefore, ye = e.insertInContainerBefore, Ie = e.removeChild, _e = e.removeChildFromContainer, be = e.resetTextContent, Se = e.hideInstance, ve = e.hideTextInstance, Te = e.unhideInstance, Ee = e.unhideTextInstance, Pe = e.clearContainer, Oe = e.cloneInstance, Ce = e.createContainerChildSet, Ne = e.appendChildToContainerChildSet, Ae = e.finalizeContainerChildren, Le = e.replaceContainerChildren, we = e.cloneHiddenInstance, ke = e.cloneHiddenTextInstance, Re = e.canHydrateInstance, xe = e.canHydrateTextInstance, Be = e.canHydrateSuspenseInstance, De = e.isSuspenseInstancePending, Fe = e.isSuspenseInstanceFallback, Me = e.getSuspenseInstanceFallbackErrorDetails, Ue = e.registerSuspenseInstanceRetry, He = e.getNextHydratableSibling, Ve = e.getFirstHydratableChild, Je = e.getFirstHydratableChildWithinContainer, Ge = e.getFirstHydratableChildWithinSuspenseInstance, ze = e.hydrateInstance, je = e.hydrateTextInstance, qe = e.hydrateSuspenseInstance, Ye = e.getNextHydratableInstanceAfterSuspenseInstance, Ke = e.commitHydratedContainer, We = e.commitHydratedSuspenseInstance, Xe = e.clearSuspenseBoundary, Qe = e.clearSuspenseBoundaryFromContainer, $e = e.shouldDeleteUnhydratedTailInstances, Ze = e.didNotMatchHydratedContainerTextInstance, et = e.didNotMatchHydratedTextInstance;
function tt(e) {
if (void 0 === L) try {
throw Error();
} catch (e) {
var t = e.stack.trim().match(/\n( *(at )?)/);
L = t && t[1] || "";
}
return "\n" + L + e;
}
var nt = !1;
function rt(e, t) {
if (!e || nt) return "";
nt = !0;
var n = Error.prepareStackTrace;
Error.prepareStackTrace = void 0;
try {
if (t) if (t = function() {
throw Error();
}, Object.defineProperty(t.prototype, "props", {
set: function() {
throw Error();
}
}), "object" == typeof Reflect && Reflect.construct) {
try {
Reflect.construct(t, []);
} catch (e) {
var r = e;
}
Reflect.construct(e, [], t);
} else {
try {
t.call();
} catch (e) {
r = e;
}
e.call(t.prototype);
} else {
try {
throw Error();
} catch (e) {
r = e;
}
e();
}
} catch (t) {
if (t && r && "string" == typeof t.stack) {
for (var i = t.stack.split("\n"), o = r.stack.split("\n"), a = i.length - 1, s = o.length - 1; 1 <= a && 0 <= s && i[a] !== o[s]; ) s--;
for (;1 <= a && 0 <= s; a--, s--) if (i[a] !== o[s]) {
if (1 !== a || 1 !== s) do {
if (a--, 0 > --s || i[a] !== o[s]) {
var l = "\n" + i[a].replace(" at new ", " at ");
return e.displayName && l.includes("<anonymous>") && (l = l.replace("<anonymous>", e.displayName)), 
l;
}
} while (1 <= a && 0 <= s);
break;
}
}
} finally {
nt = !1, Error.prepareStackTrace = n;
}
return (e = e ? e.displayName || e.name : "") ? tt(e) : "";
}
var it = Object.prototype.hasOwnProperty, ot = [], at = -1;
function st(e) {
return {
current: e
};
}
function lt(e) {
0 > at || (e.current = ot[at], ot[at] = null, at--);
}
function ct(e, t) {
at++, ot[at] = e.current, e.current = t;
}
var dt = {}, ut = st(dt), pt = st(!1), ft = dt;
function ht(e, t) {
var n = e.type.contextTypes;
if (!n) return dt;
var r = e.stateNode;
if (r && r.__reactInternalMemoizedUnmaskedChildContext === t) return r.__reactInternalMemoizedMaskedChildContext;
var i, o = {};
for (i in n) o[i] = t[i];
return r && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = t, 
e.__reactInternalMemoizedMaskedChildContext = o), o;
}
function mt(e) {
return null != (e = e.childContextTypes);
}
function gt() {
lt(pt), lt(ut);
}
function yt(e, t, n) {
if (ut.current !== dt) throw Error(o(168));
ct(ut, t), ct(pt, n);
}
function It(e, t, n) {
var r = e.stateNode;
if (t = t.childContextTypes, "function" != typeof r.getChildContext) return n;
for (var a in r = r.getChildContext()) if (!(a in t)) throw Error(o(108, T(e) || "Unknown", a));
return i({}, n, r);
}
function _t(e) {
return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || dt, 
ft = ut.current, ct(ut, e), ct(pt, pt.current), !0;
}
function bt(e, t, n) {
var r = e.stateNode;
if (!r) throw Error(o(169));
n ? (e = It(e, t, ft), r.__reactInternalMemoizedMergedChildContext = e, lt(pt), 
lt(ut), ct(ut, e)) : lt(pt), ct(pt, n);
}
var St = Math.clz32 ? Math.clz32 : function(e) {
return 0 === (e >>>= 0) ? 32 : 31 - (vt(e) / Tt | 0) | 0;
}, vt = Math.log, Tt = Math.LN2;
var Et = 64, Pt = 4194304;
function Ot(e) {
switch (e & -e) {
case 1:
return 1;

case 2:
return 2;

case 4:
return 4;

case 8:
return 8;

case 16:
return 16;

case 32:
return 32;

case 64:
case 128:
case 256:
case 512:
case 1024:
case 2048:
case 4096:
case 8192:
case 16384:
case 32768:
case 65536:
case 131072:
case 262144:
case 524288:
case 1048576:
case 2097152:
return 4194240 & e;

case 4194304:
case 8388608:
case 16777216:
case 33554432:
case 67108864:
return 130023424 & e;

case 134217728:
return 134217728;

case 268435456:
return 268435456;

case 536870912:
return 536870912;

case 1073741824:
return 1073741824;

default:
return e;
}
}
function Ct(e, t) {
var n = e.pendingLanes;
if (0 === n) return 0;
var r = 0, i = e.suspendedLanes, o = e.pingedLanes, a = 268435455 & n;
if (0 !== a) {
var s = a & ~i;
0 !== s ? r = Ot(s) : 0 !== (o &= a) && (r = Ot(o));
} else 0 !== (a = n & ~i) ? r = Ot(a) : 0 !== o && (r = Ot(o));
if (0 === r) return 0;
if (0 !== t && t !== r && 0 == (t & i) && ((i = r & -r) >= (o = t & -t) || 16 === i && 0 != (4194240 & o))) return t;
if (0 != (4 & r) && (r |= 16 & n), 0 !== (t = e.entangledLanes)) for (e = e.entanglements, 
t &= r; 0 < t; ) i = 1 << (n = 31 - St(t)), r |= e[n], t &= ~i;
return r;
}
function Nt(e, t) {
switch (e) {
case 1:
case 2:
case 4:
return t + 250;

case 8:
case 16:
case 32:
case 64:
case 128:
case 256:
case 512:
case 1024:
case 2048:
case 4096:
case 8192:
case 16384:
case 32768:
case 65536:
case 131072:
case 262144:
case 524288:
case 1048576:
case 2097152:
return t + 5e3;

default:
return -1;
}
}
function At(e, t) {
for (var n = e.suspendedLanes, r = e.pingedLanes, i = e.expirationTimes, o = e.pendingLanes; 0 < o; ) {
var a = 31 - St(o), s = 1 << a, l = i[a];
-1 === l ? 0 != (s & n) && 0 == (s & r) || (i[a] = Nt(s, t)) : l <= t && (e.expiredLanes |= s), 
o &= ~s;
}
}
function Lt(e) {
return 0 !== (e = -1073741825 & e.pendingLanes) ? e : 1073741824 & e ? 1073741824 : 0;
}
function wt() {
var e = Et;
return 0 == (4194240 & (Et <<= 1)) && (Et = 64), e;
}
function kt(e) {
for (var t = [], n = 0; 31 > n; n++) t.push(e);
return t;
}
function Rt(e, t, n) {
e.pendingLanes |= t, 536870912 !== t && (e.suspendedLanes = 0, e.pingedLanes = 0), 
(e = e.eventTimes)[t = 31 - St(t)] = n;
}
function xt(e, t) {
var n = e.pendingLanes & ~t;
e.pendingLanes = t, e.suspendedLanes = 0, e.pingedLanes = 0, e.expiredLanes &= t, 
e.mutableReadLanes &= t, e.entangledLanes &= t, t = e.entanglements;
var r = e.eventTimes;
for (e = e.expirationTimes; 0 < n; ) {
var i = 31 - St(n), o = 1 << i;
t[i] = 0, r[i] = -1, e[i] = -1, n &= ~o;
}
}
function Bt(e, t) {
var n = e.entangledLanes |= t;
for (e = e.entanglements; n; ) {
var r = 31 - St(n), i = 1 << r;
i & t | e[r] & t && (e[r] |= t), n &= ~i;
}
}
var Dt = 0;
function Ft(e) {
return 1 < (e &= -e) ? 4 < e ? 0 != (268435455 & e) ? 16 : 536870912 : 4 : 1;
}
var Mt = r.unstable_scheduleCallback, Ut = r.unstable_cancelCallback, Ht = r.unstable_shouldYield, Vt = r.unstable_requestPaint, Jt = r.unstable_now, Gt = r.unstable_ImmediatePriority, zt = r.unstable_UserBlockingPriority, jt = r.unstable_NormalPriority, qt = r.unstable_IdlePriority, Yt = null, Kt = null;
function Wt(e) {
if (Kt && "function" == typeof Kt.onCommitFiberRoot) try {
Kt.onCommitFiberRoot(Yt, e, void 0, 128 == (128 & e.current.flags));
} catch (e) {}
}
var Xt = "function" == typeof Object.is ? Object.is : function(e, t) {
return e === t && (0 !== e || 1 / e == 1 / t) || e != e && t != t;
}, Qt = null, $t = !1, Zt = !1;
function en(e) {
null === Qt ? Qt = [ e ] : Qt.push(e);
}
function tn(e) {
$t = !0, en(e);
}
function nn() {
if (!Zt && null !== Qt) {
Zt = !0;
var e = 0, t = Dt;
try {
var n = Qt;
for (Dt = 1; e < n.length; e++) {
var r = n[e];
do {
r = r(!0);
} while (null !== r);
}
Qt = null, $t = !1;
} catch (t) {
throw null !== Qt && (Qt = Qt.slice(e + 1)), Mt(Gt, nn), t;
} finally {
Dt = t, Zt = !1;
}
}
return null;
}
var rn = [], on = 0, an = null, sn = 0, ln = [], cn = 0, dn = null, un = 1, pn = "";
function fn(e, t) {
rn[on++] = sn, rn[on++] = an, an = e, sn = t;
}
function hn(e, t, n) {
ln[cn++] = un, ln[cn++] = pn, ln[cn++] = dn, dn = e;
var r = un;
e = pn;
var i = 32 - St(r) - 1;
r &= ~(1 << i), n += 1;
var o = 32 - St(t) + i;
if (30 < o) {
var a = i - i % 5;
o = (r & (1 << a) - 1).toString(32), r >>= a, i -= a, un = 1 << 32 - St(t) + i | n << i | r, 
pn = o + e;
} else un = 1 << o | n << i | r, pn = e;
}
function mn(e) {
null !== e.return && (fn(e, 1), hn(e, 1, 0));
}
function gn(e) {
for (;e === an; ) an = rn[--on], rn[on] = null, sn = rn[--on], rn[on] = null;
for (;e === dn; ) dn = ln[--cn], ln[cn] = null, pn = ln[--cn], ln[cn] = null, un = ln[--cn], 
ln[cn] = null;
}
var yn = null, In = null, _n = !1, bn = !1, Sn = null;
function vn(e, t) {
var n = ys(5, null, null, 0);
n.elementType = "DELETED", n.stateNode = t, n.return = e, null === (t = e.deletions) ? (e.deletions = [ n ], 
e.flags |= 16) : t.push(n);
}
function Tn(e, t) {
switch (e.tag) {
case 5:
return null !== (t = Re(t, e.type, e.pendingProps)) && (e.stateNode = t, yn = e, 
In = Ve(t), !0);

case 6:
return null !== (t = xe(t, e.pendingProps)) && (e.stateNode = t, yn = e, In = null, 
!0);

case 13:
if (null !== (t = Be(t))) {
var n = null !== dn ? {
id: un,
overflow: pn
} : null;
return e.memoizedState = {
dehydrated: t,
treeContext: n,
retryLane: 1073741824
}, (n = ys(18, null, null, 0)).stateNode = t, n.return = e, e.child = n, yn = e, 
In = null, !0;
}
return !1;

default:
return !1;
}
}
function En(e) {
return 0 != (1 & e.mode) && 0 == (128 & e.flags);
}
function Pn(e) {
if (_n) {
var t = In;
if (t) {
var n = t;
if (!Tn(e, t)) {
if (En(e)) throw Error(o(418));
t = He(n);
var r = yn;
t && Tn(e, t) ? vn(r, n) : (e.flags = -4097 & e.flags | 2, _n = !1, yn = e);
}
} else {
if (En(e)) throw Error(o(418));
e.flags = -4097 & e.flags | 2, _n = !1, yn = e;
}
}
}
function On(e) {
for (e = e.return; null !== e && 5 !== e.tag && 3 !== e.tag && 13 !== e.tag; ) e = e.return;
yn = e;
}
function Cn(e) {
if (!X || e !== yn) return !1;
if (!_n) return On(e), _n = !0, !1;
if (3 !== e.tag && (5 !== e.tag || $e(e.type) && !J(e.type, e.memoizedProps))) {
var t = In;
if (t) {
if (En(e)) throw Nn(), Error(o(418));
for (;t; ) vn(e, t), t = He(t);
}
}
if (On(e), 13 === e.tag) {
if (!X) throw Error(o(316));
if (!(e = null !== (e = e.memoizedState) ? e.dehydrated : null)) throw Error(o(317));
In = Ye(e);
} else In = yn ? He(e.stateNode) : null;
return !0;
}
function Nn() {
for (var e = In; e; ) e = He(e);
}
function An() {
X && (In = yn = null, bn = _n = !1);
}
function Ln(e) {
null === Sn ? Sn = [ e ] : Sn.push(e);
}
var wn = a.ReactCurrentBatchConfig;
function kn(e, t) {
if (Xt(e, t)) return !0;
if ("object" != typeof e || null === e || "object" != typeof t || null === t) return !1;
var n = Object.keys(e), r = Object.keys(t);
if (n.length !== r.length) return !1;
for (r = 0; r < n.length; r++) {
var i = n[r];
if (!it.call(t, i) || !Xt(e[i], t[i])) return !1;
}
return !0;
}
function Rn(e) {
switch (e.tag) {
case 5:
return tt(e.type);

case 16:
return tt("Lazy");

case 13:
return tt("Suspense");

case 19:
return tt("SuspenseList");

case 0:
case 2:
case 15:
return e = rt(e.type, !1);

case 11:
return e = rt(e.type.render, !1);

case 1:
return e = rt(e.type, !0);

default:
return "";
}
}
function xn(e, t) {
if (e && e.defaultProps) {
for (var n in t = i({}, t), e = e.defaultProps) void 0 === t[n] && (t[n] = e[n]);
return t;
}
return t;
}
var Bn = st(null), Dn = null, Fn = null, Mn = null;
function Un() {
Mn = Fn = Dn = null;
}
function Hn(e, t, n) {
Y ? (ct(Bn, t._currentValue), t._currentValue = n) : (ct(Bn, t._currentValue2), 
t._currentValue2 = n);
}
function Vn(e) {
var t = Bn.current;
lt(Bn), Y ? e._currentValue = t : e._currentValue2 = t;
}
function Jn(e, t, n) {
for (;null !== e; ) {
var r = e.alternate;
if ((e.childLanes & t) !== t ? (e.childLanes |= t, null !== r && (r.childLanes |= t)) : null !== r && (r.childLanes & t) !== t && (r.childLanes |= t), 
e === n) break;
e = e.return;
}
}
function Gn(e, t) {
Dn = e, Mn = Fn = null, null !== (e = e.dependencies) && null !== e.firstContext && (0 != (e.lanes & t) && (Mi = !0), 
e.firstContext = null);
}
function zn(e) {
var t = Y ? e._currentValue : e._currentValue2;
if (Mn !== e) if (e = {
context: e,
memoizedValue: t,
next: null
}, null === Fn) {
if (null === Dn) throw Error(o(308));
Fn = e, Dn.dependencies = {
lanes: 0,
firstContext: e
};
} else Fn = Fn.next = e;
return t;
}
var jn = null;
function qn(e) {
null === jn ? jn = [ e ] : jn.push(e);
}
function Yn(e, t, n, r) {
var i = t.interleaved;
return null === i ? (n.next = n, qn(t)) : (n.next = i.next, i.next = n), t.interleaved = n, 
Kn(e, r);
}
function Kn(e, t) {
e.lanes |= t;
var n = e.alternate;
for (null !== n && (n.lanes |= t), n = e, e = e.return; null !== e; ) e.childLanes |= t, 
null !== (n = e.alternate) && (n.childLanes |= t), n = e, e = e.return;
return 3 === n.tag ? n.stateNode : null;
}
var Wn = !1;
function Xn(e) {
e.updateQueue = {
baseState: e.memoizedState,
firstBaseUpdate: null,
lastBaseUpdate: null,
shared: {
pending: null,
interleaved: null,
lanes: 0
},
effects: null
};
}
function Qn(e, t) {
e = e.updateQueue, t.updateQueue === e && (t.updateQueue = {
baseState: e.baseState,
firstBaseUpdate: e.firstBaseUpdate,
lastBaseUpdate: e.lastBaseUpdate,
shared: e.shared,
effects: e.effects
});
}
function $n(e, t) {
return {
eventTime: e,
lane: t,
tag: 0,
payload: null,
callback: null,
next: null
};
}
function Zn(e, t, n) {
var r = e.updateQueue;
if (null === r) return null;
if (r = r.shared, 0 != (2 & ua)) {
var i = r.pending;
return null === i ? t.next = t : (t.next = i.next, i.next = t), r.pending = t, Kn(e, n);
}
return null === (i = r.interleaved) ? (t.next = t, qn(r)) : (t.next = i.next, i.next = t), 
r.interleaved = t, Kn(e, n);
}
function er(e, t, n) {
if (null !== (t = t.updateQueue) && (t = t.shared, 0 != (4194240 & n))) {
var r = t.lanes;
n |= r &= e.pendingLanes, t.lanes = n, Bt(e, n);
}
}
function tr(e, t) {
var n = e.updateQueue, r = e.alternate;
if (null !== r && n === (r = r.updateQueue)) {
var i = null, o = null;
if (null !== (n = n.firstBaseUpdate)) {
do {
var a = {
eventTime: n.eventTime,
lane: n.lane,
tag: n.tag,
payload: n.payload,
callback: n.callback,
next: null
};
null === o ? i = o = a : o = o.next = a, n = n.next;
} while (null !== n);
null === o ? i = o = t : o = o.next = t;
} else i = o = t;
return n = {
baseState: r.baseState,
firstBaseUpdate: i,
lastBaseUpdate: o,
shared: r.shared,
effects: r.effects
}, void (e.updateQueue = n);
}
null === (e = n.lastBaseUpdate) ? n.firstBaseUpdate = t : e.next = t, n.lastBaseUpdate = t;
}
function nr(e, t, n, r) {
var o = e.updateQueue;
Wn = !1;
var a = o.firstBaseUpdate, s = o.lastBaseUpdate, l = o.shared.pending;
if (null !== l) {
o.shared.pending = null;
var c = l, d = c.next;
c.next = null, null === s ? a = d : s.next = d, s = c;
var u = e.alternate;
null !== u && ((l = (u = u.updateQueue).lastBaseUpdate) !== s && (null === l ? u.firstBaseUpdate = d : l.next = d, 
u.lastBaseUpdate = c));
}
if (null !== a) {
var p = o.baseState;
for (s = 0, u = d = c = null, l = a; ;) {
var f = l.lane, h = l.eventTime;
if ((r & f) === f) {
null !== u && (u = u.next = {
eventTime: h,
lane: 0,
tag: l.tag,
payload: l.payload,
callback: l.callback,
next: null
});
e: {
var m = e, g = l;
switch (f = t, h = n, g.tag) {
case 1:
if ("function" == typeof (m = g.payload)) {
p = m.call(h, p, f);
break e;
}
p = m;
break e;

case 3:
m.flags = -65537 & m.flags | 128;

case 0:
if (null == (f = "function" == typeof (m = g.payload) ? m.call(h, p, f) : m)) break e;
p = i({}, p, f);
break e;

case 2:
Wn = !0;
}
}
null !== l.callback && 0 !== l.lane && (e.flags |= 64, null === (f = o.effects) ? o.effects = [ l ] : f.push(l));
} else h = {
eventTime: h,
lane: f,
tag: l.tag,
payload: l.payload,
callback: l.callback,
next: null
}, null === u ? (d = u = h, c = p) : u = u.next = h, s |= f;
if (null === (l = l.next)) {
if (null === (l = o.shared.pending)) break;
l = (f = l).next, f.next = null, o.lastBaseUpdate = f, o.shared.pending = null;
}
}
if (null === u && (c = p), o.baseState = c, o.firstBaseUpdate = d, o.lastBaseUpdate = u, 
null !== (t = o.shared.interleaved)) {
o = t;
do {
s |= o.lane, o = o.next;
} while (o !== t);
} else null === a && (o.shared.lanes = 0);
_a |= s, e.lanes = s, e.memoizedState = p;
}
}
function rr(e, t, n) {
if (e = t.effects, t.effects = null, null !== e) for (t = 0; t < e.length; t++) {
var r = e[t], i = r.callback;
if (null !== i) {
if (r.callback = null, r = n, "function" != typeof i) throw Error(o(191, i));
i.call(r);
}
}
}
var ir = (new n.Component).refs;
function or(e, t, n, r) {
n = null == (n = n(r, t = e.memoizedState)) ? t : i({}, t, n), e.memoizedState = n, 
0 === e.lanes && (e.updateQueue.baseState = n);
}
var ar = {
isMounted: function(e) {
return !!(e = e._reactInternals) && E(e) === e;
},
enqueueSetState: function(e, t, n) {
e = e._reactInternals;
var r = Ua(), i = Ha(e), o = $n(r, i);
o.payload = t, null != n && (o.callback = n), null !== (t = Zn(e, o, i)) && (Va(t, e, i, r), 
er(t, e, i));
},
enqueueReplaceState: function(e, t, n) {
e = e._reactInternals;
var r = Ua(), i = Ha(e), o = $n(r, i);
o.tag = 1, o.payload = t, null != n && (o.callback = n), null !== (t = Zn(e, o, i)) && (Va(t, e, i, r), 
er(t, e, i));
},
enqueueForceUpdate: function(e, t) {
e = e._reactInternals;
var n = Ua(), r = Ha(e), i = $n(n, r);
i.tag = 2, null != t && (i.callback = t), null !== (t = Zn(e, i, r)) && (Va(t, e, r, n), 
er(t, e, r));
}
};
function sr(e, t, n, r, i, o, a) {
return "function" == typeof (e = e.stateNode).shouldComponentUpdate ? e.shouldComponentUpdate(r, o, a) : !t.prototype || !t.prototype.isPureReactComponent || (!kn(n, r) || !kn(i, o));
}
function lr(e, t, n) {
var r = !1, i = dt, o = t.contextType;
return "object" == typeof o && null !== o ? o = zn(o) : (i = mt(t) ? ft : ut.current, 
o = (r = null != (r = t.contextTypes)) ? ht(e, i) : dt), t = new t(n, o), e.memoizedState = null !== t.state && void 0 !== t.state ? t.state : null, 
t.updater = ar, e.stateNode = t, t._reactInternals = e, r && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = i, 
e.__reactInternalMemoizedMaskedChildContext = o), t;
}
function cr(e, t, n, r) {
e = t.state, "function" == typeof t.componentWillReceiveProps && t.componentWillReceiveProps(n, r), 
"function" == typeof t.UNSAFE_componentWillReceiveProps && t.UNSAFE_componentWillReceiveProps(n, r), 
t.state !== e && ar.enqueueReplaceState(t, t.state, null);
}
function dr(e, t, n, r) {
var i = e.stateNode;
i.props = n, i.state = e.memoizedState, i.refs = ir, Xn(e);
var o = t.contextType;
"object" == typeof o && null !== o ? i.context = zn(o) : (o = mt(t) ? ft : ut.current, 
i.context = ht(e, o)), i.state = e.memoizedState, "function" == typeof (o = t.getDerivedStateFromProps) && (or(e, t, o, n), 
i.state = e.memoizedState), "function" == typeof t.getDerivedStateFromProps || "function" == typeof i.getSnapshotBeforeUpdate || "function" != typeof i.UNSAFE_componentWillMount && "function" != typeof i.componentWillMount || (t = i.state, 
"function" == typeof i.componentWillMount && i.componentWillMount(), "function" == typeof i.UNSAFE_componentWillMount && i.UNSAFE_componentWillMount(), 
t !== i.state && ar.enqueueReplaceState(i, i.state, null), nr(e, n, i, r), i.state = e.memoizedState), 
"function" == typeof i.componentDidMount && (e.flags |= 4194308);
}
function ur(e, t, n) {
if (null !== (e = n.ref) && "function" != typeof e && "object" != typeof e) {
if (n._owner) {
if (n = n._owner) {
if (1 !== n.tag) throw Error(o(309));
var r = n.stateNode;
}
if (!r) throw Error(o(147, e));
var i = r, a = "" + e;
return null !== t && null !== t.ref && "function" == typeof t.ref && t.ref._stringRef === a ? t.ref : (t = function(e) {
var t = i.refs;
t === ir && (t = i.refs = {}), null === e ? delete t[a] : t[a] = e;
}, t._stringRef = a, t);
}
if ("string" != typeof e) throw Error(o(284));
if (!n._owner) throw Error(o(290, e));
}
return e;
}
function pr(e, t) {
throw e = Object.prototype.toString.call(t), Error(o(31, "[object Object]" === e ? "object with keys {" + Object.keys(t).join(", ") + "}" : e));
}
function fr(e) {
return (0, e._init)(e._payload);
}
function hr(e) {
function t(t, n) {
if (e) {
var r = t.deletions;
null === r ? (t.deletions = [ n ], t.flags |= 16) : r.push(n);
}
}
function n(n, r) {
if (!e) return null;
for (;null !== r; ) t(n, r), r = r.sibling;
return null;
}
function r(e, t) {
for (e = new Map; null !== t; ) null !== t.key ? e.set(t.key, t) : e.set(t.index, t), 
t = t.sibling;
return e;
}
function i(e, t) {
return (e = bs(e, t)).index = 0, e.sibling = null, e;
}
function a(t, n, r) {
return t.index = r, e ? null !== (r = t.alternate) ? (r = r.index) < n ? (t.flags |= 2, 
n) : r : (t.flags |= 2, n) : (t.flags |= 1048576, n);
}
function d(t) {
return e && null === t.alternate && (t.flags |= 2), t;
}
function u(e, t, n, r) {
return null === t || 6 !== t.tag ? ((t = Es(n, e.mode, r)).return = e, t) : ((t = i(t, n)).return = e, 
t);
}
function p(e, t, n, r) {
var o = n.type;
return o === c ? h(e, t, n.props.children, r, n.key) : null !== t && (t.elementType === o || "object" == typeof o && null !== o && o.$$typeof === I && fr(o) === t.type) ? ((r = i(t, n.props)).ref = ur(e, t, n), 
r.return = e, r) : ((r = Ss(n.type, n.key, n.props, null, e.mode, r)).ref = ur(e, t, n), 
r.return = e, r);
}
function f(e, t, n, r) {
return null === t || 4 !== t.tag || t.stateNode.containerInfo !== n.containerInfo || t.stateNode.implementation !== n.implementation ? ((t = Ps(n, e.mode, r)).return = e, 
t) : ((t = i(t, n.children || [])).return = e, t);
}
function h(e, t, n, r, o) {
return null === t || 7 !== t.tag ? ((t = vs(n, e.mode, r, o)).return = e, t) : ((t = i(t, n)).return = e, 
t);
}
function m(e, t, n) {
if ("string" == typeof t && "" !== t || "number" == typeof t) return (t = Es("" + t, e.mode, n)).return = e, 
t;
if ("object" == typeof t && null !== t) {
switch (t.$$typeof) {
case s:
return (n = Ss(t.type, t.key, t.props, null, e.mode, n)).ref = ur(e, null, t), n.return = e, 
n;

case l:
return (t = Ps(t, e.mode, n)).return = e, t;

case I:
return m(e, (0, t._init)(t._payload), n);
}
if (w(t) || S(t)) return (t = vs(t, e.mode, n, null)).return = e, t;
pr(e, t);
}
return null;
}
function g(e, t, n, r) {
var i = null !== t ? t.key : null;
if ("string" == typeof n && "" !== n || "number" == typeof n) return null !== i ? null : u(e, t, "" + n, r);
if ("object" == typeof n && null !== n) {
switch (n.$$typeof) {
case s:
return n.key === i ? p(e, t, n, r) : null;

case l:
return n.key === i ? f(e, t, n, r) : null;

case I:
return g(e, t, (i = n._init)(n._payload), r);
}
if (w(n) || S(n)) return null !== i ? null : h(e, t, n, r, null);
pr(e, n);
}
return null;
}
function y(e, t, n, r, i) {
if ("string" == typeof r && "" !== r || "number" == typeof r) return u(t, e = e.get(n) || null, "" + r, i);
if ("object" == typeof r && null !== r) {
switch (r.$$typeof) {
case s:
return p(t, e = e.get(null === r.key ? n : r.key) || null, r, i);

case l:
return f(t, e = e.get(null === r.key ? n : r.key) || null, r, i);

case I:
return y(e, t, n, (0, r._init)(r._payload), i);
}
if (w(r) || S(r)) return h(t, e = e.get(n) || null, r, i, null);
pr(t, r);
}
return null;
}
function _(i, o, s, l) {
for (var c = null, d = null, u = o, p = o = 0, f = null; null !== u && p < s.length; p++) {
u.index > p ? (f = u, u = null) : f = u.sibling;
var h = g(i, u, s[p], l);
if (null === h) {
null === u && (u = f);
break;
}
e && u && null === h.alternate && t(i, u), o = a(h, o, p), null === d ? c = h : d.sibling = h, 
d = h, u = f;
}
if (p === s.length) return n(i, u), _n && fn(i, p), c;
if (null === u) {
for (;p < s.length; p++) null !== (u = m(i, s[p], l)) && (o = a(u, o, p), null === d ? c = u : d.sibling = u, 
d = u);
return _n && fn(i, p), c;
}
for (u = r(i, u); p < s.length; p++) null !== (f = y(u, i, p, s[p], l)) && (e && null !== f.alternate && u.delete(null === f.key ? p : f.key), 
o = a(f, o, p), null === d ? c = f : d.sibling = f, d = f);
return e && u.forEach((function(e) {
return t(i, e);
})), _n && fn(i, p), c;
}
function b(i, s, l, c) {
var d = S(l);
if ("function" != typeof d) throw Error(o(150));
if (null == (l = d.call(l))) throw Error(o(151));
for (var u = d = null, p = s, f = s = 0, h = null, I = l.next(); null !== p && !I.done; f++, 
I = l.next()) {
p.index > f ? (h = p, p = null) : h = p.sibling;
var _ = g(i, p, I.value, c);
if (null === _) {
null === p && (p = h);
break;
}
e && p && null === _.alternate && t(i, p), s = a(_, s, f), null === u ? d = _ : u.sibling = _, 
u = _, p = h;
}
if (I.done) return n(i, p), _n && fn(i, f), d;
if (null === p) {
for (;!I.done; f++, I = l.next()) null !== (I = m(i, I.value, c)) && (s = a(I, s, f), 
null === u ? d = I : u.sibling = I, u = I);
return _n && fn(i, f), d;
}
for (p = r(i, p); !I.done; f++, I = l.next()) null !== (I = y(p, i, f, I.value, c)) && (e && null !== I.alternate && p.delete(null === I.key ? f : I.key), 
s = a(I, s, f), null === u ? d = I : u.sibling = I, u = I);
return e && p.forEach((function(e) {
return t(i, e);
})), _n && fn(i, f), d;
}
return function e(r, o, a, u) {
if ("object" == typeof a && null !== a && a.type === c && null === a.key && (a = a.props.children), 
"object" == typeof a && null !== a) {
switch (a.$$typeof) {
case s:
e: {
for (var p = a.key, f = o; null !== f; ) {
if (f.key === p) {
if ((p = a.type) === c) {
if (7 === f.tag) {
n(r, f.sibling), (o = i(f, a.props.children)).return = r, r = o;
break e;
}
} else if (f.elementType === p || "object" == typeof p && null !== p && p.$$typeof === I && fr(p) === f.type) {
n(r, f.sibling), (o = i(f, a.props)).ref = ur(r, f, a), o.return = r, r = o;
break e;
}
n(r, f);
break;
}
t(r, f), f = f.sibling;
}
a.type === c ? ((o = vs(a.props.children, r.mode, u, a.key)).return = r, r = o) : ((u = Ss(a.type, a.key, a.props, null, r.mode, u)).ref = ur(r, o, a), 
u.return = r, r = u);
}
return d(r);

case l:
e: {
for (f = a.key; null !== o; ) {
if (o.key === f) {
if (4 === o.tag && o.stateNode.containerInfo === a.containerInfo && o.stateNode.implementation === a.implementation) {
n(r, o.sibling), (o = i(o, a.children || [])).return = r, r = o;
break e;
}
n(r, o);
break;
}
t(r, o), o = o.sibling;
}
(o = Ps(a, r.mode, u)).return = r, r = o;
}
return d(r);

case I:
return e(r, o, (f = a._init)(a._payload), u);
}
if (w(a)) return _(r, o, a, u);
if (S(a)) return b(r, o, a, u);
pr(r, a);
}
return "string" == typeof a && "" !== a || "number" == typeof a ? (a = "" + a, null !== o && 6 === o.tag ? (n(r, o.sibling), 
(o = i(o, a)).return = r, r = o) : (n(r, o), (o = Es(a, r.mode, u)).return = r, 
r = o), d(r)) : n(r, o);
};
}
var mr = hr(!0), gr = hr(!1), yr = {}, Ir = st(yr), _r = st(yr), br = st(yr);
function Sr(e) {
if (e === yr) throw Error(o(174));
return e;
}
function vr(e, t) {
ct(br, t), ct(_r, e), ct(Ir, yr), e = R(t), lt(Ir), ct(Ir, e);
}
function Tr() {
lt(Ir), lt(_r), lt(br);
}
function Er(e) {
var t = Sr(br.current), n = Sr(Ir.current);
n !== (t = x(n, e.type, t)) && (ct(_r, e), ct(Ir, t));
}
function Pr(e) {
_r.current === e && (lt(Ir), lt(_r));
}
var Or = st(0);
function Cr(e) {
for (var t = e; null !== t; ) {
if (13 === t.tag) {
var n = t.memoizedState;
if (null !== n && (null === (n = n.dehydrated) || De(n) || Fe(n))) return t;
} else if (19 === t.tag && void 0 !== t.memoizedProps.revealOrder) {
if (0 != (128 & t.flags)) return t;
} else if (null !== t.child) {
t.child.return = t, t = t.child;
continue;
}
if (t === e) break;
for (;null === t.sibling; ) {
if (null === t.return || t.return === e) return null;
t = t.return;
}
t.sibling.return = t.return, t = t.sibling;
}
return null;
}
var Nr = [];
function Ar() {
for (var e = 0; e < Nr.length; e++) {
var t = Nr[e];
Y ? t._workInProgressVersionPrimary = null : t._workInProgressVersionSecondary = null;
}
Nr.length = 0;
}
var Lr = a.ReactCurrentDispatcher, wr = a.ReactCurrentBatchConfig, kr = 0, Rr = null, xr = null, Br = null, Dr = !1, Fr = !1, Mr = 0, Ur = 0;
function Hr() {
throw Error(o(321));
}
function Vr(e, t) {
if (null === t) return !1;
for (var n = 0; n < t.length && n < e.length; n++) if (!Xt(e[n], t[n])) return !1;
return !0;
}
function Jr(e, t, n, r, i, a) {
if (kr = a, Rr = t, t.memoizedState = null, t.updateQueue = null, t.lanes = 0, Lr.current = null === e || null === e.memoizedState ? Pi : Oi, 
e = n(r, i), Fr) {
a = 0;
do {
if (Fr = !1, Mr = 0, 25 <= a) throw Error(o(301));
a += 1, Br = xr = null, t.updateQueue = null, Lr.current = Ci, e = n(r, i);
} while (Fr);
}
if (Lr.current = Ei, t = null !== xr && null !== xr.next, kr = 0, Br = xr = Rr = null, 
Dr = !1, t) throw Error(o(300));
return e;
}
function Gr() {
var e = 0 !== Mr;
return Mr = 0, e;
}
function zr() {
var e = {
memoizedState: null,
baseState: null,
baseQueue: null,
queue: null,
next: null
};
return null === Br ? Rr.memoizedState = Br = e : Br = Br.next = e, Br;
}
function jr() {
if (null === xr) {
var e = Rr.alternate;
e = null !== e ? e.memoizedState : null;
} else e = xr.next;
var t = null === Br ? Rr.memoizedState : Br.next;
if (null !== t) Br = t, xr = e; else {
if (null === e) throw Error(o(310));
e = {
memoizedState: (xr = e).memoizedState,
baseState: xr.baseState,
baseQueue: xr.baseQueue,
queue: xr.queue,
next: null
}, null === Br ? Rr.memoizedState = Br = e : Br = Br.next = e;
}
return Br;
}
function qr(e, t) {
return "function" == typeof t ? t(e) : t;
}
function Yr(e) {
var t = jr(), n = t.queue;
if (null === n) throw Error(o(311));
n.lastRenderedReducer = e;
var r = xr, i = r.baseQueue, a = n.pending;
if (null !== a) {
if (null !== i) {
var s = i.next;
i.next = a.next, a.next = s;
}
r.baseQueue = i = a, n.pending = null;
}
if (null !== i) {
a = i.next, r = r.baseState;
var l = s = null, c = null, d = a;
do {
var u = d.lane;
if ((kr & u) === u) null !== c && (c = c.next = {
lane: 0,
action: d.action,
hasEagerState: d.hasEagerState,
eagerState: d.eagerState,
next: null
}), r = d.hasEagerState ? d.eagerState : e(r, d.action); else {
var p = {
lane: u,
action: d.action,
hasEagerState: d.hasEagerState,
eagerState: d.eagerState,
next: null
};
null === c ? (l = c = p, s = r) : c = c.next = p, Rr.lanes |= u, _a |= u;
}
d = d.next;
} while (null !== d && d !== a);
null === c ? s = r : c.next = l, Xt(r, t.memoizedState) || (Mi = !0), t.memoizedState = r, 
t.baseState = s, t.baseQueue = c, n.lastRenderedState = r;
}
if (null !== (e = n.interleaved)) {
i = e;
do {
a = i.lane, Rr.lanes |= a, _a |= a, i = i.next;
} while (i !== e);
} else null === i && (n.lanes = 0);
return [ t.memoizedState, n.dispatch ];
}
function Kr(e) {
var t = jr(), n = t.queue;
if (null === n) throw Error(o(311));
n.lastRenderedReducer = e;
var r = n.dispatch, i = n.pending, a = t.memoizedState;
if (null !== i) {
n.pending = null;
var s = i = i.next;
do {
a = e(a, s.action), s = s.next;
} while (s !== i);
Xt(a, t.memoizedState) || (Mi = !0), t.memoizedState = a, null === t.baseQueue && (t.baseState = a), 
n.lastRenderedState = a;
}
return [ a, r ];
}
function Wr() {}
function Xr(e, t) {
var n = Rr, r = jr(), i = t(), a = !Xt(r.memoizedState, i);
if (a && (r.memoizedState = i, Mi = !0), r = r.queue, li(Zr.bind(null, n, r, e), [ e ]), 
r.getSnapshot !== t || a || null !== Br && 1 & Br.memoizedState.tag) {
if (n.flags |= 2048, ri(9, $r.bind(null, n, r, i, t), void 0, null), null === pa) throw Error(o(349));
0 != (30 & kr) || Qr(n, t, i);
}
return i;
}
function Qr(e, t, n) {
e.flags |= 16384, e = {
getSnapshot: t,
value: n
}, null === (t = Rr.updateQueue) ? (t = {
lastEffect: null,
stores: null
}, Rr.updateQueue = t, t.stores = [ e ]) : null === (n = t.stores) ? t.stores = [ e ] : n.push(e);
}
function $r(e, t, n, r) {
t.value = n, t.getSnapshot = r, ei(t) && ti(e);
}
function Zr(e, t, n) {
return n((function() {
ei(t) && ti(e);
}));
}
function ei(e) {
var t = e.getSnapshot;
e = e.value;
try {
var n = t();
return !Xt(e, n);
} catch (e) {
return !0;
}
}
function ti(e) {
var t = Kn(e, 1);
null !== t && Va(t, e, 1, -1);
}
function ni(e) {
var t = zr();
return "function" == typeof e && (e = e()), t.memoizedState = t.baseState = e, e = {
pending: null,
interleaved: null,
lanes: 0,
dispatch: null,
lastRenderedReducer: qr,
lastRenderedState: e
}, t.queue = e, e = e.dispatch = bi.bind(null, Rr, e), [ t.memoizedState, e ];
}
function ri(e, t, n, r) {
return e = {
tag: e,
create: t,
destroy: n,
deps: r,
next: null
}, null === (t = Rr.updateQueue) ? (t = {
lastEffect: null,
stores: null
}, Rr.updateQueue = t, t.lastEffect = e.next = e) : null === (n = t.lastEffect) ? t.lastEffect = e.next = e : (r = n.next, 
n.next = e, e.next = r, t.lastEffect = e), e;
}
function ii() {
return jr().memoizedState;
}
function oi(e, t, n, r) {
var i = zr();
Rr.flags |= e, i.memoizedState = ri(1 | t, n, void 0, void 0 === r ? null : r);
}
function ai(e, t, n, r) {
var i = jr();
r = void 0 === r ? null : r;
var o = void 0;
if (null !== xr) {
var a = xr.memoizedState;
if (o = a.destroy, null !== r && Vr(r, a.deps)) return void (i.memoizedState = ri(t, n, o, r));
}
Rr.flags |= e, i.memoizedState = ri(1 | t, n, o, r);
}
function si(e, t) {
return oi(8390656, 8, e, t);
}
function li(e, t) {
return ai(2048, 8, e, t);
}
function ci(e, t) {
return ai(4, 2, e, t);
}
function di(e, t) {
return ai(4, 4, e, t);
}
function ui(e, t) {
return "function" == typeof t ? (e = e(), t(e), function() {
t(null);
}) : null != t ? (e = e(), t.current = e, function() {
t.current = null;
}) : void 0;
}
function pi(e, t, n) {
return n = null != n ? n.concat([ e ]) : null, ai(4, 4, ui.bind(null, t, e), n);
}
function fi() {}
function hi(e, t) {
var n = jr();
t = void 0 === t ? null : t;
var r = n.memoizedState;
return null !== r && null !== t && Vr(t, r[1]) ? r[0] : (n.memoizedState = [ e, t ], 
e);
}
function mi(e, t) {
var n = jr();
t = void 0 === t ? null : t;
var r = n.memoizedState;
return null !== r && null !== t && Vr(t, r[1]) ? r[0] : (e = e(), n.memoizedState = [ e, t ], 
e);
}
function gi(e, t, n) {
return 0 == (21 & kr) ? (e.baseState && (e.baseState = !1, Mi = !0), e.memoizedState = n) : (Xt(n, t) || (n = wt(), 
Rr.lanes |= n, _a |= n, e.baseState = !0), t);
}
function yi(e, t) {
var n = Dt;
Dt = 0 !== n && 4 > n ? n : 4, e(!0);
var r = wr.transition;
wr.transition = {};
try {
e(!1), t();
} finally {
Dt = n, wr.transition = r;
}
}
function Ii() {
return jr().memoizedState;
}
function _i(e, t, n) {
var r = Ha(e);
if (n = {
lane: r,
action: n,
hasEagerState: !1,
eagerState: null,
next: null
}, Si(e)) vi(t, n); else if (null !== (n = Yn(e, t, n, r))) {
Va(n, e, r, Ua()), Ti(n, t, r);
}
}
function bi(e, t, n) {
var r = Ha(e), i = {
lane: r,
action: n,
hasEagerState: !1,
eagerState: null,
next: null
};
if (Si(e)) vi(t, i); else {
var o = e.alternate;
if (0 === e.lanes && (null === o || 0 === o.lanes) && null !== (o = t.lastRenderedReducer)) try {
var a = t.lastRenderedState, s = o(a, n);
if (i.hasEagerState = !0, i.eagerState = s, Xt(s, a)) {
var l = t.interleaved;
return null === l ? (i.next = i, qn(t)) : (i.next = l.next, l.next = i), void (t.interleaved = i);
}
} catch (e) {}
null !== (n = Yn(e, t, i, r)) && (Va(n, e, r, i = Ua()), Ti(n, t, r));
}
}
function Si(e) {
var t = e.alternate;
return e === Rr || null !== t && t === Rr;
}
function vi(e, t) {
Fr = Dr = !0;
var n = e.pending;
null === n ? t.next = t : (t.next = n.next, n.next = t), e.pending = t;
}
function Ti(e, t, n) {
if (0 != (4194240 & n)) {
var r = t.lanes;
n |= r &= e.pendingLanes, t.lanes = n, Bt(e, n);
}
}
var Ei = {
readContext: zn,
useCallback: Hr,
useContext: Hr,
useEffect: Hr,
useImperativeHandle: Hr,
useInsertionEffect: Hr,
useLayoutEffect: Hr,
useMemo: Hr,
useReducer: Hr,
useRef: Hr,
useState: Hr,
useDebugValue: Hr,
useDeferredValue: Hr,
useTransition: Hr,
useMutableSource: Hr,
useSyncExternalStore: Hr,
useId: Hr,
unstable_isNewReconciler: !1
}, Pi = {
readContext: zn,
useCallback: function(e, t) {
return zr().memoizedState = [ e, void 0 === t ? null : t ], e;
},
useContext: zn,
useEffect: si,
useImperativeHandle: function(e, t, n) {
return n = null != n ? n.concat([ e ]) : null, oi(4194308, 4, ui.bind(null, t, e), n);
},
useLayoutEffect: function(e, t) {
return oi(4194308, 4, e, t);
},
useInsertionEffect: function(e, t) {
return oi(4, 2, e, t);
},
useMemo: function(e, t) {
var n = zr();
return t = void 0 === t ? null : t, e = e(), n.memoizedState = [ e, t ], e;
},
useReducer: function(e, t, n) {
var r = zr();
return t = void 0 !== n ? n(t) : t, r.memoizedState = r.baseState = t, e = {
pending: null,
interleaved: null,
lanes: 0,
dispatch: null,
lastRenderedReducer: e,
lastRenderedState: t
}, r.queue = e, e = e.dispatch = _i.bind(null, Rr, e), [ r.memoizedState, e ];
},
useRef: function(e) {
return e = {
current: e
}, zr().memoizedState = e;
},
useState: ni,
useDebugValue: fi,
useDeferredValue: function(e) {
return zr().memoizedState = e;
},
useTransition: function() {
var e = ni(!1), t = e[0];
return e = yi.bind(null, e[1]), zr().memoizedState = e, [ t, e ];
},
useMutableSource: function() {},
useSyncExternalStore: function(e, t, n) {
var r = Rr, i = zr();
if (_n) {
if (void 0 === n) throw Error(o(407));
n = n();
} else {
if (n = t(), null === pa) throw Error(o(349));
0 != (30 & kr) || Qr(r, t, n);
}
i.memoizedState = n;
var a = {
value: n,
getSnapshot: t
};
return i.queue = a, si(Zr.bind(null, r, a, e), [ e ]), r.flags |= 2048, ri(9, $r.bind(null, r, a, n, t), void 0, null), 
n;
},
useId: function() {
var e = zr(), t = pa.identifierPrefix;
if (_n) {
var n = pn;
t = ":" + t + "R" + (n = (un & ~(1 << 32 - St(un) - 1)).toString(32) + n), 0 < (n = Mr++) && (t += "H" + n.toString(32)), 
t += ":";
} else t = ":" + t + "r" + (n = Ur++).toString(32) + ":";
return e.memoizedState = t;
},
unstable_isNewReconciler: !1
}, Oi = {
readContext: zn,
useCallback: hi,
useContext: zn,
useEffect: li,
useImperativeHandle: pi,
useInsertionEffect: ci,
useLayoutEffect: di,
useMemo: mi,
useReducer: Yr,
useRef: ii,
useState: function() {
return Yr(qr);
},
useDebugValue: fi,
useDeferredValue: function(e) {
return gi(jr(), xr.memoizedState, e);
},
useTransition: function() {
return [ Yr(qr)[0], jr().memoizedState ];
},
useMutableSource: Wr,
useSyncExternalStore: Xr,
useId: Ii,
unstable_isNewReconciler: !1
}, Ci = {
readContext: zn,
useCallback: hi,
useContext: zn,
useEffect: li,
useImperativeHandle: pi,
useInsertionEffect: ci,
useLayoutEffect: di,
useMemo: mi,
useReducer: Kr,
useRef: ii,
useState: function() {
return Kr(qr);
},
useDebugValue: fi,
useDeferredValue: function(e) {
var t = jr();
return null === xr ? t.memoizedState = e : gi(t, xr.memoizedState, e);
},
useTransition: function() {
return [ Kr(qr)[0], jr().memoizedState ];
},
useMutableSource: Wr,
useSyncExternalStore: Xr,
useId: Ii,
unstable_isNewReconciler: !1
};
function Ni(e, t) {
try {
var n = "", r = t;
do {
n += Rn(r), r = r.return;
} while (r);
var i = n;
} catch (e) {
i = "\nError generating stack: " + e.message + "\n" + e.stack;
}
return {
value: e,
source: t,
stack: i,
digest: null
};
}
function Ai(e, t, n) {
return {
value: e,
source: null,
stack: null != n ? n : null,
digest: null != t ? t : null
};
}
function Li(e, t) {
try {
console.error(t.value);
} catch (e) {
setTimeout((function() {
throw e;
}));
}
}
var wi = "function" == typeof WeakMap ? WeakMap : Map;
function ki(e, t, n) {
(n = $n(-1, n)).tag = 3, n.payload = {
element: null
};
var r = t.value;
return n.callback = function() {
Aa || (Aa = !0, La = r), Li(0, t);
}, n;
}
function Ri(e, t, n) {
(n = $n(-1, n)).tag = 3;
var r = e.type.getDerivedStateFromError;
if ("function" == typeof r) {
var i = t.value;
n.payload = function() {
return r(i);
}, n.callback = function() {
Li(0, t);
};
}
var o = e.stateNode;
return null !== o && "function" == typeof o.componentDidCatch && (n.callback = function() {
Li(0, t), "function" != typeof r && (null === wa ? wa = new Set([ this ]) : wa.add(this));
var e = t.stack;
this.componentDidCatch(t.value, {
componentStack: null !== e ? e : ""
});
}), n;
}
function xi(e, t, n) {
var r = e.pingCache;
if (null === r) {
r = e.pingCache = new wi;
var i = new Set;
r.set(t, i);
} else void 0 === (i = r.get(t)) && (i = new Set, r.set(t, i));
i.has(n) || (i.add(n), e = us.bind(null, e, t, n), t.then(e, e));
}
function Bi(e) {
do {
var t;
if ((t = 13 === e.tag) && (t = null === (t = e.memoizedState) || null !== t.dehydrated), 
t) return e;
e = e.return;
} while (null !== e);
return null;
}
function Di(e, t, n, r, i) {
return 0 == (1 & e.mode) ? (e === t ? e.flags |= 65536 : (e.flags |= 128, n.flags |= 131072, 
n.flags &= -52805, 1 === n.tag && (null === n.alternate ? n.tag = 17 : ((t = $n(-1, 1)).tag = 2, 
Zn(n, t, 1))), n.lanes |= 1), e) : (e.flags |= 65536, e.lanes = i, e);
}
var Fi = a.ReactCurrentOwner, Mi = !1;
function Ui(e, t, n, r) {
t.child = null === e ? gr(t, null, n, r) : mr(t, e.child, n, r);
}
function Hi(e, t, n, r, i) {
n = n.render;
var o = t.ref;
return Gn(t, i), r = Jr(e, t, n, r, o, i), n = Gr(), null === e || Mi ? (_n && n && mn(t), 
t.flags |= 1, Ui(e, t, r, i), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, 
e.lanes &= ~i, uo(e, t, i));
}
function Vi(e, t, n, r, i) {
if (null === e) {
var o = n.type;
return "function" != typeof o || Is(o) || void 0 !== o.defaultProps || null !== n.compare || void 0 !== n.defaultProps ? ((e = Ss(n.type, null, r, t, t.mode, i)).ref = t.ref, 
e.return = t, t.child = e) : (t.tag = 15, t.type = o, Ji(e, t, o, r, i));
}
if (o = e.child, 0 == (e.lanes & i)) {
var a = o.memoizedProps;
if ((n = null !== (n = n.compare) ? n : kn)(a, r) && e.ref === t.ref) return uo(e, t, i);
}
return t.flags |= 1, (e = bs(o, r)).ref = t.ref, e.return = t, t.child = e;
}
function Ji(e, t, n, r, i) {
if (null !== e) {
var o = e.memoizedProps;
if (kn(o, r) && e.ref === t.ref) {
if (Mi = !1, t.pendingProps = r = o, 0 == (e.lanes & i)) return t.lanes = e.lanes, 
uo(e, t, i);
0 != (131072 & e.flags) && (Mi = !0);
}
}
return ji(e, t, n, r, i);
}
function Gi(e, t, n) {
var r = t.pendingProps, i = r.children, o = null !== e ? e.memoizedState : null;
if ("hidden" === r.mode) if (0 == (1 & t.mode)) t.memoizedState = {
baseLanes: 0,
cachePool: null,
transitions: null
}, ct(ga, ma), ma |= n; else {
if (0 == (1073741824 & n)) return e = null !== o ? o.baseLanes | n : n, t.lanes = t.childLanes = 1073741824, 
t.memoizedState = {
baseLanes: e,
cachePool: null,
transitions: null
}, t.updateQueue = null, ct(ga, ma), ma |= e, null;
t.memoizedState = {
baseLanes: 0,
cachePool: null,
transitions: null
}, r = null !== o ? o.baseLanes : n, ct(ga, ma), ma |= r;
} else null !== o ? (r = o.baseLanes | n, t.memoizedState = null) : r = n, ct(ga, ma), 
ma |= r;
return Ui(e, t, i, n), t.child;
}
function zi(e, t) {
var n = t.ref;
(null === e && null !== n || null !== e && e.ref !== n) && (t.flags |= 512, t.flags |= 2097152);
}
function ji(e, t, n, r, i) {
var o = mt(n) ? ft : ut.current;
return o = ht(t, o), Gn(t, i), n = Jr(e, t, n, r, o, i), r = Gr(), null === e || Mi ? (_n && r && mn(t), 
t.flags |= 1, Ui(e, t, n, i), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, 
e.lanes &= ~i, uo(e, t, i));
}
function qi(e, t, n, r, i) {
if (mt(n)) {
var o = !0;
_t(t);
} else o = !1;
if (Gn(t, i), null === t.stateNode) co(e, t), lr(t, n, r), dr(t, n, r, i), r = !0; else if (null === e) {
var a = t.stateNode, s = t.memoizedProps;
a.props = s;
var l = a.context, c = n.contextType;
"object" == typeof c && null !== c ? c = zn(c) : c = ht(t, c = mt(n) ? ft : ut.current);
var d = n.getDerivedStateFromProps, u = "function" == typeof d || "function" == typeof a.getSnapshotBeforeUpdate;
u || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (s !== r || l !== c) && cr(t, a, r, c), 
Wn = !1;
var p = t.memoizedState;
a.state = p, nr(t, r, a, i), l = t.memoizedState, s !== r || p !== l || pt.current || Wn ? ("function" == typeof d && (or(t, n, d, r), 
l = t.memoizedState), (s = Wn || sr(t, n, s, r, p, l, c)) ? (u || "function" != typeof a.UNSAFE_componentWillMount && "function" != typeof a.componentWillMount || ("function" == typeof a.componentWillMount && a.componentWillMount(), 
"function" == typeof a.UNSAFE_componentWillMount && a.UNSAFE_componentWillMount()), 
"function" == typeof a.componentDidMount && (t.flags |= 4194308)) : ("function" == typeof a.componentDidMount && (t.flags |= 4194308), 
t.memoizedProps = r, t.memoizedState = l), a.props = r, a.state = l, a.context = c, 
r = s) : ("function" == typeof a.componentDidMount && (t.flags |= 4194308), r = !1);
} else {
a = t.stateNode, Qn(e, t), s = t.memoizedProps, c = t.type === t.elementType ? s : xn(t.type, s), 
a.props = c, u = t.pendingProps, p = a.context, "object" == typeof (l = n.contextType) && null !== l ? l = zn(l) : l = ht(t, l = mt(n) ? ft : ut.current);
var f = n.getDerivedStateFromProps;
(d = "function" == typeof f || "function" == typeof a.getSnapshotBeforeUpdate) || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (s !== u || p !== l) && cr(t, a, r, l), 
Wn = !1, p = t.memoizedState, a.state = p, nr(t, r, a, i);
var h = t.memoizedState;
s !== u || p !== h || pt.current || Wn ? ("function" == typeof f && (or(t, n, f, r), 
h = t.memoizedState), (c = Wn || sr(t, n, c, r, p, h, l) || !1) ? (d || "function" != typeof a.UNSAFE_componentWillUpdate && "function" != typeof a.componentWillUpdate || ("function" == typeof a.componentWillUpdate && a.componentWillUpdate(r, h, l), 
"function" == typeof a.UNSAFE_componentWillUpdate && a.UNSAFE_componentWillUpdate(r, h, l)), 
"function" == typeof a.componentDidUpdate && (t.flags |= 4), "function" == typeof a.getSnapshotBeforeUpdate && (t.flags |= 1024)) : ("function" != typeof a.componentDidUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 4), 
"function" != typeof a.getSnapshotBeforeUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 1024), 
t.memoizedProps = r, t.memoizedState = h), a.props = r, a.state = h, a.context = l, 
r = c) : ("function" != typeof a.componentDidUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 4), 
"function" != typeof a.getSnapshotBeforeUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 1024), 
r = !1);
}
return Yi(e, t, n, r, o, i);
}
function Yi(e, t, n, r, i, o) {
zi(e, t);
var a = 0 != (128 & t.flags);
if (!r && !a) return i && bt(t, n, !1), uo(e, t, o);
r = t.stateNode, Fi.current = t;
var s = a && "function" != typeof n.getDerivedStateFromError ? null : r.render();
return t.flags |= 1, null !== e && a ? (t.child = mr(t, e.child, null, o), t.child = mr(t, null, s, o)) : Ui(e, t, s, o), 
t.memoizedState = r.state, i && bt(t, n, !0), t.child;
}
function Ki(e) {
var t = e.stateNode;
t.pendingContext ? yt(0, t.pendingContext, t.pendingContext !== t.context) : t.context && yt(0, t.context, !1), 
vr(e, t.containerInfo);
}
function Wi(e, t, n, r, i) {
return An(), Ln(i), t.flags |= 256, Ui(e, t, n, r), t.child;
}
var Xi, Qi, $i, Zi, eo = {
dehydrated: null,
treeContext: null,
retryLane: 0
};
function to(e) {
return {
baseLanes: e,
cachePool: null,
transitions: null
};
}
function no(e, t, n) {
var r, i = t.pendingProps, o = Or.current, a = !1, s = 0 != (128 & t.flags);
if ((r = s) || (r = (null === e || null !== e.memoizedState) && 0 != (2 & o)), r ? (a = !0, 
t.flags &= -129) : null !== e && null === e.memoizedState || (o |= 1), ct(Or, 1 & o), 
null === e) return Pn(t), null !== (e = t.memoizedState) && null !== (e = e.dehydrated) ? (0 == (1 & t.mode) ? t.lanes = 1 : Fe(e) ? t.lanes = 8 : t.lanes = 1073741824, 
null) : (s = i.children, e = i.fallback, a ? (i = t.mode, a = t.child, s = {
mode: "hidden",
children: s
}, 0 == (1 & i) && null !== a ? (a.childLanes = 0, a.pendingProps = s) : a = Ts(s, i, 0, null), 
e = vs(e, i, n, null), a.return = t, e.return = t, a.sibling = e, t.child = a, t.child.memoizedState = to(n), 
t.memoizedState = eo, e) : ro(t, s));
if (null !== (o = e.memoizedState) && null !== (r = o.dehydrated)) return oo(e, t, s, i, r, o, n);
if (a) {
a = i.fallback, s = t.mode, r = (o = e.child).sibling;
var l = {
mode: "hidden",
children: i.children
};
return 0 == (1 & s) && t.child !== o ? ((i = t.child).childLanes = 0, i.pendingProps = l, 
t.deletions = null) : (i = bs(o, l)).subtreeFlags = 14680064 & o.subtreeFlags, null !== r ? a = bs(r, a) : (a = vs(a, s, n, null)).flags |= 2, 
a.return = t, i.return = t, i.sibling = a, t.child = i, i = a, a = t.child, s = null === (s = e.child.memoizedState) ? to(n) : {
baseLanes: s.baseLanes | n,
cachePool: null,
transitions: s.transitions
}, a.memoizedState = s, a.childLanes = e.childLanes & ~n, t.memoizedState = eo, 
i;
}
return e = (a = e.child).sibling, i = bs(a, {
mode: "visible",
children: i.children
}), 0 == (1 & t.mode) && (i.lanes = n), i.return = t, i.sibling = null, null !== e && (null === (n = t.deletions) ? (t.deletions = [ e ], 
t.flags |= 16) : n.push(e)), t.child = i, t.memoizedState = null, i;
}
function ro(e, t) {
return (t = Ts({
mode: "visible",
children: t
}, e.mode, 0, null)).return = e, e.child = t;
}
function io(e, t, n, r) {
return null !== r && Ln(r), mr(t, e.child, null, n), (e = ro(t, t.pendingProps.children)).flags |= 2, 
t.memoizedState = null, e;
}
function oo(e, t, n, r, i, a, s) {
if (n) return 256 & t.flags ? (t.flags &= -257, io(e, t, s, r = Ai(Error(o(422))))) : null !== t.memoizedState ? (t.child = e.child, 
t.flags |= 128, null) : (a = r.fallback, i = t.mode, r = Ts({
mode: "visible",
children: r.children
}, i, 0, null), (a = vs(a, i, s, null)).flags |= 2, r.return = t, a.return = t, 
r.sibling = a, t.child = r, 0 != (1 & t.mode) && mr(t, e.child, null, s), t.child.memoizedState = to(s), 
t.memoizedState = eo, a);
if (0 == (1 & t.mode)) return io(e, t, s, null);
if (Fe(i)) return r = Me(i).digest, io(e, t, s, r = Ai(a = Error(o(419)), r, void 0));
if (n = 0 != (s & e.childLanes), Mi || n) {
if (null !== (r = pa)) {
switch (s & -s) {
case 4:
i = 2;
break;

case 16:
i = 8;
break;

case 64:
case 128:
case 256:
case 512:
case 1024:
case 2048:
case 4096:
case 8192:
case 16384:
case 32768:
case 65536:
case 131072:
case 262144:
case 524288:
case 1048576:
case 2097152:
case 4194304:
case 8388608:
case 16777216:
case 33554432:
case 67108864:
i = 32;
break;

case 536870912:
i = 268435456;
break;

default:
i = 0;
}
0 !== (i = 0 != (i & (r.suspendedLanes | s)) ? 0 : i) && i !== a.retryLane && (a.retryLane = i, 
Kn(e, i), Va(r, e, i, -1));
}
return es(), io(e, t, s, r = Ai(Error(o(421))));
}
return De(i) ? (t.flags |= 128, t.child = e.child, t = fs.bind(null, e), Ue(i, t), 
null) : (e = a.treeContext, X && (In = Ge(i), yn = t, _n = !0, Sn = null, bn = !1, 
null !== e && (ln[cn++] = un, ln[cn++] = pn, ln[cn++] = dn, un = e.id, pn = e.overflow, 
dn = t)), (t = ro(t, r.children)).flags |= 4096, t);
}
function ao(e, t, n) {
e.lanes |= t;
var r = e.alternate;
null !== r && (r.lanes |= t), Jn(e.return, t, n);
}
function so(e, t, n, r, i) {
var o = e.memoizedState;
null === o ? e.memoizedState = {
isBackwards: t,
rendering: null,
renderingStartTime: 0,
last: r,
tail: n,
tailMode: i
} : (o.isBackwards = t, o.rendering = null, o.renderingStartTime = 0, o.last = r, 
o.tail = n, o.tailMode = i);
}
function lo(e, t, n) {
var r = t.pendingProps, i = r.revealOrder, o = r.tail;
if (Ui(e, t, r.children, n), 0 != (2 & (r = Or.current))) r = 1 & r | 2, t.flags |= 128; else {
if (null !== e && 0 != (128 & e.flags)) e: for (e = t.child; null !== e; ) {
if (13 === e.tag) null !== e.memoizedState && ao(e, n, t); else if (19 === e.tag) ao(e, n, t); else if (null !== e.child) {
e.child.return = e, e = e.child;
continue;
}
if (e === t) break e;
for (;null === e.sibling; ) {
if (null === e.return || e.return === t) break e;
e = e.return;
}
e.sibling.return = e.return, e = e.sibling;
}
r &= 1;
}
if (ct(Or, r), 0 == (1 & t.mode)) t.memoizedState = null; else switch (i) {
case "forwards":
for (n = t.child, i = null; null !== n; ) null !== (e = n.alternate) && null === Cr(e) && (i = n), 
n = n.sibling;
null === (n = i) ? (i = t.child, t.child = null) : (i = n.sibling, n.sibling = null), 
so(t, !1, i, n, o);
break;

case "backwards":
for (n = null, i = t.child, t.child = null; null !== i; ) {
if (null !== (e = i.alternate) && null === Cr(e)) {
t.child = i;
break;
}
e = i.sibling, i.sibling = n, n = i, i = e;
}
so(t, !0, n, null, o);
break;

case "together":
so(t, !1, null, null, void 0);
break;

default:
t.memoizedState = null;
}
return t.child;
}
function co(e, t) {
0 == (1 & t.mode) && null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2);
}
function uo(e, t, n) {
if (null !== e && (t.dependencies = e.dependencies), _a |= t.lanes, 0 == (n & t.childLanes)) return null;
if (null !== e && t.child !== e.child) throw Error(o(153));
if (null !== t.child) {
for (n = bs(e = t.child, e.pendingProps), t.child = n, n.return = t; null !== e.sibling; ) e = e.sibling, 
(n = n.sibling = bs(e, e.pendingProps)).return = t;
n.sibling = null;
}
return t.child;
}
function po(e, t, n) {
switch (t.tag) {
case 3:
Ki(t), An();
break;

case 5:
Er(t);
break;

case 1:
mt(t.type) && _t(t);
break;

case 4:
vr(t, t.stateNode.containerInfo);
break;

case 10:
Hn(0, t.type._context, t.memoizedProps.value);
break;

case 13:
var r = t.memoizedState;
if (null !== r) return null !== r.dehydrated ? (ct(Or, 1 & Or.current), t.flags |= 128, 
null) : 0 != (n & t.child.childLanes) ? no(e, t, n) : (ct(Or, 1 & Or.current), null !== (e = uo(e, t, n)) ? e.sibling : null);
ct(Or, 1 & Or.current);
break;

case 19:
if (r = 0 != (n & t.childLanes), 0 != (128 & e.flags)) {
if (r) return lo(e, t, n);
t.flags |= 128;
}
var i = t.memoizedState;
if (null !== i && (i.rendering = null, i.tail = null, i.lastEffect = null), ct(Or, Or.current), 
r) break;
return null;

case 22:
case 23:
return t.lanes = 0, Gi(e, t, n);
}
return uo(e, t, n);
}
function fo(e) {
e.flags |= 4;
}
function ho(e, t) {
if (null !== e && e.child === t.child) return !0;
if (0 != (16 & t.flags)) return !1;
for (e = t.child; null !== e; ) {
if (0 != (12854 & e.flags) || 0 != (12854 & e.subtreeFlags)) return !1;
e = e.sibling;
}
return !0;
}
if (K) Xi = function(e, t) {
for (var n = t.child; null !== n; ) {
if (5 === n.tag || 6 === n.tag) M(e, n.stateNode); else if (4 !== n.tag && null !== n.child) {
n.child.return = n, n = n.child;
continue;
}
if (n === t) break;
for (;null === n.sibling; ) {
if (null === n.return || n.return === t) return;
n = n.return;
}
n.sibling.return = n.return, n = n.sibling;
}
}, Qi = function() {}, $i = function(e, t, n, r, i) {
if ((e = e.memoizedProps) !== r) {
var o = t.stateNode, a = Sr(Ir.current);
n = V(o, n, e, r, i, a), (t.updateQueue = n) && fo(t);
}
}, Zi = function(e, t, n, r) {
n !== r && fo(t);
}; else if (W) {
Xi = function(e, t, n, r) {
for (var i = t.child; null !== i; ) {
if (5 === i.tag) {
var o = i.stateNode;
n && r && (o = we(o, i.type, i.memoizedProps, i)), M(e, o);
} else if (6 === i.tag) o = i.stateNode, n && r && (o = ke(o, i.memoizedProps, i)), 
M(e, o); else if (4 !== i.tag) if (22 === i.tag && null !== i.memoizedState) null !== (o = i.child) && (o.return = i), 
Xi(e, i, !0, !0); else if (null !== i.child) {
i.child.return = i, i = i.child;
continue;
}
if (i === t) break;
for (;null === i.sibling; ) {
if (null === i.return || i.return === t) return;
i = i.return;
}
i.sibling.return = i.return, i = i.sibling;
}
};
var mo = function(e, t, n, r) {
for (var i = t.child; null !== i; ) {
if (5 === i.tag) {
var o = i.stateNode;
n && r && (o = we(o, i.type, i.memoizedProps, i)), Ne(e, o);
} else if (6 === i.tag) o = i.stateNode, n && r && (o = ke(o, i.memoizedProps, i)), 
Ne(e, o); else if (4 !== i.tag) if (22 === i.tag && null !== i.memoizedState) null !== (o = i.child) && (o.return = i), 
mo(e, i, !0, !0); else if (null !== i.child) {
i.child.return = i, i = i.child;
continue;
}
if (i === t) break;
for (;null === i.sibling; ) {
if (null === i.return || i.return === t) return;
i = i.return;
}
i.sibling.return = i.return, i = i.sibling;
}
};
Qi = function(e, t) {
var n = t.stateNode;
if (!ho(e, t)) {
e = n.containerInfo;
var r = Ce(e);
mo(r, t, !1, !1), n.pendingChildren = r, fo(t), Ae(e, r);
}
}, $i = function(e, t, n, r, i) {
var o = e.stateNode, a = e.memoizedProps;
if ((e = ho(e, t)) && a === r) t.stateNode = o; else {
var s = t.stateNode, l = Sr(Ir.current), c = null;
a !== r && (c = V(s, n, a, r, i, l)), e && null === c ? t.stateNode = o : (o = Oe(o, c, n, a, r, t, e, s), 
U(o, n, r, i, l) && fo(t), t.stateNode = o, e ? fo(t) : Xi(o, t, !1, !1));
}
}, Zi = function(e, t, n, r) {
n !== r ? (e = Sr(br.current), n = Sr(Ir.current), t.stateNode = G(r, e, n, t), 
fo(t)) : t.stateNode = e.stateNode;
};
} else Qi = function() {}, $i = function() {}, Zi = function() {};
function go(e, t) {
if (!_n) switch (e.tailMode) {
case "hidden":
t = e.tail;
for (var n = null; null !== t; ) null !== t.alternate && (n = t), t = t.sibling;
null === n ? e.tail = null : n.sibling = null;
break;

case "collapsed":
n = e.tail;
for (var r = null; null !== n; ) null !== n.alternate && (r = n), n = n.sibling;
null === r ? t || null === e.tail ? e.tail = null : e.tail.sibling = null : r.sibling = null;
}
}
function yo(e) {
var t = null !== e.alternate && e.alternate.child === e.child, n = 0, r = 0;
if (t) for (var i = e.child; null !== i; ) n |= i.lanes | i.childLanes, r |= 14680064 & i.subtreeFlags, 
r |= 14680064 & i.flags, i.return = e, i = i.sibling; else for (i = e.child; null !== i; ) n |= i.lanes | i.childLanes, 
r |= i.subtreeFlags, r |= i.flags, i.return = e, i = i.sibling;
return e.subtreeFlags |= r, e.childLanes = n, t;
}
function Io(e, t, n) {
var r = t.pendingProps;
switch (gn(t), t.tag) {
case 2:
case 16:
case 15:
case 0:
case 11:
case 7:
case 8:
case 12:
case 9:
case 14:
return yo(t), null;

case 1:
case 17:
return mt(t.type) && gt(), yo(t), null;

case 3:
return n = t.stateNode, Tr(), lt(pt), lt(ut), Ar(), n.pendingContext && (n.context = n.pendingContext, 
n.pendingContext = null), null !== e && null !== e.child || (Cn(t) ? fo(t) : null === e || e.memoizedState.isDehydrated && 0 == (256 & t.flags) || (t.flags |= 1024, 
null !== Sn && (ja(Sn), Sn = null))), Qi(e, t), yo(t), null;

case 5:
Pr(t), n = Sr(br.current);
var i = t.type;
if (null !== e && null != t.stateNode) $i(e, t, i, r, n), e.ref !== t.ref && (t.flags |= 512, 
t.flags |= 2097152); else {
if (!r) {
if (null === t.stateNode) throw Error(o(166));
return yo(t), null;
}
if (e = Sr(Ir.current), Cn(t)) {
if (!X) throw Error(o(175));
e = ze(t.stateNode, t.type, t.memoizedProps, n, e, t, !bn), t.updateQueue = e, null !== e && fo(t);
} else {
var a = F(i, r, n, e, t);
Xi(a, t, !1, !1), t.stateNode = a, U(a, i, r, n, e) && fo(t);
}
null !== t.ref && (t.flags |= 512, t.flags |= 2097152);
}
return yo(t), null;

case 6:
if (e && null != t.stateNode) Zi(e, t, e.memoizedProps, r); else {
if ("string" != typeof r && null === t.stateNode) throw Error(o(166));
if (e = Sr(br.current), n = Sr(Ir.current), Cn(t)) {
if (!X) throw Error(o(176));
if (e = t.stateNode, n = t.memoizedProps, (r = je(e, n, t, !bn)) && null !== (i = yn)) switch (i.tag) {
case 3:
Ze(i.stateNode.containerInfo, e, n, 0 != (1 & i.mode));
break;

case 5:
et(i.type, i.memoizedProps, i.stateNode, e, n, 0 != (1 & i.mode));
}
r && fo(t);
} else t.stateNode = G(r, e, n, t);
}
return yo(t), null;

case 13:
if (lt(Or), r = t.memoizedState, null === e || null !== e.memoizedState && null !== e.memoizedState.dehydrated) {
if (_n && null !== In && 0 != (1 & t.mode) && 0 == (128 & t.flags)) Nn(), An(), 
t.flags |= 98560, i = !1; else if (i = Cn(t), null !== r && null !== r.dehydrated) {
if (null === e) {
if (!i) throw Error(o(318));
if (!X) throw Error(o(344));
if (!(i = null !== (i = t.memoizedState) ? i.dehydrated : null)) throw Error(o(317));
qe(i, t);
} else An(), 0 == (128 & t.flags) && (t.memoizedState = null), t.flags |= 4;
yo(t), i = !1;
} else null !== Sn && (ja(Sn), Sn = null), i = !0;
if (!i) return 65536 & t.flags ? t : null;
}
return 0 != (128 & t.flags) ? (t.lanes = n, t) : ((n = null !== r) !== (null !== e && null !== e.memoizedState) && n && (t.child.flags |= 8192, 
0 != (1 & t.mode) && (null === e || 0 != (1 & Or.current) ? 0 === ya && (ya = 3) : es())), 
null !== t.updateQueue && (t.flags |= 4), yo(t), null);

case 4:
return Tr(), Qi(e, t), null === e && $(t.stateNode.containerInfo), yo(t), null;

case 10:
return Vn(t.type._context), yo(t), null;

case 19:
if (lt(Or), null === (i = t.memoizedState)) return yo(t), null;
if (r = 0 != (128 & t.flags), null === (a = i.rendering)) if (r) go(i, !1); else {
if (0 !== ya || null !== e && 0 != (128 & e.flags)) for (e = t.child; null !== e; ) {
if (null !== (a = Cr(e))) {
for (t.flags |= 128, go(i, !1), null !== (e = a.updateQueue) && (t.updateQueue = e, 
t.flags |= 4), t.subtreeFlags = 0, e = n, n = t.child; null !== n; ) i = e, (r = n).flags &= 14680066, 
null === (a = r.alternate) ? (r.childLanes = 0, r.lanes = i, r.child = null, r.subtreeFlags = 0, 
r.memoizedProps = null, r.memoizedState = null, r.updateQueue = null, r.dependencies = null, 
r.stateNode = null) : (r.childLanes = a.childLanes, r.lanes = a.lanes, r.child = a.child, 
r.subtreeFlags = 0, r.deletions = null, r.memoizedProps = a.memoizedProps, r.memoizedState = a.memoizedState, 
r.updateQueue = a.updateQueue, r.type = a.type, i = a.dependencies, r.dependencies = null === i ? null : {
lanes: i.lanes,
firstContext: i.firstContext
}), n = n.sibling;
return ct(Or, 1 & Or.current | 2), t.child;
}
e = e.sibling;
}
null !== i.tail && Jt() > Pa && (t.flags |= 128, r = !0, go(i, !1), t.lanes = 4194304);
} else {
if (!r) if (null !== (e = Cr(a))) {
if (t.flags |= 128, r = !0, null !== (e = e.updateQueue) && (t.updateQueue = e, 
t.flags |= 4), go(i, !0), null === i.tail && "hidden" === i.tailMode && !a.alternate && !_n) return yo(t), 
null;
} else 2 * Jt() - i.renderingStartTime > Pa && 1073741824 !== n && (t.flags |= 128, 
r = !0, go(i, !1), t.lanes = 4194304);
i.isBackwards ? (a.sibling = t.child, t.child = a) : (null !== (e = i.last) ? e.sibling = a : t.child = a, 
i.last = a);
}
return null !== i.tail ? (t = i.tail, i.rendering = t, i.tail = t.sibling, i.renderingStartTime = Jt(), 
t.sibling = null, e = Or.current, ct(Or, r ? 1 & e | 2 : 1 & e), t) : (yo(t), null);

case 22:
case 23:
return Xa(), n = null !== t.memoizedState, null !== e && null !== e.memoizedState !== n && (t.flags |= 8192), 
n && 0 != (1 & t.mode) ? 0 != (1073741824 & ma) && (yo(t), K && 6 & t.subtreeFlags && (t.flags |= 8192)) : yo(t), 
null;

case 24:
case 25:
return null;
}
throw Error(o(156, t.tag));
}
function _o(e, t) {
switch (gn(t), t.tag) {
case 1:
return mt(t.type) && gt(), 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, 
t) : null;

case 3:
return Tr(), lt(pt), lt(ut), Ar(), 0 != (65536 & (e = t.flags)) && 0 == (128 & e) ? (t.flags = -65537 & e | 128, 
t) : null;

case 5:
return Pr(t), null;

case 13:
if (lt(Or), null !== (e = t.memoizedState) && null !== e.dehydrated) {
if (null === t.alternate) throw Error(o(340));
An();
}
return 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, t) : null;

case 19:
return lt(Or), null;

case 4:
return Tr(), null;

case 10:
return Vn(t.type._context), null;

case 22:
case 23:
return Xa(), null;

default:
return null;
}
}
var bo = !1, So = !1, vo = "function" == typeof WeakSet ? WeakSet : Set, To = null;
function Eo(e, t) {
var n = e.ref;
if (null !== n) if ("function" == typeof n) try {
n(null);
} catch (n) {
ds(e, t, n);
} else n.current = null;
}
function Po(e, t, n) {
try {
n();
} catch (n) {
ds(e, t, n);
}
}
var Oo = !1;
function Co(e, t) {
for (B(e.containerInfo), To = t; null !== To; ) if (t = (e = To).child, 0 != (1028 & e.subtreeFlags) && null !== t) t.return = e, 
To = t; else for (;null !== To; ) {
e = To;
try {
var n = e.alternate;
if (0 != (1024 & e.flags)) switch (e.tag) {
case 0:
case 11:
case 15:
case 5:
case 6:
case 4:
case 17:
break;

case 1:
if (null !== n) {
var r = n.memoizedProps, i = n.memoizedState, a = e.stateNode, s = a.getSnapshotBeforeUpdate(e.elementType === e.type ? r : xn(e.type, r), i);
a.__reactInternalSnapshotBeforeUpdate = s;
}
break;

case 3:
K && Pe(e.stateNode.containerInfo);
break;

default:
throw Error(o(163));
}
} catch (t) {
ds(e, e.return, t);
}
if (null !== (t = e.sibling)) {
t.return = e.return, To = t;
break;
}
To = e.return;
}
return n = Oo, Oo = !1, n;
}
function No(e, t, n) {
var r = t.updateQueue;
if (null !== (r = null !== r ? r.lastEffect : null)) {
var i = r = r.next;
do {
if ((i.tag & e) === e) {
var o = i.destroy;
i.destroy = void 0, void 0 !== o && Po(t, n, o);
}
i = i.next;
} while (i !== r);
}
}
function Ao(e, t) {
if (null !== (t = null !== (t = t.updateQueue) ? t.lastEffect : null)) {
var n = t = t.next;
do {
if ((n.tag & e) === e) {
var r = n.create;
n.destroy = r();
}
n = n.next;
} while (n !== t);
}
}
function Lo(e) {
var t = e.ref;
if (null !== t) {
var n = e.stateNode;
if (5 === e.tag) e = k(n); else e = n;
"function" == typeof t ? t(e) : t.current = e;
}
}
function wo(e) {
var t = e.alternate;
null !== t && (e.alternate = null, wo(t)), e.child = null, e.deletions = null, e.sibling = null, 
5 === e.tag && (null !== (t = e.stateNode) && ee(t)), e.stateNode = null, e.return = null, 
e.dependencies = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, 
e.stateNode = null, e.updateQueue = null;
}
function ko(e) {
return 5 === e.tag || 3 === e.tag || 4 === e.tag;
}
function Ro(e) {
e: for (;;) {
for (;null === e.sibling; ) {
if (null === e.return || ko(e.return)) return null;
e = e.return;
}
for (e.sibling.return = e.return, e = e.sibling; 5 !== e.tag && 6 !== e.tag && 18 !== e.tag; ) {
if (2 & e.flags) continue e;
if (null === e.child || 4 === e.tag) continue e;
e.child.return = e, e = e.child;
}
if (!(2 & e.flags)) return e.stateNode;
}
}
function xo(e, t, n) {
var r = e.tag;
if (5 === r || 6 === r) e = e.stateNode, t ? ye(n, e, t) : pe(n, e); else if (4 !== r && null !== (e = e.child)) for (xo(e, t, n), 
e = e.sibling; null !== e; ) xo(e, t, n), e = e.sibling;
}
function Bo(e, t, n) {
var r = e.tag;
if (5 === r || 6 === r) e = e.stateNode, t ? ge(n, e, t) : ue(n, e); else if (4 !== r && null !== (e = e.child)) for (Bo(e, t, n), 
e = e.sibling; null !== e; ) Bo(e, t, n), e = e.sibling;
}
var Do = null, Fo = !1;
function Mo(e, t, n) {
for (n = n.child; null !== n; ) Uo(e, t, n), n = n.sibling;
}
function Uo(e, t, n) {
if (Kt && "function" == typeof Kt.onCommitFiberUnmount) try {
Kt.onCommitFiberUnmount(Yt, n);
} catch (e) {}
switch (n.tag) {
case 5:
So || Eo(n, t);

case 6:
if (K) {
var r = Do, i = Fo;
Do = null, Mo(e, t, n), Fo = i, null !== (Do = r) && (Fo ? _e(Do, n.stateNode) : Ie(Do, n.stateNode));
} else Mo(e, t, n);
break;

case 18:
K && null !== Do && (Fo ? Qe(Do, n.stateNode) : Xe(Do, n.stateNode));
break;

case 4:
K ? (r = Do, i = Fo, Do = n.stateNode.containerInfo, Fo = !0, Mo(e, t, n), Do = r, 
Fo = i) : (W && (r = n.stateNode.containerInfo, i = Ce(r), Le(r, i)), Mo(e, t, n));
break;

case 0:
case 11:
case 14:
case 15:
if (!So && (null !== (r = n.updateQueue) && null !== (r = r.lastEffect))) {
i = r = r.next;
do {
var o = i, a = o.destroy;
o = o.tag, void 0 !== a && (0 != (2 & o) || 0 != (4 & o)) && Po(n, t, a), i = i.next;
} while (i !== r);
}
Mo(e, t, n);
break;

case 1:
if (!So && (Eo(n, t), "function" == typeof (r = n.stateNode).componentWillUnmount)) try {
r.props = n.memoizedProps, r.state = n.memoizedState, r.componentWillUnmount();
} catch (e) {
ds(n, t, e);
}
Mo(e, t, n);
break;

case 21:
Mo(e, t, n);
break;

case 22:
1 & n.mode ? (So = (r = So) || null !== n.memoizedState, Mo(e, t, n), So = r) : Mo(e, t, n);
break;

default:
Mo(e, t, n);
}
}
function Ho(e) {
var t = e.updateQueue;
if (null !== t) {
e.updateQueue = null;
var n = e.stateNode;
null === n && (n = e.stateNode = new vo), t.forEach((function(t) {
var r = hs.bind(null, e, t);
n.has(t) || (n.add(t), t.then(r, r));
}));
}
}
function Vo(e, t) {
var n = t.deletions;
if (null !== n) for (var r = 0; r < n.length; r++) {
var i = n[r];
try {
var a = e, s = t;
if (K) {
var l = s;
e: for (;null !== l; ) {
switch (l.tag) {
case 5:
Do = l.stateNode, Fo = !1;
break e;

case 3:
case 4:
Do = l.stateNode.containerInfo, Fo = !0;
break e;
}
l = l.return;
}
if (null === Do) throw Error(o(160));
Uo(a, s, i), Do = null, Fo = !1;
} else Uo(a, s, i);
var c = i.alternate;
null !== c && (c.return = null), i.return = null;
} catch (e) {
ds(i, t, e);
}
}
if (12854 & t.subtreeFlags) for (t = t.child; null !== t; ) Jo(t, e), t = t.sibling;
}
function Jo(e, t) {
var n = e.alternate, r = e.flags;
switch (e.tag) {
case 0:
case 11:
case 14:
case 15:
if (Vo(t, e), Go(e), 4 & r) {
try {
No(3, e, e.return), Ao(3, e);
} catch (t) {
ds(e, e.return, t);
}
try {
No(5, e, e.return);
} catch (t) {
ds(e, e.return, t);
}
}
break;

case 1:
Vo(t, e), Go(e), 512 & r && null !== n && Eo(n, n.return);
break;

case 5:
if (Vo(t, e), Go(e), 512 & r && null !== n && Eo(n, n.return), K) {
if (32 & e.flags) {
var i = e.stateNode;
try {
be(i);
} catch (t) {
ds(e, e.return, t);
}
}
if (4 & r && null != (i = e.stateNode)) {
var a = e.memoizedProps;
if (n = null !== n ? n.memoizedProps : a, r = e.type, t = e.updateQueue, e.updateQueue = null, 
null !== t) try {
me(i, t, r, n, a, e);
} catch (t) {
ds(e, e.return, t);
}
}
}
break;

case 6:
if (Vo(t, e), Go(e), 4 & r && K) {
if (null === e.stateNode) throw Error(o(162));
i = e.stateNode, a = e.memoizedProps, n = null !== n ? n.memoizedProps : a;
try {
fe(i, n, a);
} catch (t) {
ds(e, e.return, t);
}
}
break;

case 3:
if (Vo(t, e), Go(e), 4 & r) {
if (K && X && null !== n && n.memoizedState.isDehydrated) try {
Ke(t.containerInfo);
} catch (t) {
ds(e, e.return, t);
}
if (W) {
i = t.containerInfo, a = t.pendingChildren;
try {
Le(i, a);
} catch (t) {
ds(e, e.return, t);
}
}
}
break;

case 4:
if (Vo(t, e), Go(e), 4 & r && W) {
i = (a = e.stateNode).containerInfo, a = a.pendingChildren;
try {
Le(i, a);
} catch (t) {
ds(e, e.return, t);
}
}
break;

case 13:
Vo(t, e), Go(e), 8192 & (i = e.child).flags && (a = null !== i.memoizedState, i.stateNode.isHidden = a, 
!a || null !== i.alternate && null !== i.alternate.memoizedState || (Ea = Jt())), 
4 & r && Ho(e);
break;

case 22:
var s = null !== n && null !== n.memoizedState;
if (1 & e.mode ? (So = (n = So) || s, Vo(t, e), So = n) : Vo(t, e), Go(e), 8192 & r) {
if (n = null !== e.memoizedState, (e.stateNode.isHidden = n) && !s && 0 != (1 & e.mode)) for (To = e, 
r = e.child; null !== r; ) {
for (t = To = r; null !== To; ) {
var l = (s = To).child;
switch (s.tag) {
case 0:
case 11:
case 14:
case 15:
No(4, s, s.return);
break;

case 1:
Eo(s, s.return);
var c = s.stateNode;
if ("function" == typeof c.componentWillUnmount) {
var d = s, u = s.return;
try {
var p = d;
c.props = p.memoizedProps, c.state = p.memoizedState, c.componentWillUnmount();
} catch (e) {
ds(d, u, e);
}
}
break;

case 5:
Eo(s, s.return);
break;

case 22:
if (null !== s.memoizedState) {
Yo(t);
continue;
}
}
null !== l ? (l.return = s, To = l) : Yo(t);
}
r = r.sibling;
}
if (K) e: if (r = null, K) for (t = e; ;) {
if (5 === t.tag) {
if (null === r) {
r = t;
try {
i = t.stateNode, n ? Se(i) : Te(t.stateNode, t.memoizedProps);
} catch (t) {
ds(e, e.return, t);
}
}
} else if (6 === t.tag) {
if (null === r) try {
a = t.stateNode, n ? ve(a) : Ee(a, t.memoizedProps);
} catch (t) {
ds(e, e.return, t);
}
} else if ((22 !== t.tag && 23 !== t.tag || null === t.memoizedState || t === e) && null !== t.child) {
t.child.return = t, t = t.child;
continue;
}
if (t === e) break e;
for (;null === t.sibling; ) {
if (null === t.return || t.return === e) break e;
r === t && (r = null), t = t.return;
}
r === t && (r = null), t.sibling.return = t.return, t = t.sibling;
}
}
break;

case 19:
Vo(t, e), Go(e), 4 & r && Ho(e);
break;

case 21:
break;

default:
Vo(t, e), Go(e);
}
}
function Go(e) {
var t = e.flags;
if (2 & t) {
try {
if (K) {
e: {
for (var n = e.return; null !== n; ) {
if (ko(n)) {
var r = n;
break e;
}
n = n.return;
}
throw Error(o(160));
}
switch (r.tag) {
case 5:
var i = r.stateNode;
32 & r.flags && (be(i), r.flags &= -33), Bo(e, Ro(e), i);
break;

case 3:
case 4:
var a = r.stateNode.containerInfo;
xo(e, Ro(e), a);
break;

default:
throw Error(o(161));
}
}
} catch (t) {
ds(e, e.return, t);
}
e.flags &= -3;
}
4096 & t && (e.flags &= -4097);
}
function zo(e, t, n) {
To = e, jo(e);
}
function jo(e, t, n) {
for (var r = 0 != (1 & e.mode); null !== To; ) {
var i = To, o = i.child;
if (22 === i.tag && r) {
var a = null !== i.memoizedState || bo;
if (!a) {
var s = i.alternate, l = null !== s && null !== s.memoizedState || So;
s = bo;
var c = So;
if (bo = a, (So = l) && !c) for (To = i; null !== To; ) l = (a = To).child, 22 === a.tag && null !== a.memoizedState ? Ko(i) : null !== l ? (l.return = a, 
To = l) : Ko(i);
for (;null !== o; ) To = o, jo(o), o = o.sibling;
To = i, bo = s, So = c;
}
qo(e);
} else 0 != (8772 & i.subtreeFlags) && null !== o ? (o.return = i, To = o) : qo(e);
}
}
function qo(e) {
for (;null !== To; ) {
var t = To;
if (0 != (8772 & t.flags)) {
var n = t.alternate;
try {
if (0 != (8772 & t.flags)) switch (t.tag) {
case 0:
case 11:
case 15:
So || Ao(5, t);
break;

case 1:
var r = t.stateNode;
if (4 & t.flags && !So) if (null === n) r.componentDidMount(); else {
var i = t.elementType === t.type ? n.memoizedProps : xn(t.type, n.memoizedProps);
r.componentDidUpdate(i, n.memoizedState, r.__reactInternalSnapshotBeforeUpdate);
}
var a = t.updateQueue;
null !== a && rr(t, a, r);
break;

case 3:
var s = t.updateQueue;
if (null !== s) {
if (n = null, null !== t.child) switch (t.child.tag) {
case 5:
n = k(t.child.stateNode);
break;

case 1:
n = t.child.stateNode;
}
rr(t, s, n);
}
break;

case 5:
var l = t.stateNode;
null === n && 4 & t.flags && he(l, t.type, t.memoizedProps, t);
break;

case 6:
case 4:
case 12:
case 19:
case 17:
case 21:
case 22:
case 23:
case 25:
break;

case 13:
if (X && null === t.memoizedState) {
var c = t.alternate;
if (null !== c) {
var d = c.memoizedState;
if (null !== d) {
var u = d.dehydrated;
null !== u && We(u);
}
}
}
break;

default:
throw Error(o(163));
}
So || 512 & t.flags && Lo(t);
} catch (e) {
ds(t, t.return, e);
}
}
if (t === e) {
To = null;
break;
}
if (null !== (n = t.sibling)) {
n.return = t.return, To = n;
break;
}
To = t.return;
}
}
function Yo(e) {
for (;null !== To; ) {
var t = To;
if (t === e) {
To = null;
break;
}
var n = t.sibling;
if (null !== n) {
n.return = t.return, To = n;
break;
}
To = t.return;
}
}
function Ko(e) {
for (;null !== To; ) {
var t = To;
try {
switch (t.tag) {
case 0:
case 11:
case 15:
var n = t.return;
try {
Ao(4, t);
} catch (e) {
ds(t, n, e);
}
break;

case 1:
var r = t.stateNode;
if ("function" == typeof r.componentDidMount) {
var i = t.return;
try {
r.componentDidMount();
} catch (e) {
ds(t, i, e);
}
}
var o = t.return;
try {
Lo(t);
} catch (e) {
ds(t, o, e);
}
break;

case 5:
var a = t.return;
try {
Lo(t);
} catch (e) {
ds(t, a, e);
}
}
} catch (e) {
ds(t, t.return, e);
}
if (t === e) {
To = null;
break;
}
var s = t.sibling;
if (null !== s) {
s.return = t.return, To = s;
break;
}
To = t.return;
}
}
var Xo = 0, Qo = 1, $o = 2, Zo = 3, ea = 4;
if ("function" == typeof Symbol && Symbol.for) {
var ta = Symbol.for;
Xo = ta("selector.component"), Qo = ta("selector.has_pseudo_class"), $o = ta("selector.role"), 
Zo = ta("selector.test_id"), ea = ta("selector.text");
}
function na(e) {
var t = Q(e);
if (null != t) {
if ("string" != typeof t.memoizedProps["data-testname"]) throw Error(o(364));
return t;
}
if (null === (e = ie(e))) throw Error(o(362));
return e.stateNode.current;
}
function ra(e, t) {
switch (t.$$typeof) {
case Xo:
if (e.type === t.value) return !0;
break;

case Qo:
e: {
t = t.value, e = [ e, 0 ];
for (var n = 0; n < e.length; ) {
var r = e[n++], i = e[n++], a = t[i];
if (5 !== r.tag || !se(r)) {
for (;null != a && ra(r, a); ) a = t[++i];
if (i === t.length) {
t = !0;
break e;
}
for (r = r.child; null !== r; ) e.push(r, i), r = r.sibling;
}
}
t = !1;
}
return t;

case $o:
if (5 === e.tag && le(e.stateNode, t.value)) return !0;
break;

case ea:
if ((5 === e.tag || 6 === e.tag) && (null !== (e = ae(e)) && 0 <= e.indexOf(t.value))) return !0;
break;

case Zo:
if (5 === e.tag && ("string" == typeof (e = e.memoizedProps["data-testname"]) && e.toLowerCase() === t.value.toLowerCase())) return !0;
break;

default:
throw Error(o(365));
}
return !1;
}
function ia(e) {
switch (e.$$typeof) {
case Xo:
return "<" + (v(e.value) || "Unknown") + ">";

case Qo:
return ":has(" + (ia(e) || "") + ")";

case $o:
return '[role="' + e.value + '"]';

case ea:
return '"' + e.value + '"';

case Zo:
return '[data-testname="' + e.value + '"]';

default:
throw Error(o(365));
}
}
function oa(e, t) {
var n = [];
e = [ e, 0 ];
for (var r = 0; r < e.length; ) {
var i = e[r++], o = e[r++], a = t[o];
if (5 !== i.tag || !se(i)) {
for (;null != a && ra(i, a); ) a = t[++o];
if (o === t.length) n.push(i); else for (i = i.child; null !== i; ) e.push(i, o), 
i = i.sibling;
}
}
return n;
}
function aa(e, t) {
if (!re) throw Error(o(363));
e = oa(e = na(e), t), t = [], e = Array.from(e);
for (var n = 0; n < e.length; ) {
var r = e[n++];
if (5 === r.tag) se(r) || t.push(r.stateNode); else for (r = r.child; null !== r; ) e.push(r), 
r = r.sibling;
}
return t;
}
var sa = Math.ceil, la = a.ReactCurrentDispatcher, ca = a.ReactCurrentOwner, da = a.ReactCurrentBatchConfig, ua = 0, pa = null, fa = null, ha = 0, ma = 0, ga = st(0), ya = 0, Ia = null, _a = 0, ba = 0, Sa = 0, va = null, Ta = null, Ea = 0, Pa = 1 / 0, Oa = null;
function Ca() {
Pa = Jt() + 500;
}
var Na, Aa = !1, La = null, wa = null, ka = !1, Ra = null, xa = 0, Ba = 0, Da = null, Fa = -1, Ma = 0;
function Ua() {
return 0 != (6 & ua) ? Jt() : -1 !== Fa ? Fa : Fa = Jt();
}
function Ha(e) {
return 0 == (1 & e.mode) ? 1 : 0 != (2 & ua) && 0 !== ha ? ha & -ha : null !== wn.transition ? (0 === Ma && (Ma = wt()), 
Ma) : 0 !== (e = Dt) ? e : Z();
}
function Va(e, t, n, r) {
if (50 < Ba) throw Ba = 0, Da = null, Error(o(185));
Rt(e, n, r), 0 != (2 & ua) && e === pa || (e === pa && (0 == (2 & ua) && (ba |= n), 
4 === ya && Ya(e, ha)), Ja(e, r), 1 === n && 0 === ua && 0 == (1 & t.mode) && (Ca(), 
$t && nn()));
}
function Ja(e, t) {
var n = e.callbackNode;
At(e, t);
var r = Ct(e, e === pa ? ha : 0);
if (0 === r) null !== n && Ut(n), e.callbackNode = null, e.callbackPriority = 0; else if (t = r & -r, 
e.callbackPriority !== t) {
if (null != n && Ut(n), 1 === t) 0 === e.tag ? tn(Ka.bind(null, e)) : en(Ka.bind(null, e)), 
te ? ne((function() {
0 == (6 & ua) && nn();
})) : Mt(Gt, nn), n = null; else {
switch (Ft(r)) {
case 1:
n = Gt;
break;

case 4:
n = zt;
break;

case 16:
default:
n = jt;
break;

case 536870912:
n = qt;
}
n = ms(n, Ga.bind(null, e));
}
e.callbackPriority = t, e.callbackNode = n;
}
}
function Ga(e, t) {
if (Fa = -1, Ma = 0, 0 != (6 & ua)) throw Error(o(327));
var n = e.callbackNode;
if (ls() && e.callbackNode !== n) return null;
var r = Ct(e, e === pa ? ha : 0);
if (0 === r) return null;
if (0 != (30 & r) || 0 != (r & e.expiredLanes) || t) t = ts(e, r); else {
t = r;
var i = ua;
ua |= 2;
var a = Za();
for (pa === e && ha === t || (Oa = null, Ca(), Qa(e, t)); ;) try {
rs();
break;
} catch (t) {
$a(e, t);
}
Un(), la.current = a, ua = i, null !== fa ? t = 0 : (pa = null, ha = 0, t = ya);
}
if (0 !== t) {
if (2 === t && (0 !== (i = Lt(e)) && (r = i, t = za(e, i))), 1 === t) throw n = Ia, 
Qa(e, 0), Ya(e, r), Ja(e, Jt()), n;
if (6 === t) Ya(e, r); else {
if (i = e.current.alternate, 0 == (30 & r) && !qa(i) && (2 === (t = ts(e, r)) && (0 !== (a = Lt(e)) && (r = a, 
t = za(e, a))), 1 === t)) throw n = Ia, Qa(e, 0), Ya(e, r), Ja(e, Jt()), n;
switch (e.finishedWork = i, e.finishedLanes = r, t) {
case 0:
case 1:
throw Error(o(345));

case 2:
case 5:
as(e, Ta, Oa);
break;

case 3:
if (Ya(e, r), (130023424 & r) === r && 10 < (t = Ea + 500 - Jt())) {
if (0 !== Ct(e, 0)) break;
if (((i = e.suspendedLanes) & r) !== r) {
Ua(), e.pingedLanes |= e.suspendedLanes & i;
break;
}
e.timeoutHandle = z(as.bind(null, e, Ta, Oa), t);
break;
}
as(e, Ta, Oa);
break;

case 4:
if (Ya(e, r), (4194240 & r) === r) break;
for (t = e.eventTimes, i = -1; 0 < r; ) {
var s = 31 - St(r);
a = 1 << s, (s = t[s]) > i && (i = s), r &= ~a;
}
if (r = i, 10 < (r = (120 > (r = Jt() - r) ? 120 : 480 > r ? 480 : 1080 > r ? 1080 : 1920 > r ? 1920 : 3e3 > r ? 3e3 : 4320 > r ? 4320 : 1960 * sa(r / 1960)) - r)) {
e.timeoutHandle = z(as.bind(null, e, Ta, Oa), r);
break;
}
as(e, Ta, Oa);
break;

default:
throw Error(o(329));
}
}
}
return Ja(e, Jt()), e.callbackNode === n ? Ga.bind(null, e) : null;
}
function za(e, t) {
var n = va;
return e.current.memoizedState.isDehydrated && (Qa(e, t).flags |= 256), 2 !== (e = ts(e, t)) && (t = Ta, 
Ta = n, null !== t && ja(t)), e;
}
function ja(e) {
null === Ta ? Ta = e : Ta.push.apply(Ta, e);
}
function qa(e) {
for (var t = e; ;) {
if (16384 & t.flags) {
var n = t.updateQueue;
if (null !== n && null !== (n = n.stores)) for (var r = 0; r < n.length; r++) {
var i = n[r], o = i.getSnapshot;
i = i.value;
try {
if (!Xt(o(), i)) return !1;
} catch (e) {
return !1;
}
}
}
if (n = t.child, 16384 & t.subtreeFlags && null !== n) n.return = t, t = n; else {
if (t === e) break;
for (;null === t.sibling; ) {
if (null === t.return || t.return === e) return !0;
t = t.return;
}
t.sibling.return = t.return, t = t.sibling;
}
}
return !0;
}
function Ya(e, t) {
for (t &= ~Sa, t &= ~ba, e.suspendedLanes |= t, e.pingedLanes &= ~t, e = e.expirationTimes; 0 < t; ) {
var n = 31 - St(t), r = 1 << n;
e[n] = -1, t &= ~r;
}
}
function Ka(e) {
if (0 != (6 & ua)) throw Error(o(327));
ls();
var t = Ct(e, 0);
if (0 == (1 & t)) return Ja(e, Jt()), null;
var n = ts(e, t);
if (0 !== e.tag && 2 === n) {
var r = Lt(e);
0 !== r && (t = r, n = za(e, r));
}
if (1 === n) throw n = Ia, Qa(e, 0), Ya(e, t), Ja(e, Jt()), n;
if (6 === n) throw Error(o(345));
return e.finishedWork = e.current.alternate, e.finishedLanes = t, as(e, Ta, Oa), 
Ja(e, Jt()), null;
}
function Wa(e) {
null !== Ra && 0 === Ra.tag && 0 == (6 & ua) && ls();
var t = ua;
ua |= 1;
var n = da.transition, r = Dt;
try {
if (da.transition = null, Dt = 1, e) return e();
} finally {
Dt = r, da.transition = n, 0 == (6 & (ua = t)) && nn();
}
}
function Xa() {
ma = ga.current, lt(ga);
}
function Qa(e, t) {
e.finishedWork = null, e.finishedLanes = 0;
var n = e.timeoutHandle;
if (n !== q && (e.timeoutHandle = q, j(n)), null !== fa) for (n = fa.return; null !== n; ) {
var r = n;
switch (gn(r), r.tag) {
case 1:
null != (r = r.type.childContextTypes) && gt();
break;

case 3:
Tr(), lt(pt), lt(ut), Ar();
break;

case 5:
Pr(r);
break;

case 4:
Tr();
break;

case 13:
case 19:
lt(Or);
break;

case 10:
Vn(r.type._context);
break;

case 22:
case 23:
Xa();
}
n = n.return;
}
if (pa = e, fa = e = bs(e.current, null), ha = ma = t, ya = 0, Ia = null, Sa = ba = _a = 0, 
Ta = va = null, null !== jn) {
for (t = 0; t < jn.length; t++) if (null !== (r = (n = jn[t]).interleaved)) {
n.interleaved = null;
var i = r.next, o = n.pending;
if (null !== o) {
var a = o.next;
o.next = i, r.next = a;
}
n.pending = r;
}
jn = null;
}
return e;
}
function $a(e, t) {
for (;;) {
var n = fa;
try {
if (Un(), Lr.current = Ei, Dr) {
for (var r = Rr.memoizedState; null !== r; ) {
var i = r.queue;
null !== i && (i.pending = null), r = r.next;
}
Dr = !1;
}
if (kr = 0, Br = xr = Rr = null, Fr = !1, Mr = 0, ca.current = null, null === n || null === n.return) {
ya = 1, Ia = t, fa = null;
break;
}
e: {
var a = e, s = n.return, l = n, c = t;
if (t = ha, l.flags |= 32768, null !== c && "object" == typeof c && "function" == typeof c.then) {
var d = c, u = l, p = u.tag;
if (0 == (1 & u.mode) && (0 === p || 11 === p || 15 === p)) {
var f = u.alternate;
f ? (u.updateQueue = f.updateQueue, u.memoizedState = f.memoizedState, u.lanes = f.lanes) : (u.updateQueue = null, 
u.memoizedState = null);
}
var h = Bi(s);
if (null !== h) {
h.flags &= -257, Di(h, s, l, 0, t), 1 & h.mode && xi(a, d, t), c = d;
var m = (t = h).updateQueue;
if (null === m) {
var g = new Set;
g.add(c), t.updateQueue = g;
} else m.add(c);
break e;
}
if (0 == (1 & t)) {
xi(a, d, t), es();
break e;
}
c = Error(o(426));
} else if (_n && 1 & l.mode) {
var y = Bi(s);
if (null !== y) {
0 == (65536 & y.flags) && (y.flags |= 256), Di(y, s, l, 0, t), Ln(Ni(c, l));
break e;
}
}
a = c = Ni(c, l), 4 !== ya && (ya = 2), null === va ? va = [ a ] : va.push(a), a = s;
do {
switch (a.tag) {
case 3:
a.flags |= 65536, t &= -t, a.lanes |= t, tr(a, ki(0, c, t));
break e;

case 1:
l = c;
var I = a.type, _ = a.stateNode;
if (0 == (128 & a.flags) && ("function" == typeof I.getDerivedStateFromError || null !== _ && "function" == typeof _.componentDidCatch && (null === wa || !wa.has(_)))) {
a.flags |= 65536, t &= -t, a.lanes |= t, tr(a, Ri(a, l, t));
break e;
}
}
a = a.return;
} while (null !== a);
}
os(n);
} catch (e) {
t = e, fa === n && null !== n && (fa = n = n.return);
continue;
}
break;
}
}
function Za() {
var e = la.current;
return la.current = Ei, null === e ? Ei : e;
}
function es() {
0 !== ya && 3 !== ya && 2 !== ya || (ya = 4), null === pa || 0 == (268435455 & _a) && 0 == (268435455 & ba) || Ya(pa, ha);
}
function ts(e, t) {
var n = ua;
ua |= 2;
var r = Za();
for (pa === e && ha === t || (Oa = null, Qa(e, t)); ;) try {
ns();
break;
} catch (t) {
$a(e, t);
}
if (Un(), ua = n, la.current = r, null !== fa) throw Error(o(261));
return pa = null, ha = 0, ya;
}
function ns() {
for (;null !== fa; ) is(fa);
}
function rs() {
for (;null !== fa && !Ht(); ) is(fa);
}
function is(e) {
var t = Na(e.alternate, e, ma);
e.memoizedProps = e.pendingProps, null === t ? os(e) : fa = t, ca.current = null;
}
function os(e) {
var t = e;
do {
var n = t.alternate;
if (e = t.return, 0 == (32768 & t.flags)) {
if (null !== (n = Io(n, t, ma))) return void (fa = n);
} else {
if (null !== (n = _o(n, t))) return n.flags &= 32767, void (fa = n);
if (null === e) return ya = 6, void (fa = null);
e.flags |= 32768, e.subtreeFlags = 0, e.deletions = null;
}
if (null !== (t = t.sibling)) return void (fa = t);
fa = t = e;
} while (null !== t);
0 === ya && (ya = 5);
}
function as(e, t, n) {
var r = Dt, i = da.transition;
try {
da.transition = null, Dt = 1, ss(e, t, n, r);
} finally {
da.transition = i, Dt = r;
}
return null;
}
function ss(e, t, n, r) {
do {
ls();
} while (null !== Ra);
if (0 != (6 & ua)) throw Error(o(327));
n = e.finishedWork;
var i = e.finishedLanes;
if (null === n) return null;
if (e.finishedWork = null, e.finishedLanes = 0, n === e.current) throw Error(o(177));
e.callbackNode = null, e.callbackPriority = 0;
var a = n.lanes | n.childLanes;
if (xt(e, a), e === pa && (fa = pa = null, ha = 0), 0 == (2064 & n.subtreeFlags) && 0 == (2064 & n.flags) || ka || (ka = !0, 
ms(jt, (function() {
return ls(), null;
}))), a = 0 != (15990 & n.flags), 0 != (15990 & n.subtreeFlags) || a) {
a = da.transition, da.transition = null;
var s = Dt;
Dt = 1;
var l = ua;
ua |= 4, ca.current = null, Co(e, n), Jo(n, e), D(e.containerInfo), e.current = n, 
zo(n), Vt(), ua = l, Dt = s, da.transition = a;
} else e.current = n;
if (ka && (ka = !1, Ra = e, xa = i), 0 === (a = e.pendingLanes) && (wa = null), 
Wt(n.stateNode), Ja(e, Jt()), null !== t) for (r = e.onRecoverableError, n = 0; n < t.length; n++) r((i = t[n]).value, {
componentStack: i.stack,
digest: i.digest
});
if (Aa) throw Aa = !1, e = La, La = null, e;
return 0 != (1 & xa) && 0 !== e.tag && ls(), 0 != (1 & (a = e.pendingLanes)) ? e === Da ? Ba++ : (Ba = 0, 
Da = e) : Ba = 0, nn(), null;
}
function ls() {
if (null !== Ra) {
var e = Ft(xa), t = da.transition, n = Dt;
try {
if (da.transition = null, Dt = 16 > e ? 16 : e, null === Ra) var r = !1; else {
if (e = Ra, Ra = null, xa = 0, 0 != (6 & ua)) throw Error(o(331));
var i = ua;
for (ua |= 4, To = e.current; null !== To; ) {
var a = To, s = a.child;
if (0 != (16 & To.flags)) {
var l = a.deletions;
if (null !== l) {
for (var c = 0; c < l.length; c++) {
var d = l[c];
for (To = d; null !== To; ) {
var u = To;
switch (u.tag) {
case 0:
case 11:
case 15:
No(8, u, a);
}
var p = u.child;
if (null !== p) p.return = u, To = p; else for (;null !== To; ) {
var f = (u = To).sibling, h = u.return;
if (wo(u), u === d) {
To = null;
break;
}
if (null !== f) {
f.return = h, To = f;
break;
}
To = h;
}
}
}
var m = a.alternate;
if (null !== m) {
var g = m.child;
if (null !== g) {
m.child = null;
do {
var y = g.sibling;
g.sibling = null, g = y;
} while (null !== g);
}
}
To = a;
}
}
if (0 != (2064 & a.subtreeFlags) && null !== s) s.return = a, To = s; else e: for (;null !== To; ) {
if (0 != (2048 & (a = To).flags)) switch (a.tag) {
case 0:
case 11:
case 15:
No(9, a, a.return);
}
var I = a.sibling;
if (null !== I) {
I.return = a.return, To = I;
break e;
}
To = a.return;
}
}
var _ = e.current;
for (To = _; null !== To; ) {
var b = (s = To).child;
if (0 != (2064 & s.subtreeFlags) && null !== b) b.return = s, To = b; else e: for (s = _; null !== To; ) {
if (0 != (2048 & (l = To).flags)) try {
switch (l.tag) {
case 0:
case 11:
case 15:
Ao(9, l);
}
} catch (e) {
ds(l, l.return, e);
}
if (l === s) {
To = null;
break e;
}
var S = l.sibling;
if (null !== S) {
S.return = l.return, To = S;
break e;
}
To = l.return;
}
}
if (ua = i, nn(), Kt && "function" == typeof Kt.onPostCommitFiberRoot) try {
Kt.onPostCommitFiberRoot(Yt, e);
} catch (e) {}
r = !0;
}
return r;
} finally {
Dt = n, da.transition = t;
}
}
return !1;
}
function cs(e, t, n) {
e = Zn(e, t = ki(0, t = Ni(n, t), 1), 1), t = Ua(), null !== e && (Rt(e, 1, t), 
Ja(e, t));
}
function ds(e, t, n) {
if (3 === e.tag) cs(e, e, n); else for (;null !== t; ) {
if (3 === t.tag) {
cs(t, e, n);
break;
}
if (1 === t.tag) {
var r = t.stateNode;
if ("function" == typeof t.type.getDerivedStateFromError || "function" == typeof r.componentDidCatch && (null === wa || !wa.has(r))) {
t = Zn(t, e = Ri(t, e = Ni(n, e), 1), 1), e = Ua(), null !== t && (Rt(t, 1, e), 
Ja(t, e));
break;
}
}
t = t.return;
}
}
function us(e, t, n) {
var r = e.pingCache;
null !== r && r.delete(t), t = Ua(), e.pingedLanes |= e.suspendedLanes & n, pa === e && (ha & n) === n && (4 === ya || 3 === ya && (130023424 & ha) === ha && 500 > Jt() - Ea ? Qa(e, 0) : Sa |= n), 
Ja(e, t);
}
function ps(e, t) {
0 === t && (0 == (1 & e.mode) ? t = 1 : (t = Pt, 0 == (130023424 & (Pt <<= 1)) && (Pt = 4194304)));
var n = Ua();
null !== (e = Kn(e, t)) && (Rt(e, t, n), Ja(e, n));
}
function fs(e) {
var t = e.memoizedState, n = 0;
null !== t && (n = t.retryLane), ps(e, n);
}
function hs(e, t) {
var n = 0;
switch (e.tag) {
case 13:
var r = e.stateNode, i = e.memoizedState;
null !== i && (n = i.retryLane);
break;

case 19:
r = e.stateNode;
break;

default:
throw Error(o(314));
}
null !== r && r.delete(t), ps(e, n);
}
function ms(e, t) {
return Mt(e, t);
}
function gs(e, t, n, r) {
this.tag = e, this.key = n, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, 
this.index = 0, this.ref = null, this.pendingProps = t, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, 
this.mode = r, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, 
this.alternate = null;
}
function ys(e, t, n, r) {
return new gs(e, t, n, r);
}
function Is(e) {
return !(!(e = e.prototype) || !e.isReactComponent);
}
function _s(e) {
if ("function" == typeof e) return Is(e) ? 1 : 0;
if (null != e) {
if ((e = e.$$typeof) === h) return 11;
if (e === y) return 14;
}
return 2;
}
function bs(e, t) {
var n = e.alternate;
return null === n ? ((n = ys(e.tag, t, e.key, e.mode)).elementType = e.elementType, 
n.type = e.type, n.stateNode = e.stateNode, n.alternate = e, e.alternate = n) : (n.pendingProps = t, 
n.type = e.type, n.flags = 0, n.subtreeFlags = 0, n.deletions = null), n.flags = 14680064 & e.flags, 
n.childLanes = e.childLanes, n.lanes = e.lanes, n.child = e.child, n.memoizedProps = e.memoizedProps, 
n.memoizedState = e.memoizedState, n.updateQueue = e.updateQueue, t = e.dependencies, 
n.dependencies = null === t ? null : {
lanes: t.lanes,
firstContext: t.firstContext
}, n.sibling = e.sibling, n.index = e.index, n.ref = e.ref, n;
}
function Ss(e, t, n, r, i, a) {
var s = 2;
if (r = e, "function" == typeof e) Is(e) && (s = 1); else if ("string" == typeof e) s = 5; else e: switch (e) {
case c:
return vs(n.children, i, a, t);

case d:
s = 8, i |= 8;
break;

case u:
return (e = ys(12, n, t, 2 | i)).elementType = u, e.lanes = a, e;

case m:
return (e = ys(13, n, t, i)).elementType = m, e.lanes = a, e;

case g:
return (e = ys(19, n, t, i)).elementType = g, e.lanes = a, e;

case _:
return Ts(n, i, a, t);

default:
if ("object" == typeof e && null !== e) switch (e.$$typeof) {
case p:
s = 10;
break e;

case f:
s = 9;
break e;

case h:
s = 11;
break e;

case y:
s = 14;
break e;

case I:
s = 16, r = null;
break e;
}
throw Error(o(130, null == e ? e : typeof e, ""));
}
return (t = ys(s, n, t, i)).elementType = e, t.type = r, t.lanes = a, t;
}
function vs(e, t, n, r) {
return (e = ys(7, e, r, t)).lanes = n, e;
}
function Ts(e, t, n, r) {
return (e = ys(22, e, r, t)).elementType = _, e.lanes = n, e.stateNode = {
isHidden: !1
}, e;
}
function Es(e, t, n) {
return (e = ys(6, e, null, t)).lanes = n, e;
}
function Ps(e, t, n) {
return (t = ys(4, null !== e.children ? e.children : [], e.key, t)).lanes = n, t.stateNode = {
containerInfo: e.containerInfo,
pendingChildren: null,
implementation: e.implementation
}, t;
}
function Os(e, t, n, r, i) {
this.tag = t, this.containerInfo = e, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, 
this.timeoutHandle = q, this.callbackNode = this.pendingContext = this.context = null, 
this.callbackPriority = 0, this.eventTimes = kt(0), this.expirationTimes = kt(-1), 
this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, 
this.entanglements = kt(0), this.identifierPrefix = r, this.onRecoverableError = i, 
X && (this.mutableSourceEagerHydrationData = null);
}
function Cs(e, t, n, r, i, o, a, s, l) {
return e = new Os(e, t, n, s, l), 1 === t ? (t = 1, !0 === o && (t |= 8)) : t = 0, 
o = ys(3, null, null, t), e.current = o, o.stateNode = e, o.memoizedState = {
element: r,
isDehydrated: n,
cache: null,
transitions: null,
pendingSuspenseBoundaries: null
}, Xn(o), e;
}
function Ns(e) {
if (!e) return dt;
e: {
if (E(e = e._reactInternals) !== e || 1 !== e.tag) throw Error(o(170));
var t = e;
do {
switch (t.tag) {
case 3:
t = t.stateNode.context;
break e;

case 1:
if (mt(t.type)) {
t = t.stateNode.__reactInternalMemoizedMergedChildContext;
break e;
}
}
t = t.return;
} while (null !== t);
throw Error(o(171));
}
if (1 === e.tag) {
var n = e.type;
if (mt(n)) return It(e, n, t);
}
return t;
}
function As(e) {
var t = e._reactInternals;
if (void 0 === t) {
if ("function" == typeof e.render) throw Error(o(188));
throw e = Object.keys(e).join(","), Error(o(268, e));
}
return null === (e = C(t)) ? null : e.stateNode;
}
function Ls(e, t) {
if (null !== (e = e.memoizedState) && null !== e.dehydrated) {
var n = e.retryLane;
e.retryLane = 0 !== n && n < t ? n : t;
}
}
function ws(e, t) {
Ls(e, t), (e = e.alternate) && Ls(e, t);
}
function ks(e) {
return null === (e = C(e)) ? null : e.stateNode;
}
function Rs() {
return null;
}
return Na = function(e, t, n) {
if (null !== e) if (e.memoizedProps !== t.pendingProps || pt.current) Mi = !0; else {
if (0 == (e.lanes & n) && 0 == (128 & t.flags)) return Mi = !1, po(e, t, n);
Mi = 0 != (131072 & e.flags);
} else Mi = !1, _n && 0 != (1048576 & t.flags) && hn(t, sn, t.index);
switch (t.lanes = 0, t.tag) {
case 2:
var r = t.type;
co(e, t), e = t.pendingProps;
var i = ht(t, ut.current);
Gn(t, n), i = Jr(null, t, r, e, i, n);
var a = Gr();
return t.flags |= 1, "object" == typeof i && null !== i && "function" == typeof i.render && void 0 === i.$$typeof ? (t.tag = 1, 
t.memoizedState = null, t.updateQueue = null, mt(r) ? (a = !0, _t(t)) : a = !1, 
t.memoizedState = null !== i.state && void 0 !== i.state ? i.state : null, Xn(t), 
i.updater = ar, t.stateNode = i, i._reactInternals = t, dr(t, r, e, n), t = Yi(null, t, r, !0, a, n)) : (t.tag = 0, 
_n && a && mn(t), Ui(null, t, i, n), t = t.child), t;

case 16:
r = t.elementType;
e: {
switch (co(e, t), e = t.pendingProps, r = (i = r._init)(r._payload), t.type = r, 
i = t.tag = _s(r), e = xn(r, e), i) {
case 0:
t = ji(null, t, r, e, n);
break e;

case 1:
t = qi(null, t, r, e, n);
break e;

case 11:
t = Hi(null, t, r, e, n);
break e;

case 14:
t = Vi(null, t, r, xn(r.type, e), n);
break e;
}
throw Error(o(306, r, ""));
}
return t;

case 0:
return r = t.type, i = t.pendingProps, ji(e, t, r, i = t.elementType === r ? i : xn(r, i), n);

case 1:
return r = t.type, i = t.pendingProps, qi(e, t, r, i = t.elementType === r ? i : xn(r, i), n);

case 3:
e: {
if (Ki(t), null === e) throw Error(o(387));
r = t.pendingProps, i = (a = t.memoizedState).element, Qn(e, t), nr(t, r, null, n);
var s = t.memoizedState;
if (r = s.element, X && a.isDehydrated) {
if (a = {
element: r,
isDehydrated: !1,
cache: s.cache,
pendingSuspenseBoundaries: s.pendingSuspenseBoundaries,
transitions: s.transitions
}, t.updateQueue.baseState = a, t.memoizedState = a, 256 & t.flags) {
t = Wi(e, t, r, n, i = Ni(Error(o(423)), t));
break e;
}
if (r !== i) {
t = Wi(e, t, r, n, i = Ni(Error(o(424)), t));
break e;
}
for (X && (In = Je(t.stateNode.containerInfo), yn = t, _n = !0, Sn = null, bn = !1), 
n = gr(t, null, r, n), t.child = n; n; ) n.flags = -3 & n.flags | 4096, n = n.sibling;
} else {
if (An(), r === i) {
t = uo(e, t, n);
break e;
}
Ui(e, t, r, n);
}
t = t.child;
}
return t;

case 5:
return Er(t), null === e && Pn(t), r = t.type, i = t.pendingProps, a = null !== e ? e.memoizedProps : null, 
s = i.children, J(r, i) ? s = null : null !== a && J(r, a) && (t.flags |= 32), zi(e, t), 
Ui(e, t, s, n), t.child;

case 6:
return null === e && Pn(t), null;

case 13:
return no(e, t, n);

case 4:
return vr(t, t.stateNode.containerInfo), r = t.pendingProps, null === e ? t.child = mr(t, null, r, n) : Ui(e, t, r, n), 
t.child;

case 11:
return r = t.type, i = t.pendingProps, Hi(e, t, r, i = t.elementType === r ? i : xn(r, i), n);

case 7:
return Ui(e, t, t.pendingProps, n), t.child;

case 8:
case 12:
return Ui(e, t, t.pendingProps.children, n), t.child;

case 10:
e: {
if (r = t.type._context, i = t.pendingProps, a = t.memoizedProps, Hn(0, r, s = i.value), 
null !== a) if (Xt(a.value, s)) {
if (a.children === i.children && !pt.current) {
t = uo(e, t, n);
break e;
}
} else for (null !== (a = t.child) && (a.return = t); null !== a; ) {
var l = a.dependencies;
if (null !== l) {
s = a.child;
for (var c = l.firstContext; null !== c; ) {
if (c.context === r) {
if (1 === a.tag) {
(c = $n(-1, n & -n)).tag = 2;
var d = a.updateQueue;
if (null !== d) {
var u = (d = d.shared).pending;
null === u ? c.next = c : (c.next = u.next, u.next = c), d.pending = c;
}
}
a.lanes |= n, null !== (c = a.alternate) && (c.lanes |= n), Jn(a.return, n, t), 
l.lanes |= n;
break;
}
c = c.next;
}
} else if (10 === a.tag) s = a.type === t.type ? null : a.child; else if (18 === a.tag) {
if (null === (s = a.return)) throw Error(o(341));
s.lanes |= n, null !== (l = s.alternate) && (l.lanes |= n), Jn(s, n, t), s = a.sibling;
} else s = a.child;
if (null !== s) s.return = a; else for (s = a; null !== s; ) {
if (s === t) {
s = null;
break;
}
if (null !== (a = s.sibling)) {
a.return = s.return, s = a;
break;
}
s = s.return;
}
a = s;
}
Ui(e, t, i.children, n), t = t.child;
}
return t;

case 9:
return i = t.type, r = t.pendingProps.children, Gn(t, n), r = r(i = zn(i)), t.flags |= 1, 
Ui(e, t, r, n), t.child;

case 14:
return i = xn(r = t.type, t.pendingProps), Vi(e, t, r, i = xn(r.type, i), n);

case 15:
return Ji(e, t, t.type, t.pendingProps, n);

case 17:
return r = t.type, i = t.pendingProps, i = t.elementType === r ? i : xn(r, i), co(e, t), 
t.tag = 1, mt(r) ? (e = !0, _t(t)) : e = !1, Gn(t, n), lr(t, r, i), dr(t, r, i, n), 
Yi(null, t, r, !0, e, n);

case 19:
return lo(e, t, n);

case 22:
return Gi(e, t, n);
}
throw Error(o(156, t.tag));
}, t.attemptContinuousHydration = function(e) {
if (13 === e.tag) {
var t = Kn(e, 134217728);
if (null !== t) Va(t, e, 134217728, Ua());
ws(e, 134217728);
}
}, t.attemptDiscreteHydration = function(e) {
if (13 === e.tag) {
var t = Kn(e, 1);
if (null !== t) Va(t, e, 1, Ua());
ws(e, 1);
}
}, t.attemptHydrationAtCurrentPriority = function(e) {
if (13 === e.tag) {
var t = Ha(e), n = Kn(e, t);
if (null !== n) Va(n, e, t, Ua());
ws(e, t);
}
}, t.attemptSynchronousHydration = function(e) {
switch (e.tag) {
case 3:
var t = e.stateNode;
if (t.current.memoizedState.isDehydrated) {
var n = Ot(t.pendingLanes);
0 !== n && (Bt(t, 1 | n), Ja(t, Jt()), 0 == (6 & ua) && (Ca(), nn()));
}
break;

case 13:
Wa((function() {
var t = Kn(e, 1);
if (null !== t) {
var n = Ua();
Va(t, e, 1, n);
}
})), ws(e, 1);
}
}, t.batchedUpdates = function(e, t) {
var n = ua;
ua |= 1;
try {
return e(t);
} finally {
0 === (ua = n) && (Ca(), $t && nn());
}
}, t.createComponentSelector = function(e) {
return {
$$typeof: Xo,
value: e
};
}, t.createContainer = function(e, t, n, r, i, o, a) {
return Cs(e, t, !1, null, 0, r, 0, o, a);
}, t.createHasPseudoClassSelector = function(e) {
return {
$$typeof: Qo,
value: e
};
}, t.createHydrationContainer = function(e, t, n, r, i, o, a, s, l) {
return (e = Cs(n, r, !0, e, 0, o, 0, s, l)).context = Ns(null), n = e.current, (o = $n(r = Ua(), i = Ha(n))).callback = null != t ? t : null, 
Zn(n, o, i), e.current.lanes = i, Rt(e, i, r), Ja(e, r), e;
}, t.createPortal = function(e, t, n) {
var r = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
return {
$$typeof: l,
key: null == r ? null : "" + r,
children: e,
containerInfo: t,
implementation: n
};
}, t.createRoleSelector = function(e) {
return {
$$typeof: $o,
value: e
};
}, t.createTestNameSelector = function(e) {
return {
$$typeof: Zo,
value: e
};
}, t.createTextSelector = function(e) {
return {
$$typeof: ea,
value: e
};
}, t.deferredUpdates = function(e) {
var t = Dt, n = da.transition;
try {
return da.transition = null, Dt = 16, e();
} finally {
Dt = t, da.transition = n;
}
}, t.discreteUpdates = function(e, t, n, r, i) {
var o = Dt, a = da.transition;
try {
return da.transition = null, Dt = 1, e(t, n, r, i);
} finally {
Dt = o, da.transition = a, 0 === ua && Ca();
}
}, t.findAllNodes = aa, t.findBoundingRects = function(e, t) {
if (!re) throw Error(o(363));
t = aa(e, t), e = [];
for (var n = 0; n < t.length; n++) e.push(oe(t[n]));
for (t = e.length - 1; 0 < t; t--) for (var r = (n = e[t]).x, i = r + n.width, a = n.y, s = a + n.height, l = t - 1; 0 <= l; l--) if (t !== l) {
var c = e[l], d = c.x, u = d + c.width, p = c.y, f = p + c.height;
if (r >= d && a >= p && i <= u && s <= f) {
e.splice(t, 1);
break;
}
if (!(r !== d || n.width !== c.width || f < a || p > s)) {
p > a && (c.height += p - a, c.y = a), f < s && (c.height = s - p), e.splice(t, 1);
break;
}
if (!(a !== p || n.height !== c.height || u < r || d > i)) {
d > r && (c.width += d - r, c.x = r), u < i && (c.width = i - d), e.splice(t, 1);
break;
}
}
return e;
}, t.findHostInstance = As, t.findHostInstanceWithNoPortals = function(e) {
return null === (e = null !== (e = O(e)) ? A(e) : null) ? null : e.stateNode;
}, t.findHostInstanceWithWarning = function(e) {
return As(e);
}, t.flushControlled = function(e) {
var t = ua;
ua |= 1;
var n = da.transition, r = Dt;
try {
da.transition = null, Dt = 1, e();
} finally {
Dt = r, da.transition = n, 0 === (ua = t) && (Ca(), nn());
}
}, t.flushPassiveEffects = ls, t.flushSync = Wa, t.focusWithin = function(e, t) {
if (!re) throw Error(o(363));
for (t = oa(e = na(e), t), t = Array.from(t), e = 0; e < t.length; ) {
var n = t[e++];
if (!se(n)) {
if (5 === n.tag && ce(n.stateNode)) return !0;
for (n = n.child; null !== n; ) t.push(n), n = n.sibling;
}
}
return !1;
}, t.getCurrentUpdatePriority = function() {
return Dt;
}, t.getFindAllNodesFailureDescription = function(e, t) {
if (!re) throw Error(o(363));
var n = 0, r = [];
e = [ na(e), 0 ];
for (var i = 0; i < e.length; ) {
var a = e[i++], s = e[i++], l = t[s];
if ((5 !== a.tag || !se(a)) && (ra(a, l) && (r.push(ia(l)), ++s > n && (n = s)), 
s < t.length)) for (a = a.child; null !== a; ) e.push(a, s), a = a.sibling;
}
if (n < t.length) {
for (e = []; n < t.length; n++) e.push(ia(t[n]));
return "findAllNodes was able to match part of the selector:\n  " + r.join(" > ") + "\n\nNo matching component was found for:\n  " + e.join(" > ");
}
return null;
}, t.getPublicRootInstance = function(e) {
return (e = e.current).child ? 5 === e.child.tag ? k(e.child.stateNode) : e.child.stateNode : null;
}, t.injectIntoDevTools = function(e) {
if (e = {
bundleType: e.bundleType,
version: e.version,
rendererPackageName: e.rendererPackageName,
rendererConfig: e.rendererConfig,
overrideHookState: null,
overrideHookStateDeletePath: null,
overrideHookStateRenamePath: null,
overrideProps: null,
overridePropsDeletePath: null,
overridePropsRenamePath: null,
setErrorHandler: null,
setSuspenseHandler: null,
scheduleUpdate: null,
currentDispatcherRef: a.ReactCurrentDispatcher,
findHostInstanceByFiber: ks,
findFiberByHostInstance: e.findFiberByHostInstance || Rs,
findHostInstancesForRefresh: null,
scheduleRefresh: null,
scheduleRoot: null,
setRefreshHandler: null,
getCurrentFiber: null,
reconcilerVersion: "18.2.0"
}, "undefined" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) e = !1; else {
var t = __REACT_DEVTOOLS_GLOBAL_HOOK__;
if (t.isDisabled || !t.supportsFiber) e = !0; else {
try {
Yt = t.inject(e), Kt = t;
} catch (e) {}
e = !!t.checkDCE;
}
}
return e;
}, t.isAlreadyRendering = function() {
return !1;
}, t.observeVisibleRects = function(e, t, n, r) {
if (!re) throw Error(o(363));
e = aa(e, t);
var i = de(e, n, r).disconnect;
return {
disconnect: function() {
i();
}
};
}, t.registerMutableSourceForHydration = function(e, t) {
var n = t._getVersion;
n = n(t._source), null == e.mutableSourceEagerHydrationData ? e.mutableSourceEagerHydrationData = [ t, n ] : e.mutableSourceEagerHydrationData.push(t, n);
}, t.runWithPriority = function(e, t) {
var n = Dt;
try {
return Dt = e, t();
} finally {
Dt = n;
}
}, t.shouldError = function() {
return null;
}, t.shouldSuspend = function() {
return !1;
}, t.updateContainer = function(e, t, n, r) {
var i = t.current, o = Ua(), a = Ha(i);
return n = Ns(n), null === t.context ? t.context = n : t.pendingContext = n, (t = $n(o, a)).payload = {
element: e
}, null !== (r = void 0 === r ? null : r) && (t.callback = r), null !== (e = Zn(i, t, a)) && (Va(e, i, a, o), 
er(e, i, a)), a;
}, t;
}, Qo = (t((function(e) {})), t((function(e) {
e.exports = Xo;
}))), $o = {
ConcurrentRoot: 1,
ContinuousEventPriority: 4,
DefaultEventPriority: 16,
DiscreteEventPriority: 1,
IdleEventPriority: 536870912,
LegacyRoot: 0
}, Zo = (t((function(e, t) {})), t((function(e) {
e.exports = $o;
}))), ea = function(e, t) {
var n = new Array(arguments.length - 1), r = 0, i = 2, o = !0;
for (;i < arguments.length; ) n[r++] = arguments[i++];
return new Promise((function(i, a) {
n[r] = function(e) {
if (o) if (o = !1, e) a(e); else {
for (var t = new Array(arguments.length - 1), n = 0; n < t.length; ) t[n++] = arguments[n];
i.apply(null, t);
}
};
try {
e.apply(t || null, n);
} catch (e) {
o && (o = !1, a(e));
}
}));
};
var ta = t((function(e, t) {
var n = t;
n.length = function(e) {
var t = e.length;
if (!t) return 0;
for (var n = 0; --t % 4 > 1 && "=" === e.charAt(t); ) ++n;
return Math.ceil(3 * e.length) / 4 - n;
};
for (var r = new Array(64), i = new Array(123), o = 0; o < 64; ) i[r[o] = o < 26 ? o + 65 : o < 52 ? o + 71 : o < 62 ? o - 4 : o - 59 | 43] = o++;
n.encode = function(e, t, n) {
for (var i, o = null, a = [], s = 0, l = 0; t < n; ) {
var c = e[t++];
switch (l) {
case 0:
a[s++] = r[c >> 2], i = (3 & c) << 4, l = 1;
break;

case 1:
a[s++] = r[i | c >> 4], i = (15 & c) << 2, l = 2;
break;

case 2:
a[s++] = r[i | c >> 6], a[s++] = r[63 & c], l = 0;
}
s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, a)), s = 0);
}
return l && (a[s++] = r[i], a[s++] = 61, 1 === l && (a[s++] = 61)), o ? (s && o.push(String.fromCharCode.apply(String, a.slice(0, s))), 
o.join("")) : String.fromCharCode.apply(String, a.slice(0, s));
};
var a = "invalid encoding";
n.decode = function(e, t, n) {
for (var r, o = n, s = 0, l = 0; l < e.length; ) {
var c = e.charCodeAt(l++);
if (61 === c && s > 1) break;
if (void 0 === (c = i[c])) throw Error(a);
switch (s) {
case 0:
r = c, s = 1;
break;

case 1:
t[n++] = r << 2 | (48 & c) >> 4, r = c, s = 2;
break;

case 2:
t[n++] = (15 & r) << 4 | (60 & c) >> 2, r = c, s = 3;
break;

case 3:
t[n++] = (3 & r) << 6 | c, s = 0;
}
}
if (1 === s) throw Error(a);
return n - o;
}, n.test = function(e) {
return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e);
};
})), na = ra;
function ra() {
this._listeners = {};
}
ra.prototype.on = function(e, t, n) {
return (this._listeners[e] || (this._listeners[e] = [])).push({
fn: t,
ctx: n || this
}), this;
}, ra.prototype.off = function(e, t) {
if (void 0 === e) this._listeners = {}; else if (void 0 === t) this._listeners[e] = []; else for (var n = this._listeners[e], r = 0; r < n.length; ) n[r].fn === t ? n.splice(r, 1) : ++r;
return this;
}, ra.prototype.emit = function(e) {
var t = this._listeners[e];
if (t) {
for (var n = [], r = 1; r < arguments.length; ) n.push(arguments[r++]);
for (r = 0; r < t.length; ) t[r].fn.apply(t[r++].ctx, n);
}
return this;
};
var ia = oa(oa);
function oa(e) {
return "undefined" != typeof Float32Array ? function() {
var t = new Float32Array([ -0 ]), n = new Uint8Array(t.buffer), r = 128 === n[3];
function i(e, r, i) {
t[0] = e, r[i] = n[0], r[i + 1] = n[1], r[i + 2] = n[2], r[i + 3] = n[3];
}
function o(e, r, i) {
t[0] = e, r[i] = n[3], r[i + 1] = n[2], r[i + 2] = n[1], r[i + 3] = n[0];
}
function a(e, r) {
return n[0] = e[r], n[1] = e[r + 1], n[2] = e[r + 2], n[3] = e[r + 3], t[0];
}
function s(e, r) {
return n[3] = e[r], n[2] = e[r + 1], n[1] = e[r + 2], n[0] = e[r + 3], t[0];
}
e.writeFloatLE = r ? i : o, e.writeFloatBE = r ? o : i, e.readFloatLE = r ? a : s, 
e.readFloatBE = r ? s : a;
}() : function() {
function t(e, t, n, r) {
var i = t < 0 ? 1 : 0;
if (i && (t = -t), 0 === t) e(1 / t > 0 ? 0 : 2147483648, n, r); else if (isNaN(t)) e(2143289344, n, r); else if (t > 34028234663852886e22) e((i << 31 | 2139095040) >>> 0, n, r); else if (t < 11754943508222875e-54) e((i << 31 | Math.round(t / 1401298464324817e-60)) >>> 0, n, r); else {
var o = Math.floor(Math.log(t) / Math.LN2);
e((i << 31 | o + 127 << 23 | 8388607 & Math.round(t * Math.pow(2, -o) * 8388608)) >>> 0, n, r);
}
}
function n(e, t, n) {
var r = e(t, n), i = 2 * (r >> 31) + 1, o = r >>> 23 & 255, a = 8388607 & r;
return 255 === o ? a ? NaN : i * (1 / 0) : 0 === o ? 1401298464324817e-60 * i * a : i * Math.pow(2, o - 150) * (a + 8388608);
}
e.writeFloatLE = t.bind(null, aa), e.writeFloatBE = t.bind(null, sa), e.readFloatLE = n.bind(null, la), 
e.readFloatBE = n.bind(null, ca);
}(), "undefined" != typeof Float64Array ? function() {
var t = new Float64Array([ -0 ]), n = new Uint8Array(t.buffer), r = 128 === n[7];
function i(e, r, i) {
t[0] = e, r[i] = n[0], r[i + 1] = n[1], r[i + 2] = n[2], r[i + 3] = n[3], r[i + 4] = n[4], 
r[i + 5] = n[5], r[i + 6] = n[6], r[i + 7] = n[7];
}
function o(e, r, i) {
t[0] = e, r[i] = n[7], r[i + 1] = n[6], r[i + 2] = n[5], r[i + 3] = n[4], r[i + 4] = n[3], 
r[i + 5] = n[2], r[i + 6] = n[1], r[i + 7] = n[0];
}
function a(e, r) {
return n[0] = e[r], n[1] = e[r + 1], n[2] = e[r + 2], n[3] = e[r + 3], n[4] = e[r + 4], 
n[5] = e[r + 5], n[6] = e[r + 6], n[7] = e[r + 7], t[0];
}
function s(e, r) {
return n[7] = e[r], n[6] = e[r + 1], n[5] = e[r + 2], n[4] = e[r + 3], n[3] = e[r + 4], 
n[2] = e[r + 5], n[1] = e[r + 6], n[0] = e[r + 7], t[0];
}
e.writeDoubleLE = r ? i : o, e.writeDoubleBE = r ? o : i, e.readDoubleLE = r ? a : s, 
e.readDoubleBE = r ? s : a;
}() : function() {
function t(e, t, n, r, i, o) {
var a = r < 0 ? 1 : 0;
if (a && (r = -r), 0 === r) e(0, i, o + t), e(1 / r > 0 ? 0 : 2147483648, i, o + n); else if (isNaN(r)) e(0, i, o + t), 
e(2146959360, i, o + n); else if (r > 17976931348623157e292) e(0, i, o + t), e((a << 31 | 2146435072) >>> 0, i, o + n); else {
var s;
if (r < 22250738585072014e-324) e((s = r / 5e-324) >>> 0, i, o + t), e((a << 31 | s / 4294967296) >>> 0, i, o + n); else {
var l = Math.floor(Math.log(r) / Math.LN2);
1024 === l && (l = 1023), e(4503599627370496 * (s = r * Math.pow(2, -l)) >>> 0, i, o + t), 
e((a << 31 | l + 1023 << 20 | 1048576 * s & 1048575) >>> 0, i, o + n);
}
}
}
function n(e, t, n, r, i) {
var o = e(r, i + t), a = e(r, i + n), s = 2 * (a >> 31) + 1, l = a >>> 20 & 2047, c = 4294967296 * (1048575 & a) + o;
return 2047 === l ? c ? NaN : s * (1 / 0) : 0 === l ? 5e-324 * s * c : s * Math.pow(2, l - 1075) * (c + 4503599627370496);
}
e.writeDoubleLE = t.bind(null, aa, 0, 4), e.writeDoubleBE = t.bind(null, sa, 4, 0), 
e.readDoubleLE = n.bind(null, la, 0, 4), e.readDoubleBE = n.bind(null, ca, 4, 0);
}(), e;
}
function aa(e, t, n) {
t[n] = 255 & e, t[n + 1] = e >>> 8 & 255, t[n + 2] = e >>> 16 & 255, t[n + 3] = e >>> 24;
}
function sa(e, t, n) {
t[n] = e >>> 24, t[n + 1] = e >>> 16 & 255, t[n + 2] = e >>> 8 & 255, t[n + 3] = 255 & e;
}
function la(e, t) {
return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0;
}
function ca(e, t) {
return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0;
}
var da = function() {
return null;
}, ua = t((function(e, t) {
var n = t;
n.length = function(e) {
for (var t = 0, n = 0, r = 0; r < e.length; ++r) (n = e.charCodeAt(r)) < 128 ? t += 1 : n < 2048 ? t += 2 : 55296 == (64512 & n) && 56320 == (64512 & e.charCodeAt(r + 1)) ? (++r, 
t += 4) : t += 3;
return t;
}, n.read = function(e, t, n) {
if (n - t < 1) return "";
for (var r, i = null, o = [], a = 0; t < n; ) (r = e[t++]) < 128 ? o[a++] = r : r > 191 && r < 224 ? o[a++] = (31 & r) << 6 | 63 & e[t++] : r > 239 && r < 365 ? (r = ((7 & r) << 18 | (63 & e[t++]) << 12 | (63 & e[t++]) << 6 | 63 & e[t++]) - 65536, 
o[a++] = 55296 + (r >> 10), o[a++] = 56320 + (1023 & r)) : o[a++] = (15 & r) << 12 | (63 & e[t++]) << 6 | 63 & e[t++], 
a > 8191 && ((i || (i = [])).push(String.fromCharCode.apply(String, o)), a = 0);
return i ? (a && i.push(String.fromCharCode.apply(String, o.slice(0, a))), i.join("")) : String.fromCharCode.apply(String, o.slice(0, a));
}, n.write = function(e, t, n) {
for (var r, i, o = n, a = 0; a < e.length; ++a) (r = e.charCodeAt(a)) < 128 ? t[n++] = r : r < 2048 ? (t[n++] = r >> 6 | 192, 
t[n++] = 63 & r | 128) : 55296 == (64512 & r) && 56320 == (64512 & (i = e.charCodeAt(a + 1))) ? (r = 65536 + ((1023 & r) << 10) + (1023 & i), 
++a, t[n++] = r >> 18 | 240, t[n++] = r >> 12 & 63 | 128, t[n++] = r >> 6 & 63 | 128, 
t[n++] = 63 & r | 128) : (t[n++] = r >> 12 | 224, t[n++] = r >> 6 & 63 | 128, t[n++] = 63 & r | 128);
return n - o;
};
})), pa = function(e, t, n) {
var r = n || 8192, i = r >>> 1, o = null, a = r;
return function(n) {
if (n < 1 || n > i) return e(n);
a + n > r && (o = e(r), a = 0);
var s = t.call(o, a, a += n);
return 7 & a && (a = 1 + (7 | a)), s;
};
};
var fa = ha;
function ha(e, t) {
this.lo = e >>> 0, this.hi = t >>> 0;
}
var ma = ha.zero = new ha(0, 0);
ma.toNumber = function() {
return 0;
}, ma.zzEncode = ma.zzDecode = function() {
return this;
}, ma.length = function() {
return 1;
};
var ga = ha.zeroHash = "\0\0\0\0\0\0\0\0";
ha.fromNumber = function(e) {
if (0 === e) return ma;
var t = e < 0;
t && (e = -e);
var n = e >>> 0, r = (e - n) / 4294967296 >>> 0;
return t && (r = ~r >>> 0, n = ~n >>> 0, ++n > 4294967295 && (n = 0, ++r > 4294967295 && (r = 0))), 
new ha(n, r);
}, ha.from = function(e) {
if ("number" == typeof e) return ha.fromNumber(e);
if (_a.isString(e)) {
if (!_a.Long) return ha.fromNumber(parseInt(e, 10));
e = _a.Long.fromString(e);
}
return e.low || e.high ? new ha(e.low >>> 0, e.high >>> 0) : ma;
}, ha.prototype.toNumber = function(e) {
if (!e && this.hi >>> 31) {
var t = 1 + ~this.lo >>> 0, n = ~this.hi >>> 0;
return t || (n = n + 1 >>> 0), -(t + 4294967296 * n);
}
return this.lo + 4294967296 * this.hi;
}, ha.prototype.toLong = function(e) {
return _a.Long ? new _a.Long(0 | this.lo, 0 | this.hi, Boolean(e)) : {
low: 0 | this.lo,
high: 0 | this.hi,
unsigned: Boolean(e)
};
};
var ya = String.prototype.charCodeAt;
ha.fromHash = function(e) {
return e === ga ? ma : new ha((ya.call(e, 0) | ya.call(e, 1) << 8 | ya.call(e, 2) << 16 | ya.call(e, 3) << 24) >>> 0, (ya.call(e, 4) | ya.call(e, 5) << 8 | ya.call(e, 6) << 16 | ya.call(e, 7) << 24) >>> 0);
}, ha.prototype.toHash = function() {
return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
}, ha.prototype.zzEncode = function() {
var e = this.hi >> 31;
return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, 
this;
}, ha.prototype.zzDecode = function() {
var e = -(1 & this.lo);
return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, 
this;
}, ha.prototype.length = function() {
var e = this.lo, t = (this.lo >>> 28 | this.hi << 4) >>> 0, n = this.hi >>> 24;
return 0 === n ? 0 === t ? e < 16384 ? e < 128 ? 1 : 2 : e < 2097152 ? 3 : 4 : t < 16384 ? t < 128 ? 5 : 6 : t < 2097152 ? 7 : 8 : n < 128 ? 9 : 10;
};
var Ia, _a = t((function(t, n) {
var r = n;
function i(e, t, n) {
for (var r = Object.keys(t), i = 0; i < r.length; ++i) void 0 !== e[r[i]] && n || (e[r[i]] = t[r[i]]);
return e;
}
function o(e) {
function t(e, n) {
if (!(this instanceof t)) return new t(e, n);
Object.defineProperty(this, "message", {
get: function() {
return e;
}
}), Error.captureStackTrace ? Error.captureStackTrace(this, t) : Object.defineProperty(this, "stack", {
value: (new Error).stack || ""
}), n && i(this, n);
}
return (t.prototype = Object.create(Error.prototype)).constructor = t, Object.defineProperty(t.prototype, "name", {
get: function() {
return e;
}
}), t.prototype.toString = function() {
return this.name + ": " + this.message;
}, t;
}
r.asPromise = ea, r.base64 = ta, r.EventEmitter = na, r.float = ia, r.inquire = da, 
r.utf8 = ua, r.pool = pa, r.LongBits = fa, r.isNode = Boolean(void 0 !== e && e && e.process && e.process.versions && e.process.versions.node), 
r.global = r.isNode && e || "undefined" != typeof window && window || "undefined" != typeof self && self || e, 
r.emptyArray = Object.freeze ? Object.freeze([]) : [], r.emptyObject = Object.freeze ? Object.freeze({}) : {}, 
r.isInteger = Number.isInteger || function(e) {
return "number" == typeof e && isFinite(e) && Math.floor(e) === e;
}, r.isString = function(e) {
return "string" == typeof e || e instanceof String;
}, r.isObject = function(e) {
return e && "object" == typeof e;
}, r.isset = r.isSet = function(e, t) {
var n = e[t];
return !(null == n || !e.hasOwnProperty(t)) && ("object" != typeof n || (Array.isArray(n) ? n.length : Object.keys(n).length) > 0);
}, r.Buffer = function() {
try {
var e = r.inquire("buffer").Buffer;
return e.prototype.utf8Write ? e : null;
} catch (e) {
return null;
}
}(), r._Buffer_from = null, r._Buffer_allocUnsafe = null, r.newBuffer = function(e) {
return "number" == typeof e ? r.Buffer ? r._Buffer_allocUnsafe(e) : new r.Array(e) : r.Buffer ? r._Buffer_from(e) : "undefined" == typeof Uint8Array ? e : new Uint8Array(e);
}, r.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, r.Long = void 0, 
r.key2Re = /^true|false|0|1$/, r.key32Re = /^-?(?:0|[1-9][0-9]*)$/, r.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, 
r.longToHash = function(e) {
return e ? r.LongBits.from(e).toHash() : r.LongBits.zeroHash;
}, r.longFromHash = function(e, t) {
var n = r.LongBits.fromHash(e);
return r.Long ? r.Long.fromBits(n.lo, n.hi, t) : n.toNumber(Boolean(t));
}, r.merge = i, r.lcFirst = function(e) {
return e.charAt(0).toLowerCase() + e.substring(1);
}, r.newError = o, r.ProtocolError = o("ProtocolError"), r.oneOfGetter = function(e) {
for (var t = {}, n = 0; n < e.length; ++n) t[e[n]] = 1;
return function() {
for (var e = Object.keys(this), n = e.length - 1; n > -1; --n) if (1 === t[e[n]] && void 0 !== this[e[n]] && null !== this[e[n]]) return e[n];
};
}, r.oneOfSetter = function(e) {
return function(t) {
for (var n = 0; n < e.length; ++n) e[n] !== t && delete this[e[n]];
};
}, r.toJSONOptions = {
longs: String,
enums: String,
bytes: String,
json: !0
}, r._configure = function() {
var e = r.Buffer;
e ? (r._Buffer_from = e.from !== Uint8Array.from && e.from || function(t, n) {
return new e(t, n);
}, r._Buffer_allocUnsafe = e.allocUnsafe || function(t) {
return new e(t);
}) : r._Buffer_from = r._Buffer_allocUnsafe = null;
};
})), ba = Ca, Sa = _a.LongBits, va = _a.base64, Ta = _a.utf8;
function Ea(e, t, n) {
this.fn = e, this.len = t, this.next = void 0, this.val = n;
}
function Pa() {}
function Oa(e) {
this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states;
}
function Ca() {
this.len = 0, this.head = new Ea(Pa, 0, 0), this.tail = this.head, this.states = null;
}
var Na = function() {
return _a.Buffer ? function() {
return (Ca.create = function() {
return new Ia;
})();
} : function() {
return new Ca;
};
};
function Aa(e, t, n) {
t[n] = 255 & e;
}
function La(e, t) {
this.len = e, this.next = void 0, this.val = t;
}
function wa(e, t, n) {
for (;e.hi; ) t[n++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, 
e.hi >>>= 7;
for (;e.lo > 127; ) t[n++] = 127 & e.lo | 128, e.lo = e.lo >>> 7;
t[n++] = e.lo;
}
function ka(e, t, n) {
t[n] = 255 & e, t[n + 1] = e >>> 8 & 255, t[n + 2] = e >>> 16 & 255, t[n + 3] = e >>> 24;
}
Ca.create = Na(), Ca.alloc = function(e) {
return new _a.Array(e);
}, _a.Array !== Array && (Ca.alloc = _a.pool(Ca.alloc, _a.Array.prototype.subarray)), 
Ca.prototype._push = function(e, t, n) {
return this.tail = this.tail.next = new Ea(e, t, n), this.len += t, this;
}, La.prototype = Object.create(Ea.prototype), La.prototype.fn = function(e, t, n) {
for (;e > 127; ) t[n++] = 127 & e | 128, e >>>= 7;
t[n] = e;
}, Ca.prototype.uint32 = function(e) {
return this.len += (this.tail = this.tail.next = new La((e >>>= 0) < 128 ? 1 : e < 16384 ? 2 : e < 2097152 ? 3 : e < 268435456 ? 4 : 5, e)).len, 
this;
}, Ca.prototype.int32 = function(e) {
return e < 0 ? this._push(wa, 10, Sa.fromNumber(e)) : this.uint32(e);
}, Ca.prototype.sint32 = function(e) {
return this.uint32((e << 1 ^ e >> 31) >>> 0);
}, Ca.prototype.uint64 = function(e) {
var t = Sa.from(e);
return this._push(wa, t.length(), t);
}, Ca.prototype.int64 = Ca.prototype.uint64, Ca.prototype.sint64 = function(e) {
var t = Sa.from(e).zzEncode();
return this._push(wa, t.length(), t);
}, Ca.prototype.bool = function(e) {
return this._push(Aa, 1, e ? 1 : 0);
}, Ca.prototype.fixed32 = function(e) {
return this._push(ka, 4, e >>> 0);
}, Ca.prototype.sfixed32 = Ca.prototype.fixed32, Ca.prototype.fixed64 = function(e) {
var t = Sa.from(e);
return this._push(ka, 4, t.lo)._push(ka, 4, t.hi);
}, Ca.prototype.sfixed64 = Ca.prototype.fixed64, Ca.prototype.float = function(e) {
return this._push(_a.float.writeFloatLE, 4, e);
}, Ca.prototype.double = function(e) {
return this._push(_a.float.writeDoubleLE, 8, e);
};
var Ra = _a.Array.prototype.set ? function(e, t, n) {
t.set(e, n);
} : function(e, t, n) {
for (var r = 0; r < e.length; ++r) t[n + r] = e[r];
};
Ca.prototype.bytes = function(e) {
var t = e.length >>> 0;
if (!t) return this._push(Aa, 1, 0);
if (_a.isString(e)) {
var n = Ca.alloc(t = va.length(e));
va.decode(e, n, 0), e = n;
}
return this.uint32(t)._push(Ra, t, e);
}, Ca.prototype.string = function(e) {
var t = Ta.length(e);
return t ? this.uint32(t)._push(Ta.write, t, e) : this._push(Aa, 1, 0);
}, Ca.prototype.fork = function() {
return this.states = new Oa(this), this.head = this.tail = new Ea(Pa, 0, 0), this.len = 0, 
this;
}, Ca.prototype.reset = function() {
return this.states ? (this.head = this.states.head, this.tail = this.states.tail, 
this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new Ea(Pa, 0, 0), 
this.len = 0), this;
}, Ca.prototype.ldelim = function() {
var e = this.head, t = this.tail, n = this.len;
return this.reset().uint32(n), n && (this.tail.next = e.next, this.tail = t, this.len += n), 
this;
}, Ca.prototype.finish = function() {
for (var e = this.head.next, t = this.constructor.alloc(this.len), n = 0; e; ) e.fn(e.val, t, n), 
n += e.len, e = e.next;
return t;
}, Ca._configure = function(e) {
Ia = e, Ca.create = Na(), Ia._configure();
};
var xa = Ba;
function Ba() {
ba.call(this);
}
function Da(e, t, n) {
e.length < 40 ? _a.utf8.write(e, t, n) : t.utf8Write ? t.utf8Write(e, n) : t.write(e, n);
}
(Ba.prototype = Object.create(ba.prototype)).constructor = Ba, Ba._configure = function() {
Ba.alloc = _a._Buffer_allocUnsafe, Ba.writeBytesBuffer = _a.Buffer && _a.Buffer.prototype instanceof Uint8Array && "set" === _a.Buffer.prototype.set.name ? function(e, t, n) {
t.set(e, n);
} : function(e, t, n) {
if (e.copy) e.copy(t, n, 0, e.length); else for (var r = 0; r < e.length; ) t[n++] = e[r++];
};
}, Ba.prototype.bytes = function(e) {
_a.isString(e) && (e = _a._Buffer_from(e, "base64"));
var t = e.length >>> 0;
return this.uint32(t), t && this._push(Ba.writeBytesBuffer, t, e), this;
}, Ba.prototype.string = function(e) {
var t = _a.Buffer.byteLength(e);
return this.uint32(t), t && this._push(Da, t, e), this;
}, Ba._configure();
var Fa, Ma = Ja, Ua = _a.LongBits, Ha = _a.utf8;
function Va(e, t) {
return RangeError("index out of range: " + e.pos + " + " + (t || 1) + " > " + e.len);
}
function Ja(e) {
this.buf = e, this.pos = 0, this.len = e.length;
}
var Ga, za = "undefined" != typeof Uint8Array ? function(e) {
if (e instanceof Uint8Array || Array.isArray(e)) return new Ja(e);
throw Error("illegal buffer");
} : function(e) {
if (Array.isArray(e)) return new Ja(e);
throw Error("illegal buffer");
}, ja = function() {
return _a.Buffer ? function(e) {
return (Ja.create = function(e) {
return _a.Buffer.isBuffer(e) ? new Fa(e) : za(e);
})(e);
} : za;
};
function qa() {
var e = new Ua(0, 0), t = 0;
if (!(this.len - this.pos > 4)) {
for (;t < 3; ++t) {
if (this.pos >= this.len) throw Va(this);
if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e;
}
return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t) >>> 0, e;
}
for (;t < 4; ++t) if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, 
this.buf[this.pos++] < 128) return e;
if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, 
this.buf[this.pos++] < 128) return e;
if (t = 0, this.len - this.pos > 4) {
for (;t < 5; ++t) if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, 
this.buf[this.pos++] < 128) return e;
} else for (;t < 5; ++t) {
if (this.pos >= this.len) throw Va(this);
if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e;
}
throw Error("invalid varint encoding");
}
function Ya(e, t) {
return (e[t - 4] | e[t - 3] << 8 | e[t - 2] << 16 | e[t - 1] << 24) >>> 0;
}
function Ka() {
if (this.pos + 8 > this.len) throw Va(this, 8);
return new Ua(Ya(this.buf, this.pos += 4), Ya(this.buf, this.pos += 4));
}
Ja.create = ja(), Ja.prototype._slice = _a.Array.prototype.subarray || _a.Array.prototype.slice, 
Ja.prototype.uint32 = (Ga = 4294967295, function() {
if (Ga = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return Ga;
if ((this.pos += 5) > this.len) throw this.pos = this.len, Va(this, 10);
return Ga;
}), Ja.prototype.int32 = function() {
return 0 | this.uint32();
}, Ja.prototype.sint32 = function() {
var e = this.uint32();
return e >>> 1 ^ -(1 & e) | 0;
}, Ja.prototype.bool = function() {
return 0 !== this.uint32();
}, Ja.prototype.fixed32 = function() {
if (this.pos + 4 > this.len) throw Va(this, 4);
return Ya(this.buf, this.pos += 4);
}, Ja.prototype.sfixed32 = function() {
if (this.pos + 4 > this.len) throw Va(this, 4);
return 0 | Ya(this.buf, this.pos += 4);
}, Ja.prototype.float = function() {
if (this.pos + 4 > this.len) throw Va(this, 4);
var e = _a.float.readFloatLE(this.buf, this.pos);
return this.pos += 4, e;
}, Ja.prototype.double = function() {
if (this.pos + 8 > this.len) throw Va(this, 4);
var e = _a.float.readDoubleLE(this.buf, this.pos);
return this.pos += 8, e;
}, Ja.prototype.bytes = function() {
var e = this.uint32(), t = this.pos, n = this.pos + e;
if (n > this.len) throw Va(this, e);
return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t, n) : t === n ? new this.buf.constructor(0) : this._slice.call(this.buf, t, n);
}, Ja.prototype.string = function() {
var e = this.bytes();
return Ha.read(e, 0, e.length);
}, Ja.prototype.skip = function(e) {
if ("number" == typeof e) {
if (this.pos + e > this.len) throw Va(this, e);
this.pos += e;
} else do {
if (this.pos >= this.len) throw Va(this);
} while (128 & this.buf[this.pos++]);
return this;
}, Ja.prototype.skipType = function(e) {
switch (e) {
case 0:
this.skip();
break;

case 1:
this.skip(8);
break;

case 2:
this.skip(this.uint32());
break;

case 3:
for (;4 != (e = 7 & this.uint32()); ) this.skipType(e);
break;

case 5:
this.skip(4);
break;

default:
throw Error("invalid wire type " + e + " at offset " + this.pos);
}
return this;
}, Ja._configure = function(e) {
Fa = e, Ja.create = ja(), Fa._configure();
var t = _a.Long ? "toLong" : "toNumber";
_a.merge(Ja.prototype, {
int64: function() {
return qa.call(this)[t](!1);
},
uint64: function() {
return qa.call(this)[t](!0);
},
sint64: function() {
return qa.call(this).zzDecode()[t](!1);
},
fixed64: function() {
return Ka.call(this)[t](!0);
},
sfixed64: function() {
return Ka.call(this)[t](!1);
}
});
};
var Wa = Xa;
function Xa(e) {
Ma.call(this, e);
}
(Xa.prototype = Object.create(Ma.prototype)).constructor = Xa, Xa._configure = function() {
_a.Buffer && (Xa.prototype._slice = _a.Buffer.prototype.slice);
}, Xa.prototype.string = function() {
var e = this.uint32();
return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e, this.len));
}, Xa._configure();
var Qa = $a;
function $a(e, t, n) {
if ("function" != typeof e) throw TypeError("rpcImpl must be a function");
_a.EventEmitter.call(this), this.rpcImpl = e, this.requestDelimited = Boolean(t), 
this.responseDelimited = Boolean(n);
}
($a.prototype = Object.create(_a.EventEmitter.prototype)).constructor = $a, $a.prototype.rpcCall = function e(t, n, r, i, o) {
if (!i) throw TypeError("request must be specified");
var a = this;
if (!o) return _a.asPromise(e, a, t, n, r, i);
if (a.rpcImpl) try {
return a.rpcImpl(t, n[a.requestDelimited ? "encodeDelimited" : "encode"](i).finish(), (function(e, n) {
if (e) return a.emit("error", e, t), o(e);
if (null !== n) {
if (!(n instanceof r)) try {
n = r[a.responseDelimited ? "decodeDelimited" : "decode"](n);
} catch (e) {
return a.emit("error", e, t), o(e);
}
return a.emit("data", n, t), o(null, n);
}
a.end(!0);
}));
} catch (e) {
return a.emit("error", e, t), void setTimeout((function() {
o(e);
}), 0);
} else setTimeout((function() {
o(Error("already ended"));
}), 0);
}, $a.prototype.end = function(e) {
return this.rpcImpl && (e || this.rpcImpl(null, null, null), this.rpcImpl = null, 
this.emit("end").off()), this;
};
var Za = t((function(e, t) {
t.Service = Qa;
})), es = {}, ts = t((function(e, t) {
var n = t;
function r() {
n.util._configure(), n.Writer._configure(n.BufferWriter), n.Reader._configure(n.BufferReader);
}
n.build = "minimal", n.Writer = ba, n.BufferWriter = xa, n.Reader = Ma, n.BufferReader = Wa, 
n.util = _a, n.rpc = Za, n.roots = es, n.configure = r, r();
})), ns = ts, rs = t((function(e, t) {
e.exports = function() {
var e = Math.imul, t = Math.clz32;
function n(e) {
"@babel/helpers - typeof";
return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
return typeof e;
} : function(e) {
return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
}, n(e);
}
function r(e, t) {
if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
}
function i(e, t) {
for (var n, r = 0; r < t.length; r++) (n = t[r]).enumerable = n.enumerable || !1, 
n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
}
function o(e, t, n) {
return t && i(e.prototype, t), n && i(e, n), Object.defineProperty(e, "prototype", {
writable: !1
}), e;
}
function a(e, t) {
if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
e.prototype = Object.create(t && t.prototype, {
constructor: {
value: e,
writable: !0,
configurable: !0
}
}), Object.defineProperty(e, "prototype", {
writable: !1
}), t && l(e, t);
}
function s(e) {
return s = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
return e.__proto__ || Object.getPrototypeOf(e);
}, s(e);
}
function l(e, t) {
return l = Object.setPrototypeOf || function(e, t) {
return e.__proto__ = t, e;
}, l(e, t);
}
function c() {
if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
if (Reflect.construct.sham) return !1;
if ("function" == typeof Proxy) return !0;
try {
return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}))), 
!0;
} catch (e) {
return !1;
}
}
function d() {
return d = c() ? Reflect.construct : function(e, t, n) {
var r = [ null ];
r.push.apply(r, t);
var i = new (Function.bind.apply(e, r));
return n && l(i, n.prototype), i;
}, d.apply(null, arguments);
}
function u(e) {
return -1 !== Function.toString.call(e).indexOf("[native code]");
}
function p(e) {
var t = "function" == typeof Map ? new Map : void 0;
return p = function(e) {
function n() {
return d(e, arguments, s(this).constructor);
}
if (null === e || !u(e)) return e;
if ("function" != typeof e) throw new TypeError("Super expression must either be null or a function");
if (void 0 !== t) {
if (t.has(e)) return t.get(e);
t.set(e, n);
}
return n.prototype = Object.create(e.prototype, {
constructor: {
value: n,
enumerable: !1,
writable: !0,
configurable: !0
}
}), l(n, e);
}, p(e);
}
function f(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function h(e, t) {
if (t && ("object" == typeof t || "function" == typeof t)) return t;
if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined");
return f(e);
}
function m(e) {
var t = c();
return function() {
var n, r = s(e);
if (t) {
var i = s(this).constructor;
n = Reflect.construct(r, arguments, i);
} else n = r.apply(this, arguments);
return h(this, n);
};
}
function g(e, t) {
return y(e) || I(e, t) || _(e, t) || S();
}
function y(e) {
if (Array.isArray(e)) return e;
}
function I(e, t) {
var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (null != n) {
var r, i, o = [], a = !0, s = !1;
try {
for (n = n.call(e); !(a = (r = n.next()).done) && (o.push(r.value), !t || o.length !== t); a = !0) ;
} catch (e) {
s = !0, i = e;
} finally {
try {
a || null == n.return || n.return();
} finally {
if (s) throw i;
}
}
return o;
}
}
function _(e, t) {
if (e) {
if ("string" == typeof e) return b(e, t);
var n = Object.prototype.toString.call(e).slice(8, -1);
return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? b(e, t) : void 0;
}
}
function b(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var n = 0, r = Array(t); n < t; n++) r[n] = e[n];
return r;
}
function S() {
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function v(e, t) {
var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (!n) {
if (Array.isArray(e) || (n = _(e)) || t && e && "number" == typeof e.length) {
n && (e = n);
var r = 0, i = function() {};
return {
s: i,
n: function() {
return r >= e.length ? {
done: !0
} : {
done: !1,
value: e[r++]
};
},
e: function(e) {
throw e;
},
f: i
};
}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
var o, a = !0, s = !1;
return {
s: function() {
n = n.call(e);
},
n: function() {
var e = n.next();
return a = e.done, e;
},
e: function(e) {
s = !0, o = e;
},
f: function() {
try {
a || null == n.return || n.return();
} finally {
if (s) throw o;
}
}
};
}
var T = function(e) {
var t = Math.abs, i = Math.max, s = Math.floor;
function l(e, t) {
var n;
if (r(this, l), (n = c.call(this, e)).sign = t, Object.setPrototypeOf(f(n), l.prototype), 
e > l.__kMaxLength) throw new RangeError("Maximum BigInt size exceeded");
return n;
}
a(l, e);
var c = m(l);
return o(l, [ {
key: "toDebugString",
value: function() {
var e, t = [ "BigInt[" ], n = v(this);
try {
for (n.s(); !(e = n.n()).done; ) {
var r = e.value;
t.push((r ? (r >>> 0).toString(16) : r) + ", ");
}
} catch (e) {
n.e(e);
} finally {
n.f();
}
return t.push("]"), t.join("");
}
}, {
key: "toString",
value: function() {
var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 10;
if (2 > e || 36 < e) throw new RangeError("toString() radix argument must be between 2 and 36");
return 0 === this.length ? "0" : 0 == (e & e - 1) ? l.__toStringBasePowerOfTwo(this, e) : l.__toStringGeneric(this, e, !1);
}
}, {
key: "valueOf",
value: function() {
throw new Error("Convert JSBI instances to native numbers using `toNumber`.");
}
}, {
key: "__copy",
value: function() {
for (var e = new l(this.length, this.sign), t = 0; t < this.length; t++) e[t] = this[t];
return e;
}
}, {
key: "__trim",
value: function() {
for (var e = this.length, t = this[e - 1]; 0 === t; ) t = this[--e - 1], this.pop();
return 0 === e && (this.sign = !1), this;
}
}, {
key: "__initializeDigits",
value: function() {
for (var e = 0; e < this.length; e++) this[e] = 0;
}
}, {
key: "__clzmsd",
value: function() {
return l.__clz30(this.__digit(this.length - 1));
}
}, {
key: "__inplaceMultiplyAdd",
value: function(e, t, n) {
n > this.length && (n = this.length);
for (var r = 32767 & e, i = e >>> 15, o = 0, a = t, s = 0; s < n; s++) {
var c = this.__digit(s), d = 32767 & c, u = c >>> 15, p = l.__imul(d, r), f = l.__imul(d, i), h = l.__imul(u, r), m = a + p + o;
o = m >>> 30, m &= 1073741823, o += (m += ((32767 & f) << 15) + ((32767 & h) << 15)) >>> 30, 
a = l.__imul(u, i) + (f >>> 15) + (h >>> 15), this.__setDigit(s, 1073741823 & m);
}
if (0 !== o || 0 !== a) throw new Error("implementation bug");
}
}, {
key: "__inplaceAdd",
value: function(e, t, n) {
for (var r, i = 0, o = 0; o < n; o++) i = (r = this.__halfDigit(t + o) + e.__halfDigit(o) + i) >>> 15, 
this.__setHalfDigit(t + o, 32767 & r);
return i;
}
}, {
key: "__inplaceSub",
value: function(e, t, n) {
var r = 0;
if (1 & t) {
t >>= 1;
for (var i = this.__digit(t), o = 32767 & i, a = 0; a < n - 1 >>> 1; a++) {
var s = e.__digit(a), l = (i >>> 15) - (32767 & s) - r;
r = 1 & l >>> 15, this.__setDigit(t + a, (32767 & l) << 15 | 32767 & o), r = 1 & (o = (32767 & (i = this.__digit(t + a + 1))) - (s >>> 15) - r) >>> 15;
}
var c = e.__digit(a), d = (i >>> 15) - (32767 & c) - r;
if (r = 1 & d >>> 15, this.__setDigit(t + a, (32767 & d) << 15 | 32767 & o), t + a + 1 >= this.length) throw new RangeError("out of bounds");
0 == (1 & n) && (r = 1 & (o = (32767 & (i = this.__digit(t + a + 1))) - (c >>> 15) - r) >>> 15, 
this.__setDigit(t + e.length, 1073709056 & i | 32767 & o));
} else {
t >>= 1;
for (var u = 0; u < e.length - 1; u++) {
var p = this.__digit(t + u), f = e.__digit(u), h = (32767 & p) - (32767 & f) - r, m = (p >>> 15) - (f >>> 15) - (r = 1 & h >>> 15);
r = 1 & m >>> 15, this.__setDigit(t + u, (32767 & m) << 15 | 32767 & h);
}
var g = this.__digit(t + u), y = e.__digit(u), I = (32767 & g) - (32767 & y) - r;
r = 1 & I >>> 15;
var _ = 0;
0 == (1 & n) && (r = 1 & (_ = (g >>> 15) - (y >>> 15) - r) >>> 15), this.__setDigit(t + u, (32767 & _) << 15 | 32767 & I);
}
return r;
}
}, {
key: "__inplaceRightShift",
value: function(e) {
if (0 !== e) {
for (var t, n = this.__digit(0) >>> e, r = this.length - 1, i = 0; i < r; i++) t = this.__digit(i + 1), 
this.__setDigit(i, 1073741823 & t << 30 - e | n), n = t >>> e;
this.__setDigit(r, n);
}
}
}, {
key: "__digit",
value: function(e) {
return this[e];
}
}, {
key: "__unsignedDigit",
value: function(e) {
return this[e] >>> 0;
}
}, {
key: "__setDigit",
value: function(e, t) {
this[e] = 0 | t;
}
}, {
key: "__setDigitGrow",
value: function(e, t) {
this[e] = 0 | t;
}
}, {
key: "__halfDigitLength",
value: function() {
var e = this.length;
return 32767 >= this.__unsignedDigit(e - 1) ? 2 * e - 1 : 2 * e;
}
}, {
key: "__halfDigit",
value: function(e) {
return 32767 & this[e >>> 1] >>> 15 * (1 & e);
}
}, {
key: "__setHalfDigit",
value: function(e, t) {
var n = e >>> 1, r = this.__digit(n), i = 1 & e ? 32767 & r | t << 15 : 1073709056 & r | 32767 & t;
this.__setDigit(n, i);
}
} ], [ {
key: "BigInt",
value: function(e) {
var t = Number.isFinite;
if ("number" == typeof e) {
if (0 === e) return l.__zero();
if (l.__isOneDigitInt(e)) return 0 > e ? l.__oneDigit(-e, !0) : l.__oneDigit(e, !1);
if (!t(e) || s(e) !== e) throw new RangeError("The number " + e + " cannot be converted to BigInt because it is not an integer");
return l.__fromDouble(e);
}
if ("string" == typeof e) {
var r = l.__fromString(e);
if (null === r) throw new SyntaxError("Cannot convert " + e + " to a BigInt");
return r;
}
if ("boolean" == typeof e) return !0 === e ? l.__oneDigit(1, !1) : l.__zero();
if ("object" === n(e)) {
if (e.constructor === l) return e;
var i = l.__toPrimitive(e);
return l.BigInt(i);
}
throw new TypeError("Cannot convert " + e + " to a BigInt");
}
}, {
key: "toNumber",
value: function(e) {
var t = e.length;
if (0 === t) return 0;
if (1 === t) {
var n = e.__unsignedDigit(0);
return e.sign ? -n : n;
}
var r = e.__digit(t - 1), i = l.__clz30(r), o = 30 * t - i;
if (1024 < o) return e.sign ? -1 / 0 : 1 / 0;
var a = o - 1, s = r, c = t - 1, d = i + 3, u = 32 === d ? 0 : s << d;
u >>>= 12;
var p = d - 12, f = 12 <= d ? 0 : s << 20 + d, h = 20 + d;
for (0 < p && 0 < c && (c--, u |= (s = e.__digit(c)) >>> 30 - p, f = s << p + 2, 
h = p + 2); 0 < h && 0 < c; ) c--, s = e.__digit(c), f |= 30 <= h ? s << h - 30 : s >>> 30 - h, 
h -= 30;
var m = l.__decideRounding(e, h, c, s);
if ((1 === m || 0 === m && 1 == (1 & f)) && 0 == (f = f + 1 >>> 0) && 0 != ++u >>> 20 && (u = 0, 
1023 < ++a)) return e.sign ? -1 / 0 : 1 / 0;
var g = e.sign ? -2147483648 : 0;
return a = a + 1023 << 20, l.__kBitConversionInts[1] = g | a | u, l.__kBitConversionInts[0] = f, 
l.__kBitConversionDouble[0];
}
}, {
key: "unaryMinus",
value: function(e) {
if (0 === e.length) return e;
var t = e.__copy();
return t.sign = !e.sign, t;
}
}, {
key: "bitwiseNot",
value: function(e) {
return e.sign ? l.__absoluteSubOne(e).__trim() : l.__absoluteAddOne(e, !0);
}
}, {
key: "exponentiate",
value: function(e, t) {
if (t.sign) throw new RangeError("Exponent must be positive");
if (0 === t.length) return l.__oneDigit(1, !1);
if (0 === e.length) return e;
if (1 === e.length && 1 === e.__digit(0)) return e.sign && 0 == (1 & t.__digit(0)) ? l.unaryMinus(e) : e;
if (1 < t.length) throw new RangeError("BigInt too big");
var n = t.__unsignedDigit(0);
if (1 === n) return e;
if (n >= l.__kMaxLengthBits) throw new RangeError("BigInt too big");
if (1 === e.length && 2 === e.__digit(0)) {
var r = 1 + (0 | n / 30), i = new l(r, e.sign && 0 != (1 & n));
i.__initializeDigits();
var o = 1 << n % 30;
return i.__setDigit(r - 1, o), i;
}
var a = null, s = e;
for (0 != (1 & n) && (a = e), n >>= 1; 0 !== n; n >>= 1) s = l.multiply(s, s), 0 != (1 & n) && (a = null === a ? s : l.multiply(a, s));
return a;
}
}, {
key: "multiply",
value: function(e, t) {
if (0 === e.length) return e;
if (0 === t.length) return t;
var n = e.length + t.length;
30 <= e.__clzmsd() + t.__clzmsd() && n--;
var r = new l(n, e.sign !== t.sign);
r.__initializeDigits();
for (var i = 0; i < e.length; i++) l.__multiplyAccumulate(t, e.__digit(i), r, i);
return r.__trim();
}
}, {
key: "divide",
value: function(e, t) {
if (0 === t.length) throw new RangeError("Division by zero");
if (0 > l.__absoluteCompare(e, t)) return l.__zero();
var n, r = e.sign !== t.sign, i = t.__unsignedDigit(0);
if (1 === t.length && 32767 >= i) {
if (1 === i) return r === e.sign ? e : l.unaryMinus(e);
n = l.__absoluteDivSmall(e, i, null);
} else n = l.__absoluteDivLarge(e, t, !0, !1);
return n.sign = r, n.__trim();
}
}, {
key: "remainder",
value: function(e, t) {
if (0 === t.length) throw new RangeError("Division by zero");
if (0 > l.__absoluteCompare(e, t)) return e;
var n = t.__unsignedDigit(0);
if (1 === t.length && 32767 >= n) {
if (1 === n) return l.__zero();
var r = l.__absoluteModSmall(e, n);
return 0 === r ? l.__zero() : l.__oneDigit(r, e.sign);
}
var i = l.__absoluteDivLarge(e, t, !1, !0);
return i.sign = e.sign, i.__trim();
}
}, {
key: "add",
value: function(e, t) {
var n = e.sign;
return n === t.sign ? l.__absoluteAdd(e, t, n) : 0 <= l.__absoluteCompare(e, t) ? l.__absoluteSub(e, t, n) : l.__absoluteSub(t, e, !n);
}
}, {
key: "subtract",
value: function(e, t) {
var n = e.sign;
return n === t.sign ? 0 <= l.__absoluteCompare(e, t) ? l.__absoluteSub(e, t, n) : l.__absoluteSub(t, e, !n) : l.__absoluteAdd(e, t, n);
}
}, {
key: "leftShift",
value: function(e, t) {
return 0 === t.length || 0 === e.length ? e : t.sign ? l.__rightShiftByAbsolute(e, t) : l.__leftShiftByAbsolute(e, t);
}
}, {
key: "signedRightShift",
value: function(e, t) {
return 0 === t.length || 0 === e.length ? e : t.sign ? l.__leftShiftByAbsolute(e, t) : l.__rightShiftByAbsolute(e, t);
}
}, {
key: "unsignedRightShift",
value: function() {
throw new TypeError("BigInts have no unsigned right shift; use >> instead");
}
}, {
key: "lessThan",
value: function(e, t) {
return 0 > l.__compareToBigInt(e, t);
}
}, {
key: "lessThanOrEqual",
value: function(e, t) {
return 0 >= l.__compareToBigInt(e, t);
}
}, {
key: "greaterThan",
value: function(e, t) {
return 0 < l.__compareToBigInt(e, t);
}
}, {
key: "greaterThanOrEqual",
value: function(e, t) {
return 0 <= l.__compareToBigInt(e, t);
}
}, {
key: "equal",
value: function(e, t) {
if (e.sign !== t.sign) return !1;
if (e.length !== t.length) return !1;
for (var n = 0; n < e.length; n++) if (e.__digit(n) !== t.__digit(n)) return !1;
return !0;
}
}, {
key: "notEqual",
value: function(e, t) {
return !l.equal(e, t);
}
}, {
key: "bitwiseAnd",
value: function(e, t) {
if (!e.sign && !t.sign) return l.__absoluteAnd(e, t).__trim();
if (e.sign && t.sign) {
var n = i(e.length, t.length) + 1, r = l.__absoluteSubOne(e, n), o = l.__absoluteSubOne(t);
return r = l.__absoluteOr(r, o, r), l.__absoluteAddOne(r, !0, r).__trim();
}
if (e.sign) {
var a = [ t, e ];
e = a[0], t = a[1];
}
return l.__absoluteAndNot(e, l.__absoluteSubOne(t)).__trim();
}
}, {
key: "bitwiseXor",
value: function(e, t) {
if (!e.sign && !t.sign) return l.__absoluteXor(e, t).__trim();
if (e.sign && t.sign) {
var n = i(e.length, t.length), r = l.__absoluteSubOne(e, n), o = l.__absoluteSubOne(t);
return l.__absoluteXor(r, o, r).__trim();
}
var a = i(e.length, t.length) + 1;
if (e.sign) {
var s = [ t, e ];
e = s[0], t = s[1];
}
var c = l.__absoluteSubOne(t, a);
return c = l.__absoluteXor(c, e, c), l.__absoluteAddOne(c, !0, c).__trim();
}
}, {
key: "bitwiseOr",
value: function(e, t) {
var n = i(e.length, t.length);
if (!e.sign && !t.sign) return l.__absoluteOr(e, t).__trim();
if (e.sign && t.sign) {
var r = l.__absoluteSubOne(e, n), o = l.__absoluteSubOne(t);
return r = l.__absoluteAnd(r, o, r), l.__absoluteAddOne(r, !0, r).__trim();
}
if (e.sign) {
var a = [ t, e ];
e = a[0], t = a[1];
}
var s = l.__absoluteSubOne(t, n);
return s = l.__absoluteAndNot(s, e, s), l.__absoluteAddOne(s, !0, s).__trim();
}
}, {
key: "asIntN",
value: function(e, t) {
if (0 === t.length) return t;
if (0 > (e = s(e))) throw new RangeError("Invalid value: not (convertible to) a safe integer");
if (0 === e) return l.__zero();
if (e >= l.__kMaxLengthBits) return t;
var n = 0 | (e + 29) / 30;
if (t.length < n) return t;
var r = t.__unsignedDigit(n - 1), i = 1 << (e - 1) % 30;
if (t.length === n && r < i) return t;
if ((r & i) !== i) return l.__truncateToNBits(e, t);
if (!t.sign) return l.__truncateAndSubFromPowerOfTwo(e, t, !0);
if (0 == (r & i - 1)) {
for (var o = n - 2; 0 <= o; o--) if (0 !== t.__digit(o)) return l.__truncateAndSubFromPowerOfTwo(e, t, !1);
return t.length === n && r === i ? t : l.__truncateToNBits(e, t);
}
return l.__truncateAndSubFromPowerOfTwo(e, t, !1);
}
}, {
key: "asUintN",
value: function(e, t) {
if (0 === t.length) return t;
if (0 > (e = s(e))) throw new RangeError("Invalid value: not (convertible to) a safe integer");
if (0 === e) return l.__zero();
if (t.sign) {
if (e > l.__kMaxLengthBits) throw new RangeError("BigInt too big");
return l.__truncateAndSubFromPowerOfTwo(e, t, !1);
}
if (e >= l.__kMaxLengthBits) return t;
var n = 0 | (e + 29) / 30;
if (t.length < n) return t;
var r = e % 30;
if (t.length == n) {
if (0 === r) return t;
if (0 == t.__digit(n - 1) >>> r) return t;
}
return l.__truncateToNBits(e, t);
}
}, {
key: "ADD",
value: function(e, t) {
if (e = l.__toPrimitive(e), t = l.__toPrimitive(t), "string" == typeof e) return "string" != typeof t && (t = t.toString()), 
e + t;
if ("string" == typeof t) return e.toString() + t;
if (e = l.__toNumeric(e), t = l.__toNumeric(t), l.__isBigInt(e) && l.__isBigInt(t)) return l.add(e, t);
if ("number" == typeof e && "number" == typeof t) return e + t;
throw new TypeError("Cannot mix BigInt and other types, use explicit conversions");
}
}, {
key: "LT",
value: function(e, t) {
return l.__compare(e, t, 0);
}
}, {
key: "LE",
value: function(e, t) {
return l.__compare(e, t, 1);
}
}, {
key: "GT",
value: function(e, t) {
return l.__compare(e, t, 2);
}
}, {
key: "GE",
value: function(e, t) {
return l.__compare(e, t, 3);
}
}, {
key: "EQ",
value: function(e, t) {
for (;;) {
if (l.__isBigInt(e)) return l.__isBigInt(t) ? l.equal(e, t) : l.EQ(t, e);
if ("number" == typeof e) {
if (l.__isBigInt(t)) return l.__equalToNumber(t, e);
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else if ("string" == typeof e) {
if (l.__isBigInt(t)) return null !== (e = l.__fromString(e)) && l.equal(e, t);
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else if ("boolean" == typeof e) {
if (l.__isBigInt(t)) return l.__equalToNumber(t, +e);
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else if ("symbol" === n(e)) {
if (l.__isBigInt(t)) return !1;
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else {
if ("object" !== n(e)) return e == t;
if ("object" === n(t) && t.constructor !== l) return e == t;
e = l.__toPrimitive(e);
}
}
}
}, {
key: "NE",
value: function(e, t) {
return !l.EQ(e, t);
}
}, {
key: "DataViewGetBigInt64",
value: function(e, t) {
var n = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2];
return l.asIntN(64, l.DataViewGetBigUint64(e, t, n));
}
}, {
key: "DataViewGetBigUint64",
value: function(e, t) {
var n = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2], r = g(n ? [ 4, 0 ] : [ 0, 4 ], 2), i = r[0], o = r[1], a = e.getUint32(t + i, n), s = e.getUint32(t + o, n), c = new l(3, !1);
return c.__setDigit(0, 1073741823 & s), c.__setDigit(1, (268435455 & a) << 2 | s >>> 30), 
c.__setDigit(2, a >>> 28), c.__trim();
}
}, {
key: "DataViewSetBigInt64",
value: function(e, t, n) {
var r = !!(3 < arguments.length && void 0 !== arguments[3]) && arguments[3];
l.DataViewSetBigUint64(e, t, n, r);
}
}, {
key: "DataViewSetBigUint64",
value: function(e, t, n) {
var r = !!(3 < arguments.length && void 0 !== arguments[3]) && arguments[3], i = 0, o = 0;
if (0 < (n = l.asUintN(64, n)).length && (o = n.__digit(0), 1 < n.length)) {
var a = n.__digit(1);
o |= a << 30, i = a >>> 2, 2 < n.length && (i |= n.__digit(2) << 28);
}
var s = g(r ? [ 4, 0 ] : [ 0, 4 ], 2), c = s[0], d = s[1];
e.setUint32(t + c, i, r), e.setUint32(t + d, o, r);
}
}, {
key: "__zero",
value: function() {
return new l(0, !1);
}
}, {
key: "__oneDigit",
value: function(e, t) {
var n = new l(1, t);
return n.__setDigit(0, e), n;
}
}, {
key: "__decideRounding",
value: function(e, t, n, r) {
if (0 < t) return -1;
var i;
if (0 > t) i = -t - 1; else {
if (0 === n) return -1;
n--, r = e.__digit(n), i = 29;
}
var o = 1 << i;
if (0 == (r & o)) return -1;
if (0 != (r & (o -= 1))) return 1;
for (;0 < n; ) if (n--, 0 !== e.__digit(n)) return 1;
return 0;
}
}, {
key: "__fromDouble",
value: function(e) {
l.__kBitConversionDouble[0] = e;
var t, n = (2047 & l.__kBitConversionInts[1] >>> 20) - 1023, r = 1 + (0 | n / 30), i = new l(r, 0 > e), o = 1048575 & l.__kBitConversionInts[1] | 1048576, a = l.__kBitConversionInts[0], s = 20, c = n % 30, d = 0;
if (c < s) {
var u = s - c;
d = u + 32, t = o >>> u, o = o << 32 - u | a >>> u, a <<= 32 - u;
} else if (c === s) d = 32, t = o, o = a, a = 0; else {
var p = c - s;
d = 32 - p, t = o << p | a >>> 32 - p, o = a << p, a = 0;
}
i.__setDigit(r - 1, t);
for (var f = r - 2; 0 <= f; f--) 0 < d ? (d -= 30, t = o >>> 2, o = o << 30 | a >>> 2, 
a <<= 30) : t = 0, i.__setDigit(f, t);
return i.__trim();
}
}, {
key: "__isWhitespace",
value: function(e) {
return !!(13 >= e && 9 <= e) || (159 >= e ? 32 == e : 131071 >= e ? 160 == e || 5760 == e : 196607 >= e ? 10 >= (e &= 131071) || 40 == e || 41 == e || 47 == e || 95 == e || 4096 == e : 65279 == e);
}
}, {
key: "__fromString",
value: function(e) {
var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0, n = 0, r = e.length, i = 0;
if (i === r) return l.__zero();
for (var o = e.charCodeAt(i); l.__isWhitespace(o); ) {
if (++i === r) return l.__zero();
o = e.charCodeAt(i);
}
if (43 === o) {
if (++i === r) return null;
o = e.charCodeAt(i), n = 1;
} else if (45 === o) {
if (++i === r) return null;
o = e.charCodeAt(i), n = -1;
}
if (0 === t) {
if (t = 10, 48 === o) {
if (++i === r) return l.__zero();
if (88 === (o = e.charCodeAt(i)) || 120 === o) {
if (t = 16, ++i === r) return null;
o = e.charCodeAt(i);
} else if (79 === o || 111 === o) {
if (t = 8, ++i === r) return null;
o = e.charCodeAt(i);
} else if (66 === o || 98 === o) {
if (t = 2, ++i === r) return null;
o = e.charCodeAt(i);
}
}
} else if (16 === t && 48 === o) {
if (++i === r) return l.__zero();
if (88 === (o = e.charCodeAt(i)) || 120 === o) {
if (++i === r) return null;
o = e.charCodeAt(i);
}
}
if (0 !== n && 10 !== t) return null;
for (;48 === o; ) {
if (++i === r) return l.__zero();
o = e.charCodeAt(i);
}
var a = r - i, s = l.__kMaxBitsPerChar[t], c = l.__kBitsPerCharTableMultiplier - 1;
if (a > 1073741824 / s) return null;
var d = new l(0 | (29 + (s * a + c >>> l.__kBitsPerCharTableShift)) / 30, !1), u = 10 > t ? t : 10, p = 10 < t ? t - 10 : 0;
if (0 == (t & t - 1)) {
s >>= l.__kBitsPerCharTableShift;
var f = [], h = [], m = !1;
do {
for (var g, y = 0, I = 0; ;) {
if (g = void 0, o - 48 >>> 0 < u) g = o - 48; else {
if (!((32 | o) - 97 >>> 0 < p)) {
m = !0;
break;
}
g = (32 | o) - 87;
}
if (I += s, y = y << s | g, ++i === r) {
m = !0;
break;
}
if (o = e.charCodeAt(i), 30 < I + s) break;
}
f.push(y), h.push(I);
} while (!m);
l.__fillFromParts(d, f, h);
} else {
d.__initializeDigits();
var _ = !1, b = 0;
do {
for (var S, v = 0, T = 1; ;) {
if (S = void 0, o - 48 >>> 0 < u) S = o - 48; else {
if (!((32 | o) - 97 >>> 0 < p)) {
_ = !0;
break;
}
S = (32 | o) - 87;
}
var E = T * t;
if (1073741823 < E) break;
if (T = E, v = v * t + S, b++, ++i === r) {
_ = !0;
break;
}
o = e.charCodeAt(i);
}
var P = 0 | (s * b + (c = 30 * l.__kBitsPerCharTableMultiplier - 1) >>> l.__kBitsPerCharTableShift) / 30;
d.__inplaceMultiplyAdd(T, v, P);
} while (!_);
}
if (i !== r) {
if (!l.__isWhitespace(o)) return null;
for (i++; i < r; i++) if (o = e.charCodeAt(i), !l.__isWhitespace(o)) return null;
}
return d.sign = -1 === n, d.__trim();
}
}, {
key: "__fillFromParts",
value: function(e, t, n) {
for (var r = 0, i = 0, o = 0, a = t.length - 1; 0 <= a; a--) {
var s = t[a], l = n[a];
i |= s << o, 30 === (o += l) ? (e.__setDigit(r++, i), o = 0, i = 0) : 30 < o && (e.__setDigit(r++, 1073741823 & i), 
i = s >>> l - (o -= 30));
}
if (0 !== i) {
if (r >= e.length) throw new Error("implementation bug");
e.__setDigit(r++, i);
}
for (;r < e.length; r++) e.__setDigit(r, 0);
}
}, {
key: "__toStringBasePowerOfTwo",
value: function(e, t) {
var n = e.length, r = t - 1, i = r = (15 & (r = (51 & (r = (85 & r >>> 1) + (85 & r)) >>> 2) + (51 & r)) >>> 4) + (15 & r), o = t - 1, a = e.__digit(n - 1), s = 0 | (30 * n - l.__clz30(a) + i - 1) / i;
if (e.sign && s++, 268435456 < s) throw new Error("string too long");
for (var c = Array(s), d = s - 1, u = 0, p = 0, f = 0; f < n - 1; f++) {
var h = e.__digit(f), m = (u | h << p) & o;
c[d--] = l.__kConversionChars[m];
var g = i - p;
for (u = h >>> g, p = 30 - g; p >= i; ) c[d--] = l.__kConversionChars[u & o], u >>>= i, 
p -= i;
}
var y = (u | a << p) & o;
for (c[d--] = l.__kConversionChars[y], u = a >>> i - p; 0 !== u; ) c[d--] = l.__kConversionChars[u & o], 
u >>>= i;
if (e.sign && (c[d--] = "-"), -1 !== d) throw new Error("implementation bug");
return c.join("");
}
}, {
key: "__toStringGeneric",
value: function(e, t, n) {
var r = e.length;
if (0 === r) return "";
if (1 === r) {
var i = e.__unsignedDigit(0).toString(t);
return !1 === n && e.sign && (i = "-" + i), i;
}
var o, a, s = 30 * r - l.__clz30(e.__digit(r - 1)), c = l.__kMaxBitsPerChar[t] - 1, d = s * l.__kBitsPerCharTableMultiplier, u = 1 + (d = 0 | (d += c - 1) / c) >> 1, p = l.exponentiate(l.__oneDigit(t, !1), l.__oneDigit(u, !1)), f = p.__unsignedDigit(0);
if (1 === p.length && 32767 >= f) {
(o = new l(e.length, !1)).__initializeDigits();
for (var h, m = 0, g = 2 * e.length - 1; 0 <= g; g--) h = m << 15 | e.__halfDigit(g), 
o.__setHalfDigit(g, 0 | h / f), m = 0 | h % f;
a = m.toString(t);
} else {
var y = l.__absoluteDivLarge(e, p, !0, !0);
o = y.quotient;
var I = y.remainder.__trim();
a = l.__toStringGeneric(I, t, !0);
}
o.__trim();
for (var _ = l.__toStringGeneric(o, t, !0); a.length < u; ) a = "0" + a;
return !1 === n && e.sign && (_ = "-" + _), _ + a;
}
}, {
key: "__unequalSign",
value: function(e) {
return e ? -1 : 1;
}
}, {
key: "__absoluteGreater",
value: function(e) {
return e ? -1 : 1;
}
}, {
key: "__absoluteLess",
value: function(e) {
return e ? 1 : -1;
}
}, {
key: "__compareToBigInt",
value: function(e, t) {
var n = e.sign;
if (n !== t.sign) return l.__unequalSign(n);
var r = l.__absoluteCompare(e, t);
return 0 < r ? l.__absoluteGreater(n) : 0 > r ? l.__absoluteLess(n) : 0;
}
}, {
key: "__compareToNumber",
value: function(e, n) {
if (l.__isOneDigitInt(n)) {
var r = e.sign, i = 0 > n;
if (r !== i) return l.__unequalSign(r);
if (0 === e.length) {
if (i) throw new Error("implementation bug");
return 0 === n ? 0 : -1;
}
if (1 < e.length) return l.__absoluteGreater(r);
var o = t(n), a = e.__unsignedDigit(0);
return a > o ? l.__absoluteGreater(r) : a < o ? l.__absoluteLess(r) : 0;
}
return l.__compareToDouble(e, n);
}
}, {
key: "__compareToDouble",
value: function(e, t) {
if (t != t) return t;
if (t === 1 / 0) return -1;
if (t === -1 / 0) return 1;
var n = e.sign;
if (n !== 0 > t) return l.__unequalSign(n);
if (0 === t) throw new Error("implementation bug: should be handled elsewhere");
if (0 === e.length) return -1;
l.__kBitConversionDouble[0] = t;
var r = 2047 & l.__kBitConversionInts[1] >>> 20;
if (2047 == r) throw new Error("implementation bug: handled elsewhere");
var i = r - 1023;
if (0 > i) return l.__absoluteGreater(n);
var o = e.length, a = e.__digit(o - 1), s = l.__clz30(a), c = 30 * o - s, d = i + 1;
if (c < d) return l.__absoluteLess(n);
if (c > d) return l.__absoluteGreater(n);
var u = 1048576 | 1048575 & l.__kBitConversionInts[1], p = l.__kBitConversionInts[0], f = 20, h = 29 - s;
if (h !== (0 | (c - 1) % 30)) throw new Error("implementation bug");
var m, g = 0;
if (h < f) {
var y = f - h;
g = y + 32, m = u >>> y, u = u << 32 - y | p >>> y, p <<= 32 - y;
} else if (h === f) g = 32, m = u, u = p, p = 0; else {
var I = h - f;
g = 32 - I, m = u << I | p >>> 32 - I, u = p << I, p = 0;
}
if ((a >>>= 0) > (m >>>= 0)) return l.__absoluteGreater(n);
if (a < m) return l.__absoluteLess(n);
for (var _ = o - 2; 0 <= _; _--) {
0 < g ? (g -= 30, m = u >>> 2, u = u << 30 | p >>> 2, p <<= 30) : m = 0;
var b = e.__unsignedDigit(_);
if (b > m) return l.__absoluteGreater(n);
if (b < m) return l.__absoluteLess(n);
}
if (0 !== u || 0 !== p) {
if (0 === g) throw new Error("implementation bug");
return l.__absoluteLess(n);
}
return 0;
}
}, {
key: "__equalToNumber",
value: function(e, n) {
return l.__isOneDigitInt(n) ? 0 === n ? 0 === e.length : 1 === e.length && e.sign === 0 > n && e.__unsignedDigit(0) === t(n) : 0 === l.__compareToDouble(e, n);
}
}, {
key: "__comparisonResultToBool",
value: function(e, t) {
return 0 === t ? 0 > e : 1 === t ? 0 >= e : 2 === t ? 0 < e : 3 === t ? 0 <= e : void 0;
}
}, {
key: "__compare",
value: function(e, t, n) {
if (e = l.__toPrimitive(e), t = l.__toPrimitive(t), "string" == typeof e && "string" == typeof t) switch (n) {
case 0:
return e < t;

case 1:
return e <= t;

case 2:
return e > t;

case 3:
return e >= t;
}
if (l.__isBigInt(e) && "string" == typeof t) return null !== (t = l.__fromString(t)) && l.__comparisonResultToBool(l.__compareToBigInt(e, t), n);
if ("string" == typeof e && l.__isBigInt(t)) return null !== (e = l.__fromString(e)) && l.__comparisonResultToBool(l.__compareToBigInt(e, t), n);
if (e = l.__toNumeric(e), t = l.__toNumeric(t), l.__isBigInt(e)) {
if (l.__isBigInt(t)) return l.__comparisonResultToBool(l.__compareToBigInt(e, t), n);
if ("number" != typeof t) throw new Error("implementation bug");
return l.__comparisonResultToBool(l.__compareToNumber(e, t), n);
}
if ("number" != typeof e) throw new Error("implementation bug");
if (l.__isBigInt(t)) return l.__comparisonResultToBool(l.__compareToNumber(t, e), 2 ^ n);
if ("number" != typeof t) throw new Error("implementation bug");
return 0 === n ? e < t : 1 === n ? e <= t : 2 === n ? e > t : 3 === n ? e >= t : void 0;
}
}, {
key: "__absoluteAdd",
value: function(e, t, n) {
if (e.length < t.length) return l.__absoluteAdd(t, e, n);
if (0 === e.length) return e;
if (0 === t.length) return e.sign === n ? e : l.unaryMinus(e);
var r = e.length;
(0 === e.__clzmsd() || t.length === e.length && 0 === t.__clzmsd()) && r++;
for (var i, o = new l(r, n), a = 0, s = 0; s < t.length; s++) a = (i = e.__digit(s) + t.__digit(s) + a) >>> 30, 
o.__setDigit(s, 1073741823 & i);
for (;s < e.length; s++) {
var c = e.__digit(s) + a;
a = c >>> 30, o.__setDigit(s, 1073741823 & c);
}
return s < o.length && o.__setDigit(s, a), o.__trim();
}
}, {
key: "__absoluteSub",
value: function(e, t, n) {
if (0 === e.length) return e;
if (0 === t.length) return e.sign === n ? e : l.unaryMinus(e);
for (var r, i = new l(e.length, n), o = 0, a = 0; a < t.length; a++) o = 1 & (r = e.__digit(a) - t.__digit(a) - o) >>> 30, 
i.__setDigit(a, 1073741823 & r);
for (;a < e.length; a++) {
var s = e.__digit(a) - o;
o = 1 & s >>> 30, i.__setDigit(a, 1073741823 & s);
}
return i.__trim();
}
}, {
key: "__absoluteAddOne",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length;
null === n ? n = new l(r, t) : n.sign = t;
for (var i, o = 1, a = 0; a < r; a++) o = (i = e.__digit(a) + o) >>> 30, n.__setDigit(a, 1073741823 & i);
return 0 !== o && n.__setDigitGrow(r, 1), n;
}
}, {
key: "__absoluteSubOne",
value: function(e, t) {
for (var n, r = e.length, i = new l(t = t || r, !1), o = 1, a = 0; a < r; a++) o = 1 & (n = e.__digit(a) - o) >>> 30, 
i.__setDigit(a, 1073741823 & n);
if (0 !== o) throw new Error("implementation bug");
for (var s = r; s < t; s++) i.__setDigit(s, 0);
return i;
}
}, {
key: "__absoluteAnd",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
if (r < i) {
o = r;
var a = e, s = r;
e = t, r = i, t = a, i = s;
}
var c = o;
null === n ? n = new l(c, !1) : c = n.length;
for (var d = 0; d < o; d++) n.__setDigit(d, e.__digit(d) & t.__digit(d));
for (;d < c; d++) n.__setDigit(d, 0);
return n;
}
}, {
key: "__absoluteAndNot",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
r < i && (o = r);
var a = r;
null === n ? n = new l(a, !1) : a = n.length;
for (var s = 0; s < o; s++) n.__setDigit(s, e.__digit(s) & ~t.__digit(s));
for (;s < r; s++) n.__setDigit(s, e.__digit(s));
for (;s < a; s++) n.__setDigit(s, 0);
return n;
}
}, {
key: "__absoluteOr",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
if (r < i) {
o = r;
var a = e, s = r;
e = t, r = i, t = a, i = s;
}
var c = r;
null === n ? n = new l(c, !1) : c = n.length;
for (var d = 0; d < o; d++) n.__setDigit(d, e.__digit(d) | t.__digit(d));
for (;d < r; d++) n.__setDigit(d, e.__digit(d));
for (;d < c; d++) n.__setDigit(d, 0);
return n;
}
}, {
key: "__absoluteXor",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
if (r < i) {
o = r;
var a = e, s = r;
e = t, r = i, t = a, i = s;
}
var c = r;
null === n ? n = new l(c, !1) : c = n.length;
for (var d = 0; d < o; d++) n.__setDigit(d, e.__digit(d) ^ t.__digit(d));
for (;d < r; d++) n.__setDigit(d, e.__digit(d));
for (;d < c; d++) n.__setDigit(d, 0);
return n;
}
}, {
key: "__absoluteCompare",
value: function(e, t) {
var n = e.length - t.length;
if (0 != n) return n;
for (var r = e.length - 1; 0 <= r && e.__digit(r) === t.__digit(r); ) r--;
return 0 > r ? 0 : e.__unsignedDigit(r) > t.__unsignedDigit(r) ? 1 : -1;
}
}, {
key: "__multiplyAccumulate",
value: function(e, t, n, r) {
if (0 !== t) {
for (var i = 32767 & t, o = t >>> 15, a = 0, s = 0, c = 0; c < e.length; c++, r++) {
var d = n.__digit(r), u = e.__digit(c), p = 32767 & u, f = u >>> 15, h = l.__imul(p, i), m = l.__imul(p, o), g = l.__imul(f, i);
a = (d += s + h + a) >>> 30, d &= 1073741823, a += (d += ((32767 & m) << 15) + ((32767 & g) << 15)) >>> 30, 
s = l.__imul(f, o) + (m >>> 15) + (g >>> 15), n.__setDigit(r, 1073741823 & d);
}
for (;0 !== a || 0 !== s; r++) {
var y = n.__digit(r);
y += a + s, s = 0, a = y >>> 30, n.__setDigit(r, 1073741823 & y);
}
}
}
}, {
key: "__internalMultiplyAdd",
value: function(e, t, n, r, i) {
for (var o = n, a = 0, s = 0; s < r; s++) {
var c = e.__digit(s), d = l.__imul(32767 & c, t), u = l.__imul(c >>> 15, t), p = d + ((32767 & u) << 15) + a + o;
o = p >>> 30, a = u >>> 15, i.__setDigit(s, 1073741823 & p);
}
if (i.length > r) for (i.__setDigit(r++, o + a); r < i.length; ) i.__setDigit(r++, 0); else if (0 !== o + a) throw new Error("implementation bug");
}
}, {
key: "__absoluteDivSmall",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
null === n && (n = new l(e.length, !1));
for (var r = 0, i = 2 * e.length - 1; 0 <= i; i -= 2) {
var o = (r << 15 | e.__halfDigit(i)) >>> 0, a = 0 | o / t, s = 0 | (o = ((r = 0 | o % t) << 15 | e.__halfDigit(i - 1)) >>> 0) / t;
r = 0 | o % t, n.__setDigit(i >>> 1, a << 15 | s);
}
return n;
}
}, {
key: "__absoluteModSmall",
value: function(e, t) {
for (var n = 0, r = 2 * e.length - 1; 0 <= r; r--) n = 0 | ((n << 15 | e.__halfDigit(r)) >>> 0) % t;
return n;
}
}, {
key: "__absoluteDivLarge",
value: function(e, t, n, r) {
var i = t.__halfDigitLength(), o = t.length, a = e.__halfDigitLength() - i, s = null;
n && (s = new l(a + 2 >>> 1, !1)).__initializeDigits();
var c = new l(i + 2 >>> 1, !1);
c.__initializeDigits();
var d = l.__clz15(t.__halfDigit(i - 1));
0 < d && (t = l.__specialLeftShift(t, d, 0));
for (var u = l.__specialLeftShift(e, d, 1), p = t.__halfDigit(i - 1), f = 0, h = a; 0 <= h; h--) {
var m = 32767, g = u.__halfDigit(h + i);
if (g !== p) {
var y = (g << 15 | u.__halfDigit(h + i - 1)) >>> 0;
m = 0 | y / p;
for (var I = 0 | y % p, _ = t.__halfDigit(i - 2), b = u.__halfDigit(h + i - 2); l.__imul(m, _) >>> 0 > (I << 16 | b) >>> 0 && (m--, 
!(32767 < (I += p))); ) ;
}
l.__internalMultiplyAdd(t, m, 0, o, c);
var S = u.__inplaceSub(c, h, i + 1);
0 !== S && (S = u.__inplaceAdd(t, h, i), u.__setHalfDigit(h + i, 32767 & u.__halfDigit(h + i) + S), 
m--), n && (1 & h ? f = m << 15 : s.__setDigit(h >>> 1, f | m));
}
if (r) return u.__inplaceRightShift(d), n ? {
quotient: s,
remainder: u
} : u;
if (n) return s;
throw new Error("unreachable");
}
}, {
key: "__clz15",
value: function(e) {
return l.__clz30(e) - 15;
}
}, {
key: "__specialLeftShift",
value: function(e, t, n) {
var r = e.length, i = new l(r + n, !1);
if (0 === t) {
for (var o = 0; o < r; o++) i.__setDigit(o, e.__digit(o));
return 0 < n && i.__setDigit(r, 0), i;
}
for (var a, s = 0, c = 0; c < r; c++) a = e.__digit(c), i.__setDigit(c, 1073741823 & a << t | s), 
s = a >>> 30 - t;
return 0 < n && i.__setDigit(r, s), i;
}
}, {
key: "__leftShiftByAbsolute",
value: function(e, t) {
var n = l.__toShiftAmount(t);
if (0 > n) throw new RangeError("BigInt too big");
var r = 0 | n / 30, i = n % 30, o = e.length, a = 0 !== i && 0 != e.__digit(o - 1) >>> 30 - i, s = o + r + (a ? 1 : 0), c = new l(s, e.sign);
if (0 === i) {
for (var d = 0; d < r; d++) c.__setDigit(d, 0);
for (;d < s; d++) c.__setDigit(d, e.__digit(d - r));
} else {
for (var u = 0, p = 0; p < r; p++) c.__setDigit(p, 0);
for (var f, h = 0; h < o; h++) f = e.__digit(h), c.__setDigit(h + r, 1073741823 & f << i | u), 
u = f >>> 30 - i;
if (a) c.__setDigit(o + r, u); else if (0 !== u) throw new Error("implementation bug");
}
return c.__trim();
}
}, {
key: "__rightShiftByAbsolute",
value: function(e, t) {
var n = e.length, r = e.sign, i = l.__toShiftAmount(t);
if (0 > i) return l.__rightShiftByMaximum(r);
var o = 0 | i / 30, a = i % 30, s = n - o;
if (0 >= s) return l.__rightShiftByMaximum(r);
var c = !1;
if (r) if (0 != (e.__digit(o) & (1 << a) - 1)) c = !0; else for (var d = 0; d < o; d++) if (0 !== e.__digit(d)) {
c = !0;
break;
}
c && 0 === a && 0 == ~e.__digit(n - 1) && s++;
var u = new l(s, r);
if (0 === a) {
u.__setDigit(s - 1, 0);
for (var p = o; p < n; p++) u.__setDigit(p - o, e.__digit(p));
} else {
for (var f, h = e.__digit(o) >>> a, m = n - o - 1, g = 0; g < m; g++) f = e.__digit(g + o + 1), 
u.__setDigit(g, 1073741823 & f << 30 - a | h), h = f >>> a;
u.__setDigit(m, h);
}
return c && (u = l.__absoluteAddOne(u, !0, u)), u.__trim();
}
}, {
key: "__rightShiftByMaximum",
value: function(e) {
return e ? l.__oneDigit(1, !0) : l.__zero();
}
}, {
key: "__toShiftAmount",
value: function(e) {
if (1 < e.length) return -1;
var t = e.__unsignedDigit(0);
return t > l.__kMaxLengthBits ? -1 : t;
}
}, {
key: "__toPrimitive",
value: function(e) {
var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "default";
if ("object" !== n(e)) return e;
if (e.constructor === l) return e;
if ("undefined" != typeof Symbol && "symbol" === n(Symbol.toPrimitive)) {
var r = e[Symbol.toPrimitive];
if (r) {
var i = r(t);
if ("object" !== n(i)) return i;
throw new TypeError("Cannot convert object to primitive value");
}
}
var o = e.valueOf;
if (o) {
var a = o.call(e);
if ("object" !== n(a)) return a;
}
var s = e.toString;
if (s) {
var c = s.call(e);
if ("object" !== n(c)) return c;
}
throw new TypeError("Cannot convert object to primitive value");
}
}, {
key: "__toNumeric",
value: function(e) {
return l.__isBigInt(e) ? e : +e;
}
}, {
key: "__isBigInt",
value: function(e) {
return "object" === n(e) && null !== e && e.constructor === l;
}
}, {
key: "__truncateToNBits",
value: function(e, t) {
for (var n = 0 | (e + 29) / 30, r = new l(n, t.sign), i = n - 1, o = 0; o < i; o++) r.__setDigit(o, t.__digit(o));
var a = t.__digit(i);
if (0 != e % 30) {
var s = 32 - e % 30;
a = a << s >>> s;
}
return r.__setDigit(i, a), r.__trim();
}
}, {
key: "__truncateAndSubFromPowerOfTwo",
value: function(e, t, n) {
for (var r, i = Math.min, o = 0 | (e + 29) / 30, a = new l(o, n), s = 0, c = o - 1, d = 0, u = i(c, t.length); s < u; s++) d = 1 & (r = 0 - t.__digit(s) - d) >>> 30, 
a.__setDigit(s, 1073741823 & r);
for (;s < c; s++) a.__setDigit(s, 0 | 1073741823 & -d);
var p, f = c < t.length ? t.__digit(c) : 0, h = e % 30;
if (0 === h) p = 0 - f - d, p &= 1073741823; else {
var m = 32 - h, g = 1 << 32 - m;
p = g - (f = f << m >>> m) - d, p &= g - 1;
}
return a.__setDigit(c, p), a.__trim();
}
}, {
key: "__digitPow",
value: function(e, t) {
for (var n = 1; 0 < t; ) 1 & t && (n *= e), t >>>= 1, e *= e;
return n;
}
}, {
key: "__isOneDigitInt",
value: function(e) {
return (1073741823 & e) === e;
}
} ]), l;
}(p(Array));
return T.__kMaxLength = 33554432, T.__kMaxLengthBits = T.__kMaxLength << 5, T.__kMaxBitsPerChar = [ 0, 0, 32, 51, 64, 75, 83, 90, 96, 102, 107, 111, 115, 119, 122, 126, 128, 131, 134, 136, 139, 141, 143, 145, 147, 149, 151, 153, 154, 156, 158, 159, 160, 162, 163, 165, 166 ], 
T.__kBitsPerCharTableShift = 5, T.__kBitsPerCharTableMultiplier = 1 << T.__kBitsPerCharTableShift, 
T.__kConversionChars = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z" ], 
T.__kBitConversionBuffer = new ArrayBuffer(8), T.__kBitConversionDouble = new Float64Array(T.__kBitConversionBuffer), 
T.__kBitConversionInts = new Int32Array(T.__kBitConversionBuffer), T.__clz30 = t ? function(e) {
return t(e) - 2;
} : function(e) {
var t = Math.LN2, n = Math.log;
return 0 === e ? 30 : 0 | 29 - (0 | n(e >>> 0) / t);
}, T.__imul = e || function(e, t) {
return 0 | e * t;
}, T;
}();
})), is = Function("return this")();
var os = class {
constructor(e) {
this.debugName = e, this.callbacks = [];
}
subscribe(e) {
return this.callbacks.push(e), () => {
const t = this.callbacks.indexOf(e);
t > -1 && this.callbacks.splice(t, 1);
};
}
listenOnce(e) {
const t = this.subscribe(((...n) => {
t(), e(...n);
}));
return t;
}
trigger(...e) {
if (this.callbacks.length) {
this.callbacks.slice().forEach((t => {
t(...e);
}));
}
}
}, as = class {
constructor(e = {}) {
this.data = e.data ?? new os, this.end = e.end ?? new os, this.error = e.error ?? new os;
}
start() {}
close() {
this.end.trigger(), this.end.callbacks.length = 0, this.data.callbacks.length = 0, 
this.error.callbacks.length = 0;
}
}, ss = class extends as {
constructor(e, t, n) {
super({
error: e.error
}), this.upstream = e, this.transformer = t, this.transformedStreamOptions = n, 
this.unsubscribeUpstreamEnd = this.upstream.end.subscribe((() => {
this.cleanup();
}));
}
start() {
this.unsubscribeUpstreamData = this.upstream.data.subscribe((e => {
this.transformer(e, this);
})), this.upstream.start();
}
close() {
this.cleanup(), this.transformedStreamOptions?.keepAliveUpstreamOnClose || (this.unsubscribeUpstreamEnd?.(), 
this.upstream.close());
}
cleanup() {
this.unsubscribeUpstreamData?.(), super.close();
}
}, ls = class extends ss {
constructor(e, t, n) {
super(e, (e => {
const t = this.batcher(e);
0 === this.batchDuration ? this.data.trigger([ t ]) : (this.buffer.push(t), this.scheduleBatch());
}), n), this.batcher = t, this.buffer = [], this.isFirstBatch = !0, this.batchDuration = n.batchDuration, 
this.initialBatchDuration = n.initialBatchDuration;
}
batch() {
this.buffer.length && this.data.trigger(this.buffer.splice(0, this.buffer.length));
}
scheduleBatch() {
if (this.timeout) return;
let e = this.batchDuration;
this.isFirstBatch && void 0 !== this.initialBatchDuration && (e = this.initialBatchDuration), 
this.isFirstBatch = !1, this.timeout = setTimeout((() => {
this.batch(), this.timeout = void 0;
}), e);
}
cleanup() {
this.batch(), this.timeout && (clearTimeout(this.timeout), this.timeout = void 0), 
this.buffer.length = 0, super.cleanup();
}
close() {
this.cleanup(), super.close();
}
}, cs = "__twinkle_error__", ds = class extends as {
constructor(e, t) {
super(), this.streamId = e, this.callNativeClose = t;
}
close() {
this.callNativeClose();
}
}, us = 0, ps = class {
constructor(e) {
this.nativeApi = e, this.id = 1, this.handlers = {}, this._streams = {}, this._methodAvailableCache = {}, 
this._eventAvailableCache = {};
}
_registerBinding(e) {
this.nativeApi.registerAsyncJsCallResponseHandler(((e, t, n, r, i, o) => {
if (e === this._bindingName) {
if (0 === t) return;
const a = this.handlers[t];
if (a) if (delete this.handlers[t], "string" == typeof r) {
let e = r;
void 0 !== o && (e += " [" + o + "]"), void 0 !== i && (e += " (" + i + ")"), a(void 0, new Error(e));
} else a(n, void 0); else console.error(`No handler for response ${t} at ${e}`);
}
})), this.nativeApi.registerJsBindingEventHandler(((t, n, r) => {
if (t === this._bindingName) {
e(n, r);
}
}));
}
getBindingStructure() {
return this._syncCall("__structure__", {});
}
getMethodStructure(e) {
return this.getBindingStructure()?.methods[e];
}
getEventStructure(e) {
return this.getBindingStructure()?.events[e];
}
isMethodAvailable(e) {
let t = this._methodAvailableCache[e];
return void 0 === t && (t = !!this.getMethodStructure(e), this._methodAvailableCache[e] = t), 
t;
}
isEventAvailable(e) {
let t = this._eventAvailableCache[e];
return void 0 === t && (t = !!this.getEventStructure(e), this._eventAvailableCache[e] = t), 
t;
}
_hasMethodOrEvent(e, t) {
const n = e + "." + t;
let r = this._methodAvailableCache[n];
return void 0 === r && (r = !!this._syncCall("__isMethodOrEventAvailable__", {
api: e,
methodOrEvent: t
}), this._methodAvailableCache[n] = r), r;
}
_hasMethod(e, t, n) {
return is.TwinkleConstants?.featureFlags?.hasMethodOrEventAvailable ? this._hasMethodOrEvent(t, n) : this.isMethodAvailable(e + "." + t + "." + n);
}
_hasEvent(e, t, n) {
return is.TwinkleConstants?.featureFlags?.hasMethodOrEventAvailable ? this._hasMethodOrEvent(t, n) : this.isEventAvailable(e + "." + t + "." + n);
}
_syncCall(e, t) {
const n = this.nativeApi.callJsBindingSync(this._bindingName, e, t);
if ("string" == typeof n && n.startsWith(cs)) throw new Error(n.substr(cs.length));
return n;
}
_asyncCall(e, t) {
return this._asyncPromise(e, t);
}
_asyncMethodCall(e, t, n) {
if (!n) return this._asyncPromise(e, t);
this._asyncCallback(e, t, n);
}
_asyncCallback(e, t, n) {
const r = this.id++;
this.handlers[r] = n, this.nativeApi.callJsBindingAsync(r, this._bindingName, e, t);
}
_asyncPromise(e, t) {
return new Promise(((n, r) => {
this._asyncCallback(e, t, ((e, t) => {
void 0 === t ? n(e) : r(t);
}));
}));
}
_fireAndForgetCall(e, t) {
this.nativeApi.callJsBindingAsync(0, this._bindingName, e, t);
}
async _streamCall(e, t, n) {
const r = us++, i = new ds(r, (() => {
this._asyncCall(t, {
id: r
}).catch((n => {
console.error("Failed when calling " + t + " to end stream " + e + ": " + n.message);
}));
}));
i.end.subscribe((() => {
delete this._streams[r], i.end.callbacks.length = 0, i.data.callbacks.length = 0, 
i.error.callbacks.length = 0;
})), this._streams[r + ""] = i;
const o = await this._asyncCall(e, {
id: r,
request: n
});
return {
stream: i,
response: o
};
}
}, fs = class extends ps {
constructor() {
super(...arguments), this._bindingName = "TwinkleJsBindings", this.Asset = {
onJsFileRequest: new os,
onAssetLoaded: new os,
jsFileResponse: e => this._syncCall("TwinkleJsBindings.Asset.jsFileResponse", e),
getCachePath: e => this._syncCall("TwinkleJsBindings.Asset.getCachePath", e),
loadAsset: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Asset.loadAsset", e, t),
downloadAssetToCache: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Asset.downloadAssetToCache", e, t)
}, this.Bootflow = {
onJsBootBegin: e => this._syncCall("TwinkleJsBindings.Bootflow.onJsBootBegin", e),
onJsBootEnd: e => this._syncCall("TwinkleJsBindings.Bootflow.onJsBootEnd", e)
}, this.Clipboard = {
getText: e => this._syncCall("TwinkleJsBindings.Clipboard.getText", e),
setText: e => this._syncCall("TwinkleJsBindings.Clipboard.setText", e)
}, this.DebugUI = {
onWindowStatus: new os,
onTrigger: new os,
onBool: new os,
onString: new os,
createWindow: e => this._syncCall("TwinkleJsBindings.DebugUI.createWindow", e),
updateWindow: e => this._syncCall("TwinkleJsBindings.DebugUI.updateWindow", e),
destroyWindow: e => this._syncCall("TwinkleJsBindings.DebugUI.destroyWindow", e),
destroyAllWindows: e => this._syncCall("TwinkleJsBindings.DebugUI.destroyAllWindows", e)
}, this.FileSystem = {
getPersistentStorageDir: e => this._syncCall("TwinkleJsBindings.FileSystem.getPersistentStorageDir", e),
getTemporaryStorageDir: e => this._syncCall("TwinkleJsBindings.FileSystem.getTemporaryStorageDir", e),
deleteFile: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.deleteFile", e, t),
listFiles: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.listFiles", e, t),
fileExist: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.fileExist", e, t),
readFile: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.readFile", e, t),
writeFile: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.writeFile", e, t)
}, this.Font = {
setFontSettings: e => this._syncCall("TwinkleJsBindings.Font.setFontSettings", e),
getFontSettings: e => this._syncCall("TwinkleJsBindings.Font.getFontSettings", e),
resetToDefaultFontSettings: e => this._syncCall("TwinkleJsBindings.Font.resetToDefaultFontSettings", e),
canTextBeRenderedInFont: e => this._syncCall("TwinkleJsBindings.Font.canTextBeRenderedInFont", e)
}, this.Http = {
onDebugHttpRequest: new os,
bytesToString: e => this._syncCall("TwinkleJsBindings.Http.bytesToString", e),
stringToBytes: e => this._syncCall("TwinkleJsBindings.Http.stringToBytes", e),
setMaxActiveRequestLimit: e => this._syncCall("TwinkleJsBindings.Http.setMaxActiveRequestLimit", e),
getMaxActiveRequestLimit: e => this._syncCall("TwinkleJsBindings.Http.getMaxActiveRequestLimit", e),
httpRequest: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Http.httpRequest", e, t),
sendDebugHttpResponse: e => {
this._fireAndForgetCall("TwinkleJsBindings.Http.sendDebugHttpResponse", e);
}
}, this.Http2 = {
onRequestError: new os,
onRequestHeaders: new os,
onRequestData: new os,
onRequestEnd: new os,
createHttp2Connection: e => this._syncCall("TwinkleJsBindings.Http2.createHttp2Connection", e),
closeHttp2Connection: e => this._syncCall("TwinkleJsBindings.Http2.closeHttp2Connection", e),
openStream: e => this._syncCall("TwinkleJsBindings.Http2.openStream", e),
sendData: e => this._syncCall("TwinkleJsBindings.Http2.sendData", e),
signalEndOfTransmission: e => this._syncCall("TwinkleJsBindings.Http2.signalEndOfTransmission", e),
closeStream: e => this._syncCall("TwinkleJsBindings.Http2.closeStream", e),
addCACertificate: e => this._syncCall("TwinkleJsBindings.Http2.addCACertificate", e)
}, this.Input = {
onInputDeviceChange: new os,
onButtonStateChanged: new os,
onFocusNotificationConfigChanged: new os,
onFocusNotificationButtonPressed: new os,
onFocusNotificationButtonReleased: new os,
onTypingInput: new os,
onMouseMove: new os,
onMouseEvents: new os,
onTouchEvent: new os,
getCurrentInputDevice: e => this._syncCall("TwinkleJsBindings.Input.getCurrentInputDevice", e),
showVirtualKeyboard: e => this._syncCall("TwinkleJsBindings.Input.showVirtualKeyboard", e),
hideVirtualKeyboard: e => this._syncCall("TwinkleJsBindings.Input.hideVirtualKeyboard", e),
getFocusNotificationConfig: e => this._syncCall("TwinkleJsBindings.Input.getFocusNotificationConfig", e),
setFocusNotificationRequireHold: e => this._syncCall("TwinkleJsBindings.Input.setFocusNotificationRequireHold", e)
}, this.KvStore = {
infoSync: e => this._syncCall("TwinkleJsBindings.KvStore.infoSync", e),
getStringSync: e => this._syncCall("TwinkleJsBindings.KvStore.getStringSync", e),
getBytesSync: e => this._syncCall("TwinkleJsBindings.KvStore.getBytesSync", e),
setStringSync: e => this._syncCall("TwinkleJsBindings.KvStore.setStringSync", e),
setBytesSync: e => this._syncCall("TwinkleJsBindings.KvStore.setBytesSync", e),
removeSync: e => this._syncCall("TwinkleJsBindings.KvStore.removeSync", e),
removeAllSync: e => this._syncCall("TwinkleJsBindings.KvStore.removeAllSync", e),
info: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.info", e, t),
getString: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.getString", e, t),
getBytes: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.getBytes", e, t),
setString: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.setString", e, t),
setBytes: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.setBytes", e, t),
remove: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.remove", e, t),
removeAll: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.removeAll", e, t)
}, this.Layout = {
onWindowSizeChanged: new os,
enableMouseMove: e => this._syncCall("TwinkleJsBindings.Layout.enableMouseMove", e),
getWindowSize: e => this._syncCall("TwinkleJsBindings.Layout.getWindowSize", e),
SetLayoutMode: e => this._syncCall("TwinkleJsBindings.Layout.SetLayoutMode", e),
debugSelectSurfaces: e => {
this._fireAndForgetCall("TwinkleJsBindings.Layout.debugSelectSurfaces", e);
},
debugClearAllSurfaces: e => {
this._fireAndForgetCall("TwinkleJsBindings.Layout.debugClearAllSurfaces", e);
},
playSpriteAnimation: e => {
this._fireAndForgetCall("TwinkleJsBindings.Layout.playSpriteAnimation", e);
}
}, this.Metrics = {
onFontQualityLoweredBecauseGlyphCacheFull: new os,
getJsMemoryStats: e => this._syncCall("TwinkleJsBindings.Metrics.getJsMemoryStats", e),
getJsCpuUsage: e => this._syncCall("TwinkleJsBindings.Metrics.getJsCpuUsage", e),
getJsMemoryUsage: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Metrics.getJsMemoryUsage", e, t)
}, this.Surface = {
onSurfaceBoundsChanged: new os,
createStyleSync: e => this._syncCall("TwinkleJsBindings.Surface.createStyleSync", e),
getStyle: e => this._syncCall("TwinkleJsBindings.Surface.getStyle", e),
getSurfaceBounds: e => this._syncCall("TwinkleJsBindings.Surface.getSurfaceBounds", e),
getSurfacesBounds: e => this._syncCall("TwinkleJsBindings.Surface.getSurfacesBounds", e),
getSurfaceChainAtPosition: e => this._syncCall("TwinkleJsBindings.Surface.getSurfaceChainAtPosition", e),
getTextMeasurements: e => this._syncCall("TwinkleJsBindings.Surface.getTextMeasurements", e),
createRichTextObject: e => this._syncCall("TwinkleJsBindings.Surface.createRichTextObject", e),
updateRichTextObject: e => this._syncCall("TwinkleJsBindings.Surface.updateRichTextObject", e),
removeRichTextObject: e => this._syncCall("TwinkleJsBindings.Surface.removeRichTextObject", e),
createStyle: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.createStyle", e);
},
deleteStyle: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.deleteStyle", e);
},
createRootSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.createRootSurface", e);
},
updateSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.updateSurface", e);
},
replaceUpdateSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.replaceUpdateSurface", e);
},
replaceSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.replaceSurface", e);
},
updateSurfaceChildren: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.updateSurfaceChildren", e);
},
insertChildAt: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.insertChildAt", e);
},
moveChild: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.moveChild", e);
},
removeChild: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.removeChild", e);
},
createDetachedSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.createDetachedSurface", e);
},
setDetachedSurfaceAsRoot: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.setDetachedSurfaceAsRoot", e);
},
attachDetachedSurfaceAsChildAt: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.attachDetachedSurfaceAsChildAt", e);
},
detachSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.detachSurface", e);
},
surfaceDebugHighlight: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.surfaceDebugHighlight", e);
}
}, this.Telemetry = {
sendTelemetryEvent: new os
}, this.Texture = {
onTextureLoaded: new os,
onTextureUnloaded: new os,
loadRoundedRectTexture: e => this._syncCall("TwinkleJsBindings.Texture.loadRoundedRectTexture", e),
createDynamicAtlas: e => this._syncCall("TwinkleJsBindings.Texture.createDynamicAtlas", e),
destroyAtlas: e => this._syncCall("TwinkleJsBindings.Texture.destroyAtlas", e)
}, this.Tween = {
onTweenStatus: new os,
getTweenValueSync: e => this._syncCall("TwinkleJsBindings.Tween.getTweenValueSync", e),
createTween: e => {
this._fireAndForgetCall("TwinkleJsBindings.Tween.createTween", e);
},
updateTweens: e => {
this._fireAndForgetCall("TwinkleJsBindings.Tween.updateTweens", e);
},
destroyTween: e => {
this._fireAndForgetCall("TwinkleJsBindings.Tween.destroyTween", e);
}
}, this.Utilities = {
onAssetLoaded: new os,
onSendErrorToJs: new os,
openUrl: e => this._syncCall("TwinkleJsBindings.Utilities.openUrl", e),
reloadScriptEngine: e => this._syncCall("TwinkleJsBindings.Utilities.reloadScriptEngine", e),
triggerGC: e => this._syncCall("TwinkleJsBindings.Utilities.triggerGC", e),
enableGC: e => this._syncCall("TwinkleJsBindings.Utilities.enableGC", e),
isGCEnabled: e => this._syncCall("TwinkleJsBindings.Utilities.isGCEnabled", e),
verifyCodeSignature: e => this._syncCall("TwinkleJsBindings.Utilities.verifyCodeSignature", e),
showError: e => this._syncCall("TwinkleJsBindings.Utilities.showError", e),
log: e => this._syncCall("TwinkleJsBindings.Utilities.log", e),
getConfigStringValue: e => this._syncCall("TwinkleJsBindings.Utilities.getConfigStringValue", e),
getConfigBoolValue: e => this._syncCall("TwinkleJsBindings.Utilities.getConfigBoolValue", e),
getConfigFloatValue: e => this._syncCall("TwinkleJsBindings.Utilities.getConfigFloatValue", e),
getSystemTimeInMs: e => this._syncCall("TwinkleJsBindings.Utilities.getSystemTimeInMs", e),
loadFont: e => this._syncCall("TwinkleJsBindings.Utilities.loadFont", e),
setGlyphTextureSize: e => this._syncCall("TwinkleJsBindings.Utilities.setGlyphTextureSize", e),
setGlyphSamples: e => this._syncCall("TwinkleJsBindings.Utilities.setGlyphSamples", e),
setFullscreenResample: e => this._syncCall("TwinkleJsBindings.Utilities.setFullscreenResample", e),
enablePostProcessing: e => this._syncCall("TwinkleJsBindings.Utilities.enablePostProcessing", e),
isPostProcessingEnabled: e => this._syncCall("TwinkleJsBindings.Utilities.isPostProcessingEnabled", e),
getFullScreenRenderTargetCount: e => this._syncCall("TwinkleJsBindings.Utilities.getFullScreenRenderTargetCount", e),
addTimeout: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Utilities.addTimeout", e, t)
};
}
hasMethod(e, t) {
return this._hasMethod("TwinkleJsBindings", e, t);
}
hasEvent(e, t) {
return this._hasEvent("TwinkleJsBindings", e, t);
}
registerBinding() {
return this._registerBinding(((e, t) => {
switch (e) {
case "TwinkleJsBindings.Asset.onJsFileRequest":
return this.Asset.onJsFileRequest.trigger(t), !0;

case "TwinkleJsBindings.Asset.onAssetLoaded":
return this.Asset.onAssetLoaded.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onWindowStatus":
return this.DebugUI.onWindowStatus.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onTrigger":
return this.DebugUI.onTrigger.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onBool":
return this.DebugUI.onBool.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onString":
return this.DebugUI.onString.trigger(t), !0;

case "TwinkleJsBindings.Http.onDebugHttpRequest":
return this.Http.onDebugHttpRequest.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestError":
return this.Http2.onRequestError.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestHeaders":
return this.Http2.onRequestHeaders.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestData":
return this.Http2.onRequestData.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestEnd":
return this.Http2.onRequestEnd.trigger(t), !0;

case "TwinkleJsBindings.Input.onInputDeviceChange":
return this.Input.onInputDeviceChange.trigger(t), !0;

case "TwinkleJsBindings.Input.onButtonStateChanged":
return this.Input.onButtonStateChanged.trigger(t), !0;

case "TwinkleJsBindings.Input.onFocusNotificationConfigChanged":
return this.Input.onFocusNotificationConfigChanged.trigger(t), !0;

case "TwinkleJsBindings.Input.onFocusNotificationButtonPressed":
return this.Input.onFocusNotificationButtonPressed.trigger(t), !0;

case "TwinkleJsBindings.Input.onFocusNotificationButtonReleased":
return this.Input.onFocusNotificationButtonReleased.trigger(t), !0;

case "TwinkleJsBindings.Input.onTypingInput":
return this.Input.onTypingInput.trigger(t), !0;

case "TwinkleJsBindings.Input.onMouseMove":
return this.Input.onMouseMove.trigger(t), !0;

case "TwinkleJsBindings.Input.onMouseEvents":
return this.Input.onMouseEvents.trigger(t), !0;

case "TwinkleJsBindings.Input.onTouchEvent":
return this.Input.onTouchEvent.trigger(t), !0;

case "TwinkleJsBindings.Layout.onWindowSizeChanged":
return this.Layout.onWindowSizeChanged.trigger(t), !0;

case "TwinkleJsBindings.Metrics.onFontQualityLoweredBecauseGlyphCacheFull":
return this.Metrics.onFontQualityLoweredBecauseGlyphCacheFull.trigger(t), !0;

case "TwinkleJsBindings.Surface.onSurfaceBoundsChanged":
return this.Surface.onSurfaceBoundsChanged.trigger(t), !0;

case "TwinkleJsBindings.Telemetry.sendTelemetryEvent":
return this.Telemetry.sendTelemetryEvent.trigger(t), !0;

case "TwinkleJsBindings.Texture.onTextureLoaded":
return this.Texture.onTextureLoaded.trigger(t), !0;

case "TwinkleJsBindings.Texture.onTextureUnloaded":
return this.Texture.onTextureUnloaded.trigger(t), !0;

case "TwinkleJsBindings.Tween.onTweenStatus":
return this.Tween.onTweenStatus.trigger(t), !0;

case "TwinkleJsBindings.Utilities.onAssetLoaded":
return this.Utilities.onAssetLoaded.trigger(t), !0;

case "TwinkleJsBindings.Utilities.onSendErrorToJs":
return this.Utilities.onSendErrorToJs.trigger(t), !0;
}
return !1;
}));
}
};
(e => {
let t, n, r, i, o, a, s, l, c;
(e => {
let t;
var n;
(n = t = e.WidthModifier || (e.WidthModifier = {}))[n.Default = 1] = "Default", 
n[n.WindowFactor = 2] = "WindowFactor", n[n.ContainerFactor = 3] = "ContainerFactor";
})(t = e.DebugUI || (e.DebugUI = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.ScreenColorType || (e.ScreenColorType = {}))[n.kSCT_Unknown = 0] = "kSCT_Unknown", 
n[n.kSCT_LCD_H_RGB = 1] = "kSCT_LCD_H_RGB", n[n.kSCT_LCD_H_BGR = 2] = "kSCT_LCD_H_BGR", 
n[n.kSCT_LCD_V_RGB = 3] = "kSCT_LCD_V_RGB", n[n.kSCT_LCD_V_BGR = 4] = "kSCT_LCD_V_BGR", 
n[n.kSCT_LCD_Other = 5] = "kSCT_LCD_Other", (i = r = e.MatchOption || (e.MatchOption = {}))[i.kMatchOptionNone = 0] = "kMatchOptionNone", 
i[i.kMatchOptionAssert = 1] = "kMatchOptionAssert", i[i.kMatchOptionFail = 2] = "kMatchOptionFail";
})(n = e.Font || (e.Font = {})), (e => {
let t;
var n;
(n = t = e.HttpMethod || (e.HttpMethod = {}))[n.Get = 1] = "Get", n[n.Post = 2] = "Post", 
n[n.Put = 3] = "Put", n[n.Delete = 4] = "Delete", n[n.Patch = 5] = "Patch", n[n.Options = 6] = "Options", 
n[n.Connect = 7] = "Connect", n[n.Head = 8] = "Head";
})(r = e.Http || (e.Http = {})), (e => {
let t;
var n;
(n = t = e.RequestType || (e.RequestType = {}))[n.Get = 0] = "Get", n[n.Put = 1] = "Put", 
n[n.Post = 2] = "Post";
})(i = e.Http2 || (e.Http2 = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
let s;
var l;
let c;
var d;
let u;
var p;
(n = t = e.GamePadInput || (e.GamePadInput = {}))[n.NotBound = 0] = "NotBound", 
n[n.DPadRight = 1] = "DPadRight", n[n.DPadLeft = 2] = "DPadLeft", n[n.DPadUp = 3] = "DPadUp", 
n[n.DPadDown = 4] = "DPadDown", n[n.LeftJoystickUp = 5] = "LeftJoystickUp", n[n.LeftJoystickDown = 6] = "LeftJoystickDown", 
n[n.LeftJoystickLeft = 7] = "LeftJoystickLeft", n[n.LeftJoystickRight = 8] = "LeftJoystickRight", 
n[n.LeftJoystickPress = 9] = "LeftJoystickPress", n[n.RightJoystickUp = 10] = "RightJoystickUp", 
n[n.RightJoystickDown = 11] = "RightJoystickDown", n[n.RightJoystickLeft = 12] = "RightJoystickLeft", 
n[n.RightJoystickRight = 13] = "RightJoystickRight", n[n.RightJoystickPress = 14] = "RightJoystickPress", 
n[n.FaceButtonTop = 15] = "FaceButtonTop", n[n.FaceButtonRight = 16] = "FaceButtonRight", 
n[n.FaceButtonBottom = 18] = "FaceButtonBottom", n[n.FaceButtonLeft = 19] = "FaceButtonLeft", 
n[n.SpecialLeft = 20] = "SpecialLeft", n[n.SpecialRight = 21] = "SpecialRight", 
n[n.ShoulderRight = 22] = "ShoulderRight", n[n.ShoulderLeft = 23] = "ShoulderLeft", 
n[n.TriggerRight = 24] = "TriggerRight", n[n.TriggerLeft = 25] = "TriggerLeft", 
n[n.ButtonYTriangleUp = 15] = "ButtonYTriangleUp", n[n.ButtonBCircleRight = 16] = "ButtonBCircleRight", 
n[n.ButtonACrossDown = 18] = "ButtonACrossDown", n[n.ButtonXSquareLeft = 19] = "ButtonXSquareLeft", 
n[n.MiddleOption = 20] = "MiddleOption", n[n.MiddleMenu = 21] = "MiddleMenu", n[n.BumperRight = 22] = "BumperRight", 
n[n.BumperLeft = 23] = "BumperLeft", (i = r = e.ButtonState || (e.ButtonState = {}))[i.Down = 1] = "Down", 
i[i.Up = 2] = "Up", (a = o = e.DeviceType || (e.DeviceType = {}))[a.NotSet = 0] = "NotSet", 
a[a.MouseAndKeyboard = 1] = "MouseAndKeyboard", a[a.Xbox = 2] = "Xbox", a[a.Playstation = 3] = "Playstation", 
a[a.Stadia = 4] = "Stadia", a[a.Switch = 5] = "Switch", a[a.Touch = 6] = "Touch", 
(l = s = e.KeyboardCharType || (e.KeyboardCharType = {}))[l.LocaleDefault = 1] = "LocaleDefault", 
l[l.LatinFull = 2] = "LatinFull", l[l.Numeric = 4] = "Numeric", l[l.Alphabet = 8] = "Alphabet", 
l[l.Email = 16] = "Email", l[l.Password = 32] = "Password", l[l.AlphabetSpace = 64] = "AlphabetSpace", 
(d = c = e.MouseEventType || (e.MouseEventType = {}))[d.Unknown = 0] = "Unknown", 
d[d.Up = 1] = "Up", d[d.Down = 2] = "Down", d[d.Click = 3] = "Click", d[d.DoubleClick = 4] = "DoubleClick", 
d[d.Scroll = 5] = "Scroll", d[d.Enter = 6] = "Enter", d[d.Leave = 7] = "Leave", 
(p = u = e.MouseButton || (e.MouseButton = {}))[p.None = 0] = "None", p[p.Left = 1] = "Left", 
p[p.Right = 2] = "Right", p[p.Middle = 3] = "Middle", p[p.Button3 = 4] = "Button3", 
p[p.Button4 = 5] = "Button4";
})(o = e.Input || (e.Input = {})), (e => {
let t;
var n;
(n = t = e.LayoutMode || (e.LayoutMode = {}))[n.Yoga = 2] = "Yoga";
})(a = e.Layout || (e.Layout = {})), (e => {
let t;
var n;
(n = t = e.PixelFormat || (e.PixelFormat = {}))[n.RGBA = 1] = "RGBA", n[n.BC1 = 2] = "BC1", 
n[n.BC2 = 3] = "BC2", n[n.BC3 = 4] = "BC3", n[n.BC4 = 5] = "BC4", n[n.BC5 = 6] = "BC5", 
n[n.BC7 = 7] = "BC7";
})(s = e.Texture || (e.Texture = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.Easing || (e.Easing = {}))[n.Linear = 1] = "Linear", n[n.QuadraticIn = 2] = "QuadraticIn", 
n[n.QuadraticOut = 3] = "QuadraticOut", n[n.QuadraticInOut = 4] = "QuadraticInOut", 
n[n.CubicIn = 5] = "CubicIn", n[n.CubicOut = 6] = "CubicOut", n[n.CubicInOut = 7] = "CubicInOut", 
n[n.SineIn = 8] = "SineIn", n[n.SineOut = 9] = "SineOut", n[n.SineInOut = 10] = "SineInOut", 
n[n.Bezier = 11] = "Bezier", n[n.CubicOutBack = 12] = "CubicOutBack", (i = r = e.TweenStatus || (e.TweenStatus = {}))[i.Finished = 0] = "Finished";
})(l = e.Tween || (e.Tween = {})), (e => {
let t;
var n;
(n = t = e.LogLevel || (e.LogLevel = {}))[n.Trace = 1] = "Trace", n[n.Debug = 2] = "Debug", 
n[n.Log = 3] = "Log", n[n.Info = 4] = "Info", n[n.Warning = 5] = "Warning", n[n.Error = 6] = "Error";
})(c = e.Utilities || (e.Utilities = {}));
})(fs || (fs = {}));
var hs = 0, ms = 0, gs = [];
if (is.TwinkleNative && !is.console) {
const e = function(...e) {
var t, n;
t = "TwinkleJsBindings.Utilities.log", n = {
level: fs.Utilities.LogLevel.Info,
filename: "Javascript",
lineno: 0,
message: e.join("\t")
}, is.TwinkleNative.bindingCall("TwinkleJsBindings", t, n, void 0);
};
is.console = {
log: e,
warn: e,
error: e,
exception: e,
info: e,
debug: e
};
}
is.requestAnimationFrame = function(e) {
if (0 === gs.length) {
const e = performance.now(), t = Math.max(0, 16.666666666666668 - (e - hs));
hs = t + e, setTimeout((() => {
const e = gs.slice(0);
gs.length = 0;
for (let t = 0; t < e.length; t++) if (!e[t].cancelled) try {
e[t].callback(hs);
} catch (e) {
setTimeout((() => {
throw e;
}), 0);
}
}), Math.round(t));
}
return gs.push({
handle: ++ms,
callback: e,
cancelled: !1
}), ms;
}, is.cancelAnimationFrame = function(e) {
for (let t = 0; t < gs.length; t++) gs[t].handle === e && (gs[t].cancelled = !0);
};
function ys(e, t) {
throw new Error(e);
}
function Is(e) {
const t = H.createContext(void 0);
return t.displayName = e, [ t, function() {
const n = H.useContext(t);
if (void 0 === n) throw new Error(`Missing '${e}' in context`);
return n;
} ];
}
var _s = e => e, bs = class extends zr {
constructor(e, t) {
super(e, _s, t);
}
get(e) {
return this.has_(e) || this.has(e) ? this.dehanceValue_(this.data_.get(e).get()) : this.dehanceValue_(void 0);
}
};
function Ss(e, t) {
return e.key + "[" + t + "]";
}
function vs(e) {
return "function" == typeof e;
}
var Ts = qt, Es = class {
constructor() {
this.state = new bs([]), this.computed = {}, this.singletons = {}, this.pendingReset = {}, 
this.computedPropsUntracked = {
get: e => this.getUntracked(e),
getItem: (e, t) => this.getItemUntracked(e, t)
}, this.computedProps = {
get: e => this.get(e),
getItem: (e, t) => this.getItem(e, t)
}, this.set = (e, t) => {
const n = vs(t) ? t(this.getUntracked(e)) : t;
(e.equals || we.structural)(n, e.defaultValue()) ? this.reset(e) : this.state.set(e.key, n);
}, this.setItem = (e, t, n) => {
const r = vs(n) ? n(this.getItemUntracked(e, t)) : n;
(e.equals || we.structural)(r, e.defaultValue(t)) ? this.resetItem(e, t) : this.state.set(Ss(e, t), r);
}, this.reset = e => {
this.state.delete(e.key);
}, this.resetItem = (e, t) => {
this.state.delete(Ss(e, t));
}, this.getUntracked = e => Ts((() => this.get(e))), this.getItemUntracked = (e, t) => Ts((() => this.getItem(e, t))), 
this.get = e => {
switch (e.type) {
case "mobyState":
return this.state.has(e.key) ? this.state.get(e.key) : e.defaultValue();

case "mobyComputed":
{
let t = this.computed[e.key];
if (!t) {
if (!Jt()) return e.get(this.computedPropsUntracked);
const n = {
equals: e.equals || we.structural
};
t = bt((() => e.get(this.computedProps)), n), this.computed[e.key] = t, Un(t, (() => {
delete this.computed[e.key];
}));
}
return t.get();
}

case "mobySingleton":
{
let t = this.singletons[e.key];
if (!t) {
if (e.key in this.singletons) throw console.error("Circular creation of singleton " + e.key), 
new Error("Circular creation of singleton " + e.key);
this.singletons[e.key] = !1;
try {
t = e.create(this), this.singletons[e.key] = t;
} catch (t) {
throw delete this.singletons[e.key], t;
}
}
return t;
}

default:
ys("Unknown state: " + e);
}
}, this.getItem = (e, t) => {
const n = Ss(e, t);
switch (e.type) {
case "mobyStateMap":
return this.state.has(n) ? this.state.get(n) : e.defaultValue(t);

case "mobyComputedMap":
{
let r = this.computed[n];
if (!r) {
if (!Jt()) return e.get(t, this.computedPropsUntracked);
const i = {
equals: e.equals || we.structural
};
r = bt((() => e.get(t, this.computedProps)), i), this.computed[n] = r, Un(r, (() => {
delete this.computed[n];
}));
}
return r.get();
}

default:
ys("Unknown state: " + e);
}
}, this.dispose = () => {
Object.values(this.singletons).forEach((e => {
"function" == typeof e.dispose && e.dispose();
}));
};
}
subscribeToUpdates(e, t, n) {
return Fn((() => this.get(e)), t, {
equals: e.equals || we.structural,
fireImmediately: n
});
}
subscribeToItemUpdates(e, t, n, r) {
return Fn((() => this.getItem(e, t)), n, {
equals: e.equals || we.structural,
fireImmediately: r
});
}
subscribeToUpdatesWithCleanup(e, t, n) {
let r;
const i = Fn((() => this.get(e)), ((e, n) => {
r?.(), r = t(e, n);
}), {
equals: e.equals || we.structural,
fireImmediately: n
});
return () => {
r?.(), i();
};
}
subscribeToItemUpdatesWithCleanup(e, t, n, r) {
let i;
const o = Fn((() => this.getItem(e, t)), ((e, t) => {
i?.(), i = n(e, t);
}), {
equals: e.equals || we.structural,
fireImmediately: r
});
return () => {
i?.(), o();
};
}
keepAlive(e) {
const t = xn((() => {
this.get(e);
}), void 0);
return () => {
t(), this.cleanUpOnUnobserved(e);
};
}
cleanUpOnUnobserved(e) {
const t = this.state.has(e.key) && ii(this.state, e.key);
if (t) {
if (!t.isBeingObserved_) return void this.reset(e);
if (!this.pendingReset[e.key]) {
let n;
this.pendingReset[e.key] = !0;
const r = Un(t, (() => {
n = setTimeout((() => {
delete this.pendingReset[e.key], r(), this.cleanUpOnUnobserved(e);
}), e.ttl);
const i = Mn(t, (() => {
i(), clearTimeout(n);
}));
}));
}
}
}
addExternalSingletonState(e, t) {
if (e.key in this.singletons && this.singletons[e.key] !== t) throw new Error(`Tried to add external singleton state to an already initiated singleton '${e.key}'`);
this.singletons[e.key] = t;
}
}, [Ps, Os] = Is("MobyRoot"), Cs = e => {
const [t] = H.useState((() => e.moby || new Es));
return H.useEffect((() => () => t.dispose()), [ t ]), H.createElement(Ps.Provider, {
value: t
}, e.children);
};
function Ns(e, t, n, r = !1) {
const i = Os();
H.useEffect((() => i.subscribeToUpdates(n, e, r)), [ ...t, i, n, r ]);
}
function As(e, t, n, r = !1) {
const i = Os();
H.useEffect((() => i.subscribeToUpdatesWithCleanup(n, e, r)), [ ...t, i, n, r ]);
}
function Ls(e, t, n, r, i = !1) {
const o = Os();
H.useEffect((() => o.subscribeToItemUpdatesWithCleanup(n, r, e, i)), [ ...t, o, n, r, i ]);
}
function ws(e) {
return Os().get(e);
}
function ks(e, t) {
return Os().getItem(e, t);
}
function Rs(e) {
const t = Os();
return H.useCallback((n => {
t.set(e, n);
}), [ e, t ]);
}
function xs(e) {
const t = Os();
return H.useEffect((() => t.keepAlive(e)), [ e, t ]), H.useCallback((n => {
t.set(e, n);
}), [ e, t ]);
}
function Bs(e, t) {
const n = Os();
return H.useCallback((r => {
n.setItem(e, t, r);
}), [ e, t, n ]);
}
function Ds(e) {
return [ ws(e), Rs(e) ];
}
function Fs(e) {
const t = Os();
return H.useCallback((() => {
t.reset(e);
}), [ t, e ]);
}
function Ms(e, t) {
const n = Os();
return H.useCallback((() => {
n.resetItem(e, t);
}), [ n, e, t ]);
}
function Us(e, t, n) {
const r = Os();
H.useEffect((() => xn((() => {
e(r.computedProps);
}), n)), [ ...t, r ]);
}
function Hs(e, t) {
const n = Os();
return H.useCallback(((...t) => hr((() => e(n.computedPropsUntracked)(...t)))), [ ...t, n ]);
}
var Vs = 0;
function Js(e) {
const t = "" + Vs++;
return {
get: e.get,
key: t,
type: "mobyComputed",
equals: e.equals
};
}
function Gs(e) {
return {
type: "mobyComputedMap",
key: "" + Vs++,
get: e.get,
equals: e.equals
};
}
var zs = 0;
function js(e) {
const t = {
create: e.create,
key: "" + zs++,
type: "mobySingleton"
};
return [ t, () => Os().get(t) ];
}
function qs(e) {
const t = js({
...e,
create: () => {
throw new Error("External singleton '" + t[0].key + "' needs to be added to moby before use");
}
});
return t;
}
var Ys = 0;
function Ks(e) {
return {
defaultValue: () => e.default,
key: "" + Ys++,
type: "mobyState",
equals: e.equals
};
}
function Ws(e) {
return {
...Ks(e),
ttl: e.ttl ?? 1e3,
equals: e.equals
};
}
function Xs(e) {
return {
type: "mobyStateMap",
key: "" + Ys++,
defaultValue: e.default,
equals: e.equals
};
}
var [Qs, $s] = Is("FocusContext"), [Zs, el] = Is("FocusBoundaryContext"), tl = new os("onClick"), nl = Xs({
debugName: "boundsForFocusIdState",
default: () => {}
}), rl = Ks({
debugName: "focusedIdWithSourceState",
default: void 0
}), il = Js({
debugName: "focusedId",
get: function({get: e}) {
return e(rl)?.focusId;
}
}), ol = Ks({
debugName: "pressedId",
default: void 0
}), al = Gs({
debugName: "isFocusIdFocusedState",
get: function(e, {get: t}) {
return e === t(il);
}
}), sl = Gs({
debugName: "isFocusIdPressedState",
get: function(e, {get: t}) {
return e === t(ol);
}
}), ll = Ks({
debugName: "mouseModeState",
default: !1
}), cl = (Ks({
debugName: "inputModeState",
default: "unhandled"
}), Xs({
debugName: "childBoundaryIdsForBoundaryIdState",
default: () => []
})), dl = Xs({
debugName: "childFocusIdsForBoundaryIdState",
default: () => []
}), ul = Xs({
debugName: "parentBoundaryIdForBoundaryIdState",
default: () => {}
}), pl = Xs({
debugName: "parentBoundaryIdForFocusIdState",
default: () => {}
}), fl = Xs({
debugName: "disabledStateForMouseModeForBoundaryIdState",
default: () => !1
}), hl = Xs({
debugName: "disabledStateForControllerModeForBoundaryIdState",
default: () => !1
}), ml = Gs({
debugName: "disabledStateForBoundaryIdState",
get: function(e, {get: t, getItem: n}) {
return t(ll) ? n(fl, e) : n(hl, e);
}
}), gl = Gs({
debugName: "focusIdBoundsForChildrenOfBoundaryIdState",
get: function(e, {getItem: t}) {
const n = t(dl, e), r = {};
return n.forEach((e => {
r[e] = t(nl, e);
})), r;
}
}), yl = Gs({
debugName: "validFocusIdsDescendantsOfBoundaryIdState",
get: function(e, {getItem: t}) {
if (t(ml, e)) return [];
const n = t(dl, e), r = t(cl, e), i = [ ...n ];
for (const e of r) i.push(...t(yl, e));
return i;
}
}), Il = Gs({
debugName: "boundaryIdAncestorsForBoundaryIdState",
get: function(e, {getItem: t}) {
const n = [];
let r = t(ul, e);
for (;r; ) n.push(r), r = t(ul, r);
return n;
}
}), _l = (e, t) => {
const n = Gs({
debugName: e,
get: function(e, {getItem: r}) {
if (!e) return !1;
if (r(t, e)) return !0;
const i = r(ul, e);
return !!i && r(n, i);
}
});
return n;
}, bl = _l("disabledStateForBoundaryOrParentBoundaryIdState", ml), Sl = _l("disabledStateForControllerModeForBoundaryOrParentBoundaryIdState", hl), vl = _l("disabledStateForMouseModeForBoundaryOrParentBoundaryIdState", fl), Tl = (e, t) => Gs({
debugName: e,
get: function(e, {getItem: n}) {
if (!e) return !1;
const r = n(pl, e);
return !!r && n(t, r);
}
}), El = Tl("disabledStateForControllerModeForFocusIdState", Sl), Pl = Tl("disabledStateForMouseModeForFocusIdState", vl), Ol = Gs({
debugName: "disabledStateForFocusIdState",
get: function(e, {get: t, getItem: n}) {
return !!e && (t(ll) ? n(Pl, e) : n(El, e));
}
}), Cl = Ks({
debugName: "isolatedBoundaryIdListState",
default: []
}), Nl = Js({
debugName: "currentIsolatedBoundaryIdState",
get: function({get: e}) {
const t = e(Cl);
return t[t.length - 1];
}
}), Al = Gs({
debugName: "isBoundaryIdActiveState",
get: function(e, {get: t, getItem: n}) {
if (n(bl, e)) return !1;
const r = t(Nl);
if (!r || !e || e === r) return !0;
return n(Il, e).includes(r);
}
}), Ll = Gs({
debugName: "focusedIdDescendantOfBoundaryIdState",
get: function(e, {get: t, getItem: n}) {
const r = t(il);
if (!r) return;
return n(yl, e).includes(r) ? r : void 0;
}
}), wl = Gs({
debugName: "focusedIdDescendantOfBoundaryIdState",
get: function(e, {getItem: t}) {
return !!t(Ll, e);
}
}), kl = () => ({
isPressed: !1,
isHovered: !1
});
function Rl(e) {
return e.isPressed || e.isHovered ? {
isPressed: !1,
isHovered: !1
} : e;
}
function xl({onClick: e, disabled: t, ignoreBoundaryIsolation: n}) {
const r = Os(), i = el(), [o, a] = H.useState(kl);
H.useEffect((() => {
if (t) return void a(Rl);
if (n) return;
return xn((() => {
r.getItem(Al, i) || a(Rl);
}));
}), [ r, i, t, n ]);
const s = H.useMemo((() => {
const o = (o, s) => {
if (!t && (n || r.getItemUntracked(Al, i))) switch (o.event) {
case fs.Input.MouseEventType.Click:
o.button === fs.Input.MouseButton.Left && (o.stopPropagation(), e(o, s));
break;

case fs.Input.MouseEventType.Enter:
a((e => ({
...e,
isHovered: !0
})));
break;

case fs.Input.MouseEventType.Leave:
a({
isPressed: !1,
isHovered: !1
});
break;

case fs.Input.MouseEventType.Down:
a((e => ({
...e,
isPressed: !0
})));
break;

case fs.Input.MouseEventType.Up:
a((e => ({
...e,
isPressed: !1
})));
}
};
return {
onClick: o,
onMouseEnter: o,
onMouseLeave: o,
onMouseDown: o,
onMouseUp: o
};
}), [ r, i, t, n, e ]);
return {
isPressed: o.isPressed,
isHovered: o.isHovered,
hooks: s
};
}
var Bl = fs.Input.GamePadInput, Dl = fs.Input.DeviceType, Fl = 9, Ml = 13, Ul = 27, Hl = 38, Vl = 39, Jl = 40, Gl = 65, zl = 68, jl = 69, ql = 70, Yl = 81, Kl = 83, Wl = 87, Xl = 112, Ql = 113, $l = 114, Zl = 115, ec = 116, tc = {
left: {
keyboardKeycode: 37,
gamePadInput: Bl.DPadLeft
},
up: {
keyboardKeycode: Hl,
gamePadInput: Bl.DPadUp
},
right: {
keyboardKeycode: Vl,
gamePadInput: Bl.DPadRight
},
down: {
keyboardKeycode: Jl,
gamePadInput: Bl.DPadDown
},
leftAlt: {
keyboardKeycode: Gl,
gamePadInput: Bl.LeftJoystickLeft
},
upAlt: {
keyboardKeycode: Wl,
gamePadInput: Bl.LeftJoystickUp
},
rightAlt: {
keyboardKeycode: zl,
gamePadInput: Bl.LeftJoystickRight
},
downAlt: {
keyboardKeycode: Kl,
gamePadInput: Bl.LeftJoystickDown
},
middleMenu: {
keyboardKeyLabel: "F3",
keyboardKeycode: $l,
gamePadInput: Bl.SpecialRight
},
buttonACrossDown: {
keyboardKeycode: Ml,
keyboardKeyLabel: "Enter",
gamePadInput: Bl.FaceButtonBottom
},
buttonBCircleRight: {
keyboardKeycode: Ul,
keyboardKeyLabel: "Esc",
gamePadInput: Bl.FaceButtonRight
},
buttonYTriangleUp: {
keyboardKeyLabel: "F2",
keyboardKeycode: Ql,
gamePadInput: Bl.FaceButtonTop
},
buttonXSquareLeft: {
keyboardKeyLabel: "F1",
keyboardKeycode: Xl,
gamePadInput: Bl.FaceButtonLeft
},
bumperLeft: {
keyboardKeycode: Yl,
keyboardKeyLabel: "Q",
gamePadInput: Bl.ShoulderLeft
},
bumperRight: {
keyboardKeycode: jl,
keyboardKeyLabel: "E",
gamePadInput: Bl.ShoulderRight
},
triggerRight: {
keyboardKeyLabel: "F4",
keyboardKeycode: Zl,
gamePadInput: Bl.TriggerRight
},
middleOption: {
keyboardKeyLabel: "Tab",
keyboardKeycode: Fl,
gamePadInput: Bl.SpecialLeft
},
leftJoystickPress: {
keyboardKeyLabel: "F",
keyboardKeycode: ql,
gamePadInput: Bl.LeftJoystickPress
},
rightJoystickPress: {
keyboardKeyLabel: "F5",
keyboardKeycode: ec,
gamePadInput: Bl.RightJoystickPress
}
};
function nc(e, t) {
return e === Dl.MouseAndKeyboard ? {
device: e,
keyboardKeyLabel: tc[t].keyboardKeyLabel,
keyboardKeycode: tc[t].keyboardKeycode
} : {
device: e,
gamePadInput: tc[t].gamePadInput
};
}
function rc(e, t, n = []) {
return {
primaryButton: nc(e, t),
secondaryButtons: n.map((t => nc(e, t)))
};
}
var ic = fs.Input.GamePadInput, oc = fs.Input.DeviceType, ac = {
[oc.Playstation]: {
[ic.FaceButtonBottom]: "Cross",
[ic.FaceButtonRight]: "Circle",
[ic.FaceButtonLeft]: "Square",
[ic.FaceButtonTop]: "Triangle",
[ic.TriggerLeft]: "L2",
[ic.TriggerRight]: "R2",
[ic.ShoulderLeft]: "L1",
[ic.ShoulderRight]: "R1",
[ic.SpecialLeft]: "Touchpad",
[ic.SpecialRight]: "Option",
[ic.LeftJoystickPress]: "L3_Ps",
[ic.RightJoystickPress]: "R3_Ps"
},
[oc.Xbox]: {
[ic.FaceButtonBottom]: "A",
[ic.FaceButtonRight]: "B",
[ic.FaceButtonLeft]: "X",
[ic.FaceButtonTop]: "Y",
[ic.TriggerLeft]: "LT",
[ic.TriggerRight]: "RT",
[ic.ShoulderLeft]: "LB",
[ic.ShoulderRight]: "RB",
[ic.SpecialLeft]: "View",
[ic.SpecialRight]: "Menu",
[ic.LeftJoystickPress]: "L3_Xbox",
[ic.RightJoystickPress]: "R3_Xbox"
},
[oc.Switch]: {
[ic.FaceButtonBottom]: "B_Nx",
[ic.FaceButtonRight]: "A_Nx",
[ic.FaceButtonLeft]: "Y_Nx",
[ic.FaceButtonTop]: "X_Nx",
[ic.TriggerLeft]: "ZL_Nx",
[ic.TriggerRight]: "ZR_Nx",
[ic.ShoulderLeft]: "L_Nx",
[ic.ShoulderRight]: "R_Nx",
[ic.SpecialLeft]: "MapMenu_Nx",
[ic.SpecialRight]: "Pause_Nx",
[ic.LeftJoystickPress]: "L3_Nx",
[ic.RightJoystickPress]: "R3_Nx"
},
[oc.MouseAndKeyboard]: {
[Ml]: "ENTER"
}
}, sc = e => !e.gamePadInput || e.device !== oc.Xbox && e.device !== oc.Playstation && e.device !== oc.Switch ? e.keyboardKeycode ? ac[oc.MouseAndKeyboard][e.keyboardKeycode] : void console.warn("Could not find ButtonType for", e) : ac[e.device][e.gamePadInput], lc = (e => (e.XboxOne = "XBOXONE", 
e.Xbsx = "XBSX", e.Ps4 = "PS4", e.Ps5 = "PS5", e.Nx = "NX", e.Ios = "IOS", e.Android = "ANDROID", 
e.Web = "WEB", e.Pc = "PC", e.Unknown = "UNKNOWN", e))(lc || {}), cc = new Set(Object.values(lc)), dc = e => {
const t = "object" == typeof e ? e.id : e;
return "string" == typeof (n = t) && cc.has(n) ? t : "UNKNOWN";
var n;
}, uc = {
hasTextDirectionFix: !1,
hasSpriteFrameProperty: !1,
hasMouseEnabledTransparentSurfacesFix: !1,
hasBigIntSupport: !1,
yogaVersion: 0,
hasMethodOrEventAvailable: !1,
hasOnUnhandledPromiseRejection: !1,
hasHttpTimeoutSupport: !1,
closeStreamOnError: !1,
hasAllHttpMethod: !1,
hasTweenStartEndValueRounding: !1,
hasRtlEllipsizeTextLayoutingFix: !1,
hasRichTextSupport: !1
};
var pc = function(e) {
const t = e?.locale?.toLowerCase() ?? "en-us", n = e?.isRightToLeftLanguage ?? !1, r = {
...uc,
...e?.featureFlags
};
let i = e?.devicePlatformId ? dc(e.devicePlatformId) : "PC";
return {
locale: t,
isRTL: n,
devicePlatformId: i,
isPC: "PC" === i,
bundleUrlUnsafe: e?.bundleUrl_UNSAFE || "",
featureFlags: r,
gitSha: e?.gitSha?.slice(0, 8) || "0"
};
}(is.TwinkleConstants), fc = "PS4" === pc.devicePlatformId || "XBOXONE" === pc.devicePlatformId || "NX" === pc.devicePlatformId ? 1 : 2;
function hc(e) {
return "number" == typeof e ? e * fc : e.map((e => e * fc));
}
var mc = e => e * fc * .75, gc = e => e[fc], yc = e => {
const t = {};
return Object.keys(e).forEach((n => {
t[n] = gc(e[n]);
})), t;
}, Ic = {}, _c = {}, bc = [], Sc = 1;
function vc() {
let e = bc.pop();
return e || (e = Sc++), e;
}
function Tc(e, t) {
Ic[e] = {
style: t,
synced: !1
};
}
function Ec(e) {
const t = vc();
return Tc(t, e), t;
}
function Pc(e) {
delete Ic[e], bc.push(e);
}
function Oc(e, t, n) {
for (const r of t) {
const t = Ic[r];
t && (t.synced || (n ? e.createStyleSync({
id: r,
style: t.style
}) : e.createStyle({
id: r,
style: t.style
}), t.synced = !0));
}
}
function Cc() {
for (const e of Object.values(Ic)) e.synced = !1;
}
function Nc(e, t) {
const n = t ? Ec(t) : void 0, r = {};
return function(t) {
const i = typeof t + ":" + t;
if (r[i]) return r[i];
const o = e(t), a = [];
for (const e in o) a.push(Lc(e, o[e]));
return n && a.push(n), r[i] = a, a;
};
}
var Ac = Ec({});
function Lc(e, t) {
let n = _c[e];
if (!n) {
const t = {};
n = function(n) {
if (void 0 === n) return Ac;
const r = typeof n + ":" + n;
let i = t[r];
return i || (i = Ec({
[e]: n
}), t[r] = i), i;
}, _c[e] = n;
}
return n(t);
}
function wc(e, t) {
const {id: n, styleCallback: r} = H.useMemo((() => {
const t = vc();
let n = !1;
return {
id: t,
styleCallback: () => {
if (!n) {
n = !0;
const r = e();
Tc(t, r);
}
return t;
}
};
}), t);
return H.useEffect((() => () => {
Pc(n);
}), [ n ]), r;
}
var kc = "https://artifactory.ea.com/artifactory/eax-generic-local/photon", Rc = [ "https://assets.layer.ea.com", "https://assets.layer2.ea.com", "https://assets-dev.layer.ea.com", "https://assets-dev.layer2.ea.com", kc ];
function xc(e) {
for (const t of Rc) if (e.startsWith(t)) return t;
}
var Bc = (xc(pc.bundleUrlUnsafe) || kc) + "/assets";
function Dc(e) {
return Bc + e;
}
var Fc = yc({
A: {
1: Dc("/photon/quantum/icons/buttons/console/A-8dd77a8f.png"),
2: Dc("/photon/quantum/icons/buttons/console/A@2x-daf48afe.png")
},
B: {
1: Dc("/photon/quantum/icons/buttons/console/B-6324d7ef.png"),
2: Dc("/photon/quantum/icons/buttons/console/B@2x-7d9bfd26.png")
},
LB: {
1: Dc("/photon/quantum/icons/buttons/xbox/LB-86220347.png"),
2: Dc("/photon/quantum/icons/buttons/xbox/LB@2x-45bf4ede.png")
},
LT: {
1: Dc("/photon/quantum/icons/buttons/xbox/LT-5d83d406.png"),
2: Dc("/photon/quantum/icons/buttons/xbox/LT@2x-e48e251a.png")
},
Menu: {
1: Dc("/photon/quantum/icons/buttons/xbox/Menu-80a9c3ed.png"),
2: Dc("/photon/quantum/icons/buttons/xbox/Menu@2x-58b3c04b.png")
},
View: {
1: Dc("/photon/quantum/icons/buttons/xbox/Change_View-0b9d4821.png"),
2: Dc("/photon/quantum/icons/buttons/xbox/Change_View@2x-313379db.png")
},
RB: {
1: Dc("/photon/quantum/icons/buttons/xbox/RB-741a5b67.png"),
2: Dc("/photon/quantum/icons/buttons/xbox/RB@2x-e50d4979.png")
},
RT: {
1: Dc("/photon/quantum/icons/buttons/xbox/RT-d5de4bf8.png"),
2: Dc("/photon/quantum/icons/buttons/xbox/RT@2x-37833b92.png")
},
X: {
1: Dc("/photon/quantum/icons/buttons/console/X-0eec8545.png"),
2: Dc("/photon/quantum/icons/buttons/console/X@2x-5d97d8d4.png")
},
Y: {
1: Dc("/photon/quantum/icons/buttons/console/Y-5fc29454.png"),
2: Dc("/photon/quantum/icons/buttons/console/Y@2x-858f6ff0.png")
},
L3_Xbox: {
1: Dc("/photon/quantum/icons/buttons/console/LeftStickPress-0af47dba.png"),
2: Dc("/photon/quantum/icons/buttons/console/LeftStickPress@2x-30193db7.png")
},
R3_Xbox: {
1: Dc("/photon/quantum/icons/buttons/console/RightStickPress-27afe739.png"),
2: Dc("/photon/quantum/icons/buttons/console/RightStickPress@2x-bf927d14.png")
}
}), Mc = {
A: hc([ 32, 32 ]),
B: hc([ 32, 32 ]),
LB: hc([ 60, 36 ]),
LT: hc([ 32, 32 ]),
Menu: hc([ 32, 32 ]),
View: hc([ 32, 32 ]),
RB: hc([ 60, 36 ]),
RT: hc([ 32, 32 ]),
X: hc([ 32, 32 ]),
Y: hc([ 32, 32 ]),
L3_Xbox: hc([ 35, 32 ]),
R3_Xbox: hc([ 35, 32 ])
}, Uc = yc({
A_Nx: {
1: Dc("/photon/quantum/icons/buttons/console/A-8dd77a8f.png"),
2: Dc("/photon/quantum/icons/buttons/console/A@2x-daf48afe.png")
},
B_Nx: {
1: Dc("/photon/quantum/icons/buttons/console/B-6324d7ef.png"),
2: Dc("/photon/quantum/icons/buttons/console/B@2x-7d9bfd26.png")
},
X_Nx: {
1: Dc("/photon/quantum/icons/buttons/console/X-0eec8545.png"),
2: Dc("/photon/quantum/icons/buttons/console/X@2x-5d97d8d4.png")
},
Y_Nx: {
1: Dc("/photon/quantum/icons/buttons/console/Y-5fc29454.png"),
2: Dc("/photon/quantum/icons/buttons/console/Y@2x-858f6ff0.png")
},
MapMenu_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/minus-86aa7f38.png"),
2: Dc("/photon/quantum/icons/buttons/switch/minus@2x-8a519fd9.png")
},
Pause_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/plus-8c860b8e.png"),
2: Dc("/photon/quantum/icons/buttons/switch/plus@2x-f4b87fa6.png")
},
Left_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/Left-0c262fa0.png"),
2: Dc("/photon/quantum/icons/buttons/switch/Left@2x-7d8ee9ab.png")
},
Up_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/Up-f279a076.png"),
2: Dc("/photon/quantum/icons/buttons/switch/Up@2x-ff24bfe3.png")
},
Right_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/Right-ef22a6bd.png"),
2: Dc("/photon/quantum/icons/buttons/switch/Right@2x-419f7983.png")
},
Down_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/Down-7ac09c29.png"),
2: Dc("/photon/quantum/icons/buttons/switch/Down@2x-ac7800d7.png")
},
L3_Nx: {
1: Dc("/photon/quantum/icons/buttons/console/LeftStickPress-0af47dba.png"),
2: Dc("/photon/quantum/icons/buttons/console/LeftStickPress@2x-30193db7.png")
},
R3_Nx: {
1: Dc("/photon/quantum/icons/buttons/console/RightStickPress-27afe739.png"),
2: Dc("/photon/quantum/icons/buttons/console/RightStickPress@2x-bf927d14.png")
},
L_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/L-38b7944b.png"),
2: Dc("/photon/quantum/icons/buttons/switch/L@2x-b0699c7c.png")
},
R_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/R-bc0f10f2.png"),
2: Dc("/photon/quantum/icons/buttons/switch/R@2x-c8c44d04.png")
},
ZL_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/ZL-f254f9d2.png"),
2: Dc("/photon/quantum/icons/buttons/switch/ZL@2x-7e32123a.png")
},
ZR_Nx: {
1: Dc("/photon/quantum/icons/buttons/switch/ZR-55b5dee4.png"),
2: Dc("/photon/quantum/icons/buttons/switch/ZR@2x-996fa537.png")
}
}), Hc = {
A_Nx: hc([ 32, 32 ]),
B_Nx: hc([ 32, 32 ]),
X_Nx: hc([ 32, 32 ]),
Y_Nx: hc([ 32, 32 ]),
MapMenu_Nx: hc([ 32, 32 ]),
Pause_Nx: hc([ 32, 32 ]),
Left_Nx: hc([ 32, 32 ]),
Up_Nx: hc([ 32, 32 ]),
Right_Nx: hc([ 32, 32 ]),
Down_Nx: hc([ 32, 32 ]),
L3_Nx: hc([ 35, 32 ]),
R3_Nx: hc([ 35, 32 ]),
L_Nx: hc([ 32, 32 ]),
R_Nx: hc([ 32, 32 ]),
ZL_Nx: hc([ 32, 32 ]),
ZR_Nx: hc([ 32, 32 ])
}, Vc = "PS5" === pc.devicePlatformId ? {
1: Dc("/photon/quantum/icons/buttons/playstation/Options-ps5-7a52c78a.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/Options-ps5@2x-cbb1c76b.png"),
size: hc([ 32, 32 ])
} : {
1: Dc("/photon/quantum/icons/buttons/playstation/Options-99cbd400.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/Options@2x-1208264e.png"),
size: hc([ 82, 32 ])
}, Jc = "PS5" === pc.devicePlatformId ? {
1: Dc("/photon/quantum/icons/buttons/playstation/Touchpad-ps5-db77da5e.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/Touchpad-ps5@2x-cec6035e.png"),
size: hc([ 54, 32 ])
} : {
1: Dc("/photon/quantum/icons/buttons/playstation/Touchpad-b91080f7.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/Touchpad@2x-9d41ff7c.png"),
size: hc([ 48, 32 ])
}, Gc = yc({
Circle: {
1: Dc("/photon/quantum/icons/buttons/playstation/Circle-5d2ed786.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/Circle@2x-503649cf.png")
},
L1: {
1: Dc("/photon/quantum/icons/buttons/console/L1-827ee30a.png"),
2: Dc("/photon/quantum/icons/buttons/console/L1@2x-76ad6d8f.png")
},
L2: {
1: Dc("/photon/quantum/icons/buttons/console/L2-31f080f4.png"),
2: Dc("/photon/quantum/icons/buttons/console/L2@2x-07f923e5.png")
},
R1: {
1: Dc("/photon/quantum/icons/buttons/console/R1-fd84454a.png"),
2: Dc("/photon/quantum/icons/buttons/console/R1@2x-032edcaf.png")
},
R2: {
1: Dc("/photon/quantum/icons/buttons/console/R2-03aa6f93.png"),
2: Dc("/photon/quantum/icons/buttons/console/R2@2x-1aad2a61.png")
},
Square: {
1: Dc("/photon/quantum/icons/buttons/playstation/Square-ee30a845.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/Square@2x-2e8d61e9.png")
},
Triangle: {
1: Dc("/photon/quantum/icons/buttons/playstation/Triangle-13104262.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/Triangle@2x-63f95e2e.png")
},
Cross: {
1: Dc("/photon/quantum/icons/buttons/playstation/X-7eb1cd88.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/X@2x-4d4d7b3c.png")
},
Option: Vc,
Touchpad: Jc,
L3_Ps: {
1: Dc("/photon/quantum/icons/buttons/playstation/L3-ff96c246.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/L3@2x-89f68e31.png")
},
R3_Ps: {
1: Dc("/photon/quantum/icons/buttons/playstation/R3-9fef3f45.png"),
2: Dc("/photon/quantum/icons/buttons/playstation/R3@2x-b70c97d8.png")
}
}), zc = {
Circle: hc([ 32, 32 ]),
L1: hc([ 48, 32 ]),
L2: hc([ 41, 32 ]),
R1: hc([ 48, 32 ]),
R2: hc([ 41, 32 ]),
Square: hc([ 32, 32 ]),
Triangle: hc([ 32, 32 ]),
Cross: hc([ 32, 32 ]),
Option: Vc.size,
Touchpad: Jc.size,
L3_Ps: hc([ 32, 32 ]),
R3_Ps: hc([ 32, 32 ])
}, jc = yc({
ENTER: {
1: Dc("/photon/quantum/icons/buttons/pc/Enter_Return-7043f781.png"),
2: Dc("/photon/quantum/icons/buttons/pc/Enter_Return@2x-a99324d2.png")
}
}), qc = {
ENTER: hc([ 48, 32 ])
}, Yc = {
...Fc,
...Uc,
...Gc,
...jc
}, Kc = {
...Mc,
...Hc,
...zc,
...qc
}, Wc = Yc, Xc = ((e, t) => {
if (!t) return e;
for (const [n, r] of Object.entries(t.tokens ?? {})) e[n] = {
...e[n],
...r
};
return e;
})({
...{
Breakpoints: {},
AnimationEasing: {
acceleration: [ .755, .05, .855, .06 ],
accelerationBack: [ .6, -.28, .735, .045 ],
deceleration: [ .23, 1, .32, 1 ],
decelerationBack: [ .175, .885, .32, 1.275 ],
linear: [ 0, 0, 1, 1 ],
standard: [ .86, 0, .07, 1 ],
standardBack: [ .68, -.55, .265, 1.55 ]
},
AnimationTime: {
average: 300,
crawl: 625,
extremeCrawl: 2e3,
fast: 250,
faster: 200,
fastest: 125,
rapid: 100,
slow: 375,
slower: 500,
slowest: 575
},
ColorAlternate: {
primary: "#8368fdff",
secondary: "#ff6d4dff",
tertiary: "#70fcffff"
},
ColorAlternatePrimary: {
_0: "#c1b4feff",
_100: "#b5a4feff",
_1000: "#42347fff",
_200: "#a895feff",
_300: "#9c86fdff",
_400: "#8f77fdff",
_500: "#8368fdff",
_600: "#765ee4ff",
_700: "#6953caff",
_800: "#5c49b1ff",
_900: "#4f3e98ff"
},
ColorAlternateSecondary: {
_0: "#ffb6a6ff",
_100: "#ffa794ff",
_1000: "#803727ff",
_200: "#ff9982ff",
_300: "#ff8a71ff",
_400: "#ff7c5fff",
_500: "#ff6d4dff",
_600: "#e66245ff",
_700: "#cc573eff",
_800: "#b34c36ff",
_900: "#99412eff"
},
ColorAlternateTertiary: {
_0: "#b8feffff",
_100: "#a9fdffff",
_1000: "#387e80ff",
_200: "#9bfdffff",
_300: "#8dfdffff",
_400: "#7efcffff",
_500: "#70fcffff",
_600: "#65e3e6ff",
_700: "#5acaccff",
_800: "#4eb0b3ff",
_900: "#439799ff"
},
ColorBrand: {
primary: "#276afcff",
secondary: "#ff4747ff",
tertiary: "#33ff9dff"
},
ColorBrandPrimary: {
_0: "#93b5feff",
_100: "#7da6fdff",
_1000: "#14357eff",
_200: "#6897fdff",
_300: "#5288fdff",
_400: "#3d79fcff",
_500: "#276afcff",
_600: "#235fe3ff",
_700: "#1f55caff",
_800: "#1b4ab0ff",
_900: "#174097ff"
},
ColorBrandSecondary: {
_0: "#ffa3a3ff",
_100: "#ff9191ff",
_1000: "#802424ff",
_200: "#ff7e7eff",
_300: "#ff6c6cff",
_400: "#ff5959ff",
_500: "#ff4747ff",
_600: "#e64040ff",
_700: "#cc3939ff",
_800: "#b33232ff",
_900: "#992b2bff"
},
ColorBrandTertiary: {
_0: "#99ffceff",
_100: "#85ffc4ff",
_1000: "#1a804fff",
_200: "#70ffbaff",
_300: "#5cffb1ff",
_400: "#47ffa7ff",
_500: "#33ff9dff",
_600: "#2ee68dff",
_700: "#29cc7eff",
_800: "#24b36eff",
_900: "#1f995eff"
},
ColorNeutral: {
_0: "#ffffffff",
_100: "#d1d0d5ff",
_1000: "#000000ff",
_200: "#908e97ff",
_300: "#62626fff",
_400: "#343647ff",
_500: "#1d2033ff",
_600: "#1a1d2eff",
_700: "#171a29ff",
_800: "#141724ff",
_900: "#0b0e15ff"
},
ColorSystem: {
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
},
ColorSystemError: {
_0: "#ffa3a3ff",
_100: "#ff9191ff",
_1000: "#802424ff",
_200: "#ff7e7eff",
_300: "#ff6c6cff",
_400: "#ff5959ff",
_500: "#ff4747ff",
_600: "#e64040ff",
_700: "#cc3939ff",
_800: "#b33232ff",
_900: "#992b2bff"
},
ColorSystemSuccess: {
_0: "#80ffc2ff",
_100: "#66ffb5ff",
_1000: "#008042ff",
_200: "#4dffa9ff",
_300: "#33ff9dff",
_400: "#1aff90ff",
_500: "#00ff84ff",
_600: "#00e677ff",
_700: "#00cc6aff",
_800: "#00b35cff",
_900: "#00994fff"
},
ColorSystemWarning: {
_0: "#fff3b5ff",
_100: "#fff0a6ff",
_1000: "#807336ff",
_200: "#ffee97ff",
_300: "#ffeb89ff",
_400: "#ffe97aff",
_500: "#ffe66bff",
_600: "#e6cf60ff",
_700: "#ccb856ff",
_800: "#b3a14bff",
_900: "#998a40ff"
},
BackgroundColor: {
alt1: "#ffffffff",
alt2: "#343647ff",
alt3: "#d1d0d5ff",
base: "#1d2033ff",
body: "#141724ff"
},
IconColorInverted: {
alert: "#ff4747ff",
default: "#141724ff",
emphasized: "#000000ff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
},
IconColorStandard: {
alert: "#ff4747ff",
default: "#908e97ff",
emphasized: "#ffffffff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
},
InteractiveColor: {
disabled: "#62626fff",
focusHover: "#276afcff",
selected: "#1f55caff",
selectedAlt: "#1d2033ff"
},
TextColorInverted: {
alert: "#ff4747ff",
default: "#141724ff",
emphasized: "#000000ff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
},
TextColorStandard: {
alert: "#ff4747ff",
default: "#908e97ff",
emphasized: "#ffffffff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
},
DimensionLayout: {
large: 128,
larger: 160,
largest: 192,
macro: 224,
medium: 96,
micro: 24,
none: 0,
small: 64,
smaller: 48,
smallest: 32
},
EffectsRadiationAlpha: {
large: .2,
medium: .3,
small: .4
},
EffectsRadiationBrandPrimary: {
large: {
x: 0,
y: 0,
blur: 80,
color: "#276afc33"
},
medium: {
x: 0,
y: 0,
blur: 30,
color: "#276afc4d"
},
small: {
x: 0,
y: 0,
blur: 10,
color: "#276afc66"
}
},
EffectsRadiationBrandSecondary: {
large: {
x: 0,
y: 0,
blur: 80,
color: "#ff474733"
},
medium: {
x: 0,
y: 0,
blur: 30,
color: "#ff47474d"
},
small: {
x: 0,
y: 0,
blur: 10,
color: "#ff474766"
}
},
EffectsRadiationBrandTertiary: {
large: {
x: 0,
y: 0,
blur: 80,
color: "#33ff9d33"
},
medium: {
x: 0,
y: 0,
blur: 30,
color: "#33ff9d4d"
},
small: {
x: 0,
y: 0,
blur: 10,
color: "#33ff9d66"
}
},
EffectsRadiationRadius: {
large: 80,
medium: 30,
small: 10
},
EffectsRadiationSystemError: {
large: {
x: 0,
y: 0,
blur: 80,
color: "#ff474733"
},
medium: {
x: 0,
y: 0,
blur: 30,
color: "#ff47474d"
},
small: {
x: 0,
y: 0,
blur: 10,
color: "#ff474766"
}
},
EffectsRadiationSystemSuccess: {
large: {
x: 0,
y: 0,
blur: 80,
color: "#00ff8433"
},
medium: {
x: 0,
y: 0,
blur: 30,
color: "#00ff844d"
},
small: {
x: 0,
y: 0,
blur: 10,
color: "#00ff8466"
}
},
EffectsRadiationSystemWarning: {
large: {
x: 0,
y: 0,
blur: 80,
color: "#ffe66b33"
},
medium: {
x: 0,
y: 0,
blur: 30,
color: "#ffe66b4d"
},
small: {
x: 0,
y: 0,
blur: 10,
color: "#ffe66b66"
}
},
FillAlpha: {
_10: .1,
_20: .2,
_30: .3,
_40: .4,
_50: .5,
_60: .6,
_70: .7,
_80: .8,
_90: .9,
_95: .95
},
BorderRadius: {
large: 24,
larger: 32,
largest: 48,
macro: 64,
medium: 16,
micro: 2,
none: 0,
small: 12,
smaller: 8,
smallest: 4
},
StrokeDash: {
gap: 12,
length: 8
},
StrokeEnd: {
cap: "round"
},
StrokeWidth: {
large: 8,
medium: 4,
small: 2
},
DimensionSpace: {
large: 24,
larger: 32,
largest: 48,
macro: 64,
medium: 16,
micro: 2,
none: 0,
small: 12,
smaller: 8,
smallest: 4
},
TextFamily: {
data: "electronic-arts-mono",
primary: "electronic-arts-display",
secondary: "electronic-arts-text"
},
TextWeight: {
bold: "bold",
light: "normal",
medium: "medium",
regular: "normal"
},
TextSpaceLetterSpacing: {
allCaps: {
type: "relative",
value: .03
},
dataLoose: {
type: "relative",
value: .05
},
dataModerate: {
type: "relative",
value: 0
},
display: {
type: "relative",
value: .07
},
heading: {
type: "relative",
value: .03
},
paragraph: {
type: "relative",
value: .017
},
section: {
type: "relative",
value: .17
}
},
TextSpaceLineHeight: {
moderate: {
type: "relative",
value: 1.5
},
tight: {
type: "relative",
value: 1.265
},
tighter: {
type: "relative",
value: 1.129
}
},
TextSizeOption: {
_100: 20,
_1000: 68,
_1100: 76,
_1200: 84,
_1300: 92,
_1400: 100,
_1500: 108,
_1600: 116,
_1700: 124,
_200: 24,
_300: 28,
_400: 32,
_50: 18,
_500: 36,
_600: 42,
_700: 48,
_800: 54,
_900: 60
},
TextSizeData: {
large: 32,
larger: 36,
medium: 28,
small: 24,
smaller: 20
},
TextSizeDisplay: {
medium: 68,
small: 60
},
TextSizeHeading: {
large: 48,
medium: 42,
small: 36,
smaller: 32
},
TextSizeLabel: {
medium: 28,
small: 24
},
TextSizeParagraph: {
large: 32,
medium: 28,
small: 24,
smaller: 20
}
},
AnimationEasing: {
ease: [ .48, 0, .24, 1 ],
accelerate: [ .24, 1, .32, 1 ]
},
AnimationTime: {
rapid: 100,
fastest: 250,
faster: 300,
fast: 350,
average: 400,
slow: 500,
slower: 700,
slowest: 1e3,
toast_delay: 5e3
},
ScrollFactor: {
fast: 100
},
DangerZone: {
width: 96,
height: 54
},
ButtonScale: {
large: .993,
medium: .98,
small: .96
},
OverlayBackgroundColor: "#04091Aff",
TextSizeDisplay: {
medium: 60
},
TextSizeHeading: {
medium: 40,
small: 36,
smaller: 32
},
TextSizeLabel: {
medium: 26,
small: 24
}
}), Qc = e => Yc[e], $c = e => Kc[e], Zc = yc({
buttonBorder: {
1: Dc("/photon/quantum/borders/w4px_r4px_ffffff-transparent-e688f0af.png"),
2: Dc("/photon/quantum/borders/w4px_r4px_ffffff-transparent-2x-9d845976.png")
}
}), ed = Ec({
height: hc(32),
texture: Zc.buttonBorder,
borderCenter: !0,
textureBorder: hc(4),
justifyContent: "center",
alignItems: "center",
paddingLeft: hc(10),
paddingRight: hc(10)
}), td = Ec({
fontSize: mc(19)
}), nd = ({type: e, buttonLabel: t, color: n = Xc.IconColorStandard.default, style: r, onClick: i, onSurfaceId: o}) => {
if (e) {
const t = Qc(e), [a, s] = $c(e);
return H.createElement("surface", {
style: [ Lc("texture", t), Lc("width", a), Lc("minWidth", a), Lc("height", s), Lc("color", n), r ],
onClick: i,
onSurfaceId: o
});
}
return t ? H.createElement("surface", {
onClick: i,
onSurfaceId: o,
style: [ Lc("zOffset", 1), ed, Lc("color", n), r ]
}, H.createElement("surface", {
style: [ td, Lc("color", n) ],
text: t
})) : null;
}, rd = {
lrm: String.fromCharCode(8206),
nbsp: String.fromCharCode(160),
wordJoiner: String.fromCharCode(8288)
}, id = {
name: "Almarai Regular",
url: Dc("/photon/fonts/Almarai-Regular-7bdf9d83.ttf")
}, od = {
name: "Almarai Bold",
url: Dc("/photon/fonts/Almarai-Bold-b028f5b0.ttf")
}, ad = {
name: "Noto Sans KR Regular",
url: Dc("/photon/fonts/NotoSansKR-Regular-913f146b.otf")
}, sd = {
name: "Noto Sans JP Regular",
url: Dc("/photon/fonts/NotoSansJP-Regular-ecfed48e.otf")
}, ld = {
name: "Noto Sans SC Regular",
url: Dc("/photon/fonts/NotoSansSC-Regular-370c2c5d.otf")
}, cd = {
name: "Noto Sans TC Regular",
url: Dc("/photon/fonts/NotoSansTC-Regular-d6b43f66.otf")
}, dd = {
name: "Electronic Arts Display",
url: Dc("/photon/fonts/electronic-arts-display-regular-a4361191.otf")
}, ud = {
name: "Electronic Arts Display Bold",
url: Dc("/photon/fonts/electronic-arts-display-bold-5d556d29.otf")
}, pd = {
name: "Electronic Arts Text",
url: Dc("/photon/fonts/electronic-arts-text-regular-91c23ee4.otf")
}, fd = {
name: "Electronic Arts Text Bold",
url: Dc("/photon/fonts/electronic-arts-text-bold-97ba7e39.otf")
}, hd = {
eaDisplay: id,
eaDisplayBold: id,
eaText: id,
eaTextBold: od
}, md = {
eaDisplay: sd,
eaDisplayBold: sd,
eaText: sd,
eaTextBold: sd
}, gd = {
eaDisplay: ad,
eaDisplayBold: ad,
eaText: ad,
eaTextBold: ad
}, yd = {
eaDisplay: ld,
eaDisplayBold: ld,
eaText: ld,
eaTextBold: ld
}, Id = {
eaDisplay: cd,
eaDisplayBold: cd,
eaText: cd,
eaTextBold: cd
}, _d = {
eaDisplay: dd,
eaDisplayBold: ud,
eaText: pd,
eaTextBold: fd
}, bd = {
name: "ea-icons",
url: Dc("/photon/fonts/photon-icons-b2895de0.otf")
}, Sd = new Set([ "ar-sa" ]), vd = new Set([ "ja-jp" ]), Td = new Set([ "ko-kr", "ru-ru" ]), Ed = new Set([ "zh-cn" ]), Pd = new Set([ "zh-tw", "zh-hk" ]), Od = new Set([ ...Sd, ...vd, ...Td, ...Ed, ...Pd ]);
function Cd(e, t) {
const n = !Od.has(e), r = !Od.has(t);
return n ? r : Sd.has(e) ? Sd.has(t) : Td.has(e) ? Td.has(t) : vd.has(e) ? vd.has(t) : Ed.has(e) ? Ed.has(t) : !!Pd.has(e) && Pd.has(t);
}
var {eaIcons: Nd, eaDisplay: Ad, eaDisplayBold: Ld, eaText: wd, eaTextBold: kd} = function(e) {
const t = e.toLowerCase();
return Sd.has(t) ? {
eaIcons: bd,
...hd
} : vd.has(t) ? {
eaIcons: bd,
...md
} : Td.has(t) ? {
eaIcons: bd,
...gd
} : Ed.has(t) ? {
eaIcons: bd,
...yd
} : Pd.has(t) ? {
eaIcons: bd,
...Id
} : {
eaIcons: bd,
..._d
};
}(pc.locale), Rd = pc.featureFlags.hasTextDirectionFix && Sd.has(pc.locale) ? "right-to-left" : void 0, xd = Ec({
fontFamily: Ad.name,
textDirection: Rd,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: mc(26)
}), Bd = Ec({
fontFamily: Ld.name,
textDirection: Rd,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: mc(26)
}), Dd = Ec({
fontFamily: wd.name,
textDirection: Rd,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: mc(26)
}), Fd = Ec({
fontFamily: kd.name,
textDirection: Rd,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: mc(26)
}), Md = {
ea: String.fromCharCode(57344),
epicGames: String.fromCharCode(57345),
genericCloud: String.fromCharCode(57346),
genericConsole: String.fromCharCode(57347),
genericPc: String.fromCharCode(57348),
playstation: String.fromCharCode(57349),
steam: String.fromCharCode(57350),
xbox: String.fromCharCode(57351),
switch: String.fromCharCode(57352),
...rd
}, Ud = {
ActionIdentifier: {
Label: {
color: Xc.TextColorStandard.emphasized
},
Icon: {
marginStart: Xc.DimensionSpace.small,
color: Xc.IconColorStandard.emphasized
}
},
ActionIdentifierInverted: {
Label: {
color: Xc.TextColorInverted.default
},
Icon: {
color: Xc.IconColorInverted.default
}
}
}, Hd = {
Block: {
Text: {
marginBottom: Xc.DimensionSpace.large
},
Title: {
color: Xc.TextColorStandard.emphasized
},
Headline: {
color: Xc.TextColorStandard.emphasized
},
Body: {
color: Xc.TextColorStandard.default
}
}
}, Vd = {
ButtonBase: {
Container: {
borderRadius: Xc.BorderRadius.medium,
paddingTop: Xc.DimensionSpace.small,
paddingEnd: Xc.DimensionSpace.large,
paddingBottom: Xc.DimensionSpace.small,
paddingStart: Xc.DimensionSpace.large
},
Stroke: {
color: Xc.ColorBrandPrimary._500
}
},
ButtonPrimaryDefault: {
Container: {
backgroundColor: Xc.ColorBrandPrimary._500
},
LabelText: {
color: Xc.ColorNeutral._0
}
},
ButtonPrimaryDisabled: {
Container: {
backgroundColor: Xc.ColorBrandPrimary._800
},
LabelText: {
color: Xc.ColorNeutral._200
}
},
ButtonSecondaryDefault: {
Container: {
backgroundColor: Xc.ColorNeutral._500
},
LabelText: {
color: Xc.ColorNeutral._0
}
},
ButtonSecondaryDisabled: {
Container: {
backgroundColor: Xc.ColorNeutral._800
},
LabelText: {
color: Xc.ColorNeutral._200
}
}
}, Jd = {
ButtonIcon: {
Container: {
color: Xc.IconColorStandard.default
}
}
}, Gd = {
Card: {
Container: {
borderRadius: Xc.BorderRadius.medium,
color: Xc.BackgroundColor.base,
padding: Xc.DimensionSpace.largest
},
Headline: {
color: Xc.TextColorStandard.emphasized,
marginBottom: Xc.DimensionSpace.smaller
},
Body: {
color: Xc.TextColorStandard.emphasized
}
}
}, zd = {
DetailCardGameInfo: {
Texture: {
borderRadius: Xc.BorderRadius.smaller,
marginEnd: Xc.DimensionSpace.larger
},
Title: {
color: Xc.TextColorStandard.emphasized,
marginBottom: Xc.DimensionSpace.small
},
Body: {
marginBottom: Xc.DimensionSpace.small
},
Body1: {
color: Xc.TextColorStandard.default
},
Body2: {
color: Xc.TextColorStandard.default
}
},
DetailCardGameInfoInactive: {
Texture: {
opacity: Xc.FillAlpha._50
},
Body1: {
color: Xc.TextColorStandard.error
}
}
}, jd = {
DigitBadge: {
LabelText: {
color: Xc.TextColorInverted.default,
fontSize: Xc.TextSizeLabel.small
}
}
}, qd = {
DotBadge: {
Container: {
width: Xc.DimensionSpace.small,
height: Xc.DimensionSpace.small
}
}
}, Yd = {
InputField: {
Cursor: {
backgroundColor: Xc.TextColorStandard.emphasized
},
LabelText: {
color: Xc.TextColorStandard.emphasized
},
AssistiveText: {
marginTop: Xc.DimensionSpace.smallest
}
}
}, Kd = {
ActionIdentifierListControl: {
Content: {
paddingStart: Xc.DimensionSpace.smaller
},
UnseenMarker: {
marginStart: Xc.DimensionSpace.small
}
}
};
function Wd(e, t) {
if (9 === e.length) {
const n = Math.floor(255 * t).toString(16);
return e.substring(0, e.length - 2) + n;
}
return e;
}
var Xd = Xc.DimensionSpace.small, Qd = Xc.DimensionSpace.small, $d = 34 + Xd + Qd, Zd = {
ListControlBase: {
Container: {
minHeight: $d,
borderRadius: Xc.BorderRadius.medium,
backgroundColor: Xc.BackgroundColor.base
},
Border: {
top: -Xc.DimensionSpace.smaller,
right: -Xc.DimensionSpace.smaller,
bottom: -Xc.DimensionSpace.smaller,
left: -Xc.DimensionSpace.smaller
},
Content: {
paddingTop: Xc.DimensionSpace.none,
paddingEnd: Xc.DimensionSpace.large,
paddingBottom: Xc.DimensionSpace.none,
paddingStart: Xc.DimensionSpace.large
},
Action: {
minHeight: $d,
paddingTop: Xd,
paddingEnd: Xc.DimensionSpace.large,
paddingBottom: Qd,
paddingStart: Xc.DimensionSpace.large,
borderRadius: Xc.BorderRadius.smaller,
color: Xc.TextColorStandard.emphasized
},
Divider: {
marginStart: Xc.DimensionSpace.small,
marginEnd: Xc.DimensionSpace.small,
width: Xc.DimensionSpace.micro,
height: Xc.DimensionSpace.larger,
backgroundColor: Xc.ColorNeutral._400
},
PrimaryID: {
marginStart: Xc.DimensionSpace.large
},
LabelText: {
minHeight: $d,
paddingTop: Xd,
paddingEnd: Xc.DimensionSpace.none,
paddingBottom: Qd,
paddingStart: Xc.DimensionSpace.none,
color: Xc.TextColorStandard.emphasized
},
Skeleton: {
height: Xc.DimensionSpace.medium,
width: Xc.DimensionLayout.macro,
marginStart: Xc.DimensionSpace.large
}
},
ListControlBaseActive: {
Container: {
backgroundColor: Xc.BackgroundColor.alt1,
backgroundColor2: Xc.BackgroundColor.body
},
LabelText: {
color: Xc.TextColorInverted.default,
colorFocusable: Xc.TextColorStandard.emphasized
}
},
ListControlBaseDisabled: {
Container: {
backgroundColor: Xc.BackgroundColor.body
},
LabelText: {
color: Xc.ColorNeutral._300
}
},
ListControlBaseFocused: {
LabelText: {
color: Xc.TextColorStandard.emphasized
}
},
ListControlBaseDimmed: {
LabelText: {
color: Xc.TextColorStandard.default
}
},
ListControlBaseActionPrimary: {
Container: {
backgroundColor: Xc.ColorBrandPrimary._500
}
},
ListControlBaseActionSecondary: {
Container: {
backgroundColor: Wd(Xc.ColorNeutral._300, .5)
}
},
ListControlBaseActionPrimaryHover: {
Container: {
backgroundColor: Xc.ColorBrandPrimary._700
}
},
ListControlBaseActionSecondaryHover: {
Container: {
backgroundColor: Xc.ColorNeutral._400
}
},
ListControlBaseActionPrimaryPressed: {
Container: {
backgroundColor: Xc.InteractiveColor.selected
}
},
ListControlBaseActionSecondaryPressed: {
Container: {
backgroundColor: Xc.InteractiveColor.selectedAlt
}
},
ListControlBaseActionPrimaryDisabled: {
Container: {
backgroundColor: Xc.BackgroundColor.alt2
}
},
ListControlBaseActionSecondaryDisabled: {
Container: {
backgroundColor: Xc.BackgroundColor.alt2
}
}
}, eu = {
ListControlMenuItem: {
Container: {
marginBottom: Xc.DimensionSpace.smaller
},
Icon: {
marginStart: Xc.DimensionSpace.small,
marginEnd: Xc.DimensionSpace.small
}
},
ListControlMenuItemDisabled: {
Container: {
marginBottom: Xc.DimensionSpace.smaller
}
},
ListControlMenu: {
Title: {
color: Xc.ColorNeutral._0,
marginTop: Xc.DimensionSpace.larger,
marginBottom: Xc.DimensionSpace.small
}
},
ListControlMenuSkeleton: {
Container: {
margin: Xc.DimensionSpace.medium,
marginStart: Xc.DimensionSpace.large
}
}
}, tu = {
Modal: {
CenteredContainer: {
marginTop: Xc.DimensionLayout.medium,
marginBottom: Xc.DimensionLayout.medium
},
ChoiceContainer: {
marginTop: Xc.DimensionSpace.largest
},
ChoiceButton: {
marginBottom: Xc.DimensionSpace.medium,
marginTop: Xc.DimensionSpace.larger
}
}
}, nu = {
ModalContainer: {
Container: {
padding: Xc.DimensionSpace.large
},
OpaqueContainer: {
backgroundColor: Xc.ColorNeutral._800
}
}
}, ru = {
ModalSelector: {
Container: {
marginTop: Xc.DimensionSpace.largest
},
RadioButton: {
marginBottom: Xc.DimensionSpace.small
}
}
}, iu = {
Notification: {
Container: {
color: Xc.BackgroundColor.alt2,
borderRadius: Xc.BorderRadius.smaller
},
Inner: {
top: Xc.DimensionSpace.medium,
right: Xc.DimensionSpace.medium,
left: Xc.DimensionSpace.medium
},
Disclaimer: {
marginTop: Xc.DimensionSpace.medium,
marginBottom: Xc.DimensionSpace.medium,
backgroundColor: Xc.BackgroundColor.alt2
},
IconWrapper: {
marginEnd: Xc.DimensionSpace.medium
},
Icon: {
width: Xc.DimensionSpace.largest,
height: Xc.DimensionSpace.largest
},
IconBackground: {
marginEnd: Xc.DimensionSpace.medium
},
Image: {
borderRadius: Xc.BorderRadius.smaller
},
Text: {
color: Xc.TextColorStandard.emphasized
},
Info: {
color: Wd(Xc.ColorNeutral._300, .5),
padding: Xc.DimensionSpace.smaller,
borderRadius: Xc.BorderRadius.smaller
},
Button: {
marginTop: Xc.DimensionSpace.medium
}
}
}, ou = {
NotificationActivate: {
SpriteAnimationContainer: {
marginStart: Xc.DimensionSpace.small,
marginEnd: Xc.DimensionSpace.small
},
Label: {
color: Xc.TextColorStandard.emphasized
}
}
}, au = {
RadioInput: {
ButtonIcon: {
marginEnd: Xc.DimensionSpace.small
}
},
RadioInputIcon: {
Container: {
marginStart: Xc.DimensionSpace.large,
backgroundColor: Xc.BackgroundColor.body
},
Bullet: {
color: Xc.IconColorStandard.emphasized
},
Stroke: {
color: Xc.IconColorStandard.default
}
},
RadioInputIconSelected: {
Stroke: {
color: Xc.InteractiveColor.focusHover
}
},
RadioInputIconDisabled: {
Stroke: {
color: Xc.ColorNeutral._400
}
}
}, su = {
ScrollBar: {
Container: {
width: Xc.DimensionSpace.smaller,
marginTop: Xc.DimensionSpace.smallest,
borderRadius: Xc.BorderRadius.smallest,
backgroundColor: Xc.ColorNeutral._400
}
},
ScrollBarHovered: {
Container: {
backgroundColor: Xc.ColorNeutral._300
}
}
}, lu = {
SectionHeader: {
Container: {
paddingTop: Xc.DimensionSpace.small,
paddingEnd: Xc.DimensionSpace.large,
paddingBottom: Xc.DimensionSpace.small,
paddingStart: Xc.DimensionSpace.large,
color: Xc.BackgroundColor.base
}
},
CollapsibleSectionHeader: {
Divider: {
width: Xc.DimensionSpace.micro,
height: Xc.DimensionSpace.larger,
backgroundColor: Xc.ColorNeutral._400
},
Icon: {
width: Xc.DimensionSpace.larger,
height: Xc.DimensionSpace.larger,
color: Xc.ColorNeutral._0
},
RTL: {
marginStart: Xc.DimensionSpace.large
},
Text: {
color: Xc.TextColorStandard.emphasized
},
DotBadge: {
marginEnd: Xc.DimensionSpace.small
}
}
}, cu = {
TabBar: {
ButtonIcon: {
color: Xc.IconColorStandard.emphasized
}
}
}, du = {
TabButton: {
Container: {
paddingTop: Xc.DimensionSpace.smaller,
paddingEnd: Xc.DimensionSpace.medium,
paddingBottom: Xc.DimensionSpace.smaller,
paddingStart: Xc.DimensionSpace.medium,
marginStart: Xc.DimensionSpace.larger / 2,
marginEnd: Xc.DimensionSpace.larger / 2
},
LabelText: {
color: Xc.TextColorStandard.default
}
},
TabButtonActive: {
LabelText: {
color: Xc.TextColorInverted.default,
backgroundColor: Xc.BackgroundColor.alt1
}
},
TabButtonPressed: {
LabelText: {
color: Xc.TextColorInverted.default,
backgroundColor: Xc.BackgroundColor.alt1
}
},
TabButtonFocused: {
LabelText: {
color: Xc.TextColorStandard.emphasized
}
}
}, uu = {
Body: {
Text: {
fontSize: Xc.TextSizeLabel.medium,
color: Xc.TextColorStandard.default
}
}
}, pu = {
Headline: {
Text: {
fontSize: Xc.TextSizeHeading.medium,
color: Xc.TextColorStandard.default
}
}
}, fu = {
Label: {
Text: {
fontSize: Xc.TextSizeLabel.medium,
color: Xc.TextColorStandard.default
}
}
}, hu = {
SectionTitle: {
Container: {
fontSize: Xc.TextSizeLabel.medium,
color: Xc.TextColorStandard.default
}
}
}, mu = {
Title: {
Container: {
fontSize: Xc.TextSizeDisplay.medium,
color: Xc.TextColorStandard.default
}
}
}, gu = ((e, t) => {
for (const [n, r] of Object.entries(t?.componentTokens ?? {})) for (const [t, i] of Object.entries(r)) e[n][t] = {
...e[n][t],
...i
};
return e;
})({
...Ud,
...Hd,
...Vd,
...Jd,
...lu,
...jd,
...qd,
...Yd,
...au,
...su,
...{
Tooltip: {
Container: {
backgroundColor: Xc.BackgroundColor.alt1,
padding: Xc.DimensionSpace.larger,
borderRadius: Xc.BorderRadius.smaller
},
Point: {
color: Xc.BackgroundColor.alt1
},
ActionIdentifier: {
marginTop: Xc.DimensionSpace.large
},
Headline: {
color: Xc.TextColorInverted.default
},
Body: {
color: Xc.TextColorInverted.default,
marginTop: Xc.DimensionSpace.small
}
}
},
...uu,
...pu,
...fu,
...hu,
...mu,
...cu,
...du,
...iu,
...ou,
...tu,
...nu,
...ru,
...Kd,
...Zd,
...eu,
...Gd,
...zd
}), yu = Ec({
fontSize: mc(gu.Label.Text.fontSize),
zOffset: 1,
textLetterSpacing: hc(1),
textEdgeOffset: .1,
wordWrap: "break-word"
}), Iu = ({text: e, color: t, style: n}) => H.createElement("surface", {
text: e,
style: [ Fd, yu, Lc("color", t || gu.Label.Text.color), n ]
}), _u = Ec({
alignSelf: "stretch",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "flex-start"
}), bu = Ec({
marginTop: hc(2),
marginEnd: hc(Xc.DimensionSpace.small)
}), Su = Ec({
flex: 1,
whiteSpace: "nowrap"
}), vu = ({icon: e, iconOnSurfaceId: t, buttonLabel: n, style: r, inverted: i = !1, showIcon: o = !0}) => {
const a = i ? gu.ActionIdentifierInverted.Icon.color : gu.ActionIdentifier.Icon.color;
return H.createElement(nd, {
type: e,
onSurfaceId: t,
buttonLabel: n,
color: a,
style: [ Lc("zOffset", 1), o ? void 0 : Lc("opacity", 0), r ]
});
}, Tu = ({label: e, showIcon: t, icon: n, iconOnSurfaceId: r, buttonLabel: i, style: o, textStyle: a, inverted: s = !1}) => {
const l = s ? gu.ActionIdentifierInverted.Label.color : gu.ActionIdentifier.Label.color;
let c;
return (n || i) && (c = H.createElement(vu, {
inverted: s,
buttonLabel: i,
icon: n,
iconOnSurfaceId: r,
showIcon: t,
style: bu
})), H.createElement("surface", {
style: [ _u, o ]
}, c, H.createElement(Iu, {
text: e,
color: l,
style: [ Su, a ]
}));
};
function Eu(e, t) {
let n;
const r = () => {
if (0 === t) return e();
n && clearTimeout(n), n = setTimeout((() => {
n = void 0, e();
}), t);
};
return r.cancel = () => {
n && (clearTimeout(n), n = void 0);
}, r;
}
var Pu = (e, t) => !(!e.gamePadInput || e.gamePadInput !== t.gamePadInput) || !(!e.keyboardKeycode || e.keyboardKeycode !== t.keyboardKeycode), Ou = class {
constructor() {
this.timers = {}, this.isDestroyed = !1, this.disposeTimeout = e => {
const t = this.timers[e];
void 0 !== t && (clearTimeout(t), delete this.timers[e]);
}, this.timeout = (e, t, n) => {
this.isDestroyed || (this.disposeTimeout(e), this.timers[e] = setTimeout((() => {
this.disposeTimeout(e), t();
}), n));
}, this.hasTimeout = e => void 0 !== this.timers[e];
}
destroy() {
this.isDestroyed = !0, Object.keys(this.timers).forEach((e => {
clearTimeout(this.timers[e]), delete this.timers[e];
}));
}
}, Cu = () => {
const [e] = H.useState((() => new Ou));
return H.useEffect((() => () => e.destroy()), [ e ]), e;
};
function Nu(e, t) {
return e.type === t.type ? e.entryId - t.entryId : e.type - t.type;
}
var Au = "context", Lu = 1, wu = e => "" !== e && void 0 !== e, ku = e => "string" == typeof e ? e : e.filter(wu).join(", "), Ru = class {
constructor(e, t = 50) {
this.moby = e, this.debounceDelay = t, this.enableNarration = gt.box(!1), this.timeoutHandler = new Ou, 
this.disposers = [], this.textMap = new bs([]), this.contextMap = new bs([]), this.tertiaryActions = gt([], {
deep: !1
}), this.currentContexts = [], this.dispose = () => {
this.disposers.forEach((e => e())), this.clear();
}, this.debouncedNarrate = Eu((() => {
if (this.waitingText) {
const e = this.waitingText;
this.waitingText = void 0, this.triggerNarration(e);
}
}), this.debounceDelay), this.getRegisteredTertiaryActions = () => this.tertiaryActions;
}
get isEnabled() {
return this.enableNarration.get();
}
get hasWaitingContexts() {
return !!this.waitingContexts;
}
get isEnabledUntracked() {
return Ts((() => this.isEnabled));
}
init(e, t) {
const n = this.moby;
return this.accessibility = e, this.getKeyBindingText = t, this.disposers.push(Fn((() => {
if (this.isEnabled && !n.get(ll)) {
const e = n.get(il), t = e && this.textMap.get(e), r = t && t(this);
if (r) return ku(r);
}
}), (e => {
this.narrate(e);
})), Fn((() => {
if (this.isEnabled) {
const e = [];
return this.contextMap.forEach(((t, r) => {
if (!n.getItem(Al, t.boundaryId)) return;
if (t.group && (n.get(ll) || !t.group.hasFocus.get())) return;
const i = t.callback(this);
i && e.push({
entryId: r,
type: t.type,
text: ku(i)
});
})), e;
}
}), (e => {
e && (this.setNarrationContext(e), this.debouncedNarrate());
})), Fn((() => this.isEnabled), ((e, t) => {
!e && t && (this.clear(), this.accessibility?.narrate({
text: ""
}));
}), {
fireImmediately: !0
})), this.dispose;
}
setEnabled(e) {
this.enableNarration.set(e);
}
clear() {
this.timeoutHandler.disposeTimeout(Au), this.debouncedNarrate.cancel(), this.waitingContexts = void 0, 
this.waitingText = void 0, this.currentContexts = [];
}
triggerNarration(e) {
let t = e;
if (this.waitingContexts?.length) {
const e = [], n = [];
this.waitingContexts.sort(Nu);
for (const {entryId: r, text: i, type: o} of this.waitingContexts) e.push(r), this.currentContexts.includes(r) || (2 === o || 3 === o ? t = ku([ t, i ]) : n.push(i));
t = ku(n.concat(t)), this.currentContexts = e, this.waitingContexts = void 0, this.timeoutHandler.disposeTimeout(Au);
}
t && this.accessibility?.narrate({
text: t
});
}
setNarrationContext(e) {
this.isEnabledUntracked && (this.waitingContexts = e, this.timeoutHandler.timeout(Au, (() => {
this.triggerNarration("");
}), 100));
}
narrate(e) {
this.isEnabledUntracked && (this.waitingText = e, this.debouncedNarrate());
}
narrateNow(e) {
this.isEnabledUntracked && e && this.triggerNarration(e);
}
getKeyBindingText(e) {
return "";
}
registerGetText(e, t) {
return this.textMap.set(e, t), () => {
this.textMap.delete(e);
};
}
registerGetContext(e, t, n, r) {
const i = {
id: Lu++,
boundaryId: e,
type: t,
callback: n,
group: r
};
return this.contextMap.set(i.id, i), () => {
this.contextMap.delete(i.id);
};
}
registerTertiaryAction(e) {
return this.tertiaryActions.push(e), () => {
const t = Ts((() => this.tertiaryActions.indexOf(e)));
t > -1 && this.tertiaryActions.splice(t, 1);
};
}
}, [xu, Bu] = js({
debugName: "Narration",
create: e => new Ru(e)
});
function Du(e, t, n, r = !0) {
const i = Bu(), o = el();
H.useEffect((() => {
if (r) return i.registerGetContext(o, n, e);
}), [ i, o, n, r, ...t ]);
}
function Fu(e, t, n) {
const r = Bu();
H.useEffect((() => r.registerGetText(n, e)), [ r, n, ...t ]);
}
function Mu(e, t, n, r) {
const i = Bu(), o = el();
H.useEffect((() => i.registerGetContext(o, n, e, r)), [ i, o, n, r, ...t ]);
}
function Uu({keyBinding: e, label: t}) {
const n = Bu();
H.useEffect((() => n.registerTertiaryAction({
keyBinding: e,
label: t
})), [ n, e, t ]);
}
var [Hu, Vu] = Is("NavigationHandler"), Ju = H.createContext(void 0), Gu = e => H.createElement(Ju.Provider, {
value: e.id
}, e.children), zu = 1;
function ju(e) {
return "" + zu++;
}
function qu(e, t) {
const n = H.useRef(""), r = e || n.current || ju();
return H.useEffect((() => {
n.current = r;
}), [ r ]), r;
}
function Yu(e) {
return {
isFocused: ks(al, e),
isPressed: ks(sl, e)
};
}
function Ku(e, t, n) {
Ls((r => {
if (r && (t?.(e), n)) return () => {
n(e);
};
}), [ e, n, t ], al, e, !0);
}
function Wu(e, t) {
H.useEffect((() => {
if (t) return tl.subscribe(((n, r) => {
n === e && t(r, e);
}));
}), [ e, t ]);
}
function Xu(e) {
const t = $s();
return H.useMemo((() => ({
...t.surfaceHooks,
onSurfaceId: n => {
t.onSurfaceIdForFocusId(e, n);
}
})), [ t, e ]);
}
function Qu(e, t) {
return qu(H.useContext(Ju) ?? e);
}
function $u(e, t) {
const n = Qu(t), r = el(), i = Vu(), o = $s();
H.useEffect((() => o.addNavigation(n, i)), [ n, i, o ]), H.useEffect((() => o.addFocusId(n, r)), [ o, r, n ]);
const a = Xu(n), s = Yu(n);
return {
focusId: n,
hooks: a,
isPressed: s.isPressed,
isFocused: s.isFocused
};
}
var [Zu, ep] = Is("InputSetter"), tp = fs.Input.DeviceType, np = Ks({
debugName: "registeredInputsState",
default: []
}), rp = Ks({
debugName: "suppressedInputRegistrationsState",
default: new Map
}), ip = Ks({
debugName: "pressedKeyEvents",
default: []
}), op = Gs({
debugName: "pressedKeyEvent",
get: function(e, {get: t}) {
return t(ip).some((t => t.id === e));
}
}), ap = Ks({
debugName: "currentInputDeviceState",
default: tp.NotSet
});
function sp() {
return ws(ap);
}
var lp, cp, dp = (e, t) => {
const n = t => {
const n = new Map(e.getUntracked(rp));
t(n), e.set(rp, n);
};
return n((e => e.set(t, (e.get(t) ?? 0) + 1))), () => {
n((e => e.set(t, Math.max((e.get(t) ?? 0) - 1, 0))));
};
}, up = (e, t, n = !0) => {
const r = qu(void 0), i = el(), o = ep(), {keyBinding: a, callback: s, label: l, isRepeating: c, onSurfaceId: d, transcendBoundaries: u, registrationIdOverride: p} = e || {}, f = p || r;
return H.useEffect((() => {
if (n && a && s) return o(f, {
keyBinding: a,
callback: s,
label: l,
focusId: t,
boundaryId: u ? void 0 : i,
isRepeating: c,
onSurfaceId: d
});
}), [ o, f, t, i, a, l, s, n, c, d, u ]), f;
}, pp = (e, t, n = !0) => {
const r = up(e, t, n);
return ks(op, r) && n;
}, fp = 2, [hp, mp] = Is("Twinkle");
function gp(e, t) {
lp = e, cp = t;
}
async function yp(e, t) {
const {statusCode: n, body: r} = await e.http.get(t);
if (200 === n && r) return r;
throw Error(`Couldn't load translations ${t}, statusCode ${n}`);
}
async function Ip(e, t) {
const n = await e.bindings.Asset.loadAsset({
url: t
});
if (n) return n.data;
throw new Error(`Couldn't load translations ${t}, got no data`);
}
async function _p(e, t, n) {
const r = (t.split("/").pop() || "").length > 10 && e.bindings.hasMethod("Asset", "loadAsset") ? await Ip(e, t) : await yp(e, t), i = e.http.bytesToStr(r);
gp(JSON.parse(i), n);
}
function bp(e, t) {
if (!t) return e;
let n = e;
return Object.keys(t).forEach((e => {
n = n.replaceAll(e, t[e]);
})), n;
}
function Sp() {
return cp;
}
var vp = e => Sp() ? -e : e, [Tp, Ep] = Is("ContentScaler"), Pp = ({contentDesignWidth: e, contentDesignHeight: t, children: n}) => {
const r = mp(), {onWindowSizeChanged: i, getWindowSize: o} = r.bindings.Layout, [a, s] = H.useState((() => {
const n = o({});
return n ? {
width: Math.max(1, n.width),
height: Math.max(1, n.height)
} : {
width: e,
height: t
};
})), l = Math.min(a.width / e, a.height / t), c = l * e, d = l * t, u = a.width / 2 - e * l / 2, p = a.height / 2 - t * l / 2, f = wc((() => ({
position: "absolute",
width: e,
height: t,
scaleX: l,
scaleY: l,
pivotX: -e / 2,
pivotY: -t / 2,
left: u,
top: p
})), [ e, t, l, u, p ]), h = wc((() => ({
width: a.width,
height: a.height,
paddingLeft: (a.width - c) / 2,
paddingTop: (a.height - d) / 2
})), [ a.width, a.height, c, d ]), m = u / l, g = p / l, y = wc((() => ({
position: "absolute",
left: -m,
right: -m,
top: -g,
bottom: -g
})), [ m, g ]);
H.useEffect((() => i.subscribe((e => {
s(e);
}))), [ i ]);
const I = H.useMemo((() => ({
rootStyle: h,
contentStyle: f,
fullscreenStyle: y,
fullScreenHorizontalMargin: m,
fullScreenVerticalMargin: g,
screenBoundsToLayout: t => {
const n = {
width: t.width,
height: t.height,
start: 0,
top: 0
};
return Sp() ? n.start = e + u - t.x - t.width : n.start = t.x - u, n.top = t.y - p, 
n;
}
})), [ e, f, m, g, y, u, h, p ]);
return H.createElement(Tp.Provider, {
value: I
}, n);
}, Op = (fs.DebugUI.WidthModifier, hc(133)), Cp = hc(Xc.DimensionLayout.smaller), Np = hc(1920), Ap = hc(1080);
function Lp(e) {
return (Op + Cp) * e - Cp;
}
var wp = e => Lc("width", Lp(e)), kp = {
width: hc(Xc.DangerZone.width),
height: hc(Xc.DangerZone.height)
}, Rp = {
width: Np - 2 * kp.width,
height: Ap - 2 * kp.height
}, [xp, Bp] = (Nc((e => ({
width: Lp(e)
})), {
marginRight: Cp
}), Ec({
flexDirection: "row",
flexWrap: "nowrap",
flex: 1
}), Ec({
flexDirection: "column",
flexWrap: "nowrap",
flex: 1
}), Is("QuantumContext")), Dp = ({children: e, actionKeyBindings: t, playSoundEffect: n, initialRTL: r = !1}) => {
mp();
const [i, o] = H.useState(r), a = H.useMemo((() => ({
isRTL: i,
setRTL: o,
actionKeyBindings: t,
playSoundEffect: n
})), [ i, t, n ]);
return H.createElement(xp.Provider, {
value: a
}, H.createElement(Pp, {
contentDesignWidth: Np,
contentDesignHeight: Ap
}, e));
};
function Fp() {
return Bp().isRTL;
}
function Mp() {
const {isRTL: e} = Bp();
return Lc("direction", e ? "right-to-left" : "left-to-right");
}
function Up(e) {
const {actionKeyBindings: t} = Bp();
return t[e];
}
function Hp(e, t, n, r) {
const i = Os(), o = Bp();
H.useEffect((() => {
n && o.playSoundEffect?.(r?.onPress ?? 3);
}), [ n, o, r?.onPress ]), H.useEffect((() => {
if (t) {
const t = i.getUntracked(rl);
if (!t) return;
if (t.focusId === e && 2 === t.source) return;
1 === t.source ? o.playSoundEffect?.(r?.onHover ?? 1) : o.playSoundEffect?.(r?.onFocus ?? 2);
}
}), [ i, e, t, o, r ]);
}
function Vp(e, t) {
return "function" == typeof e ? e(t) : e;
}
var Jp = ({id: e, focusId: t, isFocused: n, isDisabled: r, isPressed: i, isActive: o, onClick: a, onFocus: s, onBlur: l, input: c, soundEffectOverride: d}) => {
const u = $u(0, t);
Wu(u.focusId, r ? void 0 : a), Ku(u.focusId, s, l), up(c, u.focusId, u.isFocused && !r);
const p = void 0 === n ? u.isFocused : Vp(n, u.isFocused), f = void 0 === i ? u.isPressed && !r : Vp(i, u.isPressed);
return Hp(u.focusId, p, f, d), H.useMemo((() => ({
focusItem: u,
isFocused: p,
isPressed: f,
isActive: !!o,
isDisabled: !!r
})), [ u, o, r, p, f ]);
}, [Gp, zp] = Is("QuantumInteractionContext"), jp = -hc(8), qp = hc(gu.ButtonBase.Container.borderRadius), Yp = yc({
border: {
1: Dc("/photon/quantum/buttons/16px_stroke-5712787f.png"),
2: Dc("/photon/quantum/buttons/16px_stroke@2x-06fa31c3.png")
},
background: {
1: Dc("/photon/quantum/buttons/8px_container-5fdd599c.png"),
2: Dc("/photon/quantum/buttons/8px_container@2x-f7b35b5e.png")
}
}), Kp = Ec({
padding: hc([ gu.ButtonBase.Container.paddingTop, gu.ButtonBase.Container.paddingEnd, gu.ButtonBase.Container.paddingBottom, gu.ButtonBase.Container.paddingStart ]),
borderCenter: !0,
textureBorder: qp,
texture: Yp.background,
flexDirection: "row",
alignItems: "center"
}), Wp = Ec({
position: "absolute",
top: jp,
left: jp,
right: jp,
bottom: jp,
borderCenter: !0,
textureBorder: qp,
texture: Yp.border,
color: gu.ButtonBase.Stroke.color
}), Xp = Ec({
justifyContent: "center"
}), Qp = Ec({
justifyContent: "flex-start"
}), $p = Ec({
alignSelf: "center"
}), Zp = {
0: {
default: {
backgroundColor: gu.ButtonPrimaryDefault.Container.backgroundColor,
textColor: gu.ButtonPrimaryDefault.LabelText.color
},
disabled: {
backgroundColor: gu.ButtonPrimaryDisabled.Container.backgroundColor,
textColor: gu.ButtonPrimaryDisabled.LabelText.color
}
},
1: {
default: {
backgroundColor: gu.ButtonSecondaryDefault.Container.backgroundColor,
textColor: gu.ButtonSecondaryDefault.LabelText.color
},
disabled: {
backgroundColor: gu.ButtonSecondaryDisabled.Container.backgroundColor,
textColor: gu.ButtonSecondaryDisabled.LabelText.color
}
}
}, ef = {
duration: Xc.AnimationTime.rapid,
easing: Xc.AnimationEasing.ease
}, tf = Ec({
scaleX: {
to: 1,
...ef
}
}), nf = Ec({
marginStart: hc(Xc.DimensionSpace.small),
width: hc(32),
height: hc(32)
}), rf = e => {
const t = Xc.ButtonScale[e];
return Ec({
scaleX: {
to: t,
...ef
},
scaleY: {
to: t,
...ef
}
});
}, of = {
small: rf("small"),
medium: rf("medium"),
large: rf("large")
};
function af(e, t = "medium") {
return e ? of[t] : tf;
}
var sf = Ii.observer((e => {
const {narrationItem: t, input: n} = e, r = e.variant ?? 1, i = Jp(e), {focusItem: o, isFocused: a, isPressed: s} = i, l = a || s;
Fu((e => t?.({
keyBinding: n?.keyBinding
}, e)), [ t, n?.keyBinding ], o.focusId);
const c = e.isDisabled ? Zp[r].disabled : Zp[r].default, d = af(s);
return H.createElement("surface", {
style: [ Kp, Lc("color", c.backgroundColor), e.alignStart ? Qp : Xp, e.style, d ],
...o.hooks
}, l && H.createElement("surface", {
style: Wp
}), e.children(i, c));
})), lf = e => {
const {label: t, icon: n, ...r} = e, i = e.input ? sc(e.input.keyBinding.primaryButton) : void 0, o = H.useCallback(((n, r) => {
if (void 0 !== e.narration) {
return (0, e.narrationItem)({
...n,
...e.narration,
label: t
}, r);
}
return (0, e.narrationItem)?.({
...n,
label: t
}, r);
}), [ e.narrationItem, e.narration, t ]);
return H.createElement(sf, {
...r,
narrationItem: o
}, H.useCallback((({isFocused: e}, {textColor: o}) => {
const a = e || r.alignStart;
return H.createElement(H.Fragment, null, H.createElement(Tu, {
label: t,
icon: a ? i : void 0,
showIcon: e,
textStyle: Lc("color", o),
style: r.alignStart ? void 0 : $p
}), n ? H.createElement("surface", {
style: [ nf, Lc("texture", n), Lc("color", o) ]
}) : void 0);
}), [ r.alignStart, i, n, t ]));
}, cf = Ec({
flexDirection: "row"
}), df = hc(Xc.DimensionSpace.smaller + 4), uf = hc(Xc.DimensionSpace.medium + 4), pf = yc({
border: {
1: Dc("/photon/quantum/borders/w4px_r12px_ffffff-transparent-1x-7816314b.png"),
2: Dc("/photon/quantum/borders/w4px_r12px_ffffff-transparent-2x-bfc0f52b.png")
}
}), ff = [ Wp, Ec({
texture: pf.border,
textureBorder: hc(Xc.DimensionSpace.small),
top: -df,
left: -uf,
right: -uf,
bottom: -df
}) ], hf = Ec({
position: "relative",
marginRight: hc(Xc.DimensionSpace.larger + 2 * Xc.DimensionSpace.medium)
}), mf = ({action: e}) => {
const {label: t, callback: n, button: r, onSurfaceId: i} = e, {hooks: o, isPressed: a, isHovered: s} = xl({
onClick: n,
ignoreBoundaryIsolation: !0
}), l = af(a, "small");
return H.createElement("surface", {
style: [ hf, l ],
...o
}, s ? H.createElement("surface", {
style: ff
}) : void 0, H.createElement(Tu, {
buttonLabel: r.keyboardKeyLabel,
icon: sc(r),
iconOnSurfaceId: i,
label: t
}));
}, gf = ({style: e, children: t}) => H.createElement("surface", {
style: [ cf, e ]
}, t), yf = ({actions: e, style: t}) => H.createElement(gf, {
style: t
}, e.map((e => H.createElement(mf, {
key: e.id,
action: e
})))), If = gc({
1: Dc("/photon/quantum/icons/logo/EaCircle-54-6287f0bb.png"),
2: Dc("/photon/quantum/icons/logo/EaCircle-54@2x-5d825716.png")
}), _f = Ec({
zOffset: 1,
width: hc(54),
height: hc(54),
texture: If,
textureMode: "none",
color: Xc.ColorNeutral._0
}), bf = ({style: e}) => H.createElement("surface", {
style: [ _f, e ]
}), Sf = yc({
AVATAR: {
1: Dc("/photon/quantum/icons/avatar/Avatar_48px-aaa1febd.png"),
2: Dc("/photon/quantum/icons/avatar/Avatar_48px@2x-26497882.png")
},
ADD_USER: {
1: Dc("/photon/quantum/icons/Add_User/Add_User_48px-8968775d.png"),
2: Dc("/photon/quantum/icons/Add_User/Add_User_48px@2x-30004172.png")
},
WARNING: {
1: Dc("/photon/quantum/icons/warning/Warning_48px-327b5965.png"),
2: Dc("/photon/quantum/icons/warning/Warning_48px@2x-9db11738.png")
},
SEARCH: {
1: Dc("/photon/quantum/icons/search/Search_32px-65ef266b.png"),
2: Dc("/photon/quantum/icons/search/Search_32@2x-91073aec.png")
},
INFORMATION: {
1: Dc("/photon/quantum/icons/information/Information_48px-a401a39b.png"),
2: Dc("/photon/quantum/icons/information/Information_48px@2x-08b4d707.png")
},
ERROR: {
1: Dc("/photon/quantum/icons/remove/Remove_48px-ee73c114.png"),
2: Dc("/photon/quantum/icons/remove/Remove_48px@2x-7f2bb405.png")
},
CHECK_CIRCLE: {
1: Dc("/photon/quantum/icons/check_circle/Check_Circle_48px-6a2d915a.png"),
2: Dc("/photon/quantum/icons/check_circle/Check_Circle_48px@2x-a533d5d9.png")
},
CHECK_FILL: {
1: Dc("/photon/quantum/icons/check_fill/Check_Fill_32px-49eddbcc.png"),
2: Dc("/photon/quantum/icons/check_fill/Check_Fill_32px@2x-7ef2c700.png")
},
PARTY: {
1: Dc("/photon/quantum/icons/party/Party_48px-9fb2fe4b.png"),
2: Dc("/photon/quantum/icons/party/Party_48px@2x-8bd079da.png")
},
PARTY_LEADER: {
1: Dc("/photon/quantum/icons/party_leader/Party_Leader_48px-a7e6eabc.png"),
2: Dc("/photon/quantum/icons/party_leader/Party_Leader_48px@2x-ea25efdb.png")
},
EXIT: {
1: Dc("/photon/quantum/icons/exit/Exit_48px-626d4995.png"),
2: Dc("/photon/quantum/icons/exit/Exit_48px@2x-10478ad8.png")
},
REMOVE: {
1: Dc("/photon/quantum/icons/remove/Remove_48px-93354318.png"),
2: Dc("/photon/quantum/icons/remove/Remove_48px@2x-5e78f2c2.png")
},
MUTE: {
1: Dc("/photon/quantum/icons/mute/Mute_48px-a5043897.png"),
2: Dc("/photon/quantum/icons/mute/Mute_48px@2x-54fbc0b8.png")
},
VOLUME_UP: {
1: Dc("/photon/quantum/icons/volume_up/Volume_Up_48px-5772ef2a.png"),
2: Dc("/photon/quantum/icons/volume_up/Volume_Up_48px@2x-9edff105.png")
},
VOIP: {
1: Dc("/photon/quantum/icons/Voip_48px-807cb909.png"),
2: Dc("/photon/quantum/icons/Voip_48px@2x-d40dbcc4.png")
},
VOIP_DISABLED: {
1: Dc("/photon/quantum/icons/Voip_Disabled_48px-7833c196.png"),
2: Dc("/photon/quantum/icons/Voip_Disabled_48px@2x-ac485c0c.png")
},
VOIP_RESTRICTED: {
1: Dc("/photon/quantum/icons/Voip_Restricted/VoipRestricted_32px-4a26c300.png"),
2: Dc("/photon/quantum/icons/Voip_Restricted/VoipRestricted_32px@2x-8dbe0fcf.png")
},
BLOCK: {
1: Dc("/photon/quantum/icons/block/Block_48px-9e052181.png"),
2: Dc("/photon/quantum/icons/block/Block_48px@2x-9191e3bb.png")
},
SPEAKER_FILL: {
1: Dc("/photon/quantum/icons/speaker_fill/Speaker_Fill_32px-a8d6e819.png"),
2: Dc("/photon/quantum/icons/speaker_fill/Speaker_Fill_32px@2x-53a4b853.png")
},
SPEAKER_MUTE_LINE: {
1: Dc("/photon/quantum/icons/speaker_mute_line/Speaker_Mute_Line_32px-4bc64e75.png"),
2: Dc("/photon/quantum/icons/speaker_mute_line/Speaker_Mute_Line_32px@2x-a1242810.png")
},
SPEAKER_STROKE: {
1: Dc("/photon/quantum/icons/speaker_stroke/Speaker_Stroke_32px-a267fb0f.png"),
2: Dc("/photon/quantum/icons/speaker_stroke/Speaker_Stroke_32px@2x-92382a9b.png")
},
SPEAKING_LINES: {
1: Dc("/photon/quantum/icons/speaking_lines/Speaking_Lines_32px-d6fb02e6.png"),
2: Dc("/photon/quantum/icons/speaking_lines/Speaking_Lines_32px@2x-c27e6fa5.png")
},
MICROPHONE: {
1: Dc("/photon/quantum/icons/microphone/Microphone_48px-e7f2f7e5.png"),
2: Dc("/photon/quantum/icons/microphone/Microphone_48px@2x-1e76b82e.png")
},
MICROPHONE_MUTE: {
1: Dc("/photon/quantum/icons/microphone_mute/Microphone_Mute_48px-68425233.png"),
2: Dc("/photon/quantum/icons/microphone_mute/Microphone_Mute_48px@2x-ef0c6dca.png")
},
MICROPHONE_MUTE_LINE: {
1: Dc("/photon/quantum/icons/Microphone_Mute_Line_32px-0deb9400.png"),
2: Dc("/photon/quantum/icons/Microphone_Mute_Line_32px@2x-93bed9bc.png")
},
RADIO_INPUT_BACKGROUND: {
1: Dc("/photon/quantum/icons/radio_input/background-94784169.png"),
2: Dc("/photon/quantum/icons/radio_input/background@2x-ae7225d4.png")
},
RADIO_INPUT_STROKE: {
1: Dc("/photon/quantum/icons/radio_input/stroke-0bc91d13.png"),
2: Dc("/photon/quantum/icons/radio_input/stroke@2x-7d18d927.png")
},
RADIO_INPUT_BULLET: {
1: Dc("/photon/quantum/icons/radio_input/bullet-d8acc6a0.png"),
2: Dc("/photon/quantum/icons/radio_input/bullet@2x-349d8984.png")
},
CONTROLLER: {
1: Dc("/photon/quantum/icons/controller/Controller_48px-a63774b6.png"),
2: Dc("/photon/quantum/icons/controller/Controller_48px@2x-76d431d7.png")
},
MOUSE: {
1: Dc("/photon/quantum/icons/mouse/Mouse_48px-fac22545.png"),
2: Dc("/photon/quantum/icons/mouse/Mouse_48px@2x-415574d1.png")
},
OPEN_EXTERNAL: {
1: Dc("/photon/quantum/icons/open_external/OpenExternal-4bf23aec.png"),
2: Dc("/photon/quantum/icons/open_external/OpenExternal@2x-63fec202.png")
},
INCOMPATIBLE_NEUTRAL: {
1: Dc("/photon/quantum/icons/incompatible/neutral/Incompatible_Neutral-9bb9a02d.png"),
2: Dc("/photon/quantum/icons/incompatible/neutral/Incompatible_Neutral@2x-c5e780ed.png")
},
INCOMPATIBLE_WHITE: {
1: Dc("/photon/quantum/icons/incompatible/white/Incompatible_White-336c7a1a.png"),
2: Dc("/photon/quantum/icons/incompatible/white/Incompatible_White@2x-5a07eada.png")
},
LIGHT_BULB: {
1: Dc("/photon/quantum/icons/light_bulb/Light_Bulb_48px-7f7831d8.png"),
2: Dc("/photon/quantum/icons/light_bulb/Light_Bulb_48px@2x-54e839f2.png")
},
PLUS: {
1: Dc("/photon/quantum/icons/plus/Plus_32px-0a34f6fe.png"),
2: Dc("/photon/quantum/icons/plus/Plus_32px@2x-5275df23.png")
},
ONLINE_STATUS_INDICATOR: {
1: Dc("/photon/quantum/icons/online_status_indicator/OnlineStatusIndicator-e1807538.png"),
2: Dc("/photon/quantum/icons/online_status_indicator/OnlineStatusIndicator@2x-73780b82.png")
},
OFFLINE_STATUS_INDICATOR: {
1: Dc("/photon/quantum/icons/offline_status_indicator/OfflineStatusIndicator-d538f923.png"),
2: Dc("/photon/quantum/icons/offline_status_indicator/OfflineStatusIndicator@2x-01752008.png")
},
DO_NOT_DISTURB: {
1: Dc("/photon/quantum/icons/do_not_disturb/Do_not_disturb_16px-9d036eb4.png"),
2: Dc("/photon/quantum/icons/do_not_disturb/Do_not_disturb_16px@2x-99738d96.png")
},
STAR: {
1: Dc("/photon/quantum/icons/star/Star_32px-66c80b36.png"),
2: Dc("/photon/quantum/icons/star/Star_32px@2x-8d2b44c1.png")
}
}), vf = yc({
down: {
1: Dc("/photon/quantum/icons/arrow_down/Chevron_Down_32px-33c16517.png"),
2: Dc("/photon/quantum/icons/arrow_down/Chevron_Down_32px@2x-2f6cfae2.png")
}
}), Tf = yc({
cloud32: {
1: Dc("/photon/quantum/icons/platforms/Generic_Cloud_Gaming_32px-0e317e6d.png"),
2: Dc("/photon/quantum/icons/platforms/Generic_Cloud_Gaming_32px@2x-212945be.png")
},
console32: {
1: Dc("/photon/quantum/icons/platforms/Generic_Console_32px-2ede17ad.png"),
2: Dc("/photon/quantum/icons/platforms/Generic_Console_32px@2x-ebdef951.png")
},
ea32: {
1: Dc("/photon/quantum/icons/platforms/EA_Logo_32px-7e7a7613.png"),
2: Dc("/photon/quantum/icons/platforms/EA_Logo_32px@2x-5038df18.png")
},
epic32: {
1: Dc("/photon/quantum/icons/platforms/Epic_Games_32px-bd883c69.png"),
2: Dc("/photon/quantum/icons/platforms/Epic_Games_32px@2x-694a687e.png")
},
pc32: {
1: Dc("/photon/quantum/icons/platforms/Generic_PC_32px-501c005c.png"),
2: Dc("/photon/quantum/icons/platforms/Generic_PC_32px@2x-d9c92178.png")
},
playstation32: {
1: Dc("/photon/quantum/icons/platforms/Playstation_Logo_32px-97783011.png"),
2: Dc("/photon/quantum/icons/platforms/Playstation_Logo_32px@2x-c2007091.png")
},
steam32: {
1: Dc("/photon/quantum/icons/platforms/Steam_Logo_32px-0a619c23.png"),
2: Dc("/photon/quantum/icons/platforms/Steam_32@2x-fb908349.png")
},
switch32: {
1: Dc("/photon/quantum/icons/platforms/Switch_32px-ef5674d2.png"),
2: Dc("/photon/quantum/icons/platforms/Switch_32px@2x-a65701bc.png")
},
xbox32: {
1: Dc("/photon/quantum/icons/platforms/Xbox_Logo_32px-a5946491.png"),
2: Dc("/photon/quantum/icons/platforms/Xbox_Logo_32px@2x-ba990d10.png")
}
}), Ef = hc(Xc.BorderRadius.smaller), Pf = yc({
"w4-r8-#1f55caff-#ffffffff": {
1: Dc("/photon/quantum/borders/w4px_r8px_1F55CA-EEEEEE-1x-a14ad404.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_1F55CA-EEEEEE-2x-c435560c.png")
},
"w4-r8-#1f55caff-#343647ff": {
1: Dc("/photon/quantum/borders/w4px_r8px_1F55CA-343647-1x-460873d8.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_1F55CA-343647-2x-f27c46cb.png")
},
"w4-r8-#1f55caff-#1d2033ff": {
1: Dc("/photon/quantum/borders/w4px_r8px_1F55CA-1D2033-1x-0419e9de.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_1F55CA-1D2033-2x-e9cde465.png")
},
"w4-r8-#276afcff-#ffffffff": {
1: Dc("/photon/quantum/borders/w4px_r8px_276AFC-EAEAEA-1x-21858a3e.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_276AFC-EAEAEA-2x-16b70378.png")
},
"w4-r8-#276afcff-#343647ff": {
1: Dc("/photon/quantum/borders/w4px_r8px_276AFC-343647-1x-6529ddef.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_276AFC-343647-2x-1158d415.png")
},
"w4-r8-#276afcff-#1d2033ff": {
1: Dc("/photon/quantum/borders/w4px_r8px_276AFC-1D2033-1x-ca90c3b8.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_276AFC-1D2033-2x-e5fefe91.png")
},
"w4-r8-border": {
1: Dc("/photon/quantum/borders/w4px_r8px_ffffff-transparent-1x-3e617c53.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_ffffff-transparent-2x-b0c3576a.png")
},
"w4-r8-background": {
1: Dc("/photon/quantum/borders/w4px_r8px_ffffff-ffffff-1x-750cc04f.png"),
2: Dc("/photon/quantum/borders/w4px_r8px_ffffff-ffffff-2x-e26b6b80.png")
}
}), Of = e => {
let t, n;
if (e.backgroundColor) if (e.borderColor) {
const {borderColor: t, backgroundColor: r} = e;
n = `w4-r8-${t}-${r}`;
} else n = "w4-r8-background", t = e.backgroundColor; else {
if (!e.borderColor) return [ null, null ];
n = "w4-r8-border", t = e.borderColor;
}
return [ t, Pf[n] ];
}, Cf = e => {
const [t, n] = Of(e);
if (void 0 !== n) return [ Lc("borderCenter", !0), Lc("textureBorder", Ef), t ? Lc("color", t) : void 0, n ? Lc("texture", n) : void 0 ];
}, Nf = ({isFocused: e, isPressed: t, isActive: n}) => {
let r;
return t ? r = Xc.ColorBrandPrimary._700 : e && !n && (r = Xc.ColorBrandPrimary._500), 
r;
}, Af = yc({
"r2-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_2px-1x-efdb3e58.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_2px-2x-7ecacfb0.png")
},
"r4-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_4px-1x-dcb77995.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_4px-2x-ce87bfcd.png")
},
"r8-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_8px-1x-0ccee3b6.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_8px-2x-21908e8b.png")
},
"r16-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_16px-dd78b94e.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_16px-2x-170b6d0e.png")
},
"r2-left-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_2px_0px_0px_2px-92e3aae4.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_2px_0px_0px_2px@2x-a0486376.png")
},
"r4-left-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_4px_0px_0px_4px-3021eea6.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_4px_0px_0px_4px@2x-25a70b59.png")
},
"r8-left-background": {
1: Dc("/photon/quantum/backgrounds/Border_Radius_8px_0px_0px_8px-9dddf104.png"),
2: Dc("/photon/quantum/backgrounds/Border_Radius_8px_0px_0px_8px@2x-79ec45ee.png")
},
"r2-right-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_0px_2px_2px_0px-e281796e.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_0px_2px_2px_0px@2x-efa2f947.png")
},
"r4-right-background": {
1: Dc("/photon/quantum/backgrounds/Background_Border_Radius_0px_4px_4px_0px-591a4cba.png"),
2: Dc("/photon/quantum/backgrounds/Background_Border_Radius_0px_4px_4px_0px@2x-b7dc860b.png")
},
"r8-right-background": {
1: Dc("/photon/quantum/backgrounds/Border_Radius_0px_8px_8px_0px-4cebed23.png"),
2: Dc("/photon/quantum/backgrounds/Border_Radius_0px_8px_8px_0px@2x-05e9c032.png")
}
});
function Lf(e) {
let t;
return "applyRadiusTo" in e && (0 === e.applyRadiusTo ? t = `r${e.radius}-left-background` : 1 === e.applyRadiusTo && (t = `r${e.radius}-right-background`)), 
t || (t = `r${e.radius}-background`), Af[t];
}
function wf(e) {
const t = Lf(e);
if (void 0 !== t) return [ Lc("borderCenter", !0), Lc("textureBorder", hc(e.radius)), Lc("texture", t) ];
}
function kf(e) {
return {
x: e.x + e.width / 2,
y: e.y + e.height / 2
};
}
function Rf(e, t) {
return Math.atan2(t.y - e.y, t.x - e.x);
}
function xf(e, t) {
const n = t.x - e.x, r = t.y - e.y;
return n * n + r * r;
}
function Bf(e, t) {
const n = Math.cos(t), r = Math.sin(t), i = Math.abs(n), o = Math.abs(r), a = e.width / 2 * o <= e.height / 2 * i ? e.width / 2 / (i || 1) : e.height / 2 / (o || 1), s = kf(e);
return {
x: s.x + n * a,
y: s.y + r * a
};
}
function Df(e, t) {
const n = kf(e), r = kf(t);
return xf(Bf(e, Rf(n, r)), Bf(t, Rf(r, n)));
}
function Ff(e, t, n) {
let r = !1, i = !1;
const o = e.y + e.height / 2, a = e.x + e.width / 2, s = t.y + t.height / 2, l = t.x + t.width / 2, c = o < s, d = o > s, u = a < l, p = a > l;
switch (n) {
case 1:
r = e.x <= t.x && l - a > 0, i = d || c;
break;

case 3:
r = e.y <= t.y && s - o > 0, i = u || p;
break;

case 0:
r = e.x >= t.x && l - a < 0, i = d || c;
break;

case 2:
r = e.y >= t.y && s - o < 0, i = u || p;
}
return r ? Df(e, t) + (i ? 1e6 : 0) : NaN;
}
var Mf = ju();
function Uf(e) {
return e.isolateBoundaryId(Mf);
}
var Hf = e => qu(void 0), Vf = e => ks(wl, e), Jf = H.memo((e => {
const t = qu(e.id), n = H.useContext(Zs), r = $s();
H.useEffect((() => {
if (e.isolate) return r.isolateBoundaryId(t);
}), [ t, r, e.isolate ]);
const i = e.disable || e.disableForControllerMode || !1, o = e.disable || e.disableForMouseMode || !1;
return H.useEffect((() => {
if (i) return r.disabledBoundaryIdForControllerMode(t);
}), [ r, i, t ]), H.useEffect((() => {
if (o) return r.disabledBoundaryIdForMouseMode(t);
}), [ r, o, t ]), H.useEffect((() => r.addBoundaryId(t, n)), [ r, n, t ]), H.createElement(Zs.Provider, {
value: t
}, e.children);
})), Gf = fs.Input.MouseButton, zf = class {
constructor(e) {
this.moby = e, this.rootBoundaryId = ju(), this.idToNavigation = {}, this.boundaryHistory = {}, 
this.focusIdToSurfaceId = {}, this.surfaceIdToFocusId = {}, this.setFocus = (e, t) => {
if (this.moby.set(rl, {
focusId: e,
source: t
}), e) {
const t = this.moby.getItemUntracked(pl, e);
t && (this.boundaryHistory[t] = {
focusId: e,
time: Date.now()
});
}
}, this.setPressed = (e, t) => {
this.moby.set(ol, (n => t ? e : n !== e ? n : void 0));
}, this.defaultNavigation = (e, t) => {
const n = this.getValidFocusIds(), r = this.getClosestFocusId(n, e, t);
return r || fp;
}, this.navigate = e => {
hr((() => {
this.setMouseMode(!1);
const t = this.moby.getUntracked(il);
if (!t) return void this.autoFocus();
const n = (0, this.idToNavigation[t])?.(t, e);
"string" == typeof n && this.setFocus(n, 0);
}));
}, this.setMouseMode = e => {
this.moby.set(ll, e);
}, this.surfaceHooks = {
onClick: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && hr((() => {
this.setMouseMode(!0), this.setFocus(n, 1), e.button === Gf.Left && tl.trigger(n, e);
}));
},
onMouseEnter: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && hr((() => {
this.setMouseMode(!0), this.setFocus(n, 1);
}));
},
onMouseLeave: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && hr((() => {
this.setMouseMode(!0), this.setFocus(void 0, 1), this.setPressed(n, !1);
}));
},
onMouseDown: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && hr((() => {
this.setMouseMode(!0), e.button === Gf.Left && this.setPressed(n, !0);
}));
},
onMouseUp: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && hr((() => {
this.setMouseMode(!0), e.button === Gf.Left && this.setPressed(n, !1);
}));
},
onBounds: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && this.moby.setItem(nl, n, e);
}
}, this.onSurfaceIdForFocusId = (e, t) => {
const n = this.focusIdToSurfaceId[e];
n && n !== t && delete this.surfaceIdToFocusId[n], t ? (this.surfaceIdToFocusId[t] = e, 
this.focusIdToSurfaceId[e] = t) : delete this.focusIdToSurfaceId[e];
};
}
init() {
const e = [ Fn((() => this.moby.get(il)), (() => this.moby.reset(ol))), xn((() => {
const e = this.moby.get(il);
e && this.moby.getItem(Ol, e) && this.setFocus(void 0, 2);
})), xn((() => {
if (!this.moby.get(ll) && !this.moby.get(il)) {
const e = this.moby.get(Nl);
this.moby.getItem(yl, e || this.rootBoundaryId), this.autoFocus();
}
})), xn((() => {
const e = this.moby.get(il), t = this.moby.get(Nl);
if (e && t) {
this.moby.getItem(yl, t).includes(e) || (this.setFocus(void 0, 2), this.autoFocus());
}
})) ];
return () => {
for (const t of e) t();
this.resetFocusState();
};
}
resetFocusState() {
hr((() => {
this.moby.reset(rl), this.moby.reset(ol), this.moby.reset(ll);
}));
}
addNavigation(e, t) {
return this.idToNavigation[e] = t, () => {
delete this.idToNavigation[e];
};
}
getValidFocusIds() {
return Ts((() => {
const e = this.moby.get(Nl);
return this.moby.getItem(yl, e || this.rootBoundaryId);
}));
}
getClosestFocusIdFromBounds(e, t) {
return Ts((() => {
let n, r = Number.MAX_VALUE;
for (let i = 0; i <= e.length; i++) {
const o = e[i], a = this.moby.getItem(nl, o);
if (!a) continue;
const s = Df(t, a);
s === r && t.absY < a.absY ? n = o : !Number.isNaN(s) && s < r && (r = s, n = o);
}
return n;
}));
}
getClosestFocusId(e, t, n) {
return Ts((() => {
const r = this.moby.getItem(nl, t);
if (!r) return;
let i, o = Number.MAX_VALUE;
for (let a = 0; a <= e.length; a++) {
const s = e[a];
if (s === t) continue;
const l = this.moby.getItem(nl, s);
if (!l) continue;
const c = Ff(r, l, n);
!Number.isNaN(c) && c < o && (o = c, i = s);
}
return i;
}));
}
autoFocus() {
Ts((() => {
if (this.moby.get(il)) return;
const e = this.getValidFocusIds();
let t;
for (const n of e) {
const e = this.moby.getItem(pl, n);
if (e) {
const r = this.boundaryHistory[e];
r && (!t || r.time > t.time) && (r.focusId === n || r.bounds) && (t = r);
}
}
const n = t?.bounds;
if (n) {
const t = this.getClosestFocusIdFromBounds(e, n);
this.setFocus(t ?? e[0], 2);
} else t ? this.setFocus(t.focusId, 2) : e.length && this.setFocus(e[0], 2);
}));
}
isolateBoundaryId(e) {
return this.moby.set(Cl, (t => t.includes(e) ? t : [ ...t, e ])), () => {
this.moby.set(Cl, (t => t.includes(e) ? t.filter((t => t !== e)) : t));
};
}
disabledBoundaryIdForMouseMode(e) {
return this.moby.setItem(fl, e, !0), () => {
this.moby.resetItem(fl, e);
};
}
disabledBoundaryIdForControllerMode(e) {
return this.moby.setItem(hl, e, !0), () => {
this.moby.resetItem(hl, e);
};
}
addBoundaryId(e, t) {
return hr((() => {
t && (this.moby.setItem(ul, e, t), this.moby.setItem(cl, t, (t => t.includes(e) ? t : [ ...t, e ])));
})), () => {
hr((() => {
delete this.boundaryHistory[e], t && (this.moby.resetItem(ul, e), this.moby.setItem(cl, t, (t => t.filter((t => t !== e)))));
}));
};
}
addFocusId(e, t) {
const n = xn((() => {
this.moby.getItem(Pl, e);
}));
return hr((() => {
this.moby.setItem(pl, e, t), this.moby.setItem(dl, t, (t => t.includes(e) ? t : [ ...t, e ]));
})), () => {
Ts((() => {
hr((() => {
n();
const r = this.moby.getItem(pl, e);
if (r) {
const t = this.boundaryHistory[r];
t?.focusId === e && (t.bounds = this.moby.getItem(nl, e));
}
this.moby.resetItem(nl, e), this.moby.resetItem(pl, e), this.moby.set(rl, (t => {
if (t?.focusId !== e) return t;
})), this.moby.set(ol, (t => {
if (t !== e) return t;
})), this.moby.setItem(dl, t, (t => t.filter((t => t !== e))));
}));
}));
};
}
isFocusIdDisabled(e) {
return this.moby.getItemUntracked(Pl, e);
}
}, [jf, qf] = js({
debugName: "focusRootState",
create: e => new zf(e)
}), Yf = class {
constructor(e, t) {
this.maxConcurrent = e, this.onQueueEmpty = t, this.queue = [], this.numConcurrent = 0;
}
entry(e) {
return new Promise(((t, n) => {
this.queue.push({
callback: e,
resolve: t,
reject: n
}), this.run();
}));
}
async run() {
if (this.numConcurrent >= this.maxConcurrent) return;
const e = this.queue.shift();
if (e) {
this.numConcurrent++;
try {
e.resolve(await e.callback());
} catch (t) {
e.reject(t);
} finally {
this.numConcurrent--, setTimeout((() => {
this.run();
}), 1);
}
} else this.onQueueEmpty?.();
}
};
function Kf(e) {
const t = new Yf(8), n = async n => {
let r;
if (n.body) if ("string" == typeof n.body) {
const t = e.stringToBytes({
data: n.body
});
if (!t) throw new Error("Failed to encode body");
r = t.data;
} else r = n.body;
const i = {
headers: n.headers,
method: n.method,
body: r,
url: n.url
};
const o = await t.entry((async () => {
const t = await e.httpRequest(i);
if (!t) throw new Error("No HTTP response returned");
return t;
}));
let a = o.body;
return 200 !== o.statusCode || a || (a = new Uint8Array), {
body: a,
headers: o.headers,
statusCode: o.statusCode
};
};
return {
post: (e, t, r) => n({
url: e,
body: t,
headers: r || {},
method: fs.Http.HttpMethod.Post
}),
get: (e, t) => n({
url: e,
headers: t || {},
method: fs.Http.HttpMethod.Get
}),
http: n,
bytesToStr: t => {
if (0 === t.length) return "";
const n = e.bytesToString({
data: t
});
if (!n) throw new Error("No response");
return n.data;
},
strToBytes: t => {
const n = e.stringToBytes({
data: t
});
if (!n) throw new Error("No response");
return n.data;
}
};
}
var Wf = class {
constructor() {
this.loadedTextures = {}, this.onLoadedCallbacks = [], this.onTextureLoaded = e => {
this.loadedTextures[e.url] = e.success ? 1 : 2, this.triggerOnLoadedCallbacks();
}, this.onTextureUnloaded = e => {
delete this.loadedTextures[e.url];
}, this.triggerOnLoadedCallbacks = () => {
this.onLoadedCallbacks.slice().forEach((e => {
const {urls: t, callback: n} = e;
this.areTexturesLoaded(t) && (this.removeOnLoadedCallback(e), n());
}));
}, this.removeOnLoadedCallback = e => {
const t = this.onLoadedCallbacks.indexOf(e);
t > -1 && this.onLoadedCallbacks.splice(t, 1);
}, this.areTexturesLoaded = e => e.every((e => !!this.loadedTextures[e])), this.registerOnLoadedCallback = (e, t) => {
if (this.areTexturesLoaded(e)) return t(), () => {};
const n = {
urls: e,
callback: t
};
return this.onLoadedCallbacks.push(n), () => {
this.removeOnLoadedCallback(n);
};
};
}
static create(e) {
const t = new Wf;
return e.onTextureLoaded.subscribe(t.onTextureLoaded), e.onTextureUnloaded.subscribe(t.onTextureUnloaded), 
t;
}
}, Xf = Ks({
debugName: "preloadedImagesState",
default: []
}), [Qf, $f] = Is("ImagePreloader"), Zf = Ec({
enableMouseEvents: !1,
position: "absolute",
left: 0,
bottom: -1,
flexDirection: "row"
}), eh = Ec({
width: 1,
height: 1,
textureAtlas: "SINGLE_TEXTURE",
opacity: .01
}), th = Ii.observer((() => {
const e = ws(Xf), t = mp(), [n, r] = H.useState(0), [i] = H.useState((() => new Yf(4, (() => r((e => e + 1)))))), o = H.useRef(new Set);
H.useEffect((() => {
for (const n of e) i.entry((async () => {
if (!o.current.has(n)) return o.current.add(n), t.bindings.Asset.loadAsset({
url: n
});
}));
}), [ t, e, i ]);
const a = e.filter(((t, n) => e.indexOf(t) === n && o.current.has(t)));
return H.createElement("surface", {
style: Zf,
key: n
}, a.map((e => H.createElement("surface", {
key: e,
style: [ eh, Lc("texture", e) ]
}))));
})), nh = (e, t) => {
const n = mp(), r = $f();
H.useEffect((() => {
const i = n.texture.registerOnLoadedCallback(e, t), o = r.preloadImages(e);
return () => {
i(), o();
};
}), [ t, r, n, e ]);
}, rh = e => {
const t = mp(), [n, r] = H.useState((() => t.texture.areTexturesLoaded(e))), i = H.useCallback((() => {
r(!0);
}), [ r ]);
return nh(e, i), n;
};
var [ih] = qs({
debugName: "twinkleState"
}), oh = fs.Input.ButtonState, ah = fs.Input.DeviceType, sh = Js({
debugName: "activeRegisteredInputState",
get: function({get: e, getItem: t}) {
const n = e(np), r = e(rp), i = [];
for (let e = 0, o = n.length; e < o; e++) {
const o = n[e];
r.get(o.id) || (o.boundaryId && !t(Al, o.boundaryId) || i.push(o));
}
return i;
}
}), lh = e => "button:" + (e.gamePadInput ?? "") + ":" + (e.keyboardKeycode ?? ""), ch = class {
constructor(e, t, n) {
this.moby = e, this.input = t, this.focus = n, this.timer = new Ou, this.disabledCounter = 0, 
this.pressedKeys = [], this.heldRepeatingKeys = [], this.isPressed = [], this.registerInput = (e, t) => {
const {callback: n, keyBinding: r, label: i, focusId: o, boundaryId: a, isRepeating: s, onSurfaceId: l} = t, c = [ {
id: e,
button: r.primaryButton,
focusId: o,
callback: n,
label: i,
boundaryId: a,
isRepeating: s,
priority: r.priority,
onSurfaceId: l
} ];
for (let t = 0, i = r.secondaryButtons.length; t < i; t++) c.push({
id: e + "-" + (t + 1),
button: r.secondaryButtons[t],
focusId: o,
callback: n,
boundaryId: a,
isRepeating: s
});
return this.moby.set(np, (e => [ ...c, ...e ])), () => {
this.moby.set(np, (e => e.filter((e => !c.includes(e)))));
};
}, this.disable = () => {
this.disabledCounter++;
let e = !1;
return () => {
e || (e = !0, this.disabledCounter--);
};
}, this.resetPressed = () => {
hr((() => {
this.isPressed.forEach((e => {
this.input.onButtonStateChanged.trigger({
state: oh.Up,
button: e
});
}));
}));
};
}
init() {
let e;
this.moby.set(ap, this.input.getCurrentInputDevice({})?.deviceType || ah.MouseAndKeyboard);
const t = [ this.input.onInputDeviceChange.subscribe((e => {
this.moby.set(ap, e.toDeviceType);
})), this.input.onButtonStateChanged.subscribe((e => {
hr((() => {
e.state === oh.Down ? this.onButtonDown(e.button) : this.onButtonUp(e.button);
}));
})), Fn((() => this.moby.get(il)), (t => {
e && (this.pressedKeys.length = 0, this.focus.setPressed(e, !1)), e = t;
})) ];
return () => {
t.forEach((e => e())), this.moby.reset(np), this.moby.reset(ap), this.moby.reset(ip), 
this.timer.destroy();
};
}
onButtonDown(e) {
this.focus.setMouseMode(!1);
const t = this.getRegistration(e);
this.isDisabled || !t || this.isPressed.some((t => Pu(t, e))) || (this.moby.set(ip, (e => [ t, ...e ])), 
this.isPressed.push(e), t.callback(), t.focusId && this.pressFocusedIdKey(e, t.focusId), 
t.isRepeating && !this.heldRepeatingKeys.includes(e) && this.holdRepeatingKey(e, (() => {
this.isDisabled || this.getRegistration(e)?.callback();
})));
}
onButtonUp(e) {
const t = this.getRegistration(e);
if (this.isDisabled) return void this.releaseRepeatingKey(e);
this.moby.set(ip, (t => t.filter((t => !Pu(t.button, e)))));
const n = this.isPressed.findIndex((t => Pu(t, e)));
n > -1 && this.isPressed.splice(n, 1), t?.isRepeating && this.releaseRepeatingKey(e), 
this.releaseFocusedIdKey(e);
}
getRegistration(e) {
const t = this.moby.getUntracked(sh);
for (let n = 0; n < t.length; n++) {
const r = t[n];
if (Pu(r.button, e)) return r;
}
}
get isDisabled() {
return this.disabledCounter > 0;
}
pressFocusedIdKey(e, t) {
this.moby.getUntracked(il) === t && (this.pressedKeys.push(e), this.focus.setPressed(t, !0));
}
releaseFocusedIdKey(e) {
const t = this.moby.getUntracked(il), n = this.pressedKeys.findIndex((t => Pu(t, e)));
t && n > -1 && (this.pressedKeys.splice(n, 1), this.focus.setPressed(t, this.pressedKeys.length > 0));
}
holdRepeatingKey(e, t) {
this.heldRepeatingKeys.push(e);
let n = 0, r = 200;
const i = lh(e), o = () => {
n++, n < 2 || (r = n < 3 ? 60 : n < 5 ? 30 : 0), this.heldRepeatingKeys.some((t => Pu(t, e))) && (t(), 
this.timer.timeout(i, o, r));
};
this.timer.timeout(i, o, r);
}
releaseRepeatingKey(e) {
this.timer.disposeTimeout(lh(e));
const t = this.heldRepeatingKeys.findIndex((t => Pu(t, e)));
t > -1 && this.heldRepeatingKeys.splice(t, 1);
}
}, [dh, uh] = js({
debugName: "inputHandlerState",
create: e => {
const t = e.get(ih), n = e.get(jf);
return new ch(e, t.bindings.Input, n);
}
}), ph = Ii.observer((e => {
const {children: t, navigationConfig: n} = e, {navigate: r} = $s(), i = uh();
H.useEffect((() => i.init()), [ i ]);
const o = ws(ap);
return H.useEffect((() => {
const e = [ i.registerInput("navigate-left", {
callback: () => r(0),
keyBinding: n ? n.left : rc(o, "left", [ "leftAlt" ]),
isRepeating: !0
}), i.registerInput("navigate-up", {
callback: () => r(2),
keyBinding: n ? n.up : rc(o, "up", [ "upAlt" ]),
isRepeating: !0
}), i.registerInput("navigate-right", {
callback: () => r(1),
keyBinding: n ? n.right : rc(o, "right", [ "rightAlt" ]),
isRepeating: !0
}), i.registerInput("navigate-down", {
callback: () => r(3),
keyBinding: n ? n.down : rc(o, "down", [ "downAlt" ]),
isRepeating: !0
}) ];
return () => {
e.forEach((e => e()));
};
}), [ o, r, n, i ]), H.createElement(Zu.Provider, {
value: i.registerInput
}, t);
})), fh = class {
constructor(e, t) {
this.stateMachine = e, this.debugName = t;
}
chain(e) {
return this.nextAction ? this.nextAction.chain(e) : this.nextAction = e, this;
}
debug(e) {}
}, hh = class extends fh {
run(e) {
return this.nextAction?.run(e);
}
execute(e, t) {
return this.chain(new gh(this.stateMachine, t, e));
}
executeAsync(e, t) {
return this.chain(new mh(this.stateMachine, t, e));
}
transition(e) {
const t = new gh(this.stateMachine, "transition: " + e, (() => e));
return this.chain(t);
}
wait(e) {
const t = new mh(this.stateMachine, "wait: " + e, (n => {
const r = setTimeout((() => {
n();
}), e);
return e => {
t.debug("timeout cancelled: " + e), clearTimeout(r);
};
}));
return this.chain(t);
}
}, mh = class extends fh {
constructor(e, t, n) {
super(e, t), this.callback = n;
}
run(e) {
this.debug();
let t = this.callback((n => {
n ? e(n) : this.nextAction ? t = this.nextAction.run(e) : e();
}));
return e => t?.(e);
}
}, gh = class extends fh {
constructor(e, t, n) {
super(e, t), this.callback = n;
}
run(e) {
this.debug();
const t = this.callback();
if (this.nextAction) return this.nextAction.run(e);
e(t);
}
}, yh = class {
constructor(e) {
this.debugName = e, this.stateChangeEvent = new os, this.interrupt = e => {
const t = e(this.currentState);
void 0 !== t && this.currentState !== t && (this.debug("interrupt: " + t), this.currentCancel?.("user interruption"), 
this.changeState(t));
};
}
setDecisionMaker(e) {
this.decisionMaker = e;
}
debug(e) {}
getContext(e, t) {
return {
actions: () => new hh(this, "actions"),
previousState: t,
currentState: e
};
}
changeState(e) {
const t = this.currentState;
this.currentState = e, this.stateChangeEvent.trigger(e, t);
const n = this.getContext(e, t), r = this.decisionMaker?.(n);
r || this.debug("None");
const i = r || n.actions();
this.runActionChain(i);
}
runActionChain(e) {
let t, n = !0;
this.currentCancel = e.run((e => {
e && (n ? t = e : this.changeState(e));
})), n = !1, t && this.changeState(t);
}
transition(e) {
this.changeState(e(this.currentState));
}
};
function Ih(e, t, n, {onStateChange: r} = {}) {
H.useEffect((() => {
e.setDecisionMaker(n);
}), [ n, e ]), H.useEffect((() => {
if (r) return e.stateChangeEvent.subscribe(r);
}), [ r, e.stateChangeEvent ]), H.useEffect((() => {
void 0 !== t && void 0 === e.currentState && e.transition((() => t));
}), [ t, e ]);
}
function _h(e, t, n) {
const [r] = H.useState((() => new yh(n?.debugName)));
return Ih(r, e, t, n), {
interrupt: r.interrupt
};
}
var bh = class extends ps {
constructor() {
super(...arguments), this._bindingName = "PhotonJsBindings", this.Accessibility = {
onAccessibilitySettingsChanged: new os,
getAccessibilitySettings: (e, t) => this._asyncMethodCall("PhotonJsBindings.Accessibility.getAccessibilitySettings", e, t),
narrate: (e, t) => this._asyncMethodCall("PhotonJsBindings.Accessibility.narrate", e, t)
}, this.Badging = {
updateUnseenItemCount: (e, t) => this._asyncMethodCall("PhotonJsBindings.Badging.updateUnseenItemCount", e, t),
updateOnlineFriendCount: (e, t) => this._asyncMethodCall("PhotonJsBindings.Badging.updateOnlineFriendCount", e, t)
}, this.BlockListNotifications = {
SubscribeToBlockListNotifications: e => this._streamCall("PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotifications", "PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotificationsEnd", e)
}, this.BlockService = {
BlockPlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.BlockPlayer", e, t),
UnblockPlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.UnblockPlayer", e, t),
BatchVerifyBlockedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.BatchVerifyBlockedPlayers", e, t),
ListBlockedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.ListBlockedPlayers", e, t)
}, this.ContentMart = {
enableFifoCache: e => this._syncCall("PhotonJsBindings.ContentMart.enableFifoCache", e),
disableFifoCache: e => this._syncCall("PhotonJsBindings.ContentMart.disableFifoCache", e),
GetProduct: (e, t) => this._asyncMethodCall("PhotonJsBindings.ContentMart.GetProduct", e, t),
GetPlayerNetwork: (e, t) => this._asyncMethodCall("PhotonJsBindings.ContentMart.GetPlayerNetwork", e, t),
GetInputMethod: (e, t) => this._asyncMethodCall("PhotonJsBindings.ContentMart.GetInputMethod", e, t)
}, this.DeepLink = {
onCrossPlayStatusChanged: new os,
onPickFriendRequest: new os,
onCancelFriendRequest: new os,
onTemporaryDisabledSettingsChanged: new os,
onDisabledByParentalControlChanged: new os,
getPlayerActions: e => this._syncCall("PhotonJsBindings.DeepLink.getPlayerActions", e),
invokePlayerAction: e => this._syncCall("PhotonJsBindings.DeepLink.invokePlayerAction", e),
openFirstPartyProfile: e => this._syncCall("PhotonJsBindings.DeepLink.openFirstPartyProfile", e),
pickFriendResponse: e => this._syncCall("PhotonJsBindings.DeepLink.pickFriendResponse", e),
getSettingsAvailability: e => this._syncCall("PhotonJsBindings.DeepLink.getSettingsAvailability", e),
openSetting: e => this._syncCall("PhotonJsBindings.DeepLink.openSetting", e),
isCrossPlayEnabled: e => this._syncCall("PhotonJsBindings.DeepLink.isCrossPlayEnabled", e),
getCrossPlayPlatformCompatibility: e => this._syncCall("PhotonJsBindings.DeepLink.getCrossPlayPlatformCompatibility", e),
getDisabledByParentalControl: e => this._syncCall("PhotonJsBindings.DeepLink.getDisabledByParentalControl", e),
getPlayerActionsAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.getPlayerActionsAsync", e, t),
invokePlayerActionAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.invokePlayerActionAsync", e, t),
openFirstPartyProfileAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.openFirstPartyProfileAsync", e, t),
filterFriendsForPicker: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.filterFriendsForPicker", e, t),
openGameHubPage: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.openGameHubPage", e, t)
}, this.FriendListNotifications = {
SubscribeToFriendListNotifications: e => this._streamCall("PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotifications", "PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotificationsEnd", e)
}, this.Friends = {
ListFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.ListFriends", e, t),
BatchVerifyFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.BatchVerifyFriends", e, t),
ListPlatformFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.ListPlatformFriends", e, t),
DeleteFriend: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.DeleteFriend", e, t),
ListMutualFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.ListMutualFriends", e, t)
}, this.FriendsNotificationsService = {
StreamNotifications: e => this._streamCall("PhotonJsBindings.FriendsNotificationsService.StreamNotifications", "PhotonJsBindings.FriendsNotificationsService.StreamNotificationsEnd", e)
}, this.GameInvite = {
onCacheGameInvitesLimitReached: new os,
enableCacheGameInvites: e => this._syncCall("PhotonJsBindings.GameInvite.enableCacheGameInvites", e),
disableCacheGameInvites: e => this._syncCall("PhotonJsBindings.GameInvite.disableCacheGameInvites", e),
setCacheGameInvitesLimit: e => this._syncCall("PhotonJsBindings.GameInvite.setCacheGameInvitesLimit", e),
getCacheGameInvitesKeys: e => this._syncCall("PhotonJsBindings.GameInvite.getCacheGameInvitesKeys", e),
getCacheGameInvitesValue: e => this._syncCall("PhotonJsBindings.GameInvite.getCacheGameInvitesValue", e),
SubscribeToReceivedGameInviteNotifications: e => this._streamCall("PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotifications", "PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotificationsEnd", e),
SendGameInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.SendGameInvite", e, t),
GetReceivedGameInvites: e => this._streamCall("PhotonJsBindings.GameInvite.GetReceivedGameInvites", "PhotonJsBindings.GameInvite.GetReceivedGameInvitesEnd", e),
GetGameJoinTokens: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.GetGameJoinTokens", e, t),
AcceptGameInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.AcceptGameInvite", e, t),
RejectGameInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.RejectGameInvite", e, t),
RevokeGameInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.RevokeGameInvites", e, t)
}, this.Identity = {
getTokenInfo: (e, t) => this._asyncMethodCall("PhotonJsBindings.Identity.getTokenInfo", e, t),
getPersonaInfo: (e, t) => this._asyncMethodCall("PhotonJsBindings.Identity.getPersonaInfo", e, t)
}, this.InputBindings = {
onBindingsChanged: new os,
getActionBinding: e => this._syncCall("PhotonJsBindings.InputBindings.getActionBinding", e),
batchGetActionBindings: e => this._syncCall("PhotonJsBindings.InputBindings.batchGetActionBindings", e),
setExclusiveMouseRegion: (e, t) => this._asyncMethodCall("PhotonJsBindings.InputBindings.setExclusiveMouseRegion", e, t)
}, this.InviteListNotifications = {
SubscribeToSentInviteListNotifications: e => this._streamCall("PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotifications", "PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotificationsEnd", e),
SubscribeToReceivedInviteListNotifications: e => this._streamCall("PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotifications", "PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotificationsEnd", e)
}, this.Invites = {
ListSentFriendInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.ListSentFriendInvites", e, t),
ListReceivedFriendInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.ListReceivedFriendInvites", e, t),
BatchSendFriendInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.BatchSendFriendInvites", e, t),
CancelSentFriendInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.CancelSentFriendInvite", e, t),
AcceptReceivedFriendInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.AcceptReceivedFriendInvite", e, t),
DeclineReceivedFriendInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.DeclineReceivedFriendInvite", e, t)
}, this.Lobby = {
onLobbyChanged: new os,
onUninvitablePlayersChanged: new os,
onMemberLeft: new os,
onMemberJoined: new os,
onFirstPartyInviteAccepted: new os,
onSendEaInvite: new os,
sendEaInviteResponse: e => this._syncCall("PhotonJsBindings.Lobby.sendEaInviteResponse", e),
getLobby: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.getLobby", e, t),
joinLobby: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.joinLobby", e, t),
filterUninvitablePlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.filterUninvitablePlayers", e, t),
prepareInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.prepareInvite", e, t)
}, this.Moderation = {
onOpenPlayerReporting: new os,
getReportCategories: (e, t) => this._asyncMethodCall("PhotonJsBindings.Moderation.getReportCategories", e, t),
reportPlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.Moderation.reportPlayer", e, t),
playerReportingCancelled: (e, t) => this._asyncMethodCall("PhotonJsBindings.Moderation.playerReportingCancelled", e, t)
}, this.MuteListNotifications = {
SubscribeToMuteListNotifications: e => this._streamCall("PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotifications", "PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotificationsEnd", e)
}, this.MuteService = {
MutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.MutePlayer", e, t),
UnmutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.UnmutePlayer", e, t),
BatchVerifyMutedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.BatchVerifyMutedPlayers", e, t),
ListMutedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.ListMutedPlayers", e, t)
}, this.Notifications = {
onNotificationAllowChanged: new os,
onInGamePlayChanged: new os,
getNotificationAllowed: e => this._syncCall("PhotonJsBindings.Notifications.getNotificationAllowed", e),
getInGamePlay: e => this._syncCall("PhotonJsBindings.Notifications.getInGamePlay", e),
getDefaultNotificationPosition: e => this._syncCall("PhotonJsBindings.Notifications.getDefaultNotificationPosition", e)
}, this.Party = {
onPartyChanged: new os,
onLeaderChanged: new os,
onMemberKicked: new os,
onMemberLeft: new os,
onMemberJoined: new os,
onCreatePartySupportedChanged: new os,
isCreatePartySupported: e => this._syncCall("PhotonJsBindings.Party.isCreatePartySupported", e),
getParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.getParty", e, t),
isCreatePartySupportedAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.isCreatePartySupportedAsync", e, t),
isPartySupported: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.isPartySupported", e, t),
createParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.createParty", e, t),
joinParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.joinParty", e, t),
leaveParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.leaveParty", e, t),
setPartyLeader: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.setPartyLeader", e, t),
kickPartyMember: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.kickPartyMember", e, t)
}, this.Performance = {
onNativeRequestedAMemoryPurge: new os,
onBlurModeChanged: new os,
requestNativeToPurgeMemory: e => this._syncCall("PhotonJsBindings.Performance.requestNativeToPurgeMemory", e),
getBlurMode: e => this._syncCall("PhotonJsBindings.Performance.getBlurMode", e)
}, this.PhotonInvite = {
onUninvitablePlayersChanged: new os,
onFirstPartyInviteAccepted: new os,
onSendEaInvite: new os,
sendEaInviteResponse: e => this._syncCall("PhotonJsBindings.PhotonInvite.sendEaInviteResponse", e),
prepareInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.PhotonInvite.prepareInvite", e, t),
filterUninvitablePlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.PhotonInvite.filterUninvitablePlayers", e, t)
}, this.PlatformFriends = {
onFriendListUpdated: new os,
onBlockListUpdated: new os,
startListener: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.startListener", e, t),
stopListener: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.stopListener", e, t),
getState: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.getState", e, t),
getFriendList: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.getFriendList", e, t),
getBlockList: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.getBlockList", e, t),
addFriend: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.addFriend", e, t),
removeFriend: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.removeFriend", e, t),
addBlock: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.addBlock", e, t),
removeBlock: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.removeBlock", e, t)
}, this.PlatformPresence = {
onAppearOfflineChanged: new os,
isAppearOfflineSupported: e => this._syncCall("PhotonJsBindings.PlatformPresence.isAppearOfflineSupported", e),
isAppearOffline: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformPresence.isAppearOffline", e, t)
}, this.PlayerCardService = {
onCachePlayerCardsLimitReached: new os,
onCachePlayerCardsByFirstPartyIdsLimitReached: new os,
onCacheFirstPartyIdsLimitReached: new os,
enableCachePlayerCards: e => this._syncCall("PhotonJsBindings.PlayerCardService.enableCachePlayerCards", e),
disableCachePlayerCards: e => this._syncCall("PhotonJsBindings.PlayerCardService.disableCachePlayerCards", e),
setCachePlayerCardsLimit: e => this._syncCall("PhotonJsBindings.PlayerCardService.setCachePlayerCardsLimit", e),
getCachePlayerCardsKeys: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsKeys", e),
getCachePlayerCardsValue: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsValue", e),
enableCachePlayerCardsByFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.enableCachePlayerCardsByFirstPartyIds", e),
disableCachePlayerCardsByFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.disableCachePlayerCardsByFirstPartyIds", e),
setCachePlayerCardsByFirstPartyIdsLimit: e => this._syncCall("PhotonJsBindings.PlayerCardService.setCachePlayerCardsByFirstPartyIdsLimit", e),
getCachePlayerCardsByFirstPartyIdsKeys: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsByFirstPartyIdsKeys", e),
getCachePlayerCardsByFirstPartyIdsValue: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsByFirstPartyIdsValue", e),
enableCacheFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.enableCacheFirstPartyIds", e),
disableCacheFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.disableCacheFirstPartyIds", e),
setCacheFirstPartyIdsLimit: e => this._syncCall("PhotonJsBindings.PlayerCardService.setCacheFirstPartyIdsLimit", e),
getCacheFirstPartyIdsKeys: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCacheFirstPartyIdsKeys", e),
getCacheFirstPartyIdsValue: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCacheFirstPartyIdsValue", e),
BatchGetPlayerCards: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetPlayerCards", "PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsEnd", e),
BatchGetFriendsPlayerCards: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCards", "PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCardsEnd", e),
BatchGetPlayerCardsByFirstPartyIds: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIds", "PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIdsEnd", e),
BatchGetFirstPartyIds: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIds", "PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIdsEnd", e),
BatchGetFriendsFirstPartyIds: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIds", "PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIdsEnd", e),
BatchGetPrivacySettings: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetPrivacySettings", "PhotonJsBindings.PlayerCardService.BatchGetPrivacySettingsEnd", e)
}, this.PlayerList = {
onPlayerListsChanged: new os,
onPlayerListPersonasChanged: new os,
onPlayerListEmptyStateChanged: new os,
getPlayerListConfig: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerList.getPlayerListConfig", e, t),
getPlayerLists: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerList.getPlayerLists", e, t),
getPlayerListPersonas: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerList.getPlayerListPersonas", e, t)
}, this.PlayerSearch = {
SearchPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerSearch.SearchPlayers", e, t)
}, this.PresenceSession = {
onCachePresenceStatusLimitReached: new os,
enableCachePresenceStatus: e => this._syncCall("PhotonJsBindings.PresenceSession.enableCachePresenceStatus", e),
disableCachePresenceStatus: e => this._syncCall("PhotonJsBindings.PresenceSession.disableCachePresenceStatus", e),
setCachePresenceStatusLimit: e => this._syncCall("PhotonJsBindings.PresenceSession.setCachePresenceStatusLimit", e),
getCachePresenceStatusPrimaryKeys: e => this._syncCall("PhotonJsBindings.PresenceSession.getCachePresenceStatusPrimaryKeys", e),
getCachePresenceStatusSecondaryKeys: e => this._syncCall("PhotonJsBindings.PresenceSession.getCachePresenceStatusSecondaryKeys", e),
getCachePresenceStatusValue: e => this._syncCall("PhotonJsBindings.PresenceSession.getCachePresenceStatusValue", e),
updatePresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.updatePresence", e, t),
partialUpdatePresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.partialUpdatePresence", e, t),
subscribeToPlayerPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.subscribeToPlayerPresence", e, t),
subscribeToPlayersPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.subscribeToPlayersPresence", e, t),
unsubscribeFromPlayerPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.unsubscribeFromPlayerPresence", e, t),
unsubscribeFromPlayersPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.unsubscribeFromPlayersPresence", e, t),
subscribeToFriendsPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.subscribeToFriendsPresence", e, t),
unsubscribeFromFriendsPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.unsubscribeFromFriendsPresence", e, t),
getPresenceSubscriptions: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.getPresenceSubscriptions", e, t),
getDirectJoinTokens: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.getDirectJoinTokens", e, t),
getPlayerPresence: e => this._streamCall("PhotonJsBindings.PresenceSession.getPlayerPresence", "PhotonJsBindings.PresenceSession.getPlayerPresenceEnd", e),
getFriendsPresence: e => this._streamCall("PhotonJsBindings.PresenceSession.getFriendsPresence", "PhotonJsBindings.PresenceSession.getFriendsPresenceEnd", e),
attachToPresenceSession: e => this._streamCall("PhotonJsBindings.PresenceSession.attachToPresenceSession", "PhotonJsBindings.PresenceSession.attachToPresenceSessionEnd", e),
detachFromPresenceSession: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.detachFromPresenceSession", e, t)
}, this.RecentlyMet = {
getRecentlyMetPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.RecentlyMet.getRecentlyMetPlayers", e, t),
getSessionPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.RecentlyMet.getSessionPlayers", e, t)
}, this.StateApi = {
onStateChanged: new os,
getState: e => this._syncCall("PhotonJsBindings.StateApi.getState", e),
setState: e => this._syncCall("PhotonJsBindings.StateApi.setState", e)
}, this.Telemetry = {
onSessionHeaderInformationChanged: new os,
onBootEnd: new os,
onBootStart: new os,
onTelemetryAllowChanged: new os,
getSessionHeaderInfo: e => this._syncCall("PhotonJsBindings.Telemetry.getSessionHeaderInfo", e),
getTelemetryAllowed: e => this._syncCall("PhotonJsBindings.Telemetry.getTelemetryAllowed", e)
}, this.UserExperience = {
playSoundEffect: (e, t) => this._asyncMethodCall("PhotonJsBindings.UserExperience.playSoundEffect", e, t)
}, this.Voip = {
onVoipChannelsUpdated: new os,
onVoipStateUpdated: new os,
setCurrentVoipProfile: e => this._syncCall("PhotonJsBindings.Voip.setCurrentVoipProfile", e),
mutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.mutePlayer", e, t),
unmutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.unmutePlayer", e, t),
setMutedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.setMutedPlayers", e, t),
getVoipState: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.getVoipState", e, t),
setActiveVoipChannel: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.setActiveVoipChannel", e, t),
getVoipChannels: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.getVoipChannels", e, t)
}, this.XboxPlatform = {
getXblPrivacyBatchCheckPermission: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.getXblPrivacyBatchCheckPermission", e, t),
CheckXUserPrivilege: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.CheckXUserPrivilege", e, t),
ResolveXUserPrivilegeWithUiAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.ResolveXUserPrivilegeWithUiAsync", e, t),
ShowMessageDialogAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.ShowMessageDialogAsync", e, t)
};
}
hasMethod(e, t) {
return this._hasMethod("PhotonJsBindings", e, t);
}
hasEvent(e, t) {
return this._hasEvent("PhotonJsBindings", e, t);
}
registerBinding() {
return this._registerBinding(((e, t) => {
switch (e) {
case "PhotonJsBindings.Accessibility.onAccessibilitySettingsChanged":
return this.Accessibility.onAccessibilitySettingsChanged.trigger(t), !0;

case "PhotonJsBindings.BlockListNotifications.onSubscribeToBlockListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.BlockListNotifications.onSubscribeToBlockListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.BlockListNotifications.onSubscribeToBlockListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.DeepLink.onCrossPlayStatusChanged":
return this.DeepLink.onCrossPlayStatusChanged.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onPickFriendRequest":
return this.DeepLink.onPickFriendRequest.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onCancelFriendRequest":
return this.DeepLink.onCancelFriendRequest.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onTemporaryDisabledSettingsChanged":
return this.DeepLink.onTemporaryDisabledSettingsChanged.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onDisabledByParentalControlChanged":
return this.DeepLink.onDisabledByParentalControlChanged.trigger(t), !0;

case "PhotonJsBindings.FriendListNotifications.onSubscribeToFriendListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.FriendListNotifications.onSubscribeToFriendListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.FriendListNotifications.onSubscribeToFriendListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.FriendsNotificationsService.onStreamNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.FriendsNotificationsService.onStreamNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.FriendsNotificationsService.onStreamNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.GameInvite.onSubscribeToReceivedGameInviteNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.GameInvite.onSubscribeToReceivedGameInviteNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.GameInvite.onSubscribeToReceivedGameInviteNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.GameInvite.onGetReceivedGameInvitesData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.GameInvite.onGetReceivedGameInvitesError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.GameInvite.onGetReceivedGameInvitesEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.GameInvite.onCacheGameInvitesLimitReached":
return this.GameInvite.onCacheGameInvitesLimitReached.trigger(t), !0;

case "PhotonJsBindings.InputBindings.onBindingsChanged":
return this.InputBindings.onBindingsChanged.trigger(t), !0;

case "PhotonJsBindings.InviteListNotifications.onSubscribeToSentInviteListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToSentInviteListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToSentInviteListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToReceivedInviteListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToReceivedInviteListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToReceivedInviteListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.Lobby.onLobbyChanged":
return this.Lobby.onLobbyChanged.trigger(t), !0;

case "PhotonJsBindings.Lobby.onUninvitablePlayersChanged":
return this.Lobby.onUninvitablePlayersChanged.trigger(t), !0;

case "PhotonJsBindings.Lobby.onMemberLeft":
return this.Lobby.onMemberLeft.trigger(t), !0;

case "PhotonJsBindings.Lobby.onMemberJoined":
return this.Lobby.onMemberJoined.trigger(t), !0;

case "PhotonJsBindings.Lobby.onFirstPartyInviteAccepted":
return this.Lobby.onFirstPartyInviteAccepted.trigger(t), !0;

case "PhotonJsBindings.Lobby.onSendEaInvite":
return this.Lobby.onSendEaInvite.trigger(t), !0;

case "PhotonJsBindings.Moderation.onOpenPlayerReporting":
return this.Moderation.onOpenPlayerReporting.trigger(t), !0;

case "PhotonJsBindings.MuteListNotifications.onSubscribeToMuteListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.MuteListNotifications.onSubscribeToMuteListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.MuteListNotifications.onSubscribeToMuteListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.Notifications.onNotificationAllowChanged":
return this.Notifications.onNotificationAllowChanged.trigger(t), !0;

case "PhotonJsBindings.Notifications.onInGamePlayChanged":
return this.Notifications.onInGamePlayChanged.trigger(t), !0;

case "PhotonJsBindings.Party.onPartyChanged":
return this.Party.onPartyChanged.trigger(t), !0;

case "PhotonJsBindings.Party.onLeaderChanged":
return this.Party.onLeaderChanged.trigger(t), !0;

case "PhotonJsBindings.Party.onMemberKicked":
return this.Party.onMemberKicked.trigger(t), !0;

case "PhotonJsBindings.Party.onMemberLeft":
return this.Party.onMemberLeft.trigger(t), !0;

case "PhotonJsBindings.Party.onMemberJoined":
return this.Party.onMemberJoined.trigger(t), !0;

case "PhotonJsBindings.Party.onCreatePartySupportedChanged":
return this.Party.onCreatePartySupportedChanged.trigger(t), !0;

case "PhotonJsBindings.Performance.onNativeRequestedAMemoryPurge":
return this.Performance.onNativeRequestedAMemoryPurge.trigger(t), !0;

case "PhotonJsBindings.Performance.onBlurModeChanged":
return this.Performance.onBlurModeChanged.trigger(t), !0;

case "PhotonJsBindings.PhotonInvite.onUninvitablePlayersChanged":
return this.PhotonInvite.onUninvitablePlayersChanged.trigger(t), !0;

case "PhotonJsBindings.PhotonInvite.onFirstPartyInviteAccepted":
return this.PhotonInvite.onFirstPartyInviteAccepted.trigger(t), !0;

case "PhotonJsBindings.PhotonInvite.onSendEaInvite":
return this.PhotonInvite.onSendEaInvite.trigger(t), !0;

case "PhotonJsBindings.PlatformFriends.onFriendListUpdated":
return this.PlatformFriends.onFriendListUpdated.trigger(t), !0;

case "PhotonJsBindings.PlatformFriends.onBlockListUpdated":
return this.PlatformFriends.onBlockListUpdated.trigger(t), !0;

case "PhotonJsBindings.PlatformPresence.onAppearOfflineChanged":
return this.PlatformPresence.onAppearOfflineChanged.trigger(t), !0;

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsPlayerCardsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsPlayerCardsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsPlayerCardsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsByFirstPartyIdsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsByFirstPartyIdsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsByFirstPartyIdsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFirstPartyIdsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFirstPartyIdsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFirstPartyIdsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsFirstPartyIdsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsFirstPartyIdsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsFirstPartyIdsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPrivacySettingsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPrivacySettingsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPrivacySettingsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onCachePlayerCardsLimitReached":
return this.PlayerCardService.onCachePlayerCardsLimitReached.trigger(t), !0;

case "PhotonJsBindings.PlayerCardService.onCachePlayerCardsByFirstPartyIdsLimitReached":
return this.PlayerCardService.onCachePlayerCardsByFirstPartyIdsLimitReached.trigger(t), 
!0;

case "PhotonJsBindings.PlayerCardService.onCacheFirstPartyIdsLimitReached":
return this.PlayerCardService.onCacheFirstPartyIdsLimitReached.trigger(t), !0;

case "PhotonJsBindings.PlayerList.onPlayerListsChanged":
return this.PlayerList.onPlayerListsChanged.trigger(t), !0;

case "PhotonJsBindings.PlayerList.onPlayerListPersonasChanged":
return this.PlayerList.onPlayerListPersonasChanged.trigger(t), !0;

case "PhotonJsBindings.PlayerList.onPlayerListEmptyStateChanged":
return this.PlayerList.onPlayerListEmptyStateChanged.trigger(t), !0;

case "PhotonJsBindings.PresenceSession.onGetPlayerPresenceData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PresenceSession.onGetPlayerPresenceError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PresenceSession.onGetPlayerPresenceEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PresenceSession.onGetFriendsPresenceData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PresenceSession.onGetFriendsPresenceError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PresenceSession.onGetFriendsPresenceEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PresenceSession.onAttachToPresenceSessionData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PresenceSession.onAttachToPresenceSessionError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PresenceSession.onAttachToPresenceSessionEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PresenceSession.onCachePresenceStatusLimitReached":
return this.PresenceSession.onCachePresenceStatusLimitReached.trigger(t), !0;

case "PhotonJsBindings.StateApi.onStateChanged":
return this.StateApi.onStateChanged.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onSessionHeaderInformationChanged":
return this.Telemetry.onSessionHeaderInformationChanged.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onBootEnd":
return this.Telemetry.onBootEnd.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onBootStart":
return this.Telemetry.onBootStart.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onTelemetryAllowChanged":
return this.Telemetry.onTelemetryAllowChanged.trigger(t), !0;

case "PhotonJsBindings.Voip.onVoipChannelsUpdated":
return this.Voip.onVoipChannelsUpdated.trigger(t), !0;

case "PhotonJsBindings.Voip.onVoipStateUpdated":
return this.Voip.onVoipStateUpdated.trigger(t), !0;
}
return !1;
}));
}
};
(e => {
let t;
var n;
let r, i, o, a, s, l, c, d, u, p, f, h, m, g, y, I, _, b, S, v, T, E, P;
(n = t = e.StreamStatus || (e.StreamStatus = {}))[n.Data = 0] = "Data", n[n.End = 1] = "End", 
n[n.Error = 2] = "Error", (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(r = e.BlockListNotifications || (e.BlockListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(i = e.BlockService || (e.BlockService = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
(n = t = e.PickFriendPlayerInclusion || (e.PickFriendPlayerInclusion = {}))[n.Show = 0] = "Show", 
n[n.Disable = 1] = "Disable", n[n.Hide = 2] = "Hide", (i = r = e.Setting || (e.Setting = {}))[i.CrossPlay = 0] = "CrossPlay", 
i[i.Audio = 1] = "Audio", i[i.Accessibility = 2] = "Accessibility", i[i.FirstPartyParentalVoip = 3] = "FirstPartyParentalVoip", 
i[i.Party = 4] = "Party", i[i.AppearOffline = 5] = "AppearOffline", (a = o = e.ParentalControlSettings || (e.ParentalControlSettings = {}))[a.Voip = 0] = "Voip";
})(o = e.DeepLink || (e.DeepLink = {})), (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(a = e.FriendListNotifications || (e.FriendListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(s = e.Friends || (e.Friends = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.SubscriptionType || (e.SubscriptionType = {}))[n.SUBSCRIPTION_TYPE_UNSPECIFIED = 0] = "SUBSCRIPTION_TYPE_UNSPECIFIED", 
n[n.SUBSCRIPTION_TYPE_BLOCK_LIST = 1] = "SUBSCRIPTION_TYPE_BLOCK_LIST", n[n.SUBSCRIPTION_TYPE_MUTE_LIST = 2] = "SUBSCRIPTION_TYPE_MUTE_LIST", 
n[n.SUBSCRIPTION_TYPE_SENT_INVITE_LIST = 3] = "SUBSCRIPTION_TYPE_SENT_INVITE_LIST", 
n[n.SUBSCRIPTION_TYPE_RECEIVED_INVITE_LIST = 4] = "SUBSCRIPTION_TYPE_RECEIVED_INVITE_LIST", 
n[n.SUBSCRIPTION_TYPE_FRIEND_LIST = 5] = "SUBSCRIPTION_TYPE_FRIEND_LIST", (i = r = e.ListUpdate || (e.ListUpdate = {}))[i.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
i[i.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", i[i.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
i[i.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(l = e.FriendsNotificationsService || (e.FriendsNotificationsService = {})), (e => {
let t;
var n;
(n = t = e.GameInviteNotificationType || (e.GameInviteNotificationType = {}))[n.GAME_INVITE_NOTIFICATION_TYPE_UNSPECIFIED = 0] = "GAME_INVITE_NOTIFICATION_TYPE_UNSPECIFIED", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_EXISTING = 1] = "GAME_INVITE_NOTIFICATION_TYPE_EXISTING", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_ADDED = 2] = "GAME_INVITE_NOTIFICATION_TYPE_ADDED", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_REMOVED = 3] = "GAME_INVITE_NOTIFICATION_TYPE_REMOVED", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_REVOKED = 4] = "GAME_INVITE_NOTIFICATION_TYPE_REVOKED";
})(c = e.GameInvite || (e.GameInvite = {})), (e => {
let t;
var n;
(n = t = e.Action || (e.Action = {}))[n.Primary = 1] = "Primary", n[n.Secondary = 2] = "Secondary", 
n[n.Decline = 3] = "Decline", n[n.OpenActionList = 4] = "OpenActionList", n[n.GoUp = 5] = "GoUp", 
n[n.GoDown = 6] = "GoDown", n[n.GoLeft = 7] = "GoLeft", n[n.GoRight = 8] = "GoRight", 
n[n.NextPage = 9] = "NextPage", n[n.PreviousPage = 10] = "PreviousPage", n[n.Settings = 11] = "Settings", 
n[n.NotificationFocus = 12] = "NotificationFocus", n[n.Reload = 13] = "Reload", 
n[n.ToggleMode = 14] = "ToggleMode", n[n.TogglePhoton = 15] = "TogglePhoton", n[n.LeaveParty = 16] = "LeaveParty", 
n[n.Tertiary = 17] = "Tertiary";
})(d = e.InputBindings || (e.InputBindings = {})), (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(u = e.InviteListNotifications || (e.InviteListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(p = e.Invites || (e.Invites = {})), (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(f = e.MuteListNotifications || (e.MuteListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(h = e.MuteService || (e.MuteService = {})), (e => {
let t;
var n;
(n = t = e.NotificationPosition || (e.NotificationPosition = {}))[n.TopLeft = 0] = "TopLeft", 
n[n.TopRight = 1] = "TopRight", n[n.BottomLeft = 2] = "BottomLeft", n[n.BottomRight = 3] = "BottomRight";
})(m = e.Notifications || (e.Notifications = {})), (e => {
let t;
var n;
(n = t = e.BlurMode || (e.BlurMode = {}))[n.Off = 0] = "Off", n[n.GrabOnce = 1] = "GrabOnce", 
n[n.Live = 2] = "Live";
})(g = e.Performance || (e.Performance = {})), (e => {
let t;
var n;
(n = t = e.InviteType || (e.InviteType = {}))[n.Lobby = 0] = "Lobby", n[n.Party = 1] = "Party";
})(y = e.PhotonInvite || (e.PhotonInvite = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
(n = t = e.PresenceStatus || (e.PresenceStatus = {}))[n.UNKNOWN = 0] = "UNKNOWN", 
n[n.OFFLINE = 1] = "OFFLINE", n[n.ONLINE = 2] = "ONLINE", n[n.CHATTING = 3] = "CHATTING", 
n[n.AWAY = 4] = "AWAY", n[n.NOT_AVAILABLE = 5] = "NOT_AVAILABLE", n[n.DO_NOT_DISTURB = 6] = "DO_NOT_DISTURB", 
n[n.IN_GAME = 7] = "IN_GAME", n[n.LOOKING_FOR_PARTY = 8] = "LOOKING_FOR_PARTY", 
(i = r = e.PlatformFriendState || (e.PlatformFriendState = {}))[i.UNKNOWN = 0] = "UNKNOWN", 
i[i.NONE = 1] = "NONE", i[i.MUTUAL = 2] = "MUTUAL", i[i.INCOMING_REQUEST = 3] = "INCOMING_REQUEST", 
i[i.OUTGOING_REQUEST = 4] = "OUTGOING_REQUEST", (a = o = e.PlatformFriendsServiceState || (e.PlatformFriendsServiceState = {}))[a.UNINITIALIZED = 0] = "UNINITIALIZED", 
a[a.INITIALIZED = 1] = "INITIALIZED", a[a.STARTED_LISTENER = 2] = "STARTED_LISTENER", 
a[a.STOPPED_LISTENER = 3] = "STOPPED_LISTENER";
})(I = e.PlatformFriends || (e.PlatformFriends = {})), (e => {
let t;
var n;
(n = t = e.PrivacyLevel || (e.PrivacyLevel = {}))[n.PRIVACY_LEVEL_UNSPECIFIED = 0] = "PRIVACY_LEVEL_UNSPECIFIED", 
n[n.PRIVACY_LEVEL_PENDING = 1] = "PRIVACY_LEVEL_PENDING", n[n.PRIVACY_LEVEL_DISMISSED = 2] = "PRIVACY_LEVEL_DISMISSED", 
n[n.PRIVACY_LEVEL_NO_ONE = 3] = "PRIVACY_LEVEL_NO_ONE", n[n.PRIVACY_LEVEL_EVERYONE = 4] = "PRIVACY_LEVEL_EVERYONE", 
n[n.PRIVACY_LEVEL_FRIENDS = 5] = "PRIVACY_LEVEL_FRIENDS", n[n.PRIVACY_LEVEL_FRIENDS_OF_FRIENDS = 6] = "PRIVACY_LEVEL_FRIENDS_OF_FRIENDS";
})(_ = e.PlayerCardService || (e.PlayerCardService = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
let s;
var l;
(n = t = e.PlayerSortOrder || (e.PlayerSortOrder = {}))[n.Self = 0] = "Self", n[n.Online = 1] = "Online", 
n[n.InCurrentGame = 2] = "InCurrentGame", n[n.LastOnline = 3] = "LastOnline", n[n.Alphabetic = 4] = "Alphabetic", 
n[n.PlayerCustom1 = 5] = "PlayerCustom1", n[n.PlayerCustom2 = 6] = "PlayerCustom2", 
(i = r = e.SectionFilter || (e.SectionFilter = {}))[i.Online = 0] = "Online", i[i.Offline = 1] = "Offline", 
i[i.PlayerCustom1 = 2] = "PlayerCustom1", i[i.PlayerCustom2 = 3] = "PlayerCustom2", 
i[i.All = 4] = "All", (a = o = e.Icon || (e.Icon = {}))[a.Star = 0] = "Star", a[a.Hexagon = 1] = "Hexagon", 
a[a.Shield = 2] = "Shield", a[a.ClipBoard = 3] = "ClipBoard", a[a.StarShield = 4] = "StarShield", 
a[a.Flag = 5] = "Flag", (l = s = e.Purpose || (e.Purpose = {}))[l.MakeFriends = 0] = "MakeFriends", 
l[l.PlayTogether = 1] = "PlayTogether", l[l.None = 2] = "None";
})(b = e.PlayerList || (e.PlayerList = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.InputType || (e.InputType = {}))[n.INPUT_TYPE_UNSPECIFIED = 0] = "INPUT_TYPE_UNSPECIFIED", 
n[n.INPUT_TYPE_CONTROLLER = 1] = "INPUT_TYPE_CONTROLLER", n[n.INPUT_TYPE_KEYBOARD = 2] = "INPUT_TYPE_KEYBOARD", 
n[n.INPUT_TYPE_MOUSE = 3] = "INPUT_TYPE_MOUSE", n[n.INPUT_TYPE_TOUCHPAD = 4] = "INPUT_TYPE_TOUCHPAD", 
n[n.INPUT_TYPE_MICROPHONE = 5] = "INPUT_TYPE_MICROPHONE", n[n.INPUT_TYPE_CAMERA = 6] = "INPUT_TYPE_CAMERA", 
(i = r = e.Operation || (e.Operation = {}))[i.OPERATION_UNSPECIFIED = 0] = "OPERATION_UNSPECIFIED", 
i[i.OPERATION_UPDATE = 1] = "OPERATION_UPDATE", i[i.OPERATION_REMOVE = 2] = "OPERATION_REMOVE";
})(S = e.PresenceSession || (e.PresenceSession = {})), (e => {
let t;
var n;
(n = t = e.State || (e.State = {}))[n.Open = 0] = "Open", n[n.Closed = 1] = "Closed", 
n[n.ShowingNotification = 2] = "ShowingNotification", n[n.ShowingFocusableNotification = 3] = "ShowingFocusableNotification", 
n[n.FocusedNotification = 4] = "FocusedNotification";
})(v = e.StateApi || (e.StateApi = {})), (e => {
let t;
var n;
(n = t = e.SoundEffect || (e.SoundEffect = {}))[n.ElementHovered = 1] = "ElementHovered", 
n[n.ElementFocused = 2] = "ElementFocused", n[n.ElementAction = 3] = "ElementAction", 
n[n.ElementRadioButtonSelected = 4] = "ElementRadioButtonSelected", n[n.ActionDenied = 5] = "ActionDenied", 
n[n.PageLeft = 6] = "PageLeft", n[n.PageRight = 7] = "PageRight", n[n.NotificationTips = 8] = "NotificationTips", 
n[n.NotificationSystemResponseSuccess = 9] = "NotificationSystemResponseSuccess", 
n[n.NotificationSystemResponseFailure = 10] = "NotificationSystemResponseFailure", 
n[n.NotificationOtherPlayerActivity = 11] = "NotificationOtherPlayerActivity", n[n.NotificationOtherPlayerInvite = 12] = "NotificationOtherPlayerInvite", 
n[n.LayerOpen = 13] = "LayerOpen", n[n.LayerClose = 14] = "LayerClose", n[n.OverlaySlideIn = 15] = "OverlaySlideIn", 
n[n.OverlayModalOpen = 16] = "OverlayModalOpen", n[n.OverlaySlideOut = 17] = "OverlaySlideOut", 
n[n.OverlayModalClose = 18] = "OverlayModalClose";
})(T = e.UserExperience || (e.UserExperience = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
(n = t = e.VoipChannel || (e.VoipChannel = {}))[n.None = 0] = "None", n[n.Party = 1] = "Party", 
n[n.Game = 2] = "Game", (i = r = e.VoipStatus || (e.VoipStatus = {}))[i.Unavailable = 0] = "Unavailable", 
i[i.Disabled = 1] = "Disabled", i[i.Muted = 2] = "Muted", i[i.SelfMuted = 3] = "SelfMuted", 
i[i.Listening = 4] = "Listening", i[i.Speaking = 5] = "Speaking", i[i.None = 0] = "None", 
i[i.Silent = 4] = "Silent", (a = o = e.VoipProfileType || (e.VoipProfileType = {}))[a.DisabledByRestrictions = 1] = "DisabledByRestrictions", 
a[a.DisabledByDefault = 2] = "DisabledByDefault", a[a.EnabledByDefault = 3] = "EnabledByDefault";
})(E = e.Voip || (e.Voip = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
let s;
var l;
let c;
var d;
let u;
var p;
let f;
var h;
let m;
var g;
(n = t = e.XboxPermission || (e.XboxPermission = {}))[n.Unknown = 0] = "Unknown", 
n[n.CommunicateUsingText = 1e3] = "CommunicateUsingText", n[n.CommunicateUsingVideo = 1001] = "CommunicateUsingVideo", 
n[n.CommunicateUsingVoice = 1002] = "CommunicateUsingVoice", n[n.ViewTargetProfile = 1004] = "ViewTargetProfile", 
n[n.ViewTargetGameHistory = 1005] = "ViewTargetGameHistory", n[n.ViewTargetVideoHistory = 1006] = "ViewTargetVideoHistory", 
n[n.ViewTargetMusicHistory = 1007] = "ViewTargetMusicHistory", n[n.ViewTargetExerciseInfo = 1009] = "ViewTargetExerciseInfo", 
n[n.ViewTargetPresence = 1011] = "ViewTargetPresence", n[n.ViewTargetVideoStatus = 1012] = "ViewTargetVideoStatus", 
n[n.ViewTargetMusicStatus = 1013] = "ViewTargetMusicStatus", n[n.PlayMultiplayer = 1014] = "PlayMultiplayer", 
n[n.ViewTargetUserCreatedContent = 1018] = "ViewTargetUserCreatedContent", n[n.BroadcastWithTwitch = 1019] = "BroadcastWithTwitch", 
n[n.WriteComment = 1022] = "WriteComment", n[n.ShareItem = 1024] = "ShareItem", 
n[n.ShareTargetContentToExternalNetworks = 1025] = "ShareTargetContentToExternalNetworks", 
(i = r = e.XblAnonymousUserType || (e.XblAnonymousUserType = {}))[i.Unknown = 0] = "Unknown", 
i[i.CrossNetworkUser = 1] = "CrossNetworkUser", i[i.CrossNetworkFriend = 2] = "CrossNetworkFriend", 
(a = o = e.XblPermissionDenyReason || (e.XblPermissionDenyReason = {}))[a.Unknown = 0] = "Unknown", 
a[a.NotAllowed = 2] = "NotAllowed", a[a.MissingPrivilege = 3] = "MissingPrivilege", 
a[a.PrivilegeRestrictsTarget = 4] = "PrivilegeRestrictsTarget", a[a.BlockListRestrictsTarget = 5] = "BlockListRestrictsTarget", 
a[a.MuteListRestrictsTarget = 7] = "MuteListRestrictsTarget", a[a.PrivacySettingsRestrictsTarget = 9] = "PrivacySettingsRestrictsTarget", 
a[a.CrossNetworkUserMustBeFriend = 12] = "CrossNetworkUserMustBeFriend", (l = s = e.XUserPrivilege || (e.XUserPrivilege = {}))[l.CrossPlay = 185] = "CrossPlay", 
l[l.Clubs = 188] = "Clubs", l[l.Sessions = 189] = "Sessions", l[l.Broadcast = 190] = "Broadcast", 
l[l.ManageProfilePrivacy = 196] = "ManageProfilePrivacy", l[l.GameDvr = 198] = "GameDvr", 
l[l.MultiplayerParties = 203] = "MultiplayerParties", l[l.CloudManageSession = 207] = "CloudManageSession", 
l[l.CloudJoinSession = 208] = "CloudJoinSession", l[l.CloudSavedGames = 209] = "CloudSavedGames", 
l[l.SocialNetworkSharing = 220] = "SocialNetworkSharing", l[l.UserGeneratedContent = 247] = "UserGeneratedContent", 
l[l.Communications = 252] = "Communications", l[l.Multiplayer = 254] = "Multiplayer", 
l[l.AddFriends = 255] = "AddFriends", (d = c = e.XUserPrivilegeOptions || (e.XUserPrivilegeOptions = {}))[d.None = 0] = "None", 
d[d.AllUsers = 1] = "AllUsers", (p = u = e.XUserPrivilegeDenyReason || (e.XUserPrivilegeDenyReason = {}))[p.None = 0] = "None", 
p[p.PurchaseRequired = 1] = "PurchaseRequired", p[p.Restricted = 2] = "Restricted", 
p[p.Banned = 3] = "Banned", p[p.Unknown = 4294967295] = "Unknown", (h = f = e.ResolveXUserPrivilegeWithUiAsyncResult || (e.ResolveXUserPrivilegeWithUiAsyncResult = {}))[h.Resolved = 0] = "Resolved", 
h[h.Aborted = 1] = "Aborted", h[h.FailedToResolve = 2] = "FailedToResolve", h[h.GameUserNoAuth = 3] = "GameUserNoAuth", 
(g = m = e.XGameUiMessageDialogButton || (e.XGameUiMessageDialogButton = {}))[g.First = 0] = "First", 
g[g.Second = 1] = "Second", g[g.Third = 2] = "Third";
})(P = e.XboxPlatform || (e.XboxPlatform = {}));
})(bh || (bh = {}));
var Sh = Ks({
debugName: "layerRevealedState",
default: !1
}), vh = Ks({
debugName: "layerState",
default: bh.StateApi.State.Closed
}), Th = Ks({
debugName: "layerZoomedState",
default: 0
}), Eh = Js({
debugName: "layerZoomedState",
get: function({get: e}) {
return e(Th) > 0;
}
}), Ph = () => {
const e = Rs(Th), t = H.useCallback((() => {
e((e => e + 1));
}), [ e ]), n = H.useCallback((() => {
e((e => Math.max(e - 1, 0)));
}), [ e ]);
return H.useMemo((() => ({
addZoom: t,
removeZoom: n
})), [ t, n ]);
}, {stateMachineState: Oh, useInitStateMachine: Ch, useStateMachine: Nh} = function(e) {
const [t, n] = js({
debugName: e,
create: () => new yh(e)
});
return {
stateMachineState: t,
useStateMachine: n,
useInitStateMachine: (e, t) => Ih(n(), e, t)
};
}("RevealFlow"), [Ah, Lh] = Is("PhotonBindings"), wh = function(e, t) {
const n = lp?.[e];
return n ? bp(n, t) : e;
};
var kh = fs.Input.GamePadInput, Rh = fs.Input.DeviceType;
function xh() {
const e = {
[Rh.Switch]: {
[kh.DPadRight]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-RIGHT"),
[kh.DPadLeft]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-LEFT"),
[kh.DPadUp]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-UP"),
[kh.DPadDown]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-DOWN"),
[kh.LeftJoystickUp]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[kh.LeftJoystickDown]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[kh.LeftJoystickLeft]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[kh.LeftJoystickRight]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[kh.LeftJoystickPress]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[kh.RightJoystickUp]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[kh.RightJoystickDown]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[kh.RightJoystickLeft]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[kh.RightJoystickRight]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[kh.RightJoystickPress]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[kh.FaceButtonTop]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_X"),
[kh.FaceButtonRight]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_A"),
[kh.FaceButtonBottom]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_B"),
[kh.FaceButtonLeft]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_Y"),
[kh.SpecialLeft]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_MINUS"),
[kh.SpecialRight]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_PLUS"),
[kh.ShoulderRight]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_R"),
[kh.ShoulderLeft]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_L"),
[kh.TriggerRight]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_ZR"),
[kh.TriggerLeft]: wh("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_ZL")
},
[Rh.Playstation]: {
[kh.DPadRight]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-RIGHT"),
[kh.DPadLeft]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-LEFT"),
[kh.DPadUp]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-UP"),
[kh.DPadDown]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-DOWN"),
[kh.LeftJoystickUp]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[kh.LeftJoystickDown]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[kh.LeftJoystickLeft]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[kh.LeftJoystickRight]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[kh.LeftJoystickPress]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[kh.RightJoystickUp]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[kh.RightJoystickDown]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[kh.RightJoystickLeft]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[kh.RightJoystickRight]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[kh.RightJoystickPress]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[kh.FaceButtonTop]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_TRIANGLE"),
[kh.FaceButtonRight]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_CIRCLE"),
[kh.FaceButtonBottom]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_CROSS"),
[kh.FaceButtonLeft]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_SQUARE"),
[kh.SpecialLeft]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_TOUCHPAD"),
[kh.SpecialRight]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_OPTIONS"),
[kh.ShoulderRight]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R1"),
[kh.ShoulderLeft]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L1"),
[kh.TriggerRight]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R2"),
[kh.TriggerLeft]: wh("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L2")
},
[Rh.Xbox]: {
[kh.DPadRight]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-RIGHT"),
[kh.DPadLeft]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-LEFT"),
[kh.DPadUp]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-UP"),
[kh.DPadDown]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-DOWN"),
[kh.LeftJoystickUp]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[kh.LeftJoystickDown]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[kh.LeftJoystickLeft]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[kh.LeftJoystickRight]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[kh.LeftJoystickPress]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[kh.RightJoystickUp]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[kh.RightJoystickDown]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[kh.RightJoystickLeft]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[kh.RightJoystickRight]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[kh.RightJoystickPress]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[kh.FaceButtonTop]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_Y"),
[kh.FaceButtonRight]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_B"),
[kh.FaceButtonBottom]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_A"),
[kh.FaceButtonLeft]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_X"),
[kh.SpecialLeft]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_VIEW"),
[kh.SpecialRight]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_MENU"),
[kh.ShoulderRight]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RB"),
[kh.ShoulderLeft]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LB"),
[kh.TriggerRight]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RT"),
[kh.TriggerLeft]: wh("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LT")
}
};
return ({primaryButton: t}) => {
let n;
switch (t.device) {
case Rh.MouseAndKeyboard:
n = t.keyboardKeyLabel;
break;

case Rh.Switch:
case Rh.Playstation:
case Rh.Xbox:
t.gamePadInput && (n = e[t.device][t.gamePadInput]);
}
return n || "";
};
}
var Bh, Dh = () => {
const {Accessibility: e} = Lh(), t = Os(), n = Bu();
H.useEffect((() => {
const r = gt.box(!1), i = async () => {
const t = (await e.getAccessibilitySettings({}))?.enableUiNarration ?? !1;
r.set(t);
}, o = [ n.init(e, xh()), Fn((() => r.get() && t.get(Sh)), (e => {
n.setEnabled(e);
}), {
fireImmediately: !0
}), e.onAccessibilitySettingsChanged.subscribe(i) ];
return i(), () => {
o.forEach((e => e()));
};
}), [ e, t, n ]);
};
var Fh = new WeakSet;
function Mh(e, t) {
return new Promise(((n, r) => {
const i = (e.bindings.hasEvent("Asset", "onAssetLoaded") ? e.bindings.Asset.onAssetLoaded : e.bindings.Utilities.onAssetLoaded).subscribe((({url: e, success: o}) => {
e === t.url && (i(), o ? n() : r(new Error(`Font ${e} couldn't be loaded`)));
}));
e.bindings.Utilities.loadFont(t);
}));
}
async function Uh(e, t, n) {
if (n.find((({url: e, name: n}) => t.url === e || t.name === n))) return;
n.push(t);
const r = Date.now();
try {
await Mh(e, t);
} catch (e) {
return console.error(`Couldn't load font '${t.name}'`, e), {
url: t.url,
duration: Date.now() - r
};
}
}
async function Hh(e, t, n) {
if (Fh.has(e)) throw new Error("Fonts have already been loaded this session");
Fh.add(e);
const r = [], i = [];
if (await Promise.all(t.map((async t => {
const n = await Uh(e, t, r);
n && i.push(n);
}))), n) {
const t = await Uh(e, n, r);
t && i.push(t);
}
return i;
}
var [Vh, Jh] = js({
debugName: "routersState",
create: () => ({})
}), Gh = e => {
const t = jo(), n = Jh();
if (e) {
if (!n[e]) throw new Error(`Could not find history for '${e}' router`);
return n[e];
}
if (!t) throw new Error("Could not find history for unspecified router");
const r = Object.values(n).find((e => e.history === t));
if (!r) throw new Error("Could not find router for parent history");
return r;
}, zh = (e, t) => {
const n = e.get(Vh)[t];
if (!n) throw new Error(`Could not find history for '${t}' router`);
return n;
};
async function jh(e, t, n, r) {
const i = await Promise.all(t.map((e => {
return {
key: e,
router: (t = to({
initialIndex: 0,
initialEntries: [ r?.[e] ?? "/" ]
}), {
history: t,
navigate: e => {
t.location.pathname !== e.pathname && t.push(e);
},
goBack: t.goBack
})
};
var t;
})));
for (const e of i) n[e.key] = e.router;
}
function qh(e) {
const t = Jh()[e];
if (!t) throw new Error(`Missing history for '${e}', make sure it is setup with initRoutersHistory`);
return t.history;
}
function Yh(e, t) {
return zh(e, t).history;
}
var Kh = [], Wh = class {
constructor(e, t) {
this.twinkleHttp = e, this.connectionId = t, this.isSent = !1;
}
send(e, t) {
if (this.isSent) throw new Error("Response already sent for connection ID " + this.connectionId);
const n = t ? this.twinkleHttp.stringToBytes({
data: t
})?.data : void 0;
this.twinkleHttp.sendDebugHttpResponse({
id: this.connectionId,
response: {
statusCode: e,
body: n,
headers: {
"Access-Control-Allow-Origin": "*"
}
}
}), this.isSent = !0;
}
};
function Xh(e, t) {
Kh.push({
method: fs.Http.HttpMethod.Get,
uri: e,
callback: t
});
}
function Qh(e, t) {
Kh.push({
method: fs.Http.HttpMethod.Post,
uri: e,
callback: t
});
}
var $h = class {
constructor(e) {
this.queryString = e;
}
getParsed() {
if (this.parsed) return this.parsed;
if (!this.queryString) return {};
const e = {};
return ("?" === this.queryString[0] ? this.queryString.substr(1) : this.queryString).split("&").forEach((t => {
if ("" !== t) if (-1 !== t.indexOf("=")) {
const [n, r] = t.split("=");
e[n] = decodeURIComponent(r);
} else e[t] = void 0;
})), this.parsed = e, e;
}
hasValues() {
return Object.keys(this.getParsed()).length > 0;
}
toObject() {
return {
...this.getParsed()
};
}
getValue(e) {
return this.getParsed()[e];
}
getString(e) {
return this.getValue(e) || "";
}
getNumber(e) {
try {
const t = parseFloat(this.getString(e));
return Number.isNaN(t) ? void 0 : t;
} catch (e) {
return;
}
}
getBoolean(e) {
const t = this.getString(e);
return [ "true", "1" ].indexOf(t) > -1 || !([ "false", "0" ].indexOf(t) > -1) && void 0;
}
isSet(e) {
return Object.prototype.hasOwnProperty.call(this.getParsed(), e);
}
};
var Zh = {
[fs.Input.MouseEventType.Up]: "onMouseUp",
[fs.Input.MouseEventType.Down]: "onMouseDown",
[fs.Input.MouseEventType.Click]: "onClick",
[fs.Input.MouseEventType.DoubleClick]: "onDoubleClick",
[fs.Input.MouseEventType.Scroll]: "onMouseScroll",
[fs.Input.MouseEventType.Enter]: "onMouseEnter",
[fs.Input.MouseEventType.Leave]: "onMouseLeave",
[fs.Input.MouseEventType.Unknown]: ""
}, em = class {
constructor(e, t, n) {
this.layoutApi = t, this.reconciler = n, this.captureOnEventHandler = void 0, this.captureOnStopHandler = void 0, 
this.onMouseEventBeforePropagation = new os, this.onMouseEventAfterPropagation = new os, 
this.onMouseEventHandled = new os, e.onMouseMove.subscribe((e => {
this.handleMouseMove(e.x, e.y);
})), e.onMouseEvents.subscribe((e => {
this.handleMouseEvents(e.events);
}));
}
handleMouseMove(e, t) {
this.captureOnEventHandler && this.captureOnEventHandler(e, t);
}
handleMouseEvents(e) {
for (let t = 0; t < e.length; t++) {
const n = e[t];
this.captureOnEventHandler && n.event === fs.Input.MouseEventType.Up && this.stopCapture(), 
this.propagateMouseEvent(n);
}
}
stopCapture() {
this.layoutApi.enableMouseMove({
enable: !1
}), this.captureOnEventHandler = void 0, this.captureOnStopHandler && (this.captureOnStopHandler(), 
this.captureOnStopHandler = void 0);
}
captureMouse(e, t) {
this.layoutApi.enableMouseMove({
enable: !0
}), this.captureOnEventHandler = e, this.captureOnStopHandler = t;
}
propagateMouseEvent(e) {
let t = !0;
const n = {
...e,
stopPropagation: () => {
t = !1;
}
};
this.onMouseEventBeforePropagation.trigger(n);
for (let e = 0; e < n.surfaces.length; e++) {
const r = n.surfaces[e], i = Zh[n.event];
if (!i) continue;
const o = this.reconciler.getSurfaceById(r.surfaceId), a = o && o.props[i];
if (a && (a(n, r.surfaceId), this.onMouseEventHandled.trigger(n)), !t) break;
}
t && this.onMouseEventAfterPropagation.trigger(n);
}
}, tm = class {
constructor(e) {
this.kvstore = e;
}
getItem(e) {
return this.kvstore.getString({
key: e
}).then((e => e?.value));
}
getItemSync(e) {
return this.kvstore.getStringSync({
key: e
})?.value;
}
setItem(e, t) {
return this.kvstore.setString({
key: e,
value: t
}).then((() => {}));
}
setItemSync(e, t) {
return this.kvstore.setStringSync({
key: e,
value: t
});
}
removeItem(e) {
return this.kvstore.remove({
key: e
}).then((() => {}));
}
clear() {
return this.kvstore.removeAll({}).then((() => {}));
}
}, nm = class {
constructor(e) {
this.options = e, this.jsBindingEventHandlers = [], this.asyncJsCallResponseHandlers = [], 
this.batchedUpdates = e => e();
}
registerJsBindingEventHandler(e) {
this.jsBindingEventHandlers.push(e);
}
registerAsyncJsCallResponseHandler(e) {
this.asyncJsCallResponseHandlers.push(e);
}
onCppToJsCalls(e) {
this.batchedUpdates((() => {
hr((() => {
for (let t = 0; t < e.length; ++t) {
const n = e[t];
try {
"asyncJsCallResponse" === n[0] ? this.asyncJsCallResponseHandlers.forEach((e => {
e(...n[1]);
})) : "onJsBindingEvent" === n[0] && this.jsBindingEventHandlers.forEach((e => {
e(...n[1]);
}));
} catch (e) {
if (!this.options.onErrorCallback) throw e;
this.options.onErrorCallback(n[0], e);
}
}
}));
}), void 0);
}
setBatchCallback(e) {
this.batchedUpdates = e;
}
}, rm = class extends nm {
constructor(e) {
super(e), is.onScriptCalls = this.onCppToJsCalls.bind(this);
}
start(e) {
e();
}
callJsBindingAsync(e, t, n, r) {
return is.TwinkleNative.bindingCall(t, n, r, e);
}
callJsBindingSync(e, t, n) {
return is.TwinkleNative.bindingCall(e, t, n, void 0);
}
}, im = [ "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "+", "/" ], om = [ 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 62, 255, 255, 255, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 255, 255, 255, 0, 255, 255, 255, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 255, 255, 255, 255, 255, 255, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51 ];
function am(e) {
if (e >= om.length) throw new Error("Unable to parse base64 string.");
const t = om[e];
if (255 === t) throw new Error("Unable to parse base64 string.");
return t;
}
function sm(e) {
let t, n = "";
const r = e.length;
for (t = 2; t < r; t += 3) n += im[e[t - 2] >> 2], n += im[(3 & e[t - 2]) << 4 | e[t - 1] >> 4], 
n += im[(15 & e[t - 1]) << 2 | e[t] >> 6], n += im[63 & e[t]];
return t === r + 1 && (n += im[e[t - 2] >> 2], n += im[(3 & e[t - 2]) << 4], n += "=="), 
t === r && (n += im[e[t - 2] >> 2], n += im[(3 & e[t - 2]) << 4 | e[t - 1] >> 4], 
n += im[(15 & e[t - 1]) << 2], n += "="), n;
}
function lm(e) {
if (e.length % 4 != 0) throw new Error("Unable to parse base64 string.");
const t = e.indexOf("=");
if (-1 !== t && t < e.length - 2) throw new Error("Unable to parse base64 string.");
const n = e.endsWith("==") ? 2 : e.endsWith("=") ? 1 : 0, r = e.length, i = new Uint8Array(r / 4 * 3);
let o;
for (let t = 0, n = 0; t < r; t += 4, n += 3) o = am(e.charCodeAt(t)) << 18 | am(e.charCodeAt(t + 1)) << 12 | am(e.charCodeAt(t + 2)) << 6 | am(e.charCodeAt(t + 3)), 
i[n] = o >> 16, i[n + 1] = o >> 8 & 255, i[n + 2] = 255 & o;
const a = i.length - n;
return a > 0 ? i.subarray(0, a) : i;
}
var cm = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function dm(e) {
let t, n, r, i, o, a, s, l = "", c = 0;
for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); c < e.length; ) i = cm.indexOf(e.charAt(c++)), 
o = cm.indexOf(e.charAt(c++)), a = cm.indexOf(e.charAt(c++)), s = cm.indexOf(e.charAt(c++)), 
t = i << 2 | o >> 4, n = (15 & o) << 4 | a >> 2, r = (3 & a) << 6 | s, l += String.fromCharCode(t), 
64 !== a && (l += String.fromCharCode(n)), 64 !== s && (l += String.fromCharCode(r));
return um(l);
}
function um(e) {
let t = "", n = 0, r = 0, i = 0, o = 0;
for (;n < e.length; ) r = e.charCodeAt(n), r < 128 ? (t += String.fromCharCode(r), 
n++) : r > 191 && r < 224 ? (i = e.charCodeAt(n + 1), t += String.fromCharCode((31 & r) << 6 | 63 & i), 
n += 2) : (i = e.charCodeAt(n + 1), o = e.charCodeAt(n + 2), t += String.fromCharCode((15 & r) << 12 | (63 & i) << 6 | 63 & o), 
n += 3);
return t;
}
var pm = class {}, fm = "__UINT8_B64", hm = "__BASE64", mm = 0;
function gm(e, t) {
if ("string" == typeof t) {
if (t.startsWith(fm)) return lm(t.substr(fm.length));
if (t.startsWith(hm)) return dm(t.substr(hm.length));
if ("__UNDEFINED__" === t) return;
}
return t;
}
function ym(e, t) {
if (t instanceof Uint8Array) {
const e = sm(t);
return fm + e;
}
return t;
}
function Im(e, t, n, r) {
return JSON.stringify({
bindingName: e,
methodName: t,
param: n,
asyncId: r,
requestId: mm++
}, ym);
}
function _m(e) {
try {
const t = JSON.parse(e, gm);
return "string" != typeof t && "_response" in t ? t._response : t;
} catch (t) {
throw console.error("Could not parse sync reply as JSON", t), console.info("Reply:", e), 
new Error("Sync call failed to parse as JSON. See console for more detail.");
}
}
function bm(e) {
try {
return JSON.parse(e, gm);
} catch (t) {
return console.error("Could not parse TwinkleNative websocket message as JSON", t), 
console.info("Websocket message: ", e), [];
}
}
var Sm = class extends nm {
constructor(e, t) {
super(e), this.remoteApiCommunicator = t, this.clientIsOpen = !1, this.queuedPayloads = [];
}
start(e) {
this.remoteApiCommunicator.connectSocket({
onOpen: () => {
this.clientIsOpen = !0, this.queuedPayloads.forEach((e => this.sendPayload(e))), 
this.queuedPayloads.length = 0, e();
},
onError: t => {
this.clientIsOpen = !1, console.error("WebSocket connection closed down.", t), e && e();
},
onMessage: e => {
this.onCppToJsCalls(bm(e));
}
});
}
sendPayload(e) {
if (this.remoteApiCommunicator.isSocketOpen()) try {
this.remoteApiCommunicator.socketSend(e);
} catch (e) {
console.error("Failed to send payload over WebSocket:", e);
}
}
callJsBindingAsync(e, t, n, r) {
const i = Im(t, n, r, e);
this.clientIsOpen ? this.sendPayload(i) : this.queuedPayloads.push(i);
}
callJsBindingSync(e, t, n) {
const r = Im(e, t, n, void 0);
return _m(this.remoteApiCommunicator.xhrSend("/bindingcall/" + t, r));
}
}, vm = class extends pm {
connectSocket(e) {
this.socket = new WebSocket("ws://" + is.location?.host + this.getBaseUrl() + "/ws"), 
this.socket.onopen = e.onOpen, this.socket.onerror = e.onError, this.socket.onmessage = t => e.onMessage(t.data);
}
getBaseUrl() {
if (this.baseUrl) return this.baseUrl;
const e = "/remotescriptengine", t = document.location.pathname, n = t.indexOf(e);
return n > -1 ? this.baseUrl = t.substring(0, n + e.length) : (alert("Could not determine base url from path, using default"), 
this.baseUrl = e), this.baseUrl;
}
isSocketOpen() {
return !!this.socket && this.socket.readyState === this.socket.OPEN;
}
socketSend(e) {
this.socket?.send(e);
}
xhrSend(e, t) {
const n = new is.XMLHttpRequest;
if (n.open("POST", this.getBaseUrl() + e, !1), n.overrideMimeType("text/plain"), 
n.send(t), 200 !== n.status) throw console.error("Got status: ", n.status, " for payload ", t), 
new Error("Sync call returned status " + n.status + ". See console for more detail.");
return n.responseText;
}
};
function Tm(e) {
let t;
if (is.TwinkleNative) t = new rm(e); else if (t = new Sm(e, new vm), void 0 === is.window) throw new Error("Remote engine without window");
return t;
}
function Em(e, t) {
if ("number" == typeof e) t.push(e); else if ("function" == typeof e) t.push(e()); else if (Array.isArray(e)) for (let n = 0, r = e.length; n < r; n++) Em(e[n], t);
}
function Pm(e, t) {
const n = {};
if ("string" == typeof t.text && (n.text = t.text), t.style) {
const r = [];
Em(t.style, r), Oc(e, r), n.styleObjects = r;
}
let r = 0;
return t.onBounds && (r |= 128), t.onClick && (r |= 4), t.onDoubleClick && (r |= 8), 
t.onMouseDown && (r |= 1), t.onMouseUp && (r |= 2), t.onMouseEnter && (r |= 32), 
t.onMouseLeave && (r |= 64), t.onMouseScroll && (r |= 16), r && (n.events = r), 
n;
}
var Om = class {
constructor(e, t, n, r) {
this.reconciler = e, this.surfaceBindings = t, this.tag = n, this.props = r, this.children = [], 
this.reconciler.surfaceByTag[n] = this, this.parsedProps = this.handleProps(r);
}
isDescendantOf(e) {
let t = this.parent;
for (;t; ) {
if (t === e) return !0;
t = t.parent;
}
return !1;
}
nativeInsertChildAt(e, t, n) {
this.surfaceBindings.insertChildAt({
parentSurfaceId: e,
index: t,
childSurface: n
});
}
nativeMoveChild(e, t, n) {
this.surfaceBindings.moveChild({
parentSurfaceId: e,
fromIndex: t,
toIndex: n
});
}
nativeRemoveChild(e, t) {
this.surfaceBindings.removeChild({
parentSurfaceId: e,
index: t
});
}
handleOnSurfaceId(e, t) {
const n = e && e.onSurfaceId, r = t && t.onSurfaceId;
n !== r && ("function" == typeof n && n(null), "function" == typeof r && r(this.tag));
}
getSurfaceId() {
return this.tag;
}
getBounds() {
return this.surfaceBindings.getSurfaceBounds({
surfaceId: this.getSurfaceId()
});
}
getChildObjects() {
return this.children.map((e => e.getObject()));
}
manualUpdate(e) {
this.surfaceBindings.updateSurface({
surface: e,
surfaceId: this.tag
});
}
getObject() {
return {
id: this.tag,
...this.parsedProps,
children: this.getChildObjects()
};
}
commitUpdate(e) {
this.surfaceBindings.replaceUpdateSurface({
surfaceId: this.tag,
surface: e
});
}
commitMount() {
this.handleOnSurfaceId(void 0, this.props);
}
handleProps(e) {
return Pm(this.surfaceBindings, e);
}
receiveProps(e) {
return this.handleOnSurfaceId(this.props, e), this.props = e, this.parsedProps = this.handleProps(e), 
this.parsedProps;
}
finalizeBeforeMount(e, t, n) {
return !!t.onSurfaceId;
}
finalizeBeforeRemoval() {
this.handleOnSurfaceId(this.props, void 0), this.children.forEach((e => {
e.finalizeBeforeRemoval();
})), this.children.length = 0, delete this.reconciler.surfaceByTag[this.tag];
}
appendChild(e) {
const t = this.children.indexOf(e);
t > -1 ? (this.children.splice(t, 1), this.children.push(e), this.nativeMoveChild(this.tag, t, this.children.length - 1)) : (e.parent = this, 
this.children.push(e), this.nativeInsertChildAt(this.tag, this.children.length - 1, e.getObject()));
}
appendChildBeforeMount(e) {
e instanceof Om ? (e.parent = this, this.children.push(e)) : console.error("Unknown child type inside '" + this.tag + "':", e);
}
insertBefore(e, t) {
const n = this.children.indexOf(e);
-1 !== n && this.children.splice(n, 1), e.parent = this;
const r = this.children.indexOf(t);
r > -1 && this.children.splice(r, 0, e), -1 !== n ? this.nativeMoveChild(this.tag, n, r) : this.nativeInsertChildAt(this.tag, r, e.getObject());
}
removeChild(e) {
if (e instanceof Om) {
e.finalizeBeforeRemoval();
const t = this.children.indexOf(e);
t > -1 && (this.children.splice(t, 1), this.nativeRemoveChild(this.tag, t)), e.parent === this && (e.parent = void 0);
} else console.error("Unknown child type inside '" + this.tag + "':", e);
}
}, Cm = {}, Nm = 0;
function Am() {
return Nm++;
}
var Lm = is.queueMicrotask;
"function" != typeof Lm && (Lm = function(e) {
Promise.resolve().then(e).catch((e => setTimeout((() => {
throw e;
}), 0)));
});
var wm = class {
constructor(e) {
this.surfaceBindings = e, this.rootId = void 0, this.surfaceByTag = {};
const t = this;
this.renderer = Qo({
createInstance(n, r, i, o, a) {
const s = "" + Am();
return new Om(t, e, s, "surface" === n ? r : {});
},
appendInitialChild(e, t) {
e.appendChildBeforeMount(t);
},
finalizeInitialChildren: (e, t, n, r, i) => e.finalizeBeforeMount(t, n, r),
getPublicInstance: e => e,
prepareForCommit: e => null,
prepareUpdate: (e, t, n, r, i, o) => n === r ? null : e.receiveProps(r),
resetAfterCommit(e) {},
hideInstance(e) {},
unhideInstance(e, t) {},
getRootHostContext: e => Cm,
getChildHostContext: (e, t, n) => e,
scheduleTimeout: (e, t) => setTimeout(e, t),
cancelTimeout(e) {
clearTimeout(e);
},
scheduleMicrotask(e) {
Lm(e);
},
noTimeout: -1,
isPrimaryRenderer: !0,
supportsMutation: !0,
supportsPersistence: !1,
supportsHydration: !1,
warnsIfNotActing: !0,
appendChild(e, t) {
e.appendChild(t);
},
insertBefore(e, t, n) {
e.insertBefore(t, n);
},
appendChildToContainer(n, r) {
t.rootId = r.tag, e.createRootSurface({
surface: r.getObject()
});
},
insertInContainerBefore(e, t, n) {},
removeChild(e, t) {
e.removeChild(t);
},
removeChildFromContainer(e, n) {
t.rootId === n.tag && (t.rootId = void 0), n.finalizeBeforeRemoval();
},
commitUpdate(e, t, n, r, i, o) {
e.commitUpdate(t);
},
commitMount(e, t, n, r) {
e.commitMount();
},
preparePortalMount(e) {},
clearContainer(e) {},
createTextInstance: (n, r, i, o) => new Om(t, e, "" + Am(), {}),
shouldSetTextContent: (e, t) => !1,
commitTextUpdate(e, t, n) {},
resetTextContent(e) {},
hideTextInstance(e) {},
unhideTextInstance(e, t) {},
supportsMicrotasks: !1,
getCurrentEventPriority: () => Zo.DefaultEventPriority,
getInstanceFromNode: e => null,
beforeActiveInstanceBlur() {},
afterActiveInstanceBlur() {},
prepareScopeUpdate(e, t) {},
getInstanceFromScope: e => null,
detachDeletedInstance(e) {
delete t.surfaceByTag[e.tag];
}
}), this.root = this.renderer.createContainer("Twinkle", Zo.LegacyRoot, null, !0, null, "", (e => {}), null);
}
getSurfaceById(e) {
return e ? this.surfaceByTag[e] : void 0;
}
measureText(e, t) {
const n = [];
Em(e, n), Oc(this.surfaceBindings, n, !0);
const r = this.surfaceBindings.getTextMeasurements({
styleIds: n,
text: t
});
return {
width: r?.width ?? 0,
height: r?.height ?? 0
};
}
};
function km(e, t) {
const {renderer: n, root: r} = e;
let i;
const o = new Promise((e => {
i = e;
}));
return n.updateContainer(t, r, null, (() => {
i?.();
})), o;
}
function Rm(e, t) {
const n = new wm(e);
return t.setBatchCallback(n.renderer.batchedUpdates), e.onSurfaceBoundsChanged.subscribe((e => {
e.changes.forEach((({bounds: e, surfaceId: t}) => {
const r = n.getSurfaceById(t), i = r && r.props.onBounds;
i && i(e, t);
}));
})), n;
}
function xm(e, t) {
is.originalSetTimeout = is.setTimeout, is.originalSetInterval = is.setInterval, 
is.originalClearTimeout = is.clearTimeout, is.originalClearInterval = is.clearInterval, 
is.originalPerformance = is.performance;
let n = 0;
const r = new Map;
is.setTimeout = function(t, i) {
const o = ++n;
return r.set(o, t), e.addTimeout({
timeoutMs: i
}, (() => {
const e = r.get(o);
e && (r.delete(o), e());
})), o;
}, is.setInterval = function(e, t) {
const i = ++n;
r.set(i, e);
const o = function() {
const e = r.get(i);
if (e) {
const n = Date.now();
e();
const r = Math.round(Date.now() - n);
setTimeout(o, Math.max(1, t - r));
}
};
return setTimeout(o, t), i;
}, is.clearInterval = function(e) {
r.delete(e);
}, is.clearTimeout = function(e) {
r.delete(e);
}, t instanceof rm && (is.performance = {
now: () => e.getSystemTimeInMs({})?.timeInMs ?? 0
});
}
var Bm = 1;
function Dm(e) {
let t;
return Array.isArray(e) ? t = {
bezierPoints: {
p1x: e[0],
p1y: e[1],
p2x: e[2],
p2y: e[3]
},
type: fs.Tween.Easing.Bezier
} : e && (t = {
type: fs.Tween.Easing[e]
}), t;
}
var Fm = class {
constructor(e, t) {
this.tweenApi = e, this.initialValue = t, this.hasTweened = !1, this.styleIds = {}, 
this.styleIdCallbacks = {};
}
create() {
return this.id || (this.id = "" + Bm++, this.tweenApi.createTween({
id: {
stringId: this.id
},
initialValue: {
floatValue: this.initialValue
}
}), Fm.idToTween[this.id] = this), this.id;
}
setInitialValue(e) {
this.id ? this.hasTweened || (this.set(e), this.hasTweened = !1) : this.initialValue = e;
}
transition(e, t, n) {
const r = {
id: {
stringId: this.create()
},
from: void 0 !== e ? {
floatValue: e
} : void 0,
to: void 0 !== t ? {
floatValue: t
} : void 0,
duration: n.duration,
speed: n.speed,
easing: Dm(n.easing),
delay: n.delay,
delayValue: void 0 !== n.delayValue ? {
floatValue: n.delayValue
} : void 0,
loopCount: n.loopCount,
loopDelay: n.loopDelay,
rebound: n.rebound,
reboundDelay: n.reboundDelay
};
this.onFinishedCallback = n.onFinished, this.hasTweened = !0, this.tweenApi.updateTweens({
updates: [ r ]
});
}
to(e, t) {
this.transition(void 0, e, t);
}
set(e) {
this.to(e, {
duration: 0
});
}
propStyle(e) {
const t = this.styleIdCallbacks[e];
if (t) return t;
const n = () => {
const t = this.styleIds[e];
if (t) return t;
const n = this.create(), r = Ec({
[e]: n
});
return this.styleIds[e] = r, r;
};
return this.styleIdCallbacks[e] = n, n;
}
onTweenStatus(e) {
if (e === fs.Tween.TweenStatus.Finished) {
const e = this.onFinishedCallback;
e && (this.onFinishedCallback = void 0, e());
}
}
destroy() {
this.id && (delete Fm.idToTween[this.id], this.tweenApi.destroyTween({
stringId: this.id
})), Object.keys(this.styleIds).forEach((e => {
Pc(this.styleIds[e]);
}));
}
}, Mm = Fm;
Mm.idToTween = {};
var Um = class {
constructor(e) {
var t;
this.options = e, this.rootElementWrapper = e => e, this.debugHttp = {
onGet: Xh,
onPost: Qh
}, Cc(), this.nativeApi = Tm(this.options), this.bindings = new fs(this.nativeApi), 
this.bindings.registerBinding(), xm(this.bindings.Utilities, this.nativeApi), (t = this.bindings).Http.onDebugHttpRequest.subscribe((({id: e, request: n}) => {
let r = "", i = "";
if (n.url.indexOf("?") > -1) {
const e = n.url.split("?", 2);
i = e[0], r = e[1];
} else i = n.url;
const o = {
connectionId: e,
...n,
uri: i,
query: new $h(r)
}, a = Kh.find((e => e.method === n.method && e.uri === i)), s = new Wh(t.Http, e);
if (a) try {
a.callback(o, s);
} catch (e) {
console.error("onDebugHttpRequest failed for " + n.url, e), s.send(500, e.message);
} else {
const e = "404 Not Found (sent by JavaScript). Ensure you have registered the correct HTTP method.";
s.send(404, e);
}
})), this.bindings.Tween.onTweenStatus.subscribe((e => {
e.id.stringId && Mm.idToTween[e.id.stringId]?.onTweenStatus(e.status);
})), this.http = Kf(this.bindings.Http), this.localStorage = new tm(this.bindings.KvStore), 
this.reconciler = Rm(this.bindings.Surface, this.nativeApi), this.texture = Wf.create(this.bindings.Texture), 
this.inputHandler = new em(this.bindings.Input, this.bindings.Layout, this.reconciler);
}
loadFont(e, t) {
this.bindings.Utilities.loadFont({
name: e,
url: t
});
}
render(e) {
return km(this.reconciler, this.rootElementWrapper(e));
}
}, Hm = class {}, Vm = fs.Layout.LayoutMode;
var Jm = class {
constructor(e) {
this.http2 = e, this.connections = {};
}
getConnection(e, t) {
return this.connections[e] ? this.connections[e] : this.createConnection(e, t);
}
closeConnection(e) {
this.http2.closeHttp2Connection({
connectionId: e
});
for (const t in this.connections) if (this.connections[t] === e) {
delete this.connections[t];
break;
}
}
createConnection(e, t) {
const n = this.http2.createHttp2Connection({
baseUrl: e,
validateCertificate: t
});
if (void 0 === n?.connectionId) throw new Error("Failed to create connection");
return this.connections[e] = n.connectionId, n.connectionId;
}
}, Gm = "grpc-message", zm = {
te: "trailers",
"content-type": "application/grpc"
};
function jm(e) {
return Object.entries(e).map((([e, t]) => `${e}: ${t}\r\n`)).join("");
}
function qm(e) {
const t = {};
return e.split("\r\n").forEach((e => {
if (!e) return;
const [n, r] = e.split(": ");
t[n] = r;
})), t;
}
var Ym = (e => (e[e.OK = 0] = "OK", e[e.CANCELLED = 1] = "CANCELLED", e[e.UNKNOWN = 2] = "UNKNOWN", 
e[e.INVALID_ARGUMENT = 3] = "INVALID_ARGUMENT", e[e.DEADLINE_EXCEEDED = 4] = "DEADLINE_EXCEEDED", 
e[e.NOT_FOUND = 5] = "NOT_FOUND", e[e.ALREADY_EXISTS = 6] = "ALREADY_EXISTS", e[e.PERMISSION_DENIED = 7] = "PERMISSION_DENIED", 
e[e.RESOURCE_EXHAUSTED = 8] = "RESOURCE_EXHAUSTED", e[e.FAILED_PRECONDITION = 9] = "FAILED_PRECONDITION", 
e[e.ABORTED = 10] = "ABORTED", e[e.OUT_OF_RANGE = 11] = "OUT_OF_RANGE", e[e.UNIMPLEMENTED = 12] = "UNIMPLEMENTED", 
e[e.INTERNAL = 13] = "INTERNAL", e[e.UNAVAILABLE = 14] = "UNAVAILABLE", e[e.DATA_LOSS = 15] = "DATA_LOSS", 
e[e.UNAUTHENTICATED = 16] = "UNAUTHENTICATED", e))(Ym || {});
function Km(e) {
const t = e.reduce(((e, t) => e + t.length), 0), n = new Uint8Array(t);
let r = 0;
return e.forEach((e => {
n.set(e, r), r += e.length;
})), n;
}
function Wm(e, t, n, r, i) {
for (let o = 0; o < i - r; o++) e[t + o] = n[r + o];
}
function Xm(e, t) {
for (let n = 0; n < e.length; n++) e[n] = t;
}
var Qm = class {
constructor() {
this.state = 0, this.compressedFlagBuffer = new Uint8Array(1), this.messageLengthBuffer = new Uint8Array(4), 
this.messageLengthRemaining = 4, this.messageLength = 0, this.messageBuffers = [], 
this.messageRemaining = 0;
}
write(e) {
const t = [];
let n = 0, r = 0;
for (;n < e.length; ) switch (this.state) {
case 0:
Wm(this.compressedFlagBuffer, 0, e, n, n + 1), n++, this.state = 1, Xm(this.messageLengthBuffer, 0), 
this.messageLengthRemaining = 4, this.messageLength = 0, this.messageRemaining = 0, 
this.messageBuffers = [];
break;

case 1:
if (r = Math.min(e.length - n, this.messageLengthRemaining), Wm(this.messageLengthBuffer, 4 - this.messageLengthRemaining, e, n, n + r), 
this.messageLengthRemaining -= r, n += r, 0 === this.messageLengthRemaining) {
if (this.messageLength = (i = this.messageLengthBuffer, new DataView(i.buffer, 0, 4).getUint32(0, !1)), 
this.messageRemaining = this.messageLength, 0 === this.messageRemaining) {
const e = Km([ this.compressedFlagBuffer, this.messageLengthBuffer ]);
t.push(e), this.state = 0;
break;
}
this.state = 2;
}
break;

case 2:
if (r = Math.min(e.length - n, this.messageRemaining), this.messageBuffers.push(e.subarray(n, n + r)), 
this.messageRemaining -= r, n += r, 0 === this.messageRemaining) {
const e = Km([ this.compressedFlagBuffer, this.messageLengthBuffer ].concat(this.messageBuffers));
t.push(e), this.state = 0;
}
break;

default:
throw new Error("Unexpected decoder state");
}
var i;
return t;
}
};
function $m(e) {
const t = new as;
return t.start = () => {
const n = e();
n.onError((e => t.error.trigger(e))), n.onEnd((() => t.end.trigger())), n.onData((e => t.data.trigger(e)));
}, t;
}
var Zm = class {
constructor(e, t, n, r, i, o) {
this.http2 = e, this.connectionId = t, this.serializer = n, this.deserializer = r, 
this.decoder = new Qm, this.receivedMetadata = {}, this.streamId = this.openStream(i, o ?? {}), 
this.unsubscribes = [ e.onRequestData.subscribe((e => {
if (this.isRelevantEvent(e)) {
this.decoder.write(e.data).forEach((e => {
const t = this.decodeMessage(e);
this.dataCallback?.(t);
}));
}
})), e.onRequestHeaders.subscribe((e => {
if (this.isRelevantEvent(e)) {
const t = qm(String.fromCharCode.apply(null, Array.from(e.headerData)));
Object.entries(t).forEach((([e, t]) => {
e in this.receivedMetadata || (e.endsWith("-bin"), this.receivedMetadata[e] = t);
}));
}
})), e.onRequestError.subscribe((e => {
this.isRelevantEvent(e) && (this.errorCallback?.(new Error(e.error)), this.cleanup());
})), e.onRequestEnd.subscribe((e => {
if (this.isRelevantEvent(e)) {
const e = {
status: this.getGrpcStatus(),
message: this.getGrpcMessage(),
metadata: this.receivedMetadata
};
if (0 === e.status) this.endCallback?.(e); else {
const t = `Grpc error received (status = ${e.status}, message = ${e.message})`;
this.errorCallback?.(new Error(t), e);
}
this.cleanup();
}
})) ];
}
onData(e) {
this.dataCallback = e;
}
onError(e) {
this.errorCallback = e;
}
onEnd(e) {
this.endCallback = e;
}
write(e) {
this.sendData(this.encodeMessage(e));
}
endTransmission() {
this.signalEndOfTransmission();
}
isRelevantEvent({connectionId: e, streamId: t}) {
return e === this.connectionId && t === this.streamId;
}
openStream(e, t) {
const n = jm({
...t,
...zm
}), r = this.http2.openStream({
connectionId: this.connectionId,
requestType: fs.Http2.RequestType.Post,
relativeUrl: e,
customHeaders: n
});
if (!r) throw new Error("Failed to open stream");
return r.streamId;
}
sendData(e) {
this.http2.sendData({
connectionId: this.connectionId,
streamId: this.streamId,
data: e
});
}
signalEndOfTransmission() {
this.http2.signalEndOfTransmission({
connectionId: this.connectionId,
streamId: this.streamId
});
}
encodeMessage(e) {
const t = this.serializer.encode(e).finish(), n = new Uint8Array(5 + t.length);
return n[0] = 0, new DataView(n.buffer).setUint32(1, t.length, !1), n.set(t, 5), 
n;
}
decodeMessage(e) {
return this.deserializer.decode(e.subarray(5));
}
getGrpcStatus() {
const e = Number(this.receivedMetadata["grpc-status"]);
return Ym[e] ? e : 2;
}
getGrpcMessage() {
if (Gm in this.receivedMetadata) return decodeURI(this.receivedMetadata["grpc-message"]);
}
cleanup() {
this.unsubscribes.forEach((e => e())), this.unsubscribes.length = 0;
}
}, eg = class {
constructor(e, t, n) {
this.http2 = e, this.baseUrl = t, this.validateCertificate = n, this.connectionProvider = new Jm(this.http2);
}
makeUnaryRequest(e, t, n, r, i) {
return new Promise(((o, a) => {
try {
const s = this.createStream(e, t, n, i);
let l = null;
s.onData((e => {
null !== l && a(new Error("Too many responses received")), l = e;
})), s.onError(a), s.onEnd((() => {
null !== l ? o(l) : a(new Error("Stream closed without a response"));
})), s.write(r), s.endTransmission();
} catch (e) {
a(e);
}
}));
}
makeServerStreamingRequest(e, t, n, r, i) {
const o = this.createStream(e, t, n, i);
return o.write(r), o.endTransmission(), o;
}
makeClientStreamingRequest(e, t, n, r) {
return this.createStream(e, t, n, r);
}
makeBidirectionalStreamingRequest(e, t, n, r) {
return this.createStream(e, t, n, r);
}
createStream(e, t, n, r) {
return void 0 === this.connectionId && (this.connectionId = this.connectionProvider.getConnection(this.baseUrl, this.validateCertificate)), 
new Zm(this.http2, this.connectionId, t, n, e, r);
}
}, tg = {
"ar-sa": "ar_SA-08437efb.json",
"cs-cz": "cs_CZ-dbc5f15a.json",
"da-dk": "da_DK-d686db5c.json",
"de-de": "de_DE-553f666b.json",
"en-us": "en_US-96bdc687.json",
"es-es": "es_ES-ea111e02.json",
"es-mx": "es_MX-2eeb8338.json",
"fi-fi": "fi_FI-c1dea1c6.json",
"fr-fr": "fr_FR-bd8a942d.json",
"it-it": "it_IT-1606f34c.json",
"ja-jp": "ja_JP-eb0ba636.json",
"ko-kr": "ko_KR-608e642f.json",
"nl-nl": "nl_NL-7885c55f.json",
"nb-no": "nb_NO-d6a93a59.json",
"no-no": "nb_NO-d6a93a59.json",
"pl-pl": "pl_PL-73fa401d.json",
"pt-br": "pt_BR-f269d887.json",
"pt-pt": "pt_PT-069d60a5.json",
"ru-ru": "ru_RU-bfd6b093.json",
"sv-se": "sv_SE-67cc66bc.json",
"tr-tr": "tr_TR-b03008b2.json",
"zh-cn": "zh_CN-05b7ba49.json",
"zh-tw": "zh_TW-2645bef7.json",
"zh-hk": "zh_TW-2645bef7.json"
}, ng = new Set(Object.keys(tg)), rg = "en-us";
function ig(e) {
return ng.has(e) ? e : rg;
}
function og(e) {
return !!ng.has(e) && pc.isRTL;
}
function ag(e, t) {
const n = "/translations/" + tg[e], r = pc.bundleUrlUnsafe;
if (!!xc(r)) {
return r.split("/").slice(0, -1).join("/") + n;
}
return "https://artifactory.ea.com/artifactory/eax-generic-local/photon/main/latest" + n;
}
var sg = (e => (e.UNKNOWN = "unknown", e.TEST = "test", e.DEV = "dev", e.LOAD = "load", 
e.CERT = "cert", e.PROD = "prod", e))(sg || {}), lg = [ "prod", "cert" ], cg = {
usesSingleEventForPartyAndLobbyChanges: !1,
setCurrentVoipProfileDoesNotAssert: !1,
hasTertiaryAction: !1
};
var dg = function(e, t) {
const n = t?.appName ?? "NOT_SET", r = t?.gameVersion ?? "0", i = t?.nativeVersion ?? "0", o = ig(e.locale), a = sg[t?.envId ?? "TEST"] ?? "unknown", s = void 0 === t?.partiesEnabled || t.partiesEnabled, l = void 0 !== t?.tightlyCoupledParties && t.tightlyCoupledParties, c = t?.productId ?? "NOT_SET", d = !!t?.playerListsEnabled, u = {
...cg,
...e.featureFlags,
...t?.featureFlags
};
return {
...e,
locale: o,
appName: n,
nativeVersion: i,
environment: a,
isPartyEnabled: s,
isTightlyCoupledParties: l,
productId: c,
gameVersion: r,
playerListsEnabled: d,
featureFlags: u
};
}(pc, is.AppConstants);
function ug(e) {
return "object" == typeof e && null !== e && "telemetryId" in e;
}
var pg = class {
constructor(e, t) {
this.path = e, this.telemetryId = t;
}
link(...e) {
return {
pathname: (t = this.path, n = e[0], void 0 === t && (t = "/"), void 0 === n && (n = {}), 
"/" === t ? t : wo(t)(n, {
pretty: !0
})),
state: this
};
var t, n;
}
createSubRoute(e, t) {
return new pg(`${this.path}${e}`, t);
}
useParams() {
return Yo();
}
static create(e, t) {
return new pg(e, t);
}
static getFromLocation({state: e}) {
if (ug(e)) return e;
}
};
function fg(e, t) {
return pg.create(e, t);
}
var hg = fg("/friends/:photonPlayerId?/:photonSessionId?", "tab_friends"), mg = fg("/friend-requests/:photonPlayerId?", "tab_friend_requests"), gg = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", yg = gg.length;
function Ig(e = 16) {
let t = "";
for (let n = 0; n < e; n++) t += gg.charAt(Math.floor(Math.random() * yg));
return t;
}
function _g(e, t = 100) {
let n;
if (e.length > t) {
const r = e.length - t;
n = e.slice(0, Math.ceil(t / 2)).join("\n"), n += `\n< ...truncated ${r} lines... >\n`, 
n += e.slice(-Math.floor(t / 2)).join("\n");
} else n = e.join("\n");
return n.trim();
}
function bg(e) {
let t, n = 0;
if (!e || !e.length) return n;
for (let r = 0; r < e.length; r++) t = e.charCodeAt(r), n = (n << 5) - n + t, n |= 0;
return n;
}
var Sg = /^\s*at (.*?) \((.*?)(:(\d*)){0,1}\)\s*$/;
function vg(e) {
const t = e.stack?.split("\n") || [], n = [];
for (const e of t) {
const t = e.match(Sg);
if (t) {
const e = "<anonymous>" === t[1] ? null : t[1], r = t[2], i = t[4];
if ("native" === r) continue;
n.push((e ? e + "@" : "") + r + ":" + i);
}
}
return {
mode: "stack",
name: e.name,
message: e.message,
stackString: _g(t),
canonicalStackLines: n,
hash: bg(n.join("\n"))
};
}
function Tg() {
return lg.includes(dg.environment) ? "a96becb9a8b3560fdf2e300f973704b7950eNRAL" : "75dba3e62eb4ccde896a7ec21f6e0177dd84NRAL";
}
function Eg() {
return lg.includes(dg.environment) ? {
accountId: 3594946,
licenseKey: "NRJS-f484133221051994cfd",
applicationId: 1588662197
} : {
accountId: 3594950,
licenseKey: "NRJS-9c2d1c3b2e3c0951a7f",
applicationId: 1588662197
};
}
var Pg = "https://insights-collector.newrelic.com", {accountId: Og, applicationId: Cg, licenseKey: Ng} = Eg(), {environment: Ag, appName: Lg, devicePlatformId: wg, locale: kg, productId: Rg} = dg;
async function xg(e, t, n) {
if (!e || "dev" === e) return;
const r = `${Pg}/v1/accounts/${Og}/events`;
return await t(r, n, {
"Api-Key": e,
"content-type": "application/json"
});
}
var Bg = new Set;
async function Dg(e, t, n, r = "/") {
if (!e || "dev" === e) return;
const i = vg(n);
if ("prod" === dg.environment && Bg.has(i.hash)) return;
Bg.add(i.hash);
const o = {
err: [ {
params: {
message: i.message,
stackHash: i.hash,
exceptionClass: i.name,
request_uri: r,
stack_trace: i.stackString,
releaseIds: "{}",
pageview: 1
},
custom: {
build: "main_51551",
app: Lg.toLowerCase() || Rg,
env: Ag,
platform: wg.toLowerCase(),
locale: kg
},
metrics: {
count: 1
}
} ]
}, a = `https://bam-cell.nr-data.net/jserrors/1/${Ng}`, s = [ "a=" + Cg, "v=main_51551", "rst=" + Date.now(), "ref=" + r, "t=Unnamed%20Transaction", "ck=0", "sa=1" ].join("&");
await t(a + "?" + s, JSON.stringify(o), {
"Api-Key": e,
"content-type": "text/plain"
});
}
var Fg = [ 500, 501, 503, 429 ], {accountId: Mg, applicationId: Ug} = Eg(), Hg = "metric-deviceId", Vg = class {
constructor(e, t) {
this.httpPost = e, this.kvstore = t, this.enabled = !0, this.bootEndCount = 0, this.MAX_BACKOFF_COUNTER = 6, 
this.FLUSH_INTERVAL_IN_MS = 6e4, this.queuedMetrics = [], this.sentPayloads = [], 
this.queueSize = 0, this.maxQueueSize = 2e4, this.nextSendAt = 0, this.backoffCounter = 1, 
this.sessionMetrics = new Set, this.timedMetrics = new Map;
}
get deviceId() {
return this._deviceId || (this._deviceId = this.kvstore.getStringSync({
key: Hg
})?.value, 32 !== this._deviceId?.length && (this._deviceId = Ig(32), this.kvstore.setString({
key: Hg,
value: this._deviceId
}))), this._deviceId;
}
initBootEndListener(e) {
e.subscribe((() => {
this.bootEndCount++;
}));
}
clearDebug() {
this.sentPayloads = [], this.timedMetrics = new Map, this.sessionMetrics = new Set, 
this.clearQueue();
}
refreshSession() {
this.sessionMetrics.clear();
}
setMetricsEnabled(e) {
this.enabled = e, e || (this.clearQueue(), this.clearTimer());
}
get generalInformation() {
return {
deviceId: this.deviceId,
accountId: Mg,
appId: Ug,
eventType: "photonMetric",
productId: dg.productId,
platform: dg.devicePlatformId,
env: dg.environment,
bundle: "main_51551",
game: dg.gameVersion,
locale: dg.locale,
bootEndCount: this.bootEndCount
};
}
startTimer(e) {
if (this.timedMetrics.has(e)) return !1;
this.timedMetrics.set(e, Date.now());
}
stopTimer(e) {
if (!this.timedMetrics.has(e)) return !1;
const t = this.timedMetrics.get(e);
if (t) {
this.timedMetrics.delete(e);
const n = Date.now() - t;
this.addEvent({
metric: e,
duration: n
});
}
}
addSessionEvent(e, t) {
this.sessionMetrics.has(e) || (this.sessionMetrics.add(e), this.addEvent({
metric: e,
value: t
}));
}
addCountEvent(e, t = 1, n) {
this.addEvent({
metric: e,
value: t,
message: n
});
}
addDurationEvent(e, t, n, r) {
this.addEvent({
metric: e,
value: n,
duration: t,
message: r
});
}
addEvent(e) {
if (!this.enabled) return;
const t = {
...this.generalInformation,
...e
}, n = JSON.stringify(t);
this.queueSize += n.length, this.startFlushTimer(), this.queuedMetrics.push(n), 
this.queueSize > this.maxQueueSize && this.flushQueue();
}
async flushQueue() {
if (0 === this.queuedMetrics.length) return;
if (this.backoffCounter > this.MAX_BACKOFF_COUNTER) return this.clearQueue(), void this.clearTimer();
const e = [ ...this.queuedMetrics ];
this.clearQueue(), await this.postEvents(e);
}
clearQueue() {
this.queuedMetrics.length = 0, this.queueSize = 0, this.clearTimer();
}
startFlushTimer() {
if (!this.nextSendTimeout) {
const e = this.FLUSH_INTERVAL_IN_MS * this.backoffCounter;
this.nextSendAt = Date.now() + e, this.nextSendTimeout = setTimeout((() => {
this.clearTimer(), this.flushQueue();
}), e);
}
}
clearTimer() {
this.nextSendTimeout && (clearTimeout(this.nextSendTimeout), this.nextSendTimeout = void 0, 
this.nextSendAt = 0);
}
generatePayload(e) {
return `[${e.join(",")}]`;
}
async postEvents(e) {
const t = this.generatePayload(e);
try {
const e = await xg(Tg(), this.httpPost, t);
!e || Fg.includes(e.statusCode) ? this.backoffCounter++ : this.backoffCounter = 1;
} catch (e) {
this.backoffCounter++;
}
}
}, [Jg, Gg] = js({
debugName: "metricClientState",
create: e => {
const t = e.get(ih);
return new Vg(t.http.post, t.bindings.KvStore);
}
}), [zg] = qs({
debugName: "photonBindingsState"
});
async function jg(e, t) {
await Dg(Tg(), e.http.post, t);
}
function qg() {
const e = mp();
return H.useCallback((async t => jg(e, t)), [ e ]);
}
var Yg = (e => (e.main = "main", e.overlay = "overlay", e))(Yg || {}), Kg = Object.keys(Yg);
function Wg(e) {
return Gh(e);
}
function Xg(e) {
return Gh(e);
}
var Qg = fg("/", void 0), $g = {
overlay: e => e.pathname !== Qg.path
};
var Zg = {
encode: (e, t = ns.Writer.create()) => ("" !== e.id && t.uint32(10).string(e.id), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
id: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.id = n.string(); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
id: ""
};
return t.id = e.id ?? "", t;
}
};
var ey = {
encode: (e, t = ns.Writer.create()) => ("" !== e.id && t.uint32(10).string(e.id), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
id: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.id = n.string(); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
id: ""
};
return t.id = e.id ?? "", t;
}
};
var ty = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.playerId && Zg.encode(e.playerId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.personaId && ey.encode(e.personaId, t.uint32(18).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
playerId: void 0,
personaId: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.playerId = Zg.decode(n, n.uint32());
break;

case 2:
i.personaId = ey.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
playerId: void 0,
personaId: void 0
};
return t.playerId = void 0 !== e.playerId && null !== e.playerId ? Zg.fromPartial(e.playerId) : void 0, 
t.personaId = void 0 !== e.personaId && null !== e.personaId ? ey.fromPartial(e.personaId) : void 0, 
t;
}
};
var ny = {
encode: (e, t = ns.Writer.create()) => (0 !== e.seconds && t.uint32(8).int64(e.seconds), 
0 !== e.nanos && t.uint32(16).int32(e.nanos), t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
seconds: 0,
nanos: 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.seconds = Number(n.int64());
break;

case 2:
i.nanos = n.int32();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
seconds: 0,
nanos: 0
};
return t.seconds = e.seconds ?? 0, t.nanos = e.nanos ?? 0, t;
}
};
function ry(e, t) {
if (void 0 === e) throw new Error(t || "Condition was undefined");
}
bh.PlayerList.Purpose.MakeFriends, bh.PlayerList.Purpose.PlayTogether, bh.PlayerList.Purpose.None, 
bh.PlayerList.Icon.Star, bh.PlayerList.Icon.Shield, bh.PlayerList.Icon.Hexagon, 
bh.PlayerList.Icon.ClipBoard, bh.PlayerList.Icon.StarShield, bh.PlayerList.Icon.Flag, 
bh.PlayerList.SectionFilter.Online, bh.PlayerList.SectionFilter.Offline, bh.PlayerList.SectionFilter.PlayerCustom1, 
bh.PlayerList.SectionFilter.PlayerCustom2, bh.PlayerList.SectionFilter.All, bh.PlayerList.PlayerSortOrder.Online, 
bh.PlayerList.PlayerSortOrder.Self, bh.PlayerList.PlayerSortOrder.InCurrentGame, 
bh.PlayerList.PlayerSortOrder.Alphabetic, bh.PlayerList.PlayerSortOrder.PlayerCustom1, 
bh.PlayerList.PlayerSortOrder.PlayerCustom2, bh.PlayerList.PlayerSortOrder.LastOnline;
var iy = class {
triggerBootEnd(e) {
this.handleEvent("boot_end", e);
}
triggerBootStart(e) {
this.handleEvent("boot_start", e);
}
triggerFriends(e) {
this.handleEvent("friends", e);
}
triggerFriendsPresence(e) {
this.handleEvent("friends_presence", e);
}
triggerGroup(e) {
this.handleEvent("group", e);
}
triggerLogin(e) {
this.handleEvent("login", e);
}
triggerMessage(e) {
this.handleEvent("message", e);
}
triggerMpLink(e) {
this.handleEvent("mp_link", e);
}
triggerPageView(e) {
this.handleEvent("page_view", e);
}
triggerPath(e) {
this.handleEvent("path", e);
}
triggerPlayerGrievance(e) {
this.handleEvent("player_grievance", e);
}
triggerSearch(e) {
this.handleEvent("search", e);
}
triggerSettings(e) {
this.handleEvent("settings", e);
}
triggerSocMessage(e) {
this.handleEvent("soc_message", e);
}
}, oy = [ 500, 501, 503, 429 ], ay = class extends iy {
constructor(e, t, n, r = 30) {
super(), this.httpPost = e, this.pinUrl = t, this.telemetryEnabled = !0, this.MAX_BACKOFF_COUNTER = 6, 
this.FLUSH_INTERVAL_IN_MS = 6e4, this.eventCounter = 0, this.preReadyQueuedEvents = [], 
this.queuedEvents = [], this.sentPayloads = [], this.queueSize = 0, this.nextSendAt = 0, 
this.backoffCounter = 1, this.maxQueueSize = 2e4, this.waitingForGameInit = !0, 
r > 0 ? setTimeout((() => {
this.waitingForGameInit = !1, this.flushPreReadyQueue();
}), 1e3 * r) : this.waitingForGameInit = !1, n && this.updateSessionInfo(n);
}
clearDebug() {
this.sentPayloads = [], this.clearQueue();
}
setGetCustomCoreHeaders(e) {
this.customCoreHeaders = e;
}
updateSessionId() {
this.info && this.updateSessionInfo(this.info);
}
setTelemetryEnabled(e) {
this.telemetryEnabled = e, e || (this.clearQueue(), this.clearTimer());
}
updateSessionInfo(e) {
this.info = e, this.sessionHeaders = {
sid: `${this.info.personaId}_${Date.now()}`,
taxv: "2.0",
tidt: "service",
tid: "photon",
rel: "prod",
v: e.versionNumber,
plat: e.platform,
et: "client_photon",
ts_post: "NOT_SET_YET",
loc: e.locale,
mac: e.macAddress,
clientIP: e.clientIp,
custom: {
edw_master_ttl_id: e.edwMasterTitleId,
offer_id: e.offerId,
mdm_master_ttl_id: e.mdmMasterTitleId,
entitlement_id: e.entitlementId,
tidv: e.buildVersion,
tsid: e.titleLaunchSessionId
},
events: [ "QUEUED_EVENTS_PLACEHOLDER" ]
}, this.flushPreReadyQueue();
}
flushPreReadyQueue() {
if (!this.waitingForGameInit && this.preReadyQueuedEvents.length) {
const e = this.preReadyQueuedEvents.slice();
this.preReadyQueuedEvents.length = 0;
for (const t of e) this.handleEvent(t.eventName, t.params, t.timestamp);
}
}
handleEvent(e, t, n = (new Date).toISOString()) {
if (this.waitingForGameInit) return void this.preReadyQueuedEvents.push({
eventName: e,
params: t,
timestamp: n
});
if (!this.telemetryEnabled) return;
if (!this.info) return void this.preReadyQueuedEvents.push({
eventName: e,
params: t,
timestamp: n
});
const r = {
s: ++this.eventCounter,
en: e,
pidt: "persona",
pid: this.info.personaId,
pidm: {
nucleus: this.info.nucleusId
},
ts_event: n,
custom: this.customCoreHeaders?.() ?? {},
exp_info: this.info.expInfo
}, i = {
...t,
core: r
}, o = JSON.stringify(i);
this.queuedEvents.push(o), this.queueSize += o.length, this.startTimer(), this.queueSize > this.maxQueueSize && this.flushQueue();
}
async flushQueue() {
if (0 === this.queuedEvents.length || !this.sessionHeaders) return;
if (this.backoffCounter > this.MAX_BACKOFF_COUNTER) return this.clearQueue(), void this.clearTimer();
const e = [];
for (;this.queuedEvents.length > 0; ) e.push(this.consumeQueuedEvents());
return this.clearTimer(), this.postEvents(e);
}
consumeQueuedEvents() {
if (this.queueSize < this.maxQueueSize) return this.queueSize = 0, this.queuedEvents.splice(0, this.queuedEvents.length);
const e = [];
let t = 0;
for (const n of this.queuedEvents) if (e.push(n), t += n.length, t > this.maxQueueSize) break;
return this.queuedEvents.splice(0, e.length), this.queueSize -= t, e;
}
generatePayLoad(e) {
if (this.sessionHeaders) {
return JSON.stringify({
...this.sessionHeaders,
ts_post: (new Date).toISOString()
}).replace('"QUEUED_EVENTS_PLACEHOLDER"', e.join(","));
}
return "";
}
clearQueue() {
this.queuedEvents.length = 0, this.queueSize = 0;
}
startTimer() {
if (!this.nextSendTimeout) {
const e = this.FLUSH_INTERVAL_IN_MS * this.backoffCounter;
this.nextSendAt = Date.now() + e, this.nextSendTimeout = setTimeout((() => {
this.clearTimer(), this.flushQueue();
}), e);
}
}
clearTimer() {
this.nextSendTimeout && (clearTimeout(this.nextSendTimeout), this.nextSendTimeout = void 0, 
this.nextSendAt = 0);
}
async postEvents(e) {
await Promise.all(e.map((async e => {
const t = this.generatePayLoad(e);
try {
const e = await this.httpPost(this.pinUrl, t);
oy.includes(e.statusCode) ? this.backoffCounter++ : this.backoffCounter = 1;
} catch (e) {
this.backoffCounter++;
}
})));
}
}, sy = lg.includes(dg.environment) ? "https://pin-river.data.ea.com/pinEvents" : "https://pin-river-test.data.ea.com/pinEvents", [ly, cy] = js({
debugName: "pinClientState",
create: e => {
const t = e.get(ih);
return new ay(t.http.post, sy);
}
});
function dy(e, t) {
const n = e.get(ly), r = e.get(Jg), i = t.Telemetry.getTelemetryAllowed({})?.status ?? !0;
n.setTelemetryEnabled(i), r.setMetricsEnabled(i);
}
async function uy(e, t, n, r) {
const i = Date.now(), o = ag(t);
try {
return void await _p(e, o, n);
} catch (e) {
const t = "" + e;
return console.warn(t), {
message: t,
url: o,
duration: Date.now() - i
};
}
}
async function py(e, t, n = "") {
let r = !0;
const i = [], o = ig(t), a = og(t), s = await uy(e, o, a);
if (s) {
i.push(s);
const t = await uy(e, rg, false);
t && (r = !1, i.push(t));
}
return {
translationsLoaded: r,
errors: i
};
}
var fy = class extends Error {
constructor(e) {
super(e), this.name = "ValidationError", Object.setPrototypeOf(this, fy.prototype);
}
}, hy = class {
getLastErrors() {
return this._errors || [];
}
};
function my(e, t) {
e._errors && e._errors.length > 100 || (e._errors || (e._errors = []), e._errors.push(e._path ? e._path.join(".") + ": " + t : t));
}
function gy(e, t) {
return new Error(e._path ? e._path.join(".") + ": " + t : t);
}
var yy = class extends hy {
constructor(e, t) {
super(), this.attributes = e, this.optionalAttributes = t, this.type = {};
}
parseString(e) {
const t = this;
delete t._errors;
try {
const n = JSON.parse(e);
if (this.validate(n, t)) return n;
} catch (e) {
my(t, "Failed to parse JSON: " + e.message);
}
}
validate(e, t) {
if (t || delete (t = this)._errors, "object" == typeof e) if (null === e) my(t, "Not an object: null"); else if (Array.isArray(e)) my(t, "Not an object: array"); else {
for (const n in this.attributes) {
const r = e[n];
this.attributes[n].validate(r, t);
}
const {optionalAttributes: n} = this;
if (n) for (const r in n) {
const i = n[r], o = e[r];
void 0 !== o && i.validate(o, t);
}
} else my(t, "Not an object: " + typeof e);
return void 0 === t._errors;
}
parse(e, t = {}) {
if ("object" == typeof e) {
if (null === e) throw gy(t, "Not an object: null");
if (Array.isArray(e)) throw gy(t, "Not an object: array");
{
const n = {};
for (const r in this.attributes) {
const i = e[r], o = this.attributes[r];
n[r] = o.parse(i, t);
}
const {optionalAttributes: r} = this;
if (r) for (const i in r) if (Object.prototype.hasOwnProperty.call(e, i)) {
const o = r[i], a = e[i];
void 0 !== a && (n[i] = o.parse(a, t));
}
return n;
}
}
throw gy(t, "Not an object: " + typeof e);
}
}, Iy = class extends hy {
constructor(e, t) {
super(), this.attributes = e, this.defaultValues = t, this.type = {};
}
validate(e) {
throw new Error("JsonObjectWithDefault.validate is not implemented");
}
parse(e, t = {}) {
if ("object" != typeof e || null === e || Array.isArray(e)) return {
...this.defaultValues
};
const n = {};
for (const r in this.attributes) {
const i = e[r], o = this.attributes[r];
try {
n[r] = o.parse(i, t);
} catch {
n[r] = this.defaultValues[r];
}
}
return n;
}
}, _y = class extends hy {
constructor(e) {
super(), this.itemType = e, this.type = [];
}
validate(e, t) {
if (t || delete (t = this)._errors, "object" == typeof e) if (null === e) my(t, "Not an array: null"); else if (Array.isArray(e)) for (let n = 0, r = e.length; n < r; n++) this.itemType.validate(e[n], t); else my(t, "Not an array: object"); else my(t, "Not an object: " + typeof e);
return void 0 === t._errors;
}
parse(e, t = {}) {
if ("object" == typeof e) {
if (null === e) throw gy(t, "Not an array: null");
if (Array.isArray(e)) {
const n = [];
for (let r = 0, i = e.length; r < i; r++) n.push(this.itemType.parse(e[r], t));
return n;
}
throw gy(t, "Not an array: object");
}
throw gy(t, "Not an object: " + typeof e);
}
}, by = class extends hy {
constructor(e) {
super(), this.valueType = e, this.type = {};
}
validate(e, t) {
if (t || delete (t = this)._errors, "object" == typeof e) if (null === e) my(t, "Not an object: null"); else if (Array.isArray(e)) my(t, "Not an object: array"); else for (const n in e) this.valueType.validate(e[n], t); else my(t, "Not an object: " + typeof e);
return void 0 === t._errors;
}
parse(e, t = {}) {
if ("object" == typeof e) {
if (null === e) throw gy(t, "Not an object: null");
if (Array.isArray(e)) throw gy(t, "Not an object: array");
{
const n = {};
for (const r in e) n[r] = this.valueType.parse(e[r], t);
return n;
}
}
throw gy(t, "Not an object: " + typeof e);
}
}, Sy = class extends hy {
constructor(e) {
super(), this.literal = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, e === this.literal || (my(t, "Not literal " + this.literal + ": " + e), 
!1);
}
parse(e, t = {}) {
if (e === this.literal) return this.literal;
throw gy(t, "Not literal " + this.literal + ": " + e);
}
}, vy = class extends hy {
constructor(e, t) {
super(), this.enumType = e, this.excludedValue = t, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, "number" == typeof e && e in this.enumType && e !== this.excludedValue || (my(t, "Not in enum: " + e), 
!1);
}
parse(e, t = {}) {
if ("number" == typeof e && e in this.enumType && e !== this.excludedValue) return e;
throw gy(t, "Not in enum: " + e);
}
}, Ty = class extends hy {
constructor(e, t) {
super(), this.subType = e, this.defaultValue = t, this.type = null;
}
validate(e) {
throw new Error("JsonOrDefault.validate is not implemented");
}
parse(e, t = {}) {
try {
return this.subType.parse(e, t);
} catch (e) {
return this.defaultValue;
}
}
}, Ey = class extends hy {
constructor(e) {
super(), this.validator = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, !!this.validator(e, t, my) || (void 0 === t._errors && my(t, "Invalid custom data"), 
!1);
}
parse(e, t = {}) {
if (this.validator(e, t, my)) return e;
throw gy(t, "Cannot parse");
}
}, Py = class extends hy {
constructor(e, t) {
super(), this.sourceType = e, this.transformer = t, this.type = null;
}
validate(e) {
throw new Error("JsonTransformer.validate is not implemented");
}
parse(e, t = {}) {
return this.transformer(this.sourceType.parse(e, t));
}
}, Oy = class extends hy {
constructor(e) {
super(), this.lazy = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, this.lazy().validate(e, t);
}
parse(e, t = {}) {
return this.lazy().parse(e, t);
}
}, Cy = class extends hy {
constructor(e, t) {
super(), this.a = e, this.b = t, this.type = null;
}
validate(e, t) {
t || delete (t = this)._errors;
const n = {}, r = {};
if (!this.a.validate(e, n) && !this.b.validate(e, r)) {
const e = [ ...n._errors || [], ...r._errors || [] ];
return t._errors ? t._errors.length < 100 && t._errors.push(...e) : t._errors = e, 
!1;
}
return !0;
}
parse(e, t = {}) {
try {
return this.a.parse(e, t);
} catch (n) {
try {
return this.b.parse(e, t);
} catch (e) {}
}
throw gy(t, "Cannot parse");
}
}, Ny = class extends hy {
constructor(e) {
super(), this.subType = e, this.type = void 0;
}
validate(e, t) {
return t || delete (t = this)._errors, !(void 0 !== e && !this.subType.validate(e, t)) || (my(t, "Not undefined: " + e), 
!1);
}
parse(e, t = {}) {
return void 0 === e ? e : this.subType.parse(e, t);
}
}, Ay = class extends hy {
constructor(e) {
super(), this.subType = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, !(null !== e && !this.subType.validate(e, t)) || (my(t, "Not null: " + e), 
!1);
}
parse(e, t = {}) {
return null === e ? e : this.subType.parse(e, t);
}
}, Ly = {
object: (e, t) => new yy(e, t),
map: e => new by(e),
array: e => new _y(e),
string: new class extends hy {
constructor() {
super(...arguments), this.type = "";
}
validate(e, t) {
return t || delete (t = this)._errors, "string" == typeof e || (my(t, "Not a string: " + typeof e), 
!1);
}
parse(e, t = {}) {
if ("string" == typeof e) return e;
throw gy(t, "Not a string: " + typeof e);
}
},
number: new class extends hy {
constructor() {
super(...arguments), this.type = 0;
}
validate(e, t) {
return t || delete (t = this)._errors, "number" == typeof e || (my(t, "Not a number: " + typeof e), 
!1);
}
parse(e, t = {}) {
if ("number" == typeof e) return e;
throw gy(t, "Not a number: " + typeof e);
}
},
boolean: new class extends hy {
constructor() {
super(...arguments), this.type = !1;
}
validate(e, t) {
return t || delete (t = this)._errors, "boolean" == typeof e || (my(t, "Not a boolean: " + typeof e), 
!1);
}
parse(e, t = {}) {
if ("boolean" == typeof e) return e;
throw gy(t, "Not a boolean: " + typeof e);
}
},
undefined: new Sy(void 0),
null: new Sy(null),
literal: e => new Sy(e),
optional: e => new Ny(e),
enum: (e, t) => new vy(e, t),
lazy: e => new Oy(e),
nullable: e => new Ay(e),
custom: e => new Ey(e),
anyObject: new Ey((e => "object" == typeof e)),
transform: (e, t) => new Py(e, t),
orDefault: (e, t) => new Ty(e, t),
union2: (e, t) => new Cy(e, t),
uint8Array: new Ey((e => e instanceof Uint8Array)),
objectWithDefaults: (e, t) => new Iy(e, t)
}, wy = Ly.object({
seconds: Ly.number,
nanos: Ly.number
}), ky = Ly.object({
seconds: Ly.number
}, {
nanos: Ly.number
}), Ry = Ly.object({
id: Ly.string
}), xy = Ly.object({}, {
stringValue: Ly.string,
localizedStringValue: Ry,
integerValue: Ly.number,
floatValue: Ly.number,
timestampValue: wy,
durationValue: ky
}), By = Ly.object({
id: Ly.string
}), Dy = Ly.object({
playerId: Ly.object({
id: Ly.string
}),
personaId: Ly.optional(Ly.object({
id: Ly.string
}))
}), Fy = Ly.object({
id: Dy
}, {
displayName: Ly.string,
nickname: Ly.string
}), My = Ly.object({
id: Ly.string
}), Uy = Ly.object({
id: Ly.string
}), Hy = Ly.object({
id: Ly.string
}), Vy = Ly.object({
id: Ly.string
}), Jy = (e => (e.Xbox = "XBOX", e.Psn = "PSN", e.Nintendo = "NINTENDO", e.Ea = "EA", 
e.Steam = "STEAM", e.Epic = "EPIC", e.AppleGameCenter = "APPLE_GAMECENTER", e.GooglePlay = "GOOGLE_PLAY", 
e))(Jy || {}), Gy = new Set(Object.values(Jy)), zy = e => "string" == typeof e && Gy.has(e), jy = e => ("object" == typeof e ? e.id : e)?.toUpperCase(), qy = e => {
const t = jy(e);
return zy(t);
}, Yy = e => {
const t = jy(e);
return zy(t) ? t : "EA";
};
function Ky(e, t) {
if (!e.validate(t)) throw new fy(e.getLastErrors().join(", "));
return t;
}
var Wy = e => e;
async function Xy(e, t, n) {
const r = n?.transformResponse ?? Wy;
let i;
const o = Date.now();
try {
const a = Ky(t, await e());
n?.debugName, i = {
data: r(a),
loading: !1,
skipped: !1,
timestamp: Date.now(),
duration: Date.now() - o
};
} catch (e) {
i = {
loading: !1,
skipped: !1,
error: e,
timestamp: Date.now(),
duration: Date.now() - o
};
}
return i;
}
function Qy(e, t) {
e.error && t.onError?.(), e.error || e.loading || e.skipped || t.onSuccess?.();
}
function $y() {
return !1;
}
var Zy = class {
constructor(e, t) {
this.id = e, this.props = gt.box(t, {
deep: !1,
equals: $y
});
}
update(e) {
this.props.set({
...e,
timestamp: (new Date).getTime()
});
}
get data() {
return this.props.get().data;
}
get loading() {
return this.props.get().loading;
}
get uninitialized() {
return this.props.get().uninitialized;
}
get error() {
return this.props.get().error;
}
get timestamp() {
return this.props.get().timestamp;
}
toProps() {
return {
...this.props.get()
};
}
invalidateTimestamp() {
Ts((() => {
const e = this.props.get();
-1 !== e.timestamp && this.props.set({
...e,
timestamp: -1
});
}));
}
onBecomeObserved(e) {
return Mn(this.props, e);
}
onBecomeUnobserved(e) {
return Un(this.props, e);
}
isBeingObserved() {
return ii(this.props)?.isBeingObserved_ || !1;
}
observe(e) {
return ar(this.props, (t => {
e(t);
}));
}
}, eI = class {
constructor(e, t) {
this.id = e, this.source = t, this.computedProps = bt((() => t()), {
equals: BI
});
}
get data() {
return this.computedProps.get().data;
}
get loading() {
return this.computedProps.get().loading;
}
get uninitialized() {
return this.computedProps.get().uninitialized;
}
get error() {
return this.computedProps.get().error;
}
get timestamp() {
return this.computedProps.get().timestamp;
}
toProps() {
return {
...this.computedProps.get()
};
}
}, tI = class {
constructor(e) {
this.disposers = [], this.disposersByKey = {}, this._isDisposed = !1, this.disposeAll = () => {
if (!this._isDisposed) {
this._isDisposed = !0, Object.keys(this.disposersByKey).forEach((e => this.dispose(e)));
this.disposers.slice().forEach((e => this.dispose(e)));
}
}, e && this.add(e);
}
add(e) {
this.hasDisposer(e) || this.disposers.push(e);
}
addTimeout(e, t) {
const n = () => clearTimeout(r), r = setTimeout((() => {
e(), this.dispose(n);
}), t);
return this.add(n), () => {
this.dispose(n);
};
}
set(e, t) {
this.disposersByKey[e] = t;
}
hasDisposer(e) {
return "string" == typeof e ? !!this.disposersByKey[e] : this.disposers.indexOf(e) >= 0;
}
dispose(e) {
if ("string" == typeof e) {
const t = this.disposersByKey[e];
t && (delete this.disposersByKey[e], t());
} else {
const t = this.disposers.indexOf(e);
t >= 0 && (this.disposers.splice(t, 1), e());
}
}
get isDisposed() {
return this._isDisposed;
}
hasDisposers() {
return this.disposers.length > 0 || Object.keys(this.disposersByKey).length > 0;
}
}, nI = (e, t) => {
const {onStreamData: n, onStreamEnd: r, onStreamError: i, keepAliveStreamOnDispose: o} = t, a = new tI;
return a.add(e.end.subscribe((() => {
r?.(), a.disposeAll();
}))), n && a.add(e.data.subscribe((e => {
n(e);
}))), i && a.add(e.error.subscribe((e => {
i(e);
}))), o || a.add((() => e.close())), e.start(), a.disposeAll;
};
function rI(e, t) {
let n, r = !1;
const i = () => {
if (0 === t.wait) return e();
n ? t.leading && (r = !0) : (t.leading && e(), n = setTimeout((() => {
n = void 0, t.leading ? r && (r = !1, i()) : e();
}), t.wait));
};
return i.cancel = () => {
n && (clearTimeout(n), n = void 0, r = !1);
}, i;
}
var iI = class {
constructor(e, t) {
this.options = e, this.onBatch = t, this.disposers = new tI, this.pendingItems = new Set([]), 
this.processingItems = new Set([]), this.throttledBatch = rI((() => {
if (!this.pendingItems.size) return;
const e = Array.from(this.pendingItems.values()).splice(0, this.options.maxBatchSize ?? 50);
e.forEach((e => {
this.processingItems.add(e), this.pendingItems.delete(e);
})), this.onBatch(e).then((() => {
e.forEach((e => {
this.processingItems.delete(e);
})), this.throttledBatch();
}));
}), {
wait: this.options.delay ?? 16,
trailing: !0
}), this.addItem = e => {
this.processingItems.has(e) || this.pendingItems.add(e), this.throttledBatch();
}, this.dispose = () => {
this.disposers.disposeAll();
}, this.disposers.add((() => this.throttledBatch.cancel()));
}
}, oI = class {
constructor(e) {
this.onExpireCallback = e, this.atom = Le("ExpirationDate"), this.futureTimestamp = 0, 
this.dispose = () => {
this.timeout && (clearTimeout(this.timeout), this.timeout = void 0), this.futureTimestamp = 0;
};
}
observe() {
this.atom.reportObserved();
}
expireOn(e) {
Jt() && this.atom.reportObserved();
const t = e - Date.now();
return t > 0 && this.scheduleCheck(e), t <= 0;
}
scheduleCheck(e) {
if (!this.timeout || !this.futureTimestamp || e < this.futureTimestamp) {
this.timeout && clearTimeout(this.timeout), this.futureTimestamp = e;
const t = e - Date.now();
this.timeout = setTimeout((() => {
this.futureTimestamp = 0, this.atom.reportChanged(), this.onExpireCallback?.();
}), t);
}
}
}, aI = class {
constructor() {
this.disposers = new tI, this.dispose = () => {
this.disposers.disposeAll();
};
}
}, sI = class extends aI {
constructor(e, t) {
super(), this.fragmentList = e, this.onDemand = t;
const n = Fn((() => this.fragmentList.get()), (e => {
Ts((() => e.filter((e => e.uninitialized)))).forEach(this.onDemand);
}), {
fireImmediately: !0
});
this.disposers.add(n);
}
}, lI = class extends aI {
constructor(e, t, n) {
super(), this.fragmentList = e, this.onExpired = t, this.options = n;
const r = new oI((() => {
Ts((() => e.get().filter((e => !e.loading && e.timestamp && e.isBeingObserved() && r.expireOn(e.timestamp + n.maxAge))))).forEach((e => {
t(e);
}));
}));
this.disposers.add(r.dispose);
const i = Fn((() => this.fragmentList.get()), (e => {
e.forEach((e => {
if (this.disposers.hasDisposer(e.id)) return;
const i = e.onBecomeObserved((() => {
const i = e.timestamp;
!e.loading && i && r.expireOn(i + n.maxAge) && t(e);
})), o = e.observe((({newValue: i}) => {
Ts((() => {
const o = i.timestamp;
e.isBeingObserved() && !i.loading && o && r.expireOn(o + n.maxAge) && t(e);
}));
}));
this.disposers.set(e.id, (() => {
i(), o();
}));
}));
}), {
fireImmediately: !0
});
this.disposers.add(i);
}
}, cI = class {
constructor(e, t, n) {
this.options = e, this.fragments = t, this.fetchFragments = n, this.disposers = new tI, 
this.dispose = () => {
this.disposers.disposeAll();
};
const r = new iI({
maxBatchSize: e.maxBatchSize ?? 50,
delay: e.delay ?? 16
}, n);
this.disposers.add(r.dispose), this.disposers.add(new sI(this.fragments, r.addItem).dispose), 
e.maxAge && this.disposers.add(new lI(this.fragments, r.addItem, {
maxAge: e.maxAge
}).dispose);
}
}, dI = class extends ls {
constructor(e, t, n, r) {
super(e, (e => [ t(e), {
loading: !1,
uninitialized: !1,
error: void 0,
data: e
} ]), {
batchDuration: n ?? 10,
initialBatchDuration: r
});
}
}, uI = class extends ls {
constructor(e, t, n) {
super(e, (e => e), {
batchDuration: t ?? 10,
initialBatchDuration: n
});
}
}, pI = class {
constructor() {
this.disposers = new tI, this.withStream = (e, t) => {
const n = nI(e, t), r = e.end.listenOnce((() => {
this.disposers.dispose(n), this.disposers.dispose(r);
}));
this.disposers.add(n), this.disposers.add(r);
}, this.dispose = () => {
this.disposers.disposeAll();
};
}
};
function fI(e, t) {
e.update({
...t,
data: t.data ?? e.data
});
}
var hI = class extends pI {
constructor(e, t, n, r) {
if (super(), this.options = e, this.applyResult = t, this.updateFragments = n, this.fragments = r, 
this.failedAttempts = 0, this.defaultMaxAttempts = 3, this.defaultRetryDelay = 2e3, 
this.performFetch(), e.refetchInterval) {
const t = setInterval((() => {
this.performFetch();
}), e.refetchInterval);
this.disposers.add((() => {
clearInterval(t);
}));
}
}
async performFetch() {
if (this.disposers.isDisposed) return;
const e = Ts((() => this.fragments.get()));
let t;
this.updateFragments(e, {
loading: !0,
uninitialized: !1
}, !0);
try {
t = await this.options.fetch();
} catch (e) {
t = {
loading: !1,
error: e
};
}
this.disposers.isDisposed || (!t.error && t.data ? (this.failedAttempts = 0, this.applyResult(t.data, this.options.updater ?? fI)) : t.error && (this.failedAttempts++, 
this.hasReachedMaxAttempts() && this.dispose(), this.updateFragments(e, {
error: t.error || new Error("Unable to retrieve data"),
loading: !1,
uninitialized: !1
}), this.hasReachedMaxAttempts() || this.retryFetch()));
}
retryFetch() {
const e = this.options.retryDelay ?? this.defaultRetryDelay;
this.disposers.addTimeout((() => {
this.performFetch();
}), e);
}
hasReachedMaxAttempts() {
const e = this.options.maxFailedAttempts ?? this.defaultMaxAttempts;
return this.failedAttempts >= e;
}
}, mI = class extends pI {
constructor(e, t, n, r) {
super(), this.options = e, this.applyFragmentResults = t, this.updateFragments = n, 
this.fragments = r, this.batchedFetcher = new cI(e, r, this.fetchFragments.bind(this)), 
this.disposers.add(this.batchedFetcher.dispose);
}
async fetchFragments(e) {
if (this.disposers.isDisposed) return;
let t;
this.updateFragments(e, {
loading: !0,
uninitialized: !1
});
try {
t = await this.options.fetch(e.map((e => e.id)));
} catch (e) {
t = [];
}
this.disposers.isDisposed || hr((() => {
this.updateFragments(e, {
loading: !1
}), this.applyFragmentResults(t, this.options.updater ?? fI);
}));
}
}, gI = class extends pI {
constructor(e, t, n, r) {
super(), this.options = e, this.applyFragmentResults = t, this.updateFragments = n, 
this.fragments = r, this.defaultMaxAttempts = 1, this.defaultAttemptTimeout = 2e3, 
this.batchedFetcher = new cI(e, r, this.fetchFragments.bind(this)), this.disposers.add(this.batchedFetcher.dispose);
}
retryFetch(e, t = 1) {
if ((this.options.maxAttempts ?? this.defaultMaxAttempts) > t) {
const n = (this.options.attemptTimeout ?? this.defaultAttemptTimeout) * t;
this.disposers.addTimeout((() => {
this.fetchFragments(e, t + 1);
}), n);
} else this.updateFragments(e, {
loading: !1,
error: new Error("Failed to fetch resource")
});
}
async fetchFragments(e, t = 1) {
if (this.disposers.isDisposed) return;
let n;
this.updateFragments(e, {
loading: !0,
uninitialized: !1
});
try {
n = await this.options.fetch(e?.map((e => e.id)) ?? []);
} catch (e) {
n = {
loading: !1,
skipped: !1,
error: e
};
}
if (!this.disposers.isDisposed) if (n.data) {
const r = new dI(n.data, this.options.toFragmentId, this.options.batchDuration);
this.withStream(r, {
onStreamEnd: () => {
this.updateFragments(e, {
loading: !1
});
},
onStreamError: n => {
this.options?.onStreamError?.(n), this.retryFetch(e, t);
},
onStreamData: t => {
hr((() => {
const n = e.filter((e => t.some((([t]) => e.id === t))));
this.updateFragments(n, {
loading: !1
}), this.applyFragmentResults(t, this.options.updater);
}));
}
});
} else n.error && this.retryFetch(e, t);
}
}, yI = class extends pI {
constructor(e, t, n, r) {
super(), this.options = e, this.applyFragmentResults = t, this.updateFragments = n, 
this.fragments = r, this.fragmentResultsStream = new dI(e.stream, e.toFragmentId, e.batchDuration, e.initialBatchDuration), 
this.withStream(this.fragmentResultsStream, {
onStreamData: t => {
this.applyFragmentResults(t, e.updater);
},
onStreamError: e => {},
onStreamEnd: () => {
this.dispose();
}
});
}
}, II = class {
constructor(e) {
this.createFragment = e, this.atom = Le("ObservableFragmentFactory"), this.items = new Map;
}
set(e, t) {
this.items.set(e, t), this.timeout || (this.timeout = setTimeout((() => {
this.atom.reportChanged(), this.timeout = void 0;
}), 0));
}
get(e) {
const t = this.items.get(e);
if (t) return t;
const n = this.createFragment(e);
return this.set(e, n), n;
}
delete(e) {
this.items.delete(e), this.atom.reportChanged();
}
getMaybeUntracked(e) {
return this.items.get(e);
}
getItems() {
return this.atom.reportObserved(), Array.from(this.items.values());
}
get size() {
return this.atom.reportObserved(), this.items.size;
}
}, _I = class {
constructor(e) {
this.options = e, this.defaultFragment = {
loading: !1,
uninitialized: !0,
data: void 0,
error: void 0
}, this.strategies = new Map, this.applyFragmentResults = (e, t) => {
hr((() => {
Ts((() => {
e.forEach((([e, n]) => {
t(this.get(e), n);
}));
}));
}));
}, this.updateFragments = (e, t, n = !1) => {
hr((() => {
Ts((() => {
e.forEach((e => {
e.update({
...e.toProps(),
...t
});
})), n && Object.assign(this.defaultFragment, {
...t
});
}));
}));
}, this.fragmentsList = bt((() => this.fragments.getItems()), {
equals: we.identity
}), this.fragments = new II((e => new Zy(e, this.defaultFragment)));
}
getStrategyOptions(e, t) {
return t;
}
setStreamStrategy(e, t = "Stream-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new yI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
setSeedStrategy(e, t = "Seed-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new hI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
setOnDemandStrategy(e, t = "OnDemand-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new mI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
setOnDemandStreamStrategy(e, t = "OnDemandStream-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new gI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
useStrategy(e, t) {
return this.removeStrategy(e), this.strategies.set(e, t), () => {
this.removeStrategy(e);
};
}
removeStrategy(e) {
const t = this.strategies.get(e);
t && t.dispose(), this.strategies.delete(e);
}
get(e) {
return this.fragments.get(e);
}
getMaybeUntracked(e) {
return this.fragments.getMaybeUntracked(e);
}
delete(e) {
this.fragments.delete(e);
}
get size() {
return this.fragments.size;
}
}, bI = class extends _I {
getByIds(e) {
return e.map((e => this.get(e)));
}
}, SI = "default", vI = () => SI, TI = class extends _I {
constructor(e) {
super({
delay: 0,
...e
}), this.options = e;
}
get() {
return super.get(SI);
}
getMaybeUntracked() {
return super.getMaybeUntracked(SI);
}
async reseed() {
await Promise.all(Array.from(this.strategies.values()).map((e => e instanceof hI ? e.performFetch() : Promise.resolve())));
}
setStreamStrategy(e, t = "Stream-1") {
if (e) {
const n = {
...e,
toFragmentId: vI
};
return super.setStreamStrategy(n, t);
}
this.removeStrategy(t);
}
setOnDemandStreamStrategy(e, t = "OnDemandStream-1") {
if (e) {
const n = {
...e,
toFragmentId: vI
};
return super.setOnDemandStreamStrategy(n, t);
}
this.removeStrategy(t);
}
};
function EI(e) {
return "hasData" in e;
}
function PI(e) {
return [ [ SI, {
loading: e.loading,
error: e.error,
uninitialized: e.skipped,
data: e.data
} ] ];
}
function OI(e) {
return {
loading: e.loading,
error: e.error,
uninitialized: e.skipped,
data: [ [ SI, {
loading: e.loading,
error: e.error,
uninitialized: e.skipped,
data: e.data
} ] ]
};
}
function CI(e) {
let t, n = !0, r = !1, i = !1;
return e.forEach((e => {
var o;
n = n && (EI(o = e) ? o.hasData : void 0 !== o.data), t = t || e.error, r = r || e.loading, 
i = i || !!e.uninitialized;
})), {
hasData: n,
error: t,
loading: r,
uninitialized: i
};
}
function NI(e) {
const t = [];
return e.forEach((e => {
e.data && t.push(e.data);
})), t;
}
function AI(e) {
return {
...CI(e),
data: NI(e)
};
}
async function LI(e, t = 1e3, n) {
const r = mr((() => void 0 !== e.data || !!e.error), {
timeout: t
});
n?.add(r.cancel);
try {
await r;
} catch (e) {}
return n?.delete(r.cancel), Ts((() => e.toProps()));
}
async function wI(e, t = 1e3, n) {
const r = mr((() => CI(e).hasData), {
timeout: t
});
n?.add(r.cancel);
try {
await r;
} catch (e) {}
return n?.delete(r.cancel), Ts((() => AI(e)));
}
function kI() {
const e = H.useRef({
disposers: new Set,
isMounted: !0
});
return H.useEffect((() => {
const t = e.current;
return () => {
t.isMounted = !1, t.disposers.forEach((e => e()));
};
}), []), e;
}
function RI() {
const e = kI();
return H.useCallback(((t, n) => {
if (e.current.isMounted) return LI(t, n, e.current.disposers);
}), [ e ]);
}
function xI() {
const e = kI();
return H.useCallback(((t, n) => {
if (e.current.isMounted) return wI(t, n, e.current.disposers);
}), [ e ]);
}
function BI(e, t) {
return e.loading === t.loading && e.uninitialized === t.uninitialized && e.timestamp === t.timestamp && e.error === t.error && we.structural(e.data, t.data);
}
var DI = "EA", FI = "1P", MI = "|", UI = e => `${e.eaPlayerId ? DI : FI}|${e.eaPlayerId || e.firstPartyPlayerId || ""}|${e.playerNetworkId}`, HI = e => `EA|${e.eaPlayerId}|${e.playerNetworkId}`;
function VI(e) {
const t = e.split(MI);
if ((t[0] === DI || t[0] === FI) && t[1] && t[2]) return {
prefix: t[0],
playerId: t[1],
playerNetworkId: t[2],
sessionId: t[3]
};
}
function JI(e) {
const t = VI(e);
if (!t) throw new Error("Bad argument: " + e);
const n = {
playerNetworkId: Yy(t.playerNetworkId)
};
return t.prefix === FI ? n.firstPartyPlayerId = t.playerId : n.eaPlayerId = t.playerId, 
t.sessionId && (n.sessionId = t.sessionId), n;
}
function GI(e) {
const t = VI(e);
return !!t && !t.sessionId;
}
function zI(e) {
return e.startsWith(DI) && GI(e);
}
var jI = e => void 0 !== VI(e)?.sessionId, qI = (e, t) => `${"string" == typeof e ? e : UI(e)}|${t}`, YI = e => GI(e) ? e : UI(JI(e)), KI = e => JI(e), WI = e => jI(e) ? {
photonPlayerId: YI(e),
photonSessionId: e
} : {
photonPlayerId: e,
photonSessionId: void 0
}, XI = (e, t) => t || e;
function QI(e) {
return null != e;
}
var $I = () => "XBSX" === pc.devicePlatformId || "XBOXONE" === pc.devicePlatformId, ZI = {
XBOXONE: "XBOX",
XBSX: "XBOX",
PS4: "PSN",
PS5: "PSN",
NX: "NINTENDO",
IOS: "APPLE_GAMECENTER",
ANDROID: "GOOGLE_PLAY",
WEB: "EA",
PC: "EA",
UNKNOWN: "EA"
}, e_ = class extends ss {
constructor(e, t, n = (e => e)) {
super(e, (e => {
t.validate(e) && this.data.trigger(n(e));
}));
}
};
function t_() {
return e => e instanceof as;
}
var n_ = bh.FriendListNotifications.ListUpdate, r_ = bh.PlatformFriends.PresenceStatus, i_ = Ly.enum(r_, r_.UNKNOWN), o_ = (Ly.object({
id: By,
displayName: Ly.string
}), Ly.object({
platformPlayerId: Ly.nullable(Ly.string),
avatarUrl: Ly.nullable(Ly.string),
displayName: Ly.string,
personaId: Ly.string,
playerNetworkId: My
})), a_ = Ly.object({
firstPartyUid: Ly.optional(Ly.object({
value: Ly.string
})),
displayName: Ly.object({
value: Ly.string
}),
personaId: Hy,
playerNetworkId: My,
lastAuthDate: Ly.optional(wy)
}), s_ = Ly.object({
playerDetails: o_
}, {
isPlatformFriend: Ly.nullable(Ly.boolean)
}), l_ = Ly.object({
entityId: Dy,
entries: Ly.array(s_)
}), c_ = Ly.object({
entity: Fy
}), d_ = Ly.object({
userId: Ly.string,
displayName: Ly.string,
presenceStatus: i_
}, {
title: Ly.nullable(Ly.string),
presence: Ly.nullable(Ly.string)
}), u_ = Ly.object({
displayName: Ly.string,
userId: Ly.string
}, {
name: Ly.string,
personaId: Ly.string
}), p_ = (Ly.object({
friends: Ly.array(l_)
}), Ly.object({
friends: Ly.array(c_)
})), f_ = (Ly.array(Ly.object({
photonPlayerId: Ly.custom((e => "string" == typeof e && GI(e)))
})), Ly.object({}, {
domain: Ly.string,
code: Ly.number,
reason: Ly.string,
cause: Ly.lazy((() => f_))
})), h_ = Ly.object({
playerId: By,
personas: Ly.array(a_)
}, {
errorDetail: Ly.optional(f_)
}), m_ = Ly.object({
stream: Ly.custom(t_()),
response: Ly.object({})
}), g_ = Ly.object({
playerId: Ly.optional(By),
personas: Ly.array(a_),
firstPartyUid: Ly.optional(Ly.object({
value: Ly.string
})),
displayName: Ly.optional(Ly.object({
value: Ly.string
})),
errorDetail: Ly.optional(f_)
}), y_ = Ly.object({
stream: Ly.custom(t_()),
response: Ly.object({})
}), I_ = Ly.object({
friendList: Ly.array(d_)
}), __ = Ly.object({
blockList: Ly.array(u_)
}), b_ = Ly.object({
friendListEvent: Ly.object({
addedFriends: Ly.array(d_),
removedFriends: Ly.array(Ly.string),
updatedFriends: Ly.array(d_)
})
}), S_ = Ly.object({
entity: Fy,
createTime: Ly.optional(Ly.nullable(wy))
}), v_ = Ly.object({
blockedPlayers: Ly.optional(Ly.array(S_))
}), T_ = Ly.object({
mutedPlayers: Ly.optional(Ly.array(S_))
}), E_ = (Ly.object({
favoriteFriends: Ly.optional(Ly.array(S_))
}), Ly.enum(n_, n_.LIST_UPDATE_UNSPECIFIED)), P_ = Ly.object({
friend: S_,
listUpdate: E_,
updateTimestamp: wy
}), O_ = (Ly.object({
friendListNotification: P_
}), Ly.object({
blockedPlayer: S_,
listUpdate: E_,
updateTimestamp: wy
})), C_ = (Ly.object({
blockListNotification: O_
}), Ly.object({
mutedPlayer: S_,
listUpdate: E_,
updateTimestamp: wy
})), N_ = (Ly.object({
muteListNotification: C_
}), Ly.object({
entity: Ly.object({
id: Dy,
displayName: Ly.string
}),
createTime: wy,
sourcePlayerNetworkId: Ly.optional(Ly.nullable(My)),
targetPlayerNetworkId: Ly.optional(Ly.nullable(My))
})), A_ = Ly.object({
friendInviteDetails: N_,
listUpdate: E_,
updateTimestamp: wy
}), L_ = Ly.object({}, {
friendListNotification: P_,
sentInviteListNotification: A_,
receivedInviteListNotification: A_,
blockListNotification: O_,
muteListNotification: C_
}), w_ = Ly.object({
stream: Ly.custom(t_()),
response: Ly.object({})
}), k_ = Ly.object({
stream: Ly.custom(t_()),
response: Ly.object({})
}), R_ = Ly.object({
stream: Ly.custom(t_()),
response: Ly.object({})
}), x_ = Ly.object({
stream: Ly.custom(t_()),
response: Ly.object({})
});
function B_(e, t, n) {
e.addEvent({
metric: "stream_error",
value: t,
message: n.message
});
}
function D_(e, t) {
const n = Gg();
H.useEffect((() => t?.error.subscribe((t => {
B_(n, e, t);
}))), [ n, t?.error, e ]);
}
function F_(e, t) {
return "NINTENDO" === t || "STEAM" === t ? e.split("#")[0] : e;
}
function M_(e) {
try {
return rs.BigInt(e).toString(16).padStart(16, "0");
} catch (t) {
return e;
}
}
function U_(e) {
try {
return rs.BigInt("0x" + e).toString(10);
} catch (t) {
return e;
}
}
var H_ = class {
constructor(e, t) {
this.keysAtom = Le("key"), this.atomIndices = new Map, this.atoms = [], this.nextAtomIndex = 0, 
this.items = new Map(e);
for (let e = 0; e < t; e++) this.atoms.push(Le("" + e));
}
getAtom(e) {
let t = this.atomIndices.get(e);
return void 0 === t && (t = this.nextAtomIndex % this.atoms.length, this.atomIndices.set(e, t), 
this.nextAtomIndex++), this.atoms[t];
}
[Symbol.iterator]() {
return this.entries();
}
clear() {
this.items.clear(), this.atomIndices.clear(), hr((() => {
this.atoms.forEach((e => e.reportChanged())), this.keysAtom.reportChanged();
}));
}
delete(e) {
const t = this.items.delete(e);
return t && hr((() => {
this.getAtom(e).reportChanged(), this.keysAtom.reportChanged();
})), this.atomIndices.delete(e), t;
}
entries() {
return this.keysAtom.reportObserved(), this.atoms.forEach((e => e.reportObserved())), 
this.items.entries();
}
forEach(e) {
for (const [t, n] of this.entries()) e(n, t, this);
}
get(e) {
return this.getAtom(e).reportObserved(), this.items.get(e);
}
has(e) {
return this.getAtom(e).reportObserved(), this.items.has(e);
}
keys() {
return this.keysAtom.reportObserved(), this.items.keys();
}
set(e, t) {
return this.items.set(e, t), hr((() => {
this.getAtom(e).reportChanged(), this.keysAtom.reportChanged();
})), this;
}
values() {
return this.atoms.forEach((e => e.reportObserved())), this.items.values();
}
get size() {
return this.keysAtom.reportObserved(), this.items.size;
}
toString() {
return "[object ShardedObservableMap]";
}
get [Symbol.toStringTag]() {
return "Map";
}
replace(e) {
hr((() => {
for (const t of this.items.keys()) {
const n = e.get(t);
void 0 !== n ? this.set(t, n) : this.delete(t);
}
for (const [t, n] of e) this.items.has(t) || this.set(t, n);
}));
}
}, V_ = class {
constructor(e, t) {
this.store = e, this.options = t, this.collection = new bs([]), this.disposers = new tI;
}
has(e) {
return this.collection.has(e);
}
keys() {
return Array.from(this.collection.keys());
}
require(e) {
hr((() => {
Ts((() => {
e.forEach((e => {
this.collection.set(e, void 0);
const t = this.store.getMaybeUntracked(e);
t?.update({
...t.toProps(),
uninitialized: !0
});
}));
}));
})), this.store.getByIds(e);
}
update(e, t) {
this.collection.set(e, t);
}
fragmentIsLoaded(e) {
return !e.uninitialized && !e.loading;
}
waitForFragments(e, t) {
if (0 === e.length) return void t([]);
this.require(e);
const n = () => Ts((() => {
const t = [];
for (const n of e) {
const e = this.collection.get(n);
e && this.fragmentIsLoaded(e) && t.push(e);
}
return t;
})), r = e => Ts((() => {
const t = [];
for (const n of e) {
this.collection.get(n) || t.push(n);
}
return t;
})), i = e => {
let o = !1, a = !1;
const s = mr((() => e.every((e => {
const t = this.collection.get(e);
return t && this.fragmentIsLoaded(t);
}))), (() => {
o = !0, a && this.disposers.dispose(s), t(n()), this.remove(e);
}), {
timeout: 8e3,
onError: l => {
o = !0, a && this.disposers.dispose(s), t(n()), "WHEN_TIMEOUT" === l.message && i(r(e));
}
});
o || (a = !0, this.disposers.add(s));
};
i(e);
}
remove(e) {
hr((() => {
e.forEach((e => {
this.collection.delete(e);
}));
}));
}
dispose() {
this.disposers.disposeAll();
}
}, J_ = [ "EA", "STEAM", "PSN", "XBOX", "NINTENDO" ].map((e => ({
id: Yy(e)
}))), G_ = class extends bI {
constructor() {
super(...arguments), this.playerInfoStream = new as, this.firstPartyUidReverseLookup = new Map, 
this.eaFriendsFragments = new V_(this, {
debugName: this.options?.debugName + "EaFriendsCollection"
}), this.firstPartyFriendFragments = new V_(this, {
debugName: this.options?.debugName + "FirstPartyFriendsCollection"
}), this.eaFriendsFragmentsList = bt((() => this.eaFriendsFragments.keys().map((e => this.fragments.get(e))))), 
this.firstPartyFriendsFragmentsList = bt((() => this.firstPartyFriendFragments.keys().map((e => this.fragments.get(e))))), 
this.generalFragmentsList = bt((() => {
const e = new Set(this.eaFriendsFragments.keys()), t = new Set(this.firstPartyFriendFragments.keys());
return this.fragments.getItems().filter((n => !e.has(n.id) && !t.has(n.id) && zI(n.id)));
})), this.updateFirstPartyFragments = (e, t, n) => {
const r = e.filter((({id: e}) => !!this.getMaybeUntracked(e)));
this.updateFragments(r, t, n);
};
}
setPlayerCardsOnDemandStrategy(e, t, n = "OnDemandStream-1", r) {
if (t && r) {
const i = {
...this.options,
...t
};
return this.useStrategy(n, new gI(this.getStrategyOptions(n, i), this.applyFragmentResults, e, r));
}
this.removeStrategy(n);
}
setEaFriendsStrategy(e) {
return this.setPlayerCardsOnDemandStrategy(this.updateFragments, e, "BatchGetFriendsPlayerCards", this.eaFriendsFragmentsList);
}
setFirstPartyFriendsStrategy(e) {
return this.setPlayerCardsOnDemandStrategy(this.updateFirstPartyFragments, e, "BatchGetPlayerCardsByFirstPartyIds", this.firstPartyFriendsFragmentsList);
}
setGeneralStrategy(e) {
return this.setPlayerCardsOnDemandStrategy(this.updateFragments, e, "BatchGetPlayerCards", this.generalFragmentsList);
}
findByEaPlayerId(e) {
const t = [];
for (let n = 0, r = J_.length; n < r; n++) {
const r = this.fragments.getMaybeUntracked(UI({
eaPlayerId: e,
playerNetworkId: J_[n].id
}));
r && t.push(r);
}
return t;
}
findByEaPlayerIds(e) {
const t = [];
for (let n = 0, r = e.length; n < r; n++) {
const r = e[n];
t.push(...this.findByEaPlayerId(r));
}
return t;
}
fetchPlayerInfosForFriends(e, t) {
const n = e.map((e => HI({
eaPlayerId: e,
playerNetworkId: "EA"
})));
this.eaFriendsFragments.waitForFragments(n, (() => {
t(Ts((() => this.findByEaPlayerIds(e))));
}));
}
fetchPlayerInfosForFirstPartyPseudoIds(e, t) {
this.firstPartyFriendFragments.waitForFragments(e, t);
}
dispose() {
this.eaFriendsFragments.dispose(), this.firstPartyFriendFragments.dispose();
}
}, [z_, j_] = js({
debugName: "playerInfoFragmentStoreState",
create: () => new G_({
debugName: "PlayerInfo"
})
}), [q_, Y_] = js({
debugName: "eaPlayerCommonInfoState",
create: () => new H_([], 50)
});
function K_(e, t) {
const n = e.get(t.eaPlayerId)?.mostRecentlyLoggedInPersonaDate;
(!n || n < t.mostRecentlyLoggedInPersonaDate) && e.set(t.eaPlayerId, {
mostRecentlyLoggedInPersonaDate: t.mostRecentlyLoggedInPersonaDate
});
}
function W_(e) {
return `${e.firstPartyUid}::${e.displayName}`;
}
function X_(e) {
const t = e.split("::");
if (2 === t.length) return {
firstPartyUid: t[0],
displayName: t[1]
};
}
function Q_(e) {
return !!e?.data && "photonPlayerId" in e.data;
}
function $_(e) {
const t = [];
return e.personas.forEach((n => {
const r = Yy(n.playerNetworkId.id), i = "NINTENDO" === r, o = F_(n.displayName.value, r);
let a;
a = i ? n.firstPartyUid?.value ? U_(n.firstPartyUid.value.split(":")[1] || n.firstPartyUid.value) : void 0 : n.firstPartyUid?.value, 
t.push({
eaPlayerId: e.playerId.id,
playerNetworkId: r,
photonPlayerId: UI({
eaPlayerId: e.playerId.id,
playerNetworkId: r
}),
personaId: n.personaId?.id,
lastAuthDate: n.lastAuthDate?.seconds,
firstPartyPlayerId: a,
displayName: o,
displayNameLowerCase: o.toLowerCase()
});
})), e.errorDetail && t.push({
eaPlayerId: e.playerId.id,
playerNetworkId: "EA",
displayName: "",
displayNameLowerCase: "",
photonPlayerId: UI({
eaPlayerId: e.playerId.id,
playerNetworkId: "EA"
}),
errorDetail: e.errorDetail
}), t;
}
function Z_(e) {
return new ss(new e_(e, h_), ((e, t) => {
$_(e).forEach((e => {
t.data.trigger(e);
}));
}));
}
function eb(e) {
return new ss(new e_(e, g_), ((e, t) => {
e.playerId ? $_({
playerId: e.playerId,
personas: e.personas
}).forEach((e => {
t.data.trigger(e);
})) : e.errorDetail && e.firstPartyUid && e.displayName && t.data.trigger({
errorDetail: e.errorDetail,
firstPartyPlayerId: e.firstPartyUid.value,
displayName: e.displayName.value
});
}));
}
function tb(e) {
return !!e?.eaPlayerId;
}
function nb(e) {
const t = [];
return Ts((() => {
for (let n = 0; n < e.length; n++) {
const r = e[n].data;
tb(r) && t.push(r.photonPlayerId);
}
})), t;
}
function rb(e) {
return e.filter(GI).map((e => JI(e).eaPlayerId)).filter(QI);
}
function ib(e, t) {
return !(!t.data || !e.data) && (!(!e.data.firstPartyPlayerId || t.data.firstPartyPlayerId) || !!e.data.lastAuthDate && (!t.data.lastAuthDate || t.data.lastAuthDate < e.data.lastAuthDate));
}
function ob(e, t, n) {
ib(e, t) || (t.data?.errorDetail && !e.data ? e.update({
data: void 0,
error: new Error(t.data?.errorDetail.reason ?? "Missing player card"),
loading: !1,
uninitialized: !1
}) : (fI(e, t), t.data?.eaPlayerId && t.data.lastAuthDate && K_(n, {
eaPlayerId: t.data.eaPlayerId,
mostRecentlyLoggedInPersonaDate: t.data.lastAuthDate
})));
}
var [ab] = js({
debugName: "initializePlayerInfoStoreState",
create: e => {
const {PlayerCardService: t} = e.get(zg), n = e.get(z_), r = e.get(q_), i = e.get(Jg), o = [];
return {
init: () => (o.push(n.setStreamStrategy({
stream: n.playerInfoStream,
toFragmentId: e => UI(e),
updater: (e, t) => {
ob(e, t, r);
}
}), n.setEaFriendsStrategy({
toFragmentId: UI,
fetch: async e => {
const n = rb(e), r = await Xy((() => t.BatchGetFriendsPlayerCards({
playerIds: n.map((e => ({
id: e
}))),
playerNetworkIds: J_
})), m_), i = r.data ? Z_(r.data.stream) : void 0;
return {
...r,
data: i
};
},
batchDuration: 10,
maxBatchSize: 200,
maxAttempts: 3,
attemptTimeout: 2e3,
onStreamError: e => B_(i, "PlayerCardService.batchGetFriendsPlayerCards", e),
updater: (e, t) => {
ob(e, t, r), n.eaFriendsFragments.update(e.id, e);
}
}), n.setFirstPartyFriendsStrategy({
toFragmentId: e => {
return (t = e) && "errorDetail" in t ? W_({
firstPartyUid: e.firstPartyPlayerId,
displayName: e.displayName
}) : UI(e);
var t;
},
fetch: async e => {
const n = e.map((e => X_(e))).filter(QI), r = await Xy((() => {
const e = "NX" === pc.devicePlatformId;
return t.BatchGetPlayerCardsByFirstPartyIds({
firstPartyUidAndDisplayNames: n.map((({firstPartyUid: t, displayName: n}) => {
return {
firstPartyUid: {
value: e ? M_(t) : t
},
displayName: {
value: F_(n, (r = pc.devicePlatformId, ZI[r]))
}
};
var r;
}))
});
}), y_), i = r.data ? eb(r.data.stream) : void 0;
return {
...r,
data: i
};
},
batchDuration: 10,
maxBatchSize: 200,
maxAttempts: 3,
attemptTimeout: 2e3,
onStreamError: e => B_(i, "PlayerCardService.batchGetPlayerCardsByFirstPartyIds", e),
updater: (e, t) => {
if (t.data) {
if (!t.data.firstPartyPlayerId) return void (Q_(t) && ob(e, t, r));
const i = W_({
firstPartyUid: t.data.firstPartyPlayerId,
displayName: t.data.displayName
});
Q_(t) ? t.data?.firstPartyPlayerId && ob(e, t, r) : e.update({
error: new Error("Not EA connected"),
loading: !1,
uninitialized: !1
}), n.firstPartyFriendFragments.has(i) && n.firstPartyFriendFragments.update(i, e);
}
}
}), n.setGeneralStrategy({
toFragmentId: UI,
fetch: async e => {
const n = rb(e), r = await Xy((() => t.BatchGetPlayerCards({
playerIds: n.map((e => ({
id: e
}))),
playerNetworkIds: J_
})), m_), i = r.data ? Z_(r.data.stream) : void 0;
return {
...r,
data: i
};
},
batchDuration: 10,
maxBatchSize: 200,
maxAttempts: 3,
attemptTimeout: 2e3,
onStreamError: e => B_(i, "PlayerCardService.batchGetPlayerCards", e),
updater: (e, t) => {
ob(e, t, r);
}
})), n),
dispose: () => {
o.forEach((e => e?.()));
}
};
}
});
function sb(e) {
return e.get(ab).init();
}
var lb = Ly.object({
tokenInfo: Ly.object({
userId: Ly.string,
productId: Ly.optional(Ly.nullable(Ly.string)),
isUnderage: Ly.optional(Ly.boolean),
ageGroup: Ly.optional(Ly.string),
accessToken: Ly.optional(Ly.string)
}),
personaInfo: Ly.object({
personaId: Ly.string,
displayName: Ly.string,
devicePlatformId: Uy,
playerNetworkId: My
})
});
function cb(e) {
const t = Yy(e.personaInfo.playerNetworkId), n = F_(e.personaInfo.displayName, t);
return {
tokenInfo: {
userId: e.tokenInfo.userId,
productId: e.tokenInfo.productId ?? void 0,
isUnderage: e.tokenInfo.isUnderage ?? !1,
ageGroup: e.tokenInfo.ageGroup,
accessToken: e.tokenInfo.accessToken
},
personaInfo: {
...e.personaInfo,
displayName: n,
playerNetworkId: t,
devicePlatformId: dc(e.personaInfo.devicePlatformId)
},
photonPlayerId: UI({
eaPlayerId: e.tokenInfo.userId,
playerNetworkId: t
})
};
}
async function db(e, t, n) {
const {data: r, error: i} = await Xy((async () => {
const [t, n] = await Promise.all([ e.getTokenInfo({}), e.getPersonaInfo({}) ]);
return {
...t,
...n
};
}), lb, {
transformResponse: cb
});
if (!r) return {
error: i || new Error("Failed to fetch identity")
};
const o = sb(t), a = Date.now();
await LI(o.get(r.photonPlayerId), 1e4);
const s = r.tokenInfo.userId, l = o.findByEaPlayerId(s), {data: c, error: d} = await wI(l, 1e4);
if (!c.length) {
n?.addEvent({
eventType: "photon_init_user_personas_error",
duration: Date.now() - a,
message: d?.message || "Failed to fetch personas"
});
const e = r.personaInfo.playerNetworkId;
return {
data: {
...r,
playerNetworkIds: "EA" !== e ? [ e, "EA" ] : [ e ]
}
};
}
return {
data: {
...r,
playerNetworkIds: c.map((e => e.playerNetworkId))
}
};
}
function ub(e) {
const {Party: t} = e;
return e.hasMethod("Party", "isCreatePartySupportedAsync") ? t.isCreatePartySupportedAsync({}) : Promise.resolve(t.isCreatePartySupported({}));
}
var [pb, fb] = function() {
const e = {
availableSettings: void 0,
isFirstPartyAppearOfflineSupported: void 0,
crossplayCompatiblePlatforms: void 0,
partiesAlwaysAvailable: void 0,
isChild: void 0,
isTeen: void 0,
defaultNotificationPosition: void 0
};
function t(t) {
const n = t.DeepLink.getSettingsAvailability({});
e.availableSettings = n?.availableSettings ?? [], e.isFirstPartyAppearOfflineSupported = !(!t.hasMethod("PlatformPresence", "isAppearOfflineSupported") || !t.PlatformPresence.isAppearOfflineSupported({})?.available);
}
function n(t) {
if (t.hasMethod("DeepLink", "getCrossPlayPlatformCompatibility")) {
const n = (t.DeepLink.getCrossPlayPlatformCompatibility({})?.compatiblePlatforms ?? []).map(dc);
e.crossplayCompatiblePlatforms = new Set(n), e.crossplayCompatiblePlatforms.size && !e.crossplayCompatiblePlatforms.has(dg.devicePlatformId) && e.crossplayCompatiblePlatforms.add(dg.devicePlatformId);
} else e.crossplayCompatiblePlatforms = new Set;
}
async function r(t) {
if (!dg.isPartyEnabled) return void (e.partiesAlwaysAvailable = !1);
const n = t.hasMethod("Party", "isCreatePartySupported");
e.partiesAlwaysAvailable = !!n && ((await ub(t))?.partySupport.isSupported ?? !1);
}
async function i(t) {
const {Identity: n} = t, r = (await (n?.getTokenInfo({})))?.tokenInfo;
e.isChild = !(!r || !r.isUnderage && "CHILD" !== r.ageGroup), e.isTeen = "TEEN" === r?.ageGroup;
}
function o(t) {
t.hasMethod("Notifications", "getDefaultNotificationPosition") ? e.defaultNotificationPosition = t.Notifications.getDefaultNotificationPosition({})?.defaultPosition ?? null : e.defaultNotificationPosition = null;
}
return [ new Proxy(e, {
get(...e) {
const [t, n] = e;
if ("string" != typeof n || void 0 === t[n]) throw new Error(`PhotonBindingsConstants for "${n.toString()}" is not initiated`);
return Reflect.get(...e);
}
}), async function(e) {
t(e), n(e), o(e), await Promise.all([ r(e), i(e) ]);
} ];
}(), [hb, mb] = qs({
debugName: "userState"
}), gb = e => e.get(hb);
function yb() {
return mb().tokenInfo.userId;
}
function Ib(e, t) {
const {eaPlayerId: n} = JI(e);
return {
isCurrentEaUser: t.tokenInfo.userId === n,
isCurrentPhotonUser: t.photonPlayerId === e
};
}
function _b(e) {
return Ib(e, mb());
}
function bb(e, t) {
return Ib(t, e(hb));
}
var Sb = () => pb.isChild || pb.isTeen, vb = "0zjw", Tb = "01e75742-3d23-c703-14ac-54c9d34006e2", Eb = "dx3a", Pb = "y88j", Ob = new Set([ Tb, Eb, Pb ]), Cb = new Set([ Eb, vb ]), Nb = new Set([ Eb, Pb ]);
var Ab = function({productId: e, gameVersion: t, devicePlatformId: n}) {
const r = "NX" === n && !Cb.has(e), i = Ob.has(e), o = t.indexOf("beta") > -1;
return {
betaWatermark: Nb.has(e) && o,
legacySimplifiedPlatformRepresentations: e === Tb,
preTranslatedRichPresence: i,
disableFirstPartyFriends: r,
supportsUnfinishedFeatures: e === vb,
disableFTUE: e === Pb,
isPlatformFriendsListenerBroken: e === Tb
};
}(dg), Lb = {
"PhotonJsBindings.Party.getParty": !1,
"PhotonJsBindings.Party.createParty": !1,
"PhotonJsBindings.Party.joinParty": !0,
"PhotonJsBindings.Party.leaveParty": !1,
"PhotonJsBindings.Party.setPartyLeader": !1,
"PhotonJsBindings.Party.kickPartyMember": !1,
"PhotonJsBindings.Party.isPartySupported": !1,
"PhotonJsBindings.Party.isCreatePartySupportedAsync": !1,
"PhotonJsBindings.Lobby.getLobby": !1,
"PhotonJsBindings.Lobby.joinLobby": !0,
"PhotonJsBindings.Lobby.filterUninvitablePlayers": !1,
"PhotonJsBindings.Lobby.prepareInvite": !1,
"PhotonJsBindings.PhotonInvite.prepareInvite": !1,
"PhotonJsBindings.PhotonInvite.filterUninvitablePlayers": !1,
"PhotonJsBindings.Voip.mutePlayer": !1,
"PhotonJsBindings.Voip.unmutePlayer": !1,
"PhotonJsBindings.Voip.setMutedPlayers": !1,
"PhotonJsBindings.Voip.getVoipState": !1,
"PhotonJsBindings.Voip.setActiveVoipChannel": !1,
"PhotonJsBindings.Voip.getVoipChannels": !1,
"PhotonJsBindings.InputBindings.setExclusiveMouseRegion": !1,
"PhotonJsBindings.PlatformFriends.startListener": !0,
"PhotonJsBindings.PlatformFriends.stopListener": !0,
"PhotonJsBindings.PlatformFriends.getState": !0,
"PhotonJsBindings.PlatformFriends.getFriendList": !0,
"PhotonJsBindings.PlatformFriends.getBlockList": !0,
"PhotonJsBindings.PlatformFriends.addFriend": !0,
"PhotonJsBindings.PlatformFriends.removeFriend": !0,
"PhotonJsBindings.PlatformFriends.addBlock": !0,
"PhotonJsBindings.PlatformFriends.removeBlock": !0,
"PhotonJsBindings.DeepLink.invokePlayerActionAsync": !1,
"PhotonJsBindings.DeepLink.openFirstPartyProfileAsync": !1,
"PhotonJsBindings.DeepLink.filterFriendsForPicker": !1,
"PhotonJsBindings.DeepLink.openGameHubPage": !1,
"PhotonJsBindings.DeepLink.getPlayerActionsAsync": !1,
"PhotonJsBindings.Identity.getTokenInfo": !0,
"PhotonJsBindings.Identity.getPersonaInfo": !0,
"PhotonJsBindings.Moderation.getReportCategories": !1,
"PhotonJsBindings.Moderation.reportPlayer": !1,
"PhotonJsBindings.Moderation.playerReportingCancelled": !1,
"PhotonJsBindings.RecentlyMet.getRecentlyMetPlayers": !1,
"PhotonJsBindings.RecentlyMet.getSessionPlayers": !1,
"PhotonJsBindings.Accessibility.getAccessibilitySettings": !1,
"PhotonJsBindings.Accessibility.narrate": !1,
"PhotonJsBindings.UserExperience.playSoundEffect": !1,
"PhotonJsBindings.PresenceSession.updatePresence": !0,
"PhotonJsBindings.PresenceSession.partialUpdatePresence": !0,
"PhotonJsBindings.PresenceSession.subscribeToPlayerPresence": !0,
"PhotonJsBindings.PresenceSession.subscribeToPlayersPresence": !0,
"PhotonJsBindings.PresenceSession.unsubscribeFromPlayerPresence": !0,
"PhotonJsBindings.PresenceSession.unsubscribeFromPlayersPresence": !0,
"PhotonJsBindings.PresenceSession.subscribeToFriendsPresence": !0,
"PhotonJsBindings.PresenceSession.unsubscribeFromFriendsPresence": !0,
"PhotonJsBindings.PresenceSession.getPresenceSubscriptions": !0,
"PhotonJsBindings.PresenceSession.getDirectJoinTokens": !0,
"PhotonJsBindings.PresenceSession.getPlayerPresence": !0,
"PhotonJsBindings.PresenceSession.getPlayerPresenceEnd": !0,
"PhotonJsBindings.PresenceSession.getFriendsPresence": !0,
"PhotonJsBindings.PresenceSession.getFriendsPresenceEnd": !0,
"PhotonJsBindings.PresenceSession.attachToPresenceSession": !0,
"PhotonJsBindings.PresenceSession.attachToPresenceSessionEnd": !0,
"PhotonJsBindings.PresenceSession.detachFromPresenceSession": !0,
"PhotonJsBindings.PlatformPresence.isAppearOffline": !1,
"PhotonJsBindings.Badging.updateUnseenItemCount": !1,
"PhotonJsBindings.Badging.updateOnlineFriendCount": !1,
"PhotonJsBindings.BlockService.BlockPlayer": !0,
"PhotonJsBindings.BlockService.UnblockPlayer": !0,
"PhotonJsBindings.BlockService.BatchVerifyBlockedPlayers": !0,
"PhotonJsBindings.BlockService.ListBlockedPlayers": !0,
"PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotifications": !1,
"PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotificationsEnd": !1,
"PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotifications": !1,
"PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotificationsEnd": !1,
"PhotonJsBindings.MuteService.MutePlayer": !0,
"PhotonJsBindings.MuteService.UnmutePlayer": !0,
"PhotonJsBindings.MuteService.BatchVerifyMutedPlayers": !0,
"PhotonJsBindings.MuteService.ListMutedPlayers": !0,
"PhotonJsBindings.Friends.ListFriends": !0,
"PhotonJsBindings.Friends.BatchVerifyFriends": !0,
"PhotonJsBindings.Friends.ListPlatformFriends": !0,
"PhotonJsBindings.Friends.DeleteFriend": !0,
"PhotonJsBindings.Friends.ListMutualFriends": !0,
"PhotonJsBindings.FriendsNotificationsService.StreamNotifications": !1,
"PhotonJsBindings.FriendsNotificationsService.StreamNotificationsEnd": !1,
"PhotonJsBindings.Invites.ListSentFriendInvites": !0,
"PhotonJsBindings.Invites.ListReceivedFriendInvites": !0,
"PhotonJsBindings.Invites.BatchSendFriendInvites": !0,
"PhotonJsBindings.Invites.CancelSentFriendInvite": !0,
"PhotonJsBindings.Invites.AcceptReceivedFriendInvite": !0,
"PhotonJsBindings.Invites.DeclineReceivedFriendInvite": !0,
"PhotonJsBindings.GameInvite.SendGameInvite": !0,
"PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotifications": !0,
"PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotificationsEnd": !0,
"PhotonJsBindings.GameInvite.GetReceivedGameInvites": !0,
"PhotonJsBindings.GameInvite.GetReceivedGameInvitesEnd": !0,
"PhotonJsBindings.GameInvite.GetGameJoinTokens": !0,
"PhotonJsBindings.GameInvite.AcceptGameInvite": !0,
"PhotonJsBindings.GameInvite.RejectGameInvite": !0,
"PhotonJsBindings.GameInvite.RevokeGameInvites": !0,
"PhotonJsBindings.ContentMart.GetProduct": !0,
"PhotonJsBindings.ContentMart.GetPlayerNetwork": !0,
"PhotonJsBindings.ContentMart.GetInputMethod": !0,
"PhotonJsBindings.PlayerSearch.SearchPlayers": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCards": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCards": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCardsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIds": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIdsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIds": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIdsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIds": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIdsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPrivacySettings": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPrivacySettingsEnd": !0,
"PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotifications": !0,
"PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotificationsEnd": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotifications": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotificationsEnd": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotifications": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotificationsEnd": !0,
"PhotonJsBindings.PlayerList.getPlayerListConfig": !1,
"PhotonJsBindings.PlayerList.getPlayerListPersonas": !1,
"PhotonJsBindings.PlayerList.getPlayerLists": !1,
"PhotonJsBindings.XboxPlatform.getXblPrivacyBatchCheckPermission": !0,
"PhotonJsBindings.XboxPlatform.CheckXUserPrivilege": !0,
"PhotonJsBindings.XboxPlatform.ResolveXUserPrivilegeWithUiAsync": !0,
"PhotonJsBindings.XboxPlatform.ShowMessageDialogAsync": !0
}, wb = new Map([ [ "PhotonJsBindings.GameInvite.RevokeGameInvites", [ "NOT_FOUND(5) game invite not found [5] (eadp::GRpcStatusCodeError)" ] ], [ "PhotonJsBindings.GameInvite.AcceptGameInvite", [ "NOT_FOUND(5) game invite not found [5] (eadp::GRpcStatusCodeError)" ] ] ]);
function kb(e) {
return e ? "query_resumed" : "query";
}
function Rb(e) {
return e ? "query_resumed_error" : "query_error";
}
function xb(e) {
return !!Lb[e] && ("PhotonJsBindings.PlatformFriends.startListener" !== e || !Ab.isPlatformFriendsListenerBroken);
}
var Bb = class extends bh {
constructor(e, t) {
super(e), this.metricClient = t, t.initBootEndListener(this.Telemetry.onBootEnd);
}
addSuccessMetric(e, t, n) {
this.metricClient.addDurationEvent(kb(n), t, e);
}
addErrorMetric(e, t, n, r) {
const i = wb.get(e)?.includes(n);
this.metricClient.addDurationEvent(i ? kb(r) : Rb(r), t, e, n);
}
addDebugMetric(e, t, n, r, i, o, a) {
this.metricClient.addEvent({
metric: "query_debug",
value: e,
duration: t,
message: n,
data: {
prevTimestamp: r,
timestamp: i,
prevBootCount: o,
bootCount: a
}
});
}
_asyncCallback(e, t, n) {
const r = Date.now(), i = this.metricClient.bootEndCount;
super._asyncCallback(e, t, ((t, o) => {
const a = Date.now(), s = a - r;
if (n(t, o), !xb(e)) return;
const l = this.metricClient.bootEndCount > i;
o ? this.addErrorMetric(e, s, o.message, l) : this.addSuccessMetric(e, s, l), s >= 6e4 && this.addDebugMetric(e, s, o?.message, r, a, i, this.metricClient.bootEndCount);
}));
}
};
function Db(e, t) {
return n => n.getConfigBoolValue({
name: e,
defaultValue: t
})?.value ?? t;
}
function Fb(e, t) {
return n => n.getConfigStringValue({
name: e,
defaultValue: t
})?.value ?? t;
}
var Mb = is.useDevservice || !1, Ub = {
EnableIncorrectConfigAssert: Db("Photon.EnableIncorrectConfigAssert", !1),
DisableExperiments: Db("Photon.DisableExperiments", !1),
UseFTUE: Db("Photon.UseFTUE", !0),
UseDevservice: Db("Photon.UseDevservice", Mb),
DeveloperMode: Db("Photon.DeveloperMode", !1),
EADPServiceHost: Fb("Photon.EADPServiceHost", "devservice.ad.ea.com:8082/api/default/default"),
TranslationHost: Fb("Photon.TranslationHost", "")
};
function Hb(e, t, n) {
return !e && (n[t] = "is empty", !0);
}
function Vb(e, t, n, r) {
if (!Object.keys(r).length) return;
t.addEvent({
eventType: "photon_assert",
message: n
});
Ub.EnableIncorrectConfigAssert(e.Utilities) && e.Utilities.showError({
message: n + ":\n" + JSON.stringify(r, void 0, 2)
});
}
function Jb(e, t) {
const n = {}, r = is.TwinkleConstants.locale;
Hb(r, "locale", n) || ng.has(r ?? "") || (n.locale = `has unsupported value '${r}'`), 
Hb(is.TwinkleConstants?.devicePlatformId, "devicePlatformId", n), Hb(is.AppConstants?.envId, "environmentId", n), 
Hb(is.AppConstants?.productId, "productId", n), Hb(is.AppConstants?.nativeVersion, "nativeVersion", n), 
Hb(is.AppConstants?.gameVersion, "gameVersion", n), Vb(e, t, "Incorrect Photon configuration", n);
}
var Gb = {
EA: () => wh("PLATFORMNAME_EA-APP"),
XBOX: () => wh("PLATFORMNAME_XBOX"),
PSN: () => wh("PLATFORMNAME_PLAYSTATION"),
STEAM: () => wh("PLATFORMNAME_STEAM"),
NINTENDO: () => wh("PLATFORMNAME_SWITCH"),
GOOGLE_PLAY: () => wh("PLATFORMNAME_GOOGLE-PLAY"),
APPLE_GAMECENTER: () => wh("PLATFORMNAME_APPLE-GAME-CENTER"),
EPIC: () => wh("PLATFORMNAME_EPIC")
}, zb = e => Gb[e](), jb = bh.DeepLink.Setting, qb = () => pb.isFirstPartyAppearOfflineSupported || pb.availableSettings.includes(jb.AppearOffline), Yb = Ks({
debugName: "appearOfflineState",
default: !1
}), Kb = () => ws(Yb), Wb = (e, t, n) => {
const r = wh(t ? "PHOTON-SOCIAL_PRESENCE_OFFLINE" : "PHOTON-SOCIAL_PRESENCE_ONLINE");
if (pb.isFirstPartyAppearOfflineSupported) {
const t = zb(e);
return n ? wh("PHOTON-SOCIAL_TOAST_STATUS_FIRST-UPDATE_BODY_CASCADING", {
"%onlineOrOffline%": r,
"%platformName%": t
}) : wh("PHOTON-SOCIAL_TOAST_STATUS_UPDATE_BODY_CASCADING", {
"%onlineOrOffline%": r,
"%platform%": t
});
}
return wh(n ? "PHOTON-SOCIAL_TOAST_STATUS_FIRST-UPDATE_BODY" : "PHOTON-SOCIAL_TOAST_STATUS_UPDATE_BODY", {
"%onlineOrOffline%": r
});
};
async function Xb(e, t) {
let n = !1;
try {
t.PlatformPresence.onAppearOfflineChanged.subscribe((t => e.set(Yb, t.appearOffline ?? !1)));
n = (await t.PlatformPresence.isAppearOffline({}))?.appearOffline ?? !1;
} catch {}
return e.set(Yb, n), n;
}
var Qb = e => "onlineStatusState" + e, $b = (e => (e[e.Online = 1] = "Online", e[e.AppearOffline = 2] = "AppearOffline", 
e))($b || {}), Zb = Ks({
debugName: "appearOfflineSettingState",
default: 1
}), eS = e => 2 === e;
function tS(e, t, n, r) {
if (!pb.isFirstPartyAppearOfflineSupported) return hr((() => {
e.set(Zb, r), e.set(Yb, eS(r));
})), t.setItem(Qb(n), JSON.stringify(r));
}
async function nS(e, t, n) {
if (pb.isFirstPartyAppearOfflineSupported) return !1;
let r = 1;
if (n) try {
const e = Qb(n), i = (await t.getItem(e))?.trim();
if (i) {
const e = JSON.parse(i);
Ly.number.validate(e) && $b[e] && (r = e);
}
} catch {}
const i = eS(r);
return e.set(Zb, r), e.set(Yb, i), i;
}
var rS = (e, t, n, r) => pb.isFirstPartyAppearOfflineSupported ? Xb(n, t) : nS(n, e.localStorage, r), iS = Ly.object({
entity: Ly.object({
id: Dy,
displayName: Ly.string
}),
createTime: wy,
sourcePlayerNetworkId: Ly.optional(Ly.nullable(My)),
targetPlayerNetworkId: Ly.optional(Ly.nullable(My))
}), oS = Ly.object({
invites: Ly.array(iS)
}), aS = Ly.object({
friendInviteDetails: iS,
listUpdate: E_,
updateTimestamp: wy
}), sS = (Ly.object({
inviteListNotification: aS
}), Ly.object({
stream: Ly.custom(t_()),
response: Ly.object({})
})), lS = e => e, cS = class {
constructor(e) {
this.photonBindings = e, this.stream = new as;
}
startStream(e, t) {
e.start(), e.data.subscribe((e => {
this.stream.data.trigger(t(e));
})), e.error.subscribe((e => {
this.stream.error.trigger(e);
})), this.stream.end.subscribe((() => {
e.close();
}));
}
async startBlockStream(e) {
const {data: t} = await Xy((() => this.photonBindings.BlockListNotifications.SubscribeToBlockListNotifications(e)), k_);
t?.stream && this.startStream(t.stream, lS);
}
async startMuteStream(e) {
const {data: t} = await Xy((() => this.photonBindings.MuteListNotifications.SubscribeToMuteListNotifications(e)), R_);
t?.stream && this.startStream(t.stream, lS);
}
async startFriendsStream(e) {
const {data: t} = await Xy((() => this.photonBindings.FriendListNotifications.SubscribeToFriendListNotifications(e)), w_);
t?.stream && this.startStream(t.stream, lS);
}
async startReceivedFriendRequestsStream(e) {
const {data: t} = await Xy((() => this.photonBindings.InviteListNotifications.SubscribeToReceivedInviteListNotifications(e)), sS);
t?.stream && this.startStream(t.stream, (e => ({
receivedInviteListNotification: e.inviteListNotification
})));
}
async startSentFriendRequestsStream(e) {
const {data: t} = await Xy((() => this.photonBindings.InviteListNotifications.SubscribeToSentInviteListNotifications(e)), sS);
t?.stream && this.startStream(t.stream, (e => ({
sentInviteListNotification: e.inviteListNotification
})));
}
async StreamNotifications(e) {
return await Promise.all([ this.startBlockStream(e), this.startMuteStream(e), this.startFriendsStream(e), this.startReceivedFriendRequestsStream(e), this.startSentFriendRequestsStream(e) ]), 
{
stream: this.stream,
response: {}
};
}
}, dS = class extends TI {}, [uS, pS] = js({
debugName: "blockListFragmentStoreState",
create: () => new dS({
debugName: "BlockList"
})
});
function fS(e) {
return !!e.firstPartyPlayerId;
}
var hS = bh.PlatformFriends;
function mS(e) {
return "1P-" + e;
}
function gS(e, t, n) {
const r = n.firstPartyPlayerId;
var i;
e.set(r, {
photonPlayerId: n.photonPlayerId
}), (i = n.photonPlayerId).startsWith(FI) && GI(i) && t.playerInfoStream.data.trigger(n);
}
var yS = new Set([ hS.PresenceStatus.ONLINE, hS.PresenceStatus.IN_GAME, hS.PresenceStatus.CHATTING, hS.PresenceStatus.LOOKING_FOR_PARTY ]);
function IS(e, t, n, r, i) {
const o = r.userId, a = yS.has(r.presenceStatus), s = "EA" === t ? "PC" : "UNKNOWN", l = mS(o);
(a || i) && e.firstPartyPresenceStream.data.trigger({
sessionId: l,
photonSessionId: qI(n, l),
joinable: !1,
photonPlayerId: n,
playerNetworkId: t,
isOnline: a,
isEAPresence: !1,
productTitle: r.title || r.presence || void 0,
devicePlatformId: s
});
}
function _S(e, t, n, r, i) {
gS(e, n, r), IS(t, r.playerNetworkId, r.photonPlayerId, i, !1);
}
function bS(e, t, n, r) {
if (!t.length) return void r([]);
const i = {}, o = [];
for (const n of t) {
const t = e.firstPartyUidReverseLookup.get(n.userId), r = t ? e.getMaybeUntracked(t)?.data : void 0;
if (r && fS(r)) o.push(r); else {
const e = W_({
firstPartyUid: n.userId,
displayName: n.displayName
});
i[e] = n;
}
}
o.length && r(o), e.fetchPlayerInfosForFirstPartyPseudoIds(Object.keys(i), (t => {
const o = [];
hr((() => {
for (const a of t) {
const t = a.data;
if (t?.playerNetworkId === n && fS(t)) {
o.push(t);
const n = W_({
firstPartyUid: t.firstPartyPlayerId,
displayName: t.displayName
});
e.delete(n), e.firstPartyUidReverseLookup.set(t.firstPartyPlayerId, t.photonPlayerId);
} else if (a.error) {
const t = i[a.id], s = `1P|${(r = {
firstPartyPlayerId: t.userId,
playerNetworkId: n
}).firstPartyPlayerId || ""}|${r.playerNetworkId}`;
o.push({
firstPartyPlayerId: t.userId,
photonPlayerId: s,
displayName: t.displayName,
displayNameLowerCase: t.displayName.toLowerCase(),
playerNetworkId: n
}), e.delete(a.id), e.firstPartyUidReverseLookup.set(t.userId, s);
}
}
var r;
})), r(o);
}));
}
var SS = class extends as {
constructor(e) {
super({
data: e.onFriendListUpdated
}), this.platformFriendsService = e;
}
start() {
this.platformFriendsService.startListener({}), super.start();
}
close() {
this.platformFriendsService.stopListener({}), super.close();
}
};
function vS(e) {
return new e_(new SS(e), b_);
}
var TS = class extends TI {
constructor() {
super(...arguments), this.friendsMap = new bs({});
}
init(e, t, n, r) {
if (Ab.disableFirstPartyFriends) return void this.initToEmptyList();
this.initSeedStrategy(e, t, n, r);
const i = [ this.initStreamStrategy(e, t, n, r) ];
return () => {
i.forEach((e => e?.()));
};
}
initToEmptyList() {
const e = this.get();
hr((() => {
e.update({
data: this.friendsMap,
loading: !1,
uninitialized: !1,
error: void 0
});
}));
}
initSeedStrategy(e, t, n, r) {
Xy((() => n.getFriendList({})), I_).then((n => {
if (n.data) if ("EA" === r) hr((() => {
for (const t of n.data?.friendList ?? []) {
const n = HI({
eaPlayerId: t.userId,
playerNetworkId: r
});
IS(e, r, n, t, !1);
}
this.get().update({
...n,
data: this.friendsMap
});
})); else {
const i = {};
if (n.data.friendList.length) for (const e of n.data.friendList) i[e.userId] = e;
bS(t, n.data.friendList, r, (r => {
hr((() => {
for (const n of r) {
const r = i[n.firstPartyPlayerId];
r && _S(this.friendsMap, e, t, n, r);
}
this.get().update({
...n,
data: this.friendsMap
});
}));
}));
} else if (n.error) throw n.error;
})).catch((e => {
this.get().update({
error: e,
loading: !1
});
}));
}
initStreamStrategy(e, t, n, r) {
return this.setStreamStrategy({
stream: vS(n),
updater: (n, i) => {
const o = i.data?.friendListEvent;
if (o) {
for (const t of o.updatedFriends) {
let n;
n = "EA" === r ? UI({
eaPlayerId: t.userId,
playerNetworkId: "EA"
}) : Ts((() => this.friendsMap.get(t.userId)?.photonPlayerId)), n && IS(e, r, n, t, !0);
}
if ("EA" !== r) for (const t of o.removedFriends) {
const n = Ts((() => this.friendsMap.get(t)));
n && (this.friendsMap.delete(t), e.removePointOfPresence(n.photonPlayerId, mS(t)));
}
if ("EA" === r) {
for (const t of o.addedFriends) {
const n = HI({
eaPlayerId: t.userId,
playerNetworkId: r
});
IS(e, r, n, t, !0);
}
return;
}
const n = {};
for (const e of o.addedFriends) n[e.userId] = e;
bS(t, o.addedFriends, r, (r => {
hr((() => {
for (const i of r) {
const r = n[i.firstPartyPlayerId];
r && _S(this.friendsMap, e, t, i, r);
}
}));
}));
}
}
});
}
}, [ES, PS] = js({
debugName: "firstPartyFriendsStoreState",
create: () => new TS({
debugName: "FirstPartyFriends"
})
});
function OS(e) {
const t = [];
if (e?.friends.length) for (let n = 0; n < e.friends.length; n++) {
const r = e.friends[n].entity.id.playerId.id;
r && t.push(r);
}
return t;
}
var CS = class extends TI {
constructor(e, t) {
super(t), this.playerInfoStore = e, this.friendsMap = new bs([]), this.addFriend = e => {
const t = this.get();
Ts((() => {
this.friendsMap.set(e.photonPlayerId, e), t.update({
...t.toProps(),
data: this.friendsMap
});
}));
}, this.removeFriend = e => {
const t = this.get(), n = [];
return Ts((() => (hr((() => {
J_.forEach((({id: t}) => {
const r = UI({
eaPlayerId: e,
playerNetworkId: t
}), i = this.friendsMap.get(r);
i && (this.friendsMap.delete(r), n.push(i));
})), t.update({
...t.toProps(),
data: this.friendsMap
});
})), n)));
};
}
init(e) {
e().then((e => {
if (e.error) throw e.error;
const t = OS(e.data);
this.playerInfoStore.fetchPlayerInfosForFriends(t, (e => {
const t = nb(e);
hr((() => {
for (const e of t) this.friendsMap.set(e, {
photonPlayerId: e
});
this.get().update({
data: this.friendsMap,
loading: !1
});
}));
}));
})).catch((e => {
this.get().update({
error: e,
loading: !1
});
}));
}
}, [NS, AS] = js({
debugName: "eaFriendsFragmentStoreState",
create: e => {
const t = e.get(z_);
return new CS(t, {
debugName: "EaFriends"
});
}
}), LS = Js({
debugName: "eaFriendsPlayerInfosState",
get: function({get: e}) {
const t = e(NS).get(), n = e(z_), r = e(uS).get(), i = new Set(r.data?.keys()), o = CI([ t, r ]);
let a;
if (o.hasData && t.data) {
a = [];
for (const {photonPlayerId: e} of t.data.values()) {
const {eaPlayerId: t} = JI(e);
if (t && !i.has(t)) {
const t = n.get(e);
t.data && a.push(t.data);
}
}
}
return {
...o,
data: a
};
}
}), wS = Js({
debugName: "firstPartyFriendsPlayerInfosState",
get: function({get: e}) {
const t = e(ES).get(), n = e(z_);
let r;
if (t.data) {
r = [];
for (const {photonPlayerId: e} of t.data.values()) {
const t = n.get(e);
t.data && r.push(t.data);
}
}
return {
...t.toProps(),
data: r
};
}
}), kS = Ks({
debugName: "cloneOfExtraPresenceEaPlayerIds",
default: new Set
});
function RS(e) {
return e.map((e => JI(e).eaPlayerId)).filter(QI);
}
var xS = Js({
debugName: "eaFriendEaPlayerIdsState",
get: function({get: e}) {
return new Set(RS(Array.from(e(NS).get().data?.keys() ?? [])));
}
});
function BS(e, t) {
return e.get(xS).has(t) || e.get(kS).has(t);
}
function DS(e, t, n) {
return t?.isEAPresence && n && BS(e, n) ? t : t?.isEAPresence ? void 0 : t;
}
var FS = (e, t, n) => {
const r = t?.get(n), {eaPlayerId: i} = JI(n);
return r ? Object.values(r).filter((t => DS(e, t, i))) : [];
}, MS = (e, t) => {
if (e.productId && t.productId) {
if (e.productId !== t.productId) {
if (e.productId === dg.productId) return -1;
if (t.productId === dg.productId) return 1;
}
if (e.devicePlatformId !== t.devicePlatformId) {
if (e.devicePlatformId === dg.devicePlatformId) return -1;
if (t.devicePlatformId === dg.devicePlatformId) return 1;
const n = pb.crossplayCompatiblePlatforms.has(e.devicePlatformId);
if (n !== pb.crossplayCompatiblePlatforms.has(t.devicePlatformId)) return n ? -1 : 1;
}
} else if (e.productId || t.productId) return e.productId && !t.productId ? -1 : 1;
return (e.lastSeenOnline ?? 0) > (t.lastSeenOnline ?? 0) ? -1 : 1;
}, US = (e, t, n) => {
const r = FS(e, t, n);
return r.sort(MS), r[0];
}, HS = (e, t, n, r) => {
if (r) {
const {sessionId: i, eaPlayerId: o} = KI(r);
return DS(e, t?.get(n)?.[i], o);
}
return US(e, t, n);
}, VS = () => Ab.supportsUnfinishedFeatures;
function JS(e) {
const t = new Map;
return e.forEach((e => {
if (!e.sessionId) return;
const n = t.get(e.photonPlayerId);
n ? n[e.sessionId] = e : t.set(e.photonPlayerId, {
[e.sessionId]: e
});
})), new H_(t, 50);
}
var GS = class extends TI {
constructor() {
super(...arguments), this.firstPartyPresenceStream = new as;
}
addPresence(e) {
const t = this.get();
Ts((() => {
const n = t.data;
if (n) {
const t = n.get(e.photonPlayerId);
n.set(e.photonPlayerId, {
...t,
[e.sessionId]: e
});
} else t.update({
...t.toProps(),
data: JS([ e ])
});
}));
}
addPointsOfPresence(e) {
Object.keys(e).forEach((t => {
this.addPresence(e[t]);
}));
}
removePresence(e) {
const t = this.get();
return Ts((() => {
const n = t.data;
if (n) {
const t = n.get(e);
return n.delete(e), t;
}
}));
}
removeSelectPointsOfPresence(e, t) {
const n = this.get(), r = Ts((() => n.data));
if (r) {
const n = Ts((() => ({
...r.get(e) ?? {}
})));
Object.keys(n).forEach((e => {
t(n[e]) && delete n[e];
})), 0 === Object.keys(n).length ? r.delete(e) : r.set(e, {
...n
});
}
}
removePointOfPresence(e, t) {
this.removeSelectPointsOfPresence(e, (e => e.sessionId === t));
}
}, [zS, jS] = js({
debugName: "presenceFragmentStoreState",
create: () => new GS({
debugName: "Presence"
})
}), qS = e => e.get(zS);
function YS(e, t) {
const n = [], r = [], i = {}, o = 0 === t.size;
for (let r = 0, a = e.length; r < a; r++) {
const a = e[r], s = a.playerId, l = Yy(a.playerNetworkId), c = UI({
eaPlayerId: s,
playerNetworkId: l
});
i[c] = !0;
const d = t.get(c);
if (!d || d.personaId !== a.personaId) {
const e = {
eaPlayerId: s,
personaId: a.personaId,
playerNetworkId: l,
joinTimestampMs: a.joinTimestampMs,
photonPlayerId: c,
displayName: a.displayName
};
t.set(c, e), o || n.push(e);
}
}
if (e.length !== t.size) for (const e of t.values()) i[e.photonPlayerId] || (t.delete(e.photonPlayerId), 
r.push(e));
return {
added: n,
removed: r
};
}
function KS(e, t = new bs([])) {
const {added: n, removed: r} = YS(e.members, t);
return {
lobby: {
...e,
members: t
},
added: n,
removed: r
};
}
function WS(e) {
return Ts((() => {
if (e.lobby) return KS(e.lobby).lobby;
}));
}
function XS(e) {
return Ts((() => KS(e.lobby))).lobby;
}
var QS = Ly.object({
playerId: Ly.string,
playerNetworkId: Ly.string,
displayName: Ly.string,
personaId: Ly.string,
joinTimestampMs: Ly.number
}), $S = Ly.object({
lobbyId: Ly.string,
members: Ly.array(QS),
maxSize: Ly.number,
joinable: Ly.boolean,
crossPlayEnabled: Ly.boolean,
telemetryType: Ly.string,
invitable: Ly.boolean
}), ZS = Ly.object({
lobby: Ly.optional(Ly.nullable($S))
}), ev = Ly.object({
lobby: $S
}), tv = class extends as {
constructor(e) {
super({
data: e
});
}
}, nv = Nc((e => ({
color: e
})), {
fontSize: mc(gu.Body.Text.fontSize),
zOffset: 1,
textLetterSpacing: hc(1),
textEdgeOffset: .1,
wordWrap: "break-word"
}), rv = Ec({
textEllipsis: !0,
wordWrap: "normal"
}), iv = ({text: e, useEllipsis: t, color: n, style: r}) => H.createElement("surface", {
text: e,
style: [ Dd, nv(n || gu.Body.Text.color), t ? rv : void 0, r ]
}), ov = (e => (e.Cloud = "Cloud", e.Console = "Console", e.Pc = "Pc", e))(ov || {}), av = {
...Jy,
...ov
};
function sv(e, t) {
return e.length > t + 1 ? Sp() ? "" + e.substring(0, t) : e.substring(0, t) + "" : e;
}
var lv = hc(32), cv = {
primaryId: Ec({
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center"
}),
icon: Ec({
width: lv,
height: lv,
minWidth: lv,
textureMode: "cover",
zOffset: 1,
color: Xc.TextColorStandard.emphasized
})
}, dv = Ec({
minWidth: hc(32),
width: hc(32),
height: hc(32),
marginStart: hc(Xc.DimensionSpace.smallest)
}), uv = {
[av.Cloud]: Tf.cloud32,
[av.Console]: Tf.console32,
[av.Epic]: Tf.epic32,
[av.Ea]: Tf.ea32,
[av.Nintendo]: Tf.switch32,
[av.Pc]: Tf.pc32,
[av.Psn]: Tf.playstation32,
[av.Steam]: Tf.steam32,
[av.Xbox]: Tf.xbox32
}, pv = e => uv[e] || uv[av.Pc], fv = {
[av.Cloud]: Md.genericCloud,
[av.Console]: Md.genericConsole,
[av.Epic]: Md.epicGames,
[av.Ea]: Md.ea,
[av.Nintendo]: Md.switch,
[av.Pc]: Md.genericPc,
[av.Psn]: Md.playstation,
[av.Steam]: Md.steam,
[av.Xbox]: Md.xbox
};
function hv({name: e, playerNetworkId: t}, n) {
let r = n?.allowEllipsis ? sv(e, 16) : e;
Sp() && (r = Md.lrm + r);
const i = [ (o = t, fv[o] || Md.genericPc), r ];
var o;
return Sp() && i.reverse(), i.join(Md.nbsp).split("").join(Md.wordJoiner);
}
var mv = ({platform: e, style: t}) => {
const n = pv(e);
return H.createElement("surface", {
style: [ cv.icon, Lc("texture", n), t ]
});
}, gv = hc(Xc.DimensionSpace.medium), yv = ({name: e, playerNetworkId: t, textStyle: n, style: r, useEllipsis: i = !0, icon: o}) => H.createElement("surface", {
style: [ cv.primaryId, r ]
}, H.createElement(mv, {
platform: t,
style: Lc("marginEnd", hc(Xc.DimensionSpace.medium))
}), H.createElement(iv, {
text: e,
color: Xc.TextColorStandard.emphasized,
style: [ Lc("textEllipsis", i), Lc("wordWrap", i ? "normal" : "break-word"), n ]
}), !!o && H.createElement("surface", {
style: [ dv, Lc("texture", o) ]
})), Iv = class {
constructor(e) {
this.isInGamePlayStatus = !1;
const t = e.getInGamePlay({});
t && (this.isInGamePlayStatus = t.inGamePlay), e.onInGamePlayChanged.subscribe((({inGamePlay: e}) => {
this.isInGamePlayStatus = e;
})), Cr(this, {
isInGamePlayStatus: gt
});
}
get isInGamePlay() {
return this.isInGamePlayStatus;
}
}, [_v, bv] = js({
debugName: "gamePlayManagerState",
create: e => {
const t = e.get(zg);
return new Iv(t.Notifications);
}
});
function Sv(e, t) {
const n = e % t;
return n < 0 ? n + t : n;
}
var vv = (e = new Date) => {
const t = e.getTime();
return {
seconds: Math.floor(t / 1e3),
nanos: 1e6 * Sv(t, 1e3)
};
};
function Tv(e) {
const {seconds: t, nanos: n = 0} = e;
return 1e3 * t + n / 1e6;
}
var Ev = (e => (e.OnGoing = "EXPERIMENT_ONGOING", e.NotFound = "EXPERIMENT_NOT_FOUND", 
e.Inactive = "EXPERIMENT_NOT_ACTIVE", e.Unqualified = "EXPERIMENT_UNQUALIFIED", 
e.Error = "EXPERIMENT_ERROR", e))(Ev || {}), Pv = new Set(Object.values(Ev)), Ov = Ly.object({
experimentKey: Ly.string,
experimentId: Ly.number,
variantId: Ly.number,
variantName: Ly.string,
experimentStatus: Ly.custom((e => "string" == typeof e && Pv.has(e))),
testParameters: Ly.anyObject
}), Cv = Ly.object({
experiments: Ly.array(Ov),
storedTimestamp: Ly.optional(wy)
}), Nv = {
PC: "pc",
XBOXONE: "xbox_one",
XBSX: "xbsx",
PS4: "ps4",
PS5: "ps5",
NX: "switch",
IOS: "ios",
ANDROID: "android",
WEB: "web",
UNKNOWN: "pc"
};
function Av(e, t) {
const n = Nv[dg.devicePlatformId];
return {
domain: e.domainId,
playerId: {
type: "nucleus",
id: t.tokenInfo.userId
},
secondaryPlayerIds: [ {
type: "persona",
id: t.personaInfo.personaId
} ],
platform: n,
titleId: "photon",
titleIdType: "service",
attributes: {
locale: dg.locale,
productId: dg.productId,
platform: n
},
isDebug: !lg.includes(dg.environment)
};
}
function Lv(e) {
return e.body ? JSON.parse(dm(sm(e.body))) : void 0;
}
function wv(e, t, n) {
if (Cv.validate(e)) {
if (e.storedTimestamp && Tv(e.storedTimestamp) + 2592e6 < Date.now()) return void n(new Error("Data in localStorage is too old"));
const r = e.experiments.filter((e => "EXPERIMENT_ONGOING" === e.experimentStatus));
t(new Map(r.map((e => [ e.experimentKey, e ]))));
} else n(new Error("Invalid experiments data: " + Cv.getLastErrors().join("\n")));
}
var kv = class {
constructor(e, t, n, r, i) {
this.httpPost = e, this.moby = t, this.localStorage = n, this.environment = r, this.experimentIds = i, 
this.isDisposed = !1, this.fragment = new Zy("experiments", {
uninitialized: !0,
loading: !1
}), this.dispose = () => {
this.isDisposed = !0;
};
}
getLocalStorageKey() {
return "experiments_" + gb(this.moby).tokenInfo.userId;
}
apiCall(e, t) {
if (this.isDisposed) return Promise.reject(new Error("Disposed"));
const n = this.environment.baseUrl + e, r = this.moby.getUntracked(Jg), i = e => {
r.addEvent({
eventType: "photon_experiments",
url: n,
duration: e.duration,
message: e.message,
status_code: e.statusCode
});
};
return new Promise(((e, r) => {
const o = this.moby.get(hb), a = JSON.stringify({
...t,
...Av(this.environment, o)
}), s = Date.now();
this.httpPost(n, a, {
"content-type": "application/json"
}).then((t => {
const n = Lv(t);
i({
statusCode: t.statusCode,
message: n?.message,
duration: Date.now() - s
}), 200 === t.statusCode ? e(n) : r(new Error(n?.message ?? t.statusCode.toString()));
})).catch((e => {
i({
statusCode: 0,
message: e.message,
duration: Date.now() - s
}), r(e);
}));
}));
}
isInVariant(e, t) {
return this.fragment.data?.get(e)?.variantName === t;
}
fallbackToLocalStorage(e, t, n) {
const r = () => {
this.localStorage.removeItem(this.getLocalStorageKey()), n(e);
};
this.localStorage.getItem(this.getLocalStorageKey()).then((i => {
i ? wv(JSON.parse(i), t, r) : n(e);
})).catch(r);
}
init() {
const e = this.moby.get(ih);
if (Ub.DisableExperiments(e.bindings.Utilities)) return void this.fragment.update({
uninitialized: !1,
loading: !1,
data: new Map
});
this.fragment.update({
uninitialized: !1,
loading: !0
});
const t = e => this.fragment.update({
loading: !1,
uninitialized: !1,
data: e
}), n = e => {
this.fragment.update({
loading: !1,
uninitialized: !1,
error: e
});
};
if (0 === this.experimentIds.size) return t(new Map), void this.localStorage.removeItem(this.getLocalStorageKey());
this.apiCall("/experimentation/v1/fetch-experiment-grouping", {
experimentKeys: Array.from(this.experimentIds)
}).then((e => wv(e, (n => {
this.isDisposed || (t(n), this.localStorage.setItem(this.getLocalStorageKey(), JSON.stringify({
...e,
storedTimestamp: vv()
})));
}), (e => {
this.isDisposed || this.fallbackToLocalStorage(e, t, n);
})))).catch((e => {
this.isDisposed || this.fallbackToLocalStorage(e, t, n);
}));
}
get(e) {
return {
...this.fragment.toProps(),
data: this.fragment.data?.get(e)
};
}
trackExperiment(e, t) {
this.apiCall("/experimentation/v1/track-experiment", {
eventKey: e,
metrics: t
}).then((() => {})).catch((e => {}));
}
}, [Rv, xv] = js({
debugName: "experimentsState",
create: e => {
const t = e.get(ih);
let n = "https://experimentation-stest.data.ea.com", r = "834";
return lg.includes(dg.environment) && (n = "https://experimentation.data.ea.com", 
r = "836"), new kv(t.http.post, e, t.localStorage, {
baseUrl: n,
domainId: r
}, Fv());
}
}), Bv = (e => (e.FR_0 = "fr_0", e.FR_1 = "fr_1", e.FTUE_0 = "ftue_0", e.FO_0 = "fo_0", 
e.FRR_0 = "frr_0", e))(Bv || {}), Dv = {
fr_0: {
FindFriends: "FindFriends"
},
fr_1: {
PlayerSearch: "PlayerSearch",
FindFriends: "FindFriends"
},
ftue_0: {
SkipFTUE: "SkipFTUE"
},
fo_0: {
FriendOnline: "FriendOnline"
},
frr_0: {
FriendRequestReminders: "FriendRequestReminders"
}
}, Fv = e => new Set(Object.values(Bv)), Mv = (e, t, n) => e.get(Rv).isInVariant(t, n), Uv = (e, t) => {
const n = Os();
return Mv(n, e, t);
}, [Hv, Vv] = js({
debugName: "parentalControlState",
create: ({getUntracked: e}) => {
const t = e(zg);
if (!t.hasMethod("DeepLink", "getDisabledByParentalControl")) return () => !1;
const n = gt.box([], {
deep: !1
}), r = Ln((() => {
n.set(t.DeepLink.getDisabledByParentalControl({})?.disabled ?? []);
}));
return r(), t.DeepLink.onDisabledByParentalControlChanged.subscribe((() => {
r();
})), e => n.get().includes(e);
}
}), Jv = Gs({
debugName: "hasFriendshipState",
get: function(e, {get: t}) {
const n = t(uS).get(), r = t(NS).get(), i = CI([ n, r ]);
if (!i.hasData) return {
...i,
data: void 0
};
const {eaPlayerId: o} = JI(e);
if (o && n.data?.has(o)) return {
...i,
data: !1
};
if (!!r.data?.get(e)) return {
...r.toProps(),
data: !0
};
const a = t(z_).get(e), s = t(ES).get(), l = a.data?.firstPartyPlayerId, c = !!l && !!s.data?.get(l), d = CI([ a, s ]);
return {
...d,
data: d.hasData ? c : void 0
};
}
}), Gv = class extends TI {}, [zv, jv] = js({
debugName: "receivedFriendRequestFragmentStoreState",
create: () => new Gv({
debugName: "ReceivedFriendRequests"
})
}), [qv, Yv] = js({
debugName: "sentFriendRequestFragmentStoreState",
create: () => new Gv({
debugName: "SentFriendRequests"
})
});
function Kv({entity: e, createTime: t}) {
const n = e.id.playerId.id;
return {
eaPlayerId: n,
createTimeMs: t ? Tv(t) : void 0,
photonPlayerId: UI({
eaPlayerId: n,
playerNetworkId: "EA"
})
};
}
var Wv = Ly.array(Ly.string), Xv = e => "favoriteFriends_" + e, Qv = (e, t) => {
const n = JSON.parse(e.getItemSync(Xv(t)) ?? "[]");
return Wv.validate(n) ? n.map((e => ({
createTime: void 0,
entity: {
id: {
playerId: {
id: e
},
personaId: void 0
}
}
}))) : [];
};
function $v(e) {
const t = (e.favoriteFriends ?? []).map((e => {
const t = Kv(e);
return [ t.eaPlayerId, {
eaPlayerId: t.eaPlayerId
} ];
}));
return new bs(t);
}
async function Zv(e, t) {
return $v({
favoriteFriends: await Qv(e, t)
});
}
var eT = class extends TI {
constructor(e, t) {
super(t), this.moby = e, this.options = t, this.favoriteFriendsMap = new bs([]);
}
get localStorage() {
return this.moby.get(ih).localStorage;
}
get userId() {
return this.moby.get(hb).tokenInfo.userId;
}
async init() {
const e = this.get();
try {
this.favoriteFriendsMap = await Zv(this.localStorage, this.userId), e.update({
data: this.favoriteFriendsMap,
loading: !1,
uninitialized: !1,
error: void 0
});
} catch (t) {
e.update({
data: void 0,
loading: !1,
uninitialized: !1,
error: t
});
}
}
updateStorage() {
Ts((() => {
var e, t, n;
e = this.localStorage, t = this.userId, n = Array.from(this.favoriteFriendsMap.keys()), 
e.setItem(Xv(t), JSON.stringify(n));
}));
}
addFavoriteFriend(e) {
const {eaPlayerId: t} = JI(e);
t && (this.favoriteFriendsMap.set(t, {
eaPlayerId: t
}), this.updateStorage());
}
removeFavoriteFriend(e) {
const {eaPlayerId: t} = JI(e);
t && (this.favoriteFriendsMap.delete(t), this.updateStorage());
}
}, [tT, nT] = js({
debugName: "favoriteFriendsFragmentStoreState",
create: e => new eT(e, {
debugName: "FavoriteFriends"
})
});
function rT(e, t) {
const {eaPlayerId: n} = JI(t), r = e.get(tT).get();
return !(!n || !r.data?.has(n));
}
function iT(e) {
return rT(Os(), e);
}
var oT = Gs({
debugName: "playerRowActionState",
get: function(e, {get: t}) {
const {eaPlayerId: n, firstPartyPlayerId: r} = JI(e);
if (n || r) {
if (n) {
const r = t(tT).get().data?.has(n), i = t(NS).get().data?.get(e);
if (i) return r ? 2 : 1;
const o = t(uS).get().data?.get(n);
if (o) return 0;
const a = t(qv).get().data?.get(n);
if (a) return 3;
const s = t(zv).get().data?.get(n);
if (s) return 4;
if (t(hb).tokenInfo.userId === n) return 5;
}
if (r) {
const e = t(ES).get().data?.get(r);
if (e) return 1;
}
return 6;
}
}
}), aT = Ks({
debugName: "modalQueueState",
default: []
}), sT = Ks({
debugName: "modalLocationState",
default: {}
}), lT = Js({
debugName: "currentModalState",
get: function({get: e}) {
return e(aT)[0];
}
}), cT = Js({
debugName: "currentModalState",
get: function({get: e}) {
const t = e(lT);
if (t) return e(sT)[t.id];
}
}), [dT, uT] = js({
debugName: "modalState",
create: e => {
let t = 1;
return {
showModal: Ln(((n, {sequenceId: r, telemetryId: i, ignoreCloseAll: o, opaque: a} = {}) => {
e.set(aT, (s => {
const l = t++, c = r ? s.filter((e => e.sequenceId !== r)) : s;
return (r || i) && e.set(sT, (e => {
const t = {
...e
};
if (r) {
const e = s.find((e => e.sequenceId === r));
e && delete t[e.id];
}
return i && (t[l] = {
state: {
telemetryId: i
}
}), t;
})), c.concat({
component: n,
id: l,
sequenceId: r,
ignoreCloseAll: o,
opaque: a
});
}));
})),
closeModal: Ln((() => {
const t = e.getUntracked(lT)?.id;
e.set(aT, (e => e.slice(1))), t && e.set(sT, (e => {
const n = {
...e
};
return delete n[t], n;
}));
})),
closeAllModals: Ln((() => {
e.set(aT, e.getUntracked(aT).filter((e => e.ignoreCloseAll)));
const t = e.getUntracked(aT);
e.set(sT, (e => {
const n = {};
for (const r of t) r.id && e[r.id] && (n[r.id] = e[r.id]);
return n;
}));
}))
};
}
}), pT = e => {
const t = Os(), n = ws(lT)?.id;
H.useEffect((() => {
n && t.set(sT, (t => t[n]?.state.telemetryId === e ? t : {
...t,
[n]: {
state: {
telemetryId: e
}
}
}));
}), [ t, n, e ]);
}, fT = "missing_id";
function hT(e, t) {
return t ? "function" == typeof t ? Ts((() => t(e))) : t : fT;
}
function mT(e, t) {
const n = pg.getFromLocation(t)?.telemetryId, r = hT(e, n);
return r === fT && console.warn("Missing telemetryId for " + t.pathname), r;
}
var gT = () => mT(Os(), jo().location);
function yT(e) {
return "/" !== e.pathname;
}
var IT = class {
constructor(e, t, n) {
this.moby = e, this.pinClient = t, this.getCurrentLocation = n, this.currentState = {}, 
this.isInOverlay = !1, this.disableEvents = !1;
}
shouldTriggerEvent(e) {
return "page" !== e && "overlay" !== e || !this.disableEvents;
}
withDisabledEvents(e) {
this.disableEvents = !0;
try {
e();
} catch (e) {}
this.disableEvents = !1;
}
onEvent(e, t) {
const {enterTime: n, location: r} = this.currentState;
if (t === r) return;
const i = Date.now();
switch (e) {
case "overlay":
this.isInOverlay = !0;
break;

case "page":
this.isInOverlay = !1;
}
const o = {
type: e,
pgid: mT(this.moby, t)
};
r && (o.fromid = mT(this.moby, r)), void 0 !== n && (o.pgdur = Math.round((i - n) / 1e3)), 
this.shouldTriggerEvent(e) && this.pinClient.triggerPageView(o), this.currentState = {
location: t,
enterTime: i
};
}
onPageView(e) {
this.onEvent("page", e);
}
onOverlayView(e, t) {
yT(e) ? (this.onEvent("overlay", e), t && this.shouldTriggerEvent("overlay") && this.pinClient.triggerMessage({
pg_id: t,
msg_id: t,
status: "impression",
type: "in_game",
service: "",
index: {
total_items: 0,
item_index: 0
}
})) : this.isInOverlay && this.onEvent(...this.getCurrentLocation());
}
onStart() {
this.currentState.location || (this.currentState.location = {
state: {
telemetryId: "manual_invoke"
}
}, this.onEvent(...this.getCurrentLocation()));
}
onExit() {
this.currentState.location && (this.onEvent("exit", {
state: {
telemetryId: "manual_close"
}
}), this.currentState = {});
}
}, [_T, bT] = js({
debugName: "pageViewTelemetryState",
create: e => {
const t = Yh(e, "main"), n = Yh(e, "overlay"), r = e.get(ly);
return new IT(e, r, (function() {
const r = e.getUntracked(cT);
return r ? [ "overlay", r ] : yT(n.location) ? [ "overlay", n.location ] : [ "page", t.location ];
}));
}
}), ST = () => {
const e = Os();
H.useEffect((() => {
const t = Yh(e, "main"), n = Yh(e, "overlay"), r = e.get(_T), i = [ t.listen((e => {
r.onPageView(e);
})), n.listen((e => {
r.onOverlayView(e);
})), Fn((() => e.get(cT)), ((e, i) => {
e?.state.telemetryId ? r.onOverlayView(e, e.state.telemetryId) : i?.state.telemetryId && (yT(n.location) ? r.onOverlayView(n.location) : r.onPageView(t.location));
}), {
fireImmediately: !0
}), Fn((() => e.get(Sh)), (e => {
e ? r.onStart() : r.onExit();
}), {
fireImmediately: !0
}) ];
return () => {
i.forEach((e => e()));
};
}), [ e ]);
}, vT = e => e.map(((t, n) => ({
...t,
telemetryInfo: {
index: {
item_index: n + 1,
total_items: e.length
}
}
}))), TT = (e, t) => {
e.triggerMessage({
type: "in_game",
service: "",
index: {
total_items: 0,
item_index: 0
},
status: "click",
...t
});
}, ET = (e, t, n) => (...r) => (n && t && TT(e, n), t?.(...r)), PT = (e, t) => {
const n = cy();
return H.useCallback((r => {
TT(n, {
pg_id: e,
destination_name: t,
msg_id: t,
option: r ? "expand" : "collapse"
});
}), [ t, e, n ]);
}, OT = e => {
const t = cy();
H.useEffect((() => {
if (e?.pg_id) {
const n = {
msg_id: e.msg_id ?? e.pg_id,
pg_id: e.pg_id,
status: "impression"
};
e.destination_name && (n.destination_name = e.destination_name), e.option && (n.option = e.option), 
e.context && (n.context = e.context), e.index && (n.index = e.index), TT(t, n);
}
}), [ e?.pg_id, e?.msg_id, e?.destination_name, e?.option, e?.context, e?.index, t ]);
}, CT = {
0: "blocked",
2: "favorite",
1: "friend",
3: "pending_friend_other",
4: "pending_friend_self",
6: "not_friend",
5: "self"
};
function NT(e, t) {
const n = e.getItem(oT, t);
return void 0 !== n ? CT[n] : "unknown";
}
var AT = (e, t, n, r, i) => () => {
const o = Ts((() => {
const r = gb(e).personaInfo, o = e.get(zS).get().data, a = HS(e, o, t, n);
let s = "unknown", l = "unknown";
a && (s = a.playerNetworkId === r.playerNetworkId ? "same" : "other", l = a.devicePlatformId === r.devicePlatformId ? "same" : "other");
const {eaPlayerId: c} = JI(t);
return {
nucleus: c,
plat: s,
gen: l,
rel: NT(e, YI(t)),
...i?.context
};
}));
return ET(e.get(ly), r, i && {
...i,
context: o
})();
}, LT = (e, t, n, r) => {
const i = Os();
return H.useMemo((() => AT(i, e, t, n, r)), [ i, e, t, n, r ]);
};
function wT(e, t, n) {
const r = "overlay_player_actions_other" === t.pg_id || "overlay_player_actions_self" === t.pg_id;
return `${mT(e, n)}${t.destination_name ? "__" + t.destination_name : ""}${r ? "__" + t.pg_id : ""}`;
}
async function kT(e, t) {
const n = e.get(zg);
if ("XBOX" === e.get(hb).personaInfo.playerNetworkId && n.hasMethod("XboxPlatform", "CheckXUserPrivilege") && n.hasMethod("XboxPlatform", "ResolveXUserPrivilegeWithUiAsync")) {
const r = {
options: bh.XboxPlatform.XUserPrivilegeOptions.None,
privilege: t
};
if (!(await n.XboxPlatform.CheckXUserPrivilege(r))?.hasPrivilege) return TT(e.get(ly), {
pg_id: "tst_xbox_ui_system",
msg_id: "tst_xbox_ui_system",
status: "impression"
}), n.XboxPlatform.ResolveXUserPrivilegeWithUiAsync(r);
}
}
var RT = bh.XboxPlatform.XblAnonymousUserType, xT = bh.XboxPlatform.ResolveXUserPrivilegeWithUiAsyncResult, BT = bh.XboxPlatform.XblPermissionDenyReason;
async function DT(e, t, n, r) {
const i = e.get(zg), o = e.get(hb).personaInfo.playerNetworkId, {playerNetworkId: a} = JI(t);
let s, l = !0;
if ("XBOX" === o && i.hasMethod("XboxPlatform", "getXblPrivacyBatchCheckPermission")) {
const o = [], c = [];
if ("XBOX" === a) {
const n = e.get(z_), r = await LI(n.get(t), 1e4);
r.data?.firstPartyPlayerId && o.push(r.data.firstPartyPlayerId);
}
if (0 === o.length) {
const n = e.getItemUntracked(Jv, t).data;
c.push(n ? RT.CrossNetworkFriend : RT.CrossNetworkUser);
}
try {
if (s = await i.XboxPlatform.getXblPrivacyBatchCheckPermission({
permissions: n,
playersXboxIds: o,
anonymousUserTypes: c
}), s && s.permissionChecks.length > 0) for (const e of s.permissionChecks) if (!e.isAllowed) {
l = !1;
break;
}
} catch (e) {}
if (!l && void 0 !== r) {
if ((await kT(e, r))?.result === xT.Resolved) return DT(e, t, n, void 0);
}
}
return {
isAllowed: l,
privacyResult: s
};
}
function FT(e) {
const t = e?.permissionChecks[0]?.permissionDeniedReason[0];
return void 0 !== t ? BT[t] : BT[BT.Unknown];
}
var MT = (e => (e[e.Always = 0] = "Always", e[e.NotGameplay = 1] = "NotGameplay", 
e[e.Never = 2] = "Never", e))(MT || {}), UT = (e => (e[e.Weekly = 0] = "Weekly", 
e[e.Never = 1] = "Never", e))(UT || {}), HT = (e => (e[e.SixSeconds = 6] = "SixSeconds", 
e[e.TenSeconds = 10] = "TenSeconds", e))(HT || {}), VT = (e => (e[e.TopLeft = 0] = "TopLeft", 
e[e.TopRight = 1] = "TopRight", e[e.BottomLeft = 2] = "BottomLeft", e[e.BottomRight = 3] = "BottomRight", 
e))(VT || {}), JT = (e, t) => {
const n = Ly.enum(MT), r = Ly.enum(UT), i = Ly.enum(HT), o = Ly.enum(VT), a = Ly.objectWithDefaults({
0: n,
1: n,
8: n,
7: n,
2: n,
3: n,
5: n,
6: n,
4: r,
9: i,
10: o
}, e[0]), s = Ly.objectWithDefaults({
0: Ly.boolean
}, e[1]), l = Ly.objectWithDefaults({
0: Ly.boolean
}, e[2]);
return Ly.objectWithDefaults({
0: a,
1: s,
2: l
}, e).parse(t);
}, GT = bh.XboxPlatform.XboxPermission, zT = bh.XboxPlatform.XUserPrivilege, jT = bh.Notifications.NotificationPosition, qT = {
[jT.TopLeft]: 0,
[jT.TopRight]: 1,
[jT.BottomLeft]: 2,
[jT.BottomRight]: 3
};
function YT(e) {
const t = e ? 0 : 1, n = pb.defaultNotificationPosition ?? (Sp() ? jT.BottomLeft : jT.BottomRight);
return {
0: {
0: 0,
1: t,
8: 0,
7: 1,
2: 0,
3: 1,
5: 0,
6: 1,
4: 0,
9: 6,
10: qT[n]
},
1: {
0: !1
},
2: {
0: !Sb()
}
};
}
var KT = class {
constructor(e, t, n) {
this.storage = e, this.moby = t, this.onSettingsUpdated = n, this.defaultSettings = YT(), 
this.settings = {
...this.defaultSettings
}, Cr(this, {
settings: gt,
setSetting: Ln,
restoreSettings: Ln
});
}
async init(e, t, n) {
this.userId = e, this.resetInitialSettings(n), await this.getStoredSettings(t), 
Ts((() => this.onSettingsUpdated?.(this.settings)));
}
resetInitialSettings(e) {
this.defaultSettings = YT(e), this.settings = {
...this.defaultSettings
};
}
async getStoredSettings(e) {
if (this.storageKey) try {
const t = await this.storage.getItem(this.storageKey);
if (t) {
const n = JSON.parse(t), r = JT(this.defaultSettings, n), {isAllowed: i} = await DT(this.moby, e, [ GT.PlayMultiplayer ], zT.Multiplayer);
i || (r[1][0] = !1), this.settings = r;
}
} catch (e) {}
}
get storageKey() {
if (this.userId) return "notificationSettings_" + this.userId;
}
async setStoredSettings() {
return Ts((() => {
if (this.storageKey) return this.onSettingsUpdated?.(this.settings), this.storage.setItem(this.storageKey, JSON.stringify(ur(this.settings)));
}));
}
setSetting(e, t, n) {
return this.settings[e][t] = n, this.setStoredSettings();
}
getSetting(e, t) {
return this.settings[e][t];
}
restoreSettings(e) {
return this.settings[e] = {
...this.defaultSettings[e]
}, this.setStoredSettings();
}
isDefaultSettings(e) {
return Object.keys(this.defaultSettings[e]).every((t => {
const n = Number(t);
return this.defaultSettings && this.settings && this.defaultSettings[e][n] === this.settings[e][n];
}));
}
}, WT = bh.DeepLink.ParentalControlSettings, XT = bh.Voip.VoipProfileType, [QT, $T] = js({
debugName: "settingsState",
create: e => {
const t = e.get(ih), n = e.get(zg), r = dg.isPartyEnabled && dg.featureFlags.setCurrentVoipProfileDoesNotAssert && n.hasMethod("Voip", "setCurrentVoipProfile") ? t => {
Ts((() => {
if (t?.[2]) {
const r = e.get(Hv)(WT.Voip);
let i;
i = Sb() ? XT.DisabledByDefault : r ? XT.DisabledByRestrictions : XT.EnabledByDefault;
const o = t?.[2][0];
try {
n.Voip.setCurrentVoipProfile({
voipProfile: {
isVoipEnabled: o && !r,
profileType: i
}
});
} catch (e) {}
}
}));
} : void 0;
return new KT(t.localStorage, e, r);
}
});
function ZT(e) {
const t = mp(), [n] = H.useState((() => new Mm(t.bindings.Tween, e)));
return H.useEffect((() => {
n.setInitialValue(e);
}), [ n, e ]), H.useEffect((() => () => {
n.destroy();
}), [ n ]), n;
}
var eE = Lc("marginBottom", hc(Xc.DimensionSpace.medium)), tE = (Ec({
marginTop: hc(gu.Notification.Disclaimer.marginTop),
marginBottom: hc(gu.Notification.Disclaimer.marginBottom),
backgroundColor: gu.Notification.Disclaimer.backgroundColor
}), Lc("marginTop", hc(gu.Notification.Button.marginTop))), nE = hc(587), rE = Ec({
color: gu.Notification.Container.color,
width: nE,
layer: !0,
layerClip: !0,
position: "relative"
}), iE = hc(Xc.DimensionSpace.medium), oE = Ec({
position: "absolute",
start: hc(gu.Notification.Inner.left),
end: hc(gu.Notification.Inner.right),
top: hc(gu.Notification.Inner.top)
}), aE = {
duration: Xc.AnimationTime.fastest,
easing: Xc.AnimationEasing.ease
}, sE = ({style: e, children: t}) => {
const n = ZT(0), [r, i] = H.useState(!1), [o, a] = H.useState(!1), s = H.useRef(0), l = H.useCallback((e => {
if (o) return;
const t = e.height + 2 * iE;
if (!r) return n.set(t), void i(!0);
t !== s.current && (s.current = t, a(!0), n.to(t, {
...aE,
onFinished: () => {
a(!1);
}
}));
}), [ r, n, o ]);
return H.createElement("surface", {
style: [ rE, wf({
radius: gu.Notification.Container.borderRadius
}), r ? n.propStyle("height") : void 0, e ]
}, H.createElement("surface", {
style: oE,
onBounds: l
}, t));
}, lE = Ec({
flexDirection: "row",
alignItems: "center"
}), cE = ({children: e, style: t}) => H.createElement("surface", {
style: [ lE, t ]
}, e), dE = ({children: e, style: t}) => H.createElement("surface", {
style: [ Lc("flexDirection", "column"), t ]
}, e), uE = Ec({
width: hc(80),
height: hc(80),
marginEnd: hc(gu.Notification.IconWrapper.marginEnd),
alignItems: "center",
justifyContent: "center",
flexShrink: 0
}), pE = Ec({
width: hc(gu.Notification.Icon.width),
height: hc(gu.Notification.Icon.height),
textureMode: "contain",
zOffset: 1
}), fE = ({texture: e, color: t, style: n, wrapperStyle: r}) => H.createElement("surface", {
style: [ uE, r ]
}, H.createElement("surface", {
style: [ pE, n, Lc("color", t), Lc("texture", e) ]
})), hE = Ec({
borderCenter: !0,
texture2Border: hc(gu.Notification.Image.borderRadius),
texture2: Lf({
radius: gu.Notification.Image.borderRadius
}),
width: hc(80),
height: hc(80)
}), mE = ({style: e, ...t}) => H.createElement(fE, {
style: [ hE, e ],
...t
}), gE = Ec({
width: hc(80),
height: hc(80),
alignItems: "flex-start",
justifyContent: "center",
alignSelf: "flex-start",
flexShrink: 0,
marginEnd: hc(gu.Notification.IconBackground.marginEnd)
}), yE = ({backgroundTexture: e, ...t}) => H.createElement("surface", {
style: [ gE, Lc("texture", e) ]
}, H.createElement(fE, {
...t
})), IE = Ec({
flex: 1
}), _E = ({text: e, color: t, style: n}) => H.createElement(iv, {
style: [ IE, n ],
text: e,
color: t ?? Xc.TextColorStandard.emphasized
}), bE = Ec({
color: gu.Notification.Info.color,
padding: hc(gu.Notification.Info.padding),
paddingLeft: 0,
flexDirection: "row",
alignItems: "flex-start"
}), SE = ({children: e, style: t}) => H.createElement("surface", {
style: [ wf({
radius: gu.Notification.Info.borderRadius
}), bE, t ]
}, e), vE = ({children: e}) => H.createElement("surface", {
style: Lc("flexDirection", "column")
}, e), TE = ({id: e, text: t, callback: n, variant: r, style: i, narrationItem: o, narration: a}) => {
const s = Up(2);
return H.createElement(lf, {
id: e,
label: t,
variant: r,
style: i,
input: {
keyBinding: s,
callback: n
},
onClick: n,
narration: a,
narrationItem: o
});
};
function EE(e) {
return Bh?.[e] ?? e;
}
var PE = fs.Input.GamePadInput, OE = fs.Input.DeviceType, CE = {
fps: 60,
totalFrames: 60,
startFrame: 0,
looping: !1
};
function NE({height: e, ...t}) {
return Ec({
spriteAnimation: {
...CE,
...t
},
height: e
});
}
var AE = {
circular: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/Circle-24219046.png"),
2: Dc("/photon/quantum/sprites/Circle@2x-d23a83cc.png")
}),
frameWidth: hc(46),
frameHeight: hc(46),
height: hc(46)
}),
escTab: NE({
spriteSheet: Dc("/photon/quantum/sprites/EscTab_spaced-2c4cce55.png"),
frameWidth: 69,
frameHeight: 44,
height: hc(44)
}),
keyboardKeys: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/KeyboardKeys-8b666dab.png"),
2: Dc("/photon/quantum/sprites/KeyboardKey@2x-be59b33a.png")
}),
frameWidth: hc(62),
frameHeight: hc(46),
height: hc(46)
}),
playstationL1R1: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/PS_L1R1-c0eb2a71.png"),
2: Dc("/photon/quantum/sprites/PS_L1R1@2x-44966ef7.png")
}),
frameWidth: hc(62),
frameHeight: hc(46),
height: hc(46)
}),
playstationL2: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/PS_L2-73f3ceac.png"),
2: Dc("/photon/quantum/sprites/PS_L2@2x-bdc16511.png")
}),
frameWidth: hc(54),
frameHeight: hc(46),
height: hc(46)
}),
playstationR2: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/PS_R2-f9c3cc70.png"),
2: Dc("/photon/quantum/sprites/PS_R2@2x-598f9bf0.png")
}),
frameWidth: hc(54),
frameHeight: hc(46),
height: hc(46)
}),
playstationOptions: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/PS5_Options-d51ab689.png"),
2: Dc("/photon/quantum/sprites/PS5_Options@2x-be5985b8.png")
}),
frameWidth: hc(46),
frameHeight: hc(46),
height: hc(46)
}),
playstationWordOptions: NE({
spriteSheet: Dc("/photon/quantum/sprites/PlaystationWordOptions_spaced-757a0bf2.png"),
frameWidth: 96,
frameHeight: 44,
height: hc(44)
}),
xboxLt: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/Xbox_LT-fc24c8ad.png"),
2: Dc("/photon/quantum/sprites/Xbox_LT@2x-b6d65690.png")
}),
frameWidth: hc(46),
frameHeight: hc(46),
height: hc(46)
}),
xboxRt: NE({
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/Xbox_RT-a4fb6698.png"),
2: Dc("/photon/quantum/sprites/Xbox_RT@2x-e1be6525.png")
}),
frameWidth: hc(46),
frameHeight: hc(46),
height: hc(46)
}),
switchL: NE({
spriteSheet: Dc("/photon/quantum/sprites/SwitchL_spaced-6e7e1668.png"),
frameWidth: 46,
frameHeight: 38,
height: hc(38)
}),
switchR: NE({
spriteSheet: Dc("/photon/quantum/sprites/SwitchR_spaced-81af1806.png"),
frameWidth: 46,
frameHeight: 38,
height: hc(38)
}),
switchZL: NE({
spriteSheet: Dc("/photon/quantum/sprites/SwitchZL_spaced-eae374c9.png"),
frameWidth: 46,
frameHeight: 38,
height: hc(38)
}),
switchZR: NE({
spriteSheet: Dc("/photon/quantum/sprites/SwitchZR_spaced-735440b5.png"),
frameWidth: 46,
frameHeight: 38,
height: hc(38)
})
}, LE = {
[OE.MouseAndKeyboard]: {},
[OE.Touch]: {},
[OE.Playstation]: {
[PE.SpecialLeft]: AE.keyboardKeys,
[PE.TriggerRight]: AE.playstationR2,
[PE.TriggerLeft]: AE.playstationL2,
[PE.SpecialRight]: "PS5" === pc.devicePlatformId ? AE.playstationOptions : AE.playstationWordOptions,
[PE.ShoulderLeft]: AE.playstationL1R1,
[PE.ShoulderRight]: AE.playstationL1R1
},
[OE.Xbox]: {
[PE.TriggerRight]: AE.xboxRt,
[PE.TriggerLeft]: AE.xboxLt
},
[OE.NotSet]: {},
[OE.Stadia]: {},
[OE.Switch]: {
[PE.TriggerRight]: AE.switchZR,
[PE.TriggerLeft]: AE.switchZL,
[PE.ShoulderRight]: AE.switchR,
[PE.ShoulderLeft]: AE.switchL
}
};
function wE(e, t) {
const n = LE[e.device];
return e.device === OE.MouseAndKeyboard ? void 0 === t && e.keyboardKeyLabel && 1 === e.keyboardKeyLabel?.length ? AE.playstationOptions : AE.keyboardKeys : n[e.gamePadInput ?? PE.NotBound] || AE.circular;
}
var [kE, RE] = Is("NotificationFocusable");
function xE(e) {
const t = e.split("%key%");
return 1 === t.length ? [ e, "" ] : [ t[0].trim(), t[1].trim() ];
}
var BE = Ec({
alignSelf: "stretch",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center",
justifyContent: "center"
}), DE = Ec({
position: "relative",
marginLeft: hc(gu.NotificationActivate.SpriteAnimationContainer.marginStart),
marginRight: hc(gu.NotificationActivate.SpriteAnimationContainer.marginEnd),
height: hc(46),
alignItems: "center",
justifyContent: "center"
}), FE = [ DE, Ec({
paddingStart: hc(7),
paddingEnd: hc(7)
}) ], ME = Ec({
position: "absolute",
zOffset: 1,
left: 0,
right: 0
}), UE = "holdTimerKey", HE = Ii.observer((({onActivated: e, activateText: t, holdActivateText: n, holdRequired: r, holdTime: i, interaction: o}) => {
const a = mp(), {isPressed: s} = o, {timeout: l, disposeTimeout: c} = Cu(), d = Up(4), [u, p] = H.useState(null), [f, h] = H.useState(!1), m = s || f;
H.useEffect((() => {
r && u && a.bindings.Layout.playSpriteAnimation({
surfaceId: u,
start: m
});
}), [ f, r, m, u, a ]), H.useEffect((() => a.bindings.Input.onFocusNotificationButtonPressed.subscribe((() => {
h(!0);
}))), [ a ]), H.useEffect((() => a.bindings.Input.onFocusNotificationButtonReleased.subscribe((() => {
h(!1);
}))), [ a ]);
const g = H.useCallback((() => {
r || e?.();
}), [ r, e ]), y = pp({
transcendBoundaries: !0,
keyBinding: d,
callback: g
});
H.useEffect((() => {
r && h(y);
}), [ y, r ]), H.useEffect((() => {
r && i && (c(UE), m && e && l(UE, e, i));
}), [ c, f, r, i, m, s, e, l ]);
const I = sc(d.primaryButton), _ = d.primaryButton.keyboardKeyLabel, [b, S] = xE(r ? n : t), v = gu.NotificationActivate.Label.color, T = wE(d.primaryButton, I);
return H.createElement("surface", {
style: BE
}, !!b && H.createElement(Iu, {
text: b,
color: v
}), I || _ ? H.createElement("surface", {
style: r ? FE : DE
}, H.createElement(vu, {
buttonLabel: _,
icon: I
}), r ? H.createElement("surface", {
onSurfaceId: p,
style: [ ME, T ]
}) : void 0) : void 0, !!S && H.createElement(Iu, {
text: S,
color: v
}));
})), VE = Ii.observer((e => {
const {onActivated: t} = e;
return H.createElement(sf, {
variant: 0,
id: "activateNotification",
onClick: t
}, (t => H.createElement(HE, {
...e,
interaction: t
})));
})), JE = Ii.observer((({style: e, onClose: t, children: n}) => {
const r = Up(3);
return up({
keyBinding: r,
callback: t,
label: EE("INPUT_LABEL_DISMISS_NOTIFICATION")
}), H.createElement("surface", {
style: [ Lc("flexDirection", "column"), e ]
}, n);
})), GE = Ec({
position: "relative"
}), zE = Ec({
position: "absolute",
top: 0,
bottom: 0,
right: 0,
left: 0
}), jE = ({children: e, onClose: t, holdTime: n, holdRequired: r, activateText: i, holdActivateText: o, onActivated: a, isActivated: s}) => {
const l = RE(), c = ZT(0), d = ZT(1), [u, p] = H.useState(!1), f = H.useCallback((() => {
u || (d.to(0, aE), p(!0), a?.(), c.to(1, {
...aE,
delay: aE.duration
}));
}), [ u, d, c, a ]), h = H.useCallback((() => {
t?.(), d.to(0, aE), p(!1), c.to(1, {
...aE,
delay: aE.duration
});
}), [ d, c, t ]);
return H.useEffect((() => {
s && !u && f();
}), [ u, f, s ]), H.useEffect((() => {
l.setFocusable();
}), [ l ]), H.createElement("surface", {
style: [ GE, Lc("minHeight", hc(68)) ]
}, H.createElement(Jf, {
isolate: u
}, u ? H.createElement(JE, {
style: c.propStyle("opacity"),
onClose: h
}, e) : void 0), H.createElement(Jf, {
disable: u
}, H.createElement("surface", {
style: [ zE, d.propStyle("opacity"), u ? Lc("enableMouseEvents", !1) : void 0 ]
}, H.createElement(VE, {
onActivated: f,
holdTime: n,
holdRequired: r,
activateText: i,
holdActivateText: o
}))));
}, qE = ({id: e, onDismiss: t, onAction: n, dismiss: r, message: i, icon: o, holdTimeMs: a, buttonLabel: s, onMount: l}) => {
const c = H.useCallback((() => {
n(), r();
}), [ r, n ]);
return H.useEffect((() => (l?.(), () => {
t();
})), [ t, l ]), H.createElement(dE, null, H.createElement(sE, {
key: e
}, H.createElement(cE, {
style: s ? eE : void 0
}, H.createElement(fE, {
texture: o.icon,
color: o.iconColor
}), H.createElement(_E, {
text: i
})), !!s && H.createElement(jE, {
onActivated: c,
activateText: "",
holdActivateText: s,
holdRequired: !0,
holdTime: a
})));
}, YE = 0, KE = class {
constructor(e, t) {
this.item = e, this.screenTimeInSec = t, this.id = ++YE + "", this.timeLogItem = {
startTs: 0,
endTs: 0,
duration: 0
};
}
setTimeLog() {
this.timeLogItem.endTs || (this.timeLogItem.endTs = Date.now(), this.timeLogItem.startTs ? this.timeLogItem.duration = Math.ceil((this.timeLogItem.endTs - this.timeLogItem.startTs) / 1e3) : (this.timeLogItem.startTs = this.timeLogItem.endTs, 
this.timeLogItem.duration = 0));
}
ready() {
this.timeLogItem.startTs || (this.timeLogItem.startTs = Date.now());
}
done() {
this.setTimeLog();
}
getScreenTimeInSeconds() {
if (!this.item.options?.stayActiveUntilInteractedWith) return this.screenTimeInSec;
}
}, WE = class {
constructor(e) {
this.items = [], this.capacity = e.capacity, this.getScreenTimeInSec = e.getScreenTimeInSec, 
this.useTimeWindow = e.useTimeWindow, this.overridable = e.overridable;
}
addItem(e) {
this.items.push(e);
}
getCount() {
return this.items.length;
}
getNextItem() {
return this.overridable && this.items.length > 1 && this.items.splice(0, this.items.length - 1), 
this.items[0];
}
dequeueNextItem() {
this.items.shift();
}
}, XE = class {
constructor(e, t, n, r) {
this.pinClient = e, this.settings = t, this.gamePlayManager = n, this.activeItem = void 0, 
this.onDismiss = new os, this.onComplete = new os, this.queues = {
0: new WE({
getScreenTimeInSec: () => Ts((() => this.settings.getSetting(0, 9))),
capacity: 1,
useTimeWindow: !1
}),
1: new WE({
getScreenTimeInSec: () => Ts((() => this.settings.getSetting(0, 9))),
capacity: 10,
useTimeWindow: !0
}),
2: new WE({
getScreenTimeInSec: () => 4,
capacity: 15,
useTimeWindow: !0
}),
3: new WE({
getScreenTimeInSec: () => 4,
capacity: 2,
useTimeWindow: !1,
overridable: !0
})
}, this.timeLog = [], this.isNotificationAllowed = !0;
const i = r.getNotificationAllowed({});
i && this.setNotificationAllowed(i.status), r.onNotificationAllowChanged.subscribe((({status: e}) => {
this.setNotificationAllowed(e);
})), Cr(this, {
activeItem: gt.ref
});
}
setNotificationAllowed(e) {
this.isNotificationAllowed = e;
}
get isInGamePlay() {
return this.gamePlayManager.isInGamePlay;
}
shouldShowNotification(e) {
if (!this.isNotificationAllowed) return !1;
const t = 2 === this.settings.getSetting(0, 0), n = 1 === this.settings.getSetting(0, 0), r = 2 === this.settings.getSetting(0, e), i = 1 === this.settings.getSetting(0, e);
return this.gamePlayManager.isInGamePlay ? !(t || n || r || i) : !t && !r;
}
addNotification(e) {
const t = e.options?.setting ?? 0;
Ts((() => this.shouldShowNotification(t))) ? this.isQueueAvailable(e.tier) ? (this.addToQueue(e), 
Ts((() => {
this.activeItem || this.showNextNotification();
}))) : this.telemetrySendEvent("dropped", e) : this.telemetrySendEvent("hidden", e);
}
dismiss() {
this.onDismiss.trigger();
}
isQueueAvailable(e) {
return Ts((() => {
const t = this.queues[e];
if (this.activeItem) {
if (this.queues[this.activeItem.item.tier].overridable) return this.dismiss(), !0;
if (t.overridable) return !1;
}
return t.getCount() + 1 <= t.capacity;
}));
}
isTimeSlotExceeded(e) {
const {tier: t} = e;
if (!this.queues[t].useTimeWindow) return !1;
const n = this.getScreenTimeInSeconds(e);
if (!n) throw Error("screenTimeInSec is not set properly");
return this.timeLog.reduce(((e, t) => e + t.duration), 0) + n > 20;
}
addToQueue(e) {
this.queues[e.tier].addItem(e);
}
showNextNotification() {
if (this.activeItem) return;
let e;
this.purgeTimeLog(), this.queues[0].getCount() ? e = this.queues[0].getNextItem() : this.queues[1].getCount() ? e = this.queues[1].getNextItem() : this.queues[2].getCount() ? e = this.queues[2].getNextItem() : this.queues[3].getCount() && (e = this.queues[3].getNextItem()), 
e ? this.isTimeSlotExceeded(e) ? (this.telemetrySendEvent("dropped", e), this.queues[e.tier].dequeueNextItem(), 
this.showNextNotification()) : this.activeItem = new KE(e, this.getScreenTimeInSeconds(e)) : this.activeItem = void 0;
}
deleteActiveItem() {
if (!this.activeItem) return;
const e = this.activeItem.item.tier;
this.queues[e].dequeueNextItem(), this.activeItem = void 0;
}
addToTimeLog(e) {
this.timeLog.push(e), this.purgeTimeLog();
}
purgeTimeLog() {
const e = Date.now() - 6e4;
this.timeLog = this.timeLog.filter((t => t.endTs > e));
}
isUsingWithTimeWindow(e) {
const t = e.tier;
return this.queues[t].useTimeWindow;
}
activeItemDone() {
Ts((() => {
if (!this.activeItem) return;
this.isUsingWithTimeWindow(this.activeItem.item) && this.addToTimeLog(this.activeItem.timeLogItem);
const {options: e, tier: t, type: n} = this.activeItem.item;
this.deleteActiveItem(), this.showNextNotification(), this.onComplete.trigger(t, n, e);
}));
}
getNotificationQueueFromTier(e) {
return this.queues[e];
}
getScreenTimeInSeconds({options: e, tier: t}) {
return e?.screenTimeInSec ?? this.queues[t].getScreenTimeInSec();
}
telemetrySendEvent(e, t) {
t.options?.telemetryInfo && TT(this.pinClient, {
msg_id: t.options.telemetryInfo.pg_id,
...t.options.telemetryInfo,
status: "impression",
status_code: e,
...t.data?.hasActions && {
option: "open",
destination_name: "main"
}
});
}
}, QE = ({keyBinding: e, label: t}, {getKeyBindingText: n}) => e ? [ wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-BUTTON"), wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-1", {
"%buttonPrimary%": n(e),
"%actionPrimary%": t
}) ] : void 0, $E = ({label: e, keyBinding: t, buttonNumber: n, buttonTotal: r}, {getKeyBindingText: i}) => t ? [ wh("PHOTON-SOCIAL_NARRATION_BUTTON-FOCUS", {
"%buttonLabel%": e,
"%buttonNumber%": n + "",
"%buttonTotal%": r + "",
"%primaryKey%": i(t)
}) ] : void 0, ZE = () => ({
activateText: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_PRESS-OPEN"),
holdActivateText: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_OPEN")
}), eP = Ec({
alignSelf: "flex-start"
}), tP = Ec({
flexDirection: "column"
}), nP = Ec({
marginTop: hc(Xc.DimensionSpace.small),
marginBottom: hc(Xc.DimensionSpace.small)
}), rP = e => ({id: t, dismiss: n, stayActive: r, holdOptions: i, isActivated: o, onClose: a}) => {
const {activateText: s, holdActivateText: l} = ZE();
let c;
return e.icon && (c = 1 === e.iconSize ? H.createElement(mE, {
texture: e.icon,
wrapperStyle: eP
}) : H.createElement(fE, {
texture: e.icon,
color: e.iconColor,
wrapperStyle: eP
})), H.createElement(sE, {
key: t
}, H.createElement(cE, {
style: e.actions ? eE : void 0
}, c, H.createElement("surface", {
style: tP
}, H.createElement(_E, {
text: e.text
}), e.secondaryText ? H.createElement(_E, {
text: e.secondaryText,
color: Xc.TextColorStandard.default,
style: nP
}) : void 0)), e.actions ? H.createElement(jE, {
onDismiss: n,
onClose: a,
isActivated: o,
onActivated: r,
holdTime: i?.holdTimeMs,
holdRequired: i?.holdRequired,
activateText: s,
holdActivateText: l
}, e.infoArea ? H.createElement(SE, {
style: eE
}, H.createElement(fE, {
color: e.infoArea.iconColor,
texture: e.infoArea.icon
}), H.createElement(_E, {
text: e.infoArea.text,
style: Lc("alignSelf", "center")
})) : void 0, H.createElement(vE, null, e.actions.map(((t, r) => H.createElement(TE, {
variant: 0 === r ? 0 : void 0,
key: t.id,
style: 0 !== r ? tE : void 0,
id: t.id,
text: t.label,
callback: () => {
n(), t.callback();
},
narration: {
buttonNumber: r + 1,
buttonTotal: e.actions?.length ?? 0
},
narrationItem: $E
}))))) : void 0);
}, [iP, oP] = js({
debugName: "notificationState",
create: e => {
const t = e.get(ih), n = e.get(zg), r = e.get(ly), i = e.get(QT), o = e.get(_v), a = e.get(Jg), s = new XE(r, i, o, n.Notifications), l = () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !0
});
}, c = () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !1
});
};
return {
notificationManager: s,
showNotification(e, t, n, r) {
const i = {
...n,
hasActions: !!n?.actions?.length
};
s.addNotification({
tier: e,
type: t,
content: rP(n),
options: r,
data: i
});
},
showNotificationComponent(e, t, n, r, i) {
s.addNotification({
tier: e,
type: t,
content: n,
options: r,
data: i
});
},
showCtaNotification(e, n, r, i, o, a, d) {
const u = 1e3 * (t.bindings.Input.getFocusNotificationConfig({})?.holdTimeSeconds ?? 1);
s.addNotification({
tier: e,
type: n,
content: e => H.createElement(qE, {
...e,
icon: r,
message: i,
buttonLabel: o,
holdTimeMs: u,
onDismiss: c,
onAction: a,
onMount: l
}),
options: d,
data: {
text: i
}
});
},
showNextNotification() {
s.activeItemDone();
},
showErrorNotification(e, t, n) {
a.addEvent({
eventType: "photon_user_error",
value: t,
message: n?.message
}), s.addNotification({
tier: 0,
type: 0,
content: rP({
text: wh("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL"),
icon: Sf.WARNING,
iconColor: Xc.IconColorStandard.error,
...e
})
});
}
};
}
});
function aP() {
return mb().personaInfo;
}
function sP(e) {
return gb(e).personaInfo;
}
function lP(e) {
return e?.displayName ?? "";
}
var cP = {
EPIC: !0,
EA: !0,
PSN: !0,
NINTENDO: !0,
STEAM: !0,
XBOX: !0
};
function dP(e) {
return e in cP;
}
var uP = {
EPIC: {
EPIC: "EPIC",
EA: av.Console,
PSN: av.Console,
STEAM: av.Console,
XBOX: av.Console,
NINTENDO: av.Console
},
EA: {
EPIC: av.Console,
EA: "EA",
PSN: av.Console,
STEAM: av.Console,
XBOX: av.Console,
NINTENDO: av.Console
},
PSN: {
EPIC: av.Console,
EA: av.Console,
PSN: "PSN",
STEAM: av.Console,
XBOX: av.Console,
NINTENDO: av.Console
},
STEAM: {
EPIC: av.Console,
EA: av.Console,
PSN: av.Console,
STEAM: "STEAM",
XBOX: av.Console,
NINTENDO: av.Console
},
XBOX: {
EPIC: av.Console,
EA: av.Console,
PSN: av.Console,
STEAM: av.Console,
XBOX: "XBOX",
NINTENDO: av.Console
},
NINTENDO: {
EPIC: av.Console,
EA: av.Console,
PSN: av.Console,
STEAM: av.Console,
XBOX: av.Console,
NINTENDO: "NINTENDO"
}
}, pP = {
EPIC: {
EPIC: av.Pc,
EA: av.Pc,
PSN: av.Console,
STEAM: av.Pc,
XBOX: av.Console,
NINTENDO: av.Console
},
EA: {
EPIC: av.Pc,
EA: av.Pc,
PSN: av.Console,
STEAM: av.Pc,
XBOX: av.Console,
NINTENDO: av.Console
},
PSN: {
EPIC: av.Pc,
EA: av.Pc,
PSN: "PSN",
STEAM: av.Pc,
XBOX: av.Console,
NINTENDO: av.Console
},
STEAM: {
EPIC: av.Pc,
EA: av.Pc,
PSN: av.Console,
STEAM: av.Pc,
XBOX: av.Console,
NINTENDO: av.Console
},
XBOX: {
EPIC: av.Pc,
EA: av.Pc,
PSN: av.Console,
STEAM: av.Pc,
XBOX: "XBOX",
NINTENDO: av.Console
},
NINTENDO: {
EPIC: av.Pc,
EA: av.Pc,
PSN: av.Console,
STEAM: av.Pc,
XBOX: av.Console,
NINTENDO: "NINTENDO"
}
};
function fP(e, t) {
const n = Ab.legacySimplifiedPlatformRepresentations ? uP : pP;
return dP(e) && dP(t) ? n[e][t] : av.Console;
}
function hP(e, t, n) {
let r = fP(t, n?.playerNetworkId ?? "EA");
if (n && r === av.Pc) {
const t = HS(e, e.get(zS).get().data, n.photonPlayerId, void 0);
i = r, o = n.playerNetworkId, a = t?.isOnline ?? !1, r = "Pc" !== i || a || "EA" !== o ? i : av.Ea;
}
var i, o, a;
return r;
}
var mP = e => {
const {playerNetworkId: t} = aP(), n = Os();
return {
name: lP(e),
playerNetworkId: hP(n, t, e)
};
}, gP = (e, t, n) => Ts((() => {
const r = hP(e, n.personaInfo.playerNetworkId, t);
return {
name: lP(t),
playerNetworkId: r
};
})), [yP, IP] = js({
debugName: "lobbyJoinedNotificationState",
create: e => {
const {showNotification: t} = e.get(iP);
return n => {
const r = gb(e), {isCurrentPhotonUser: i} = Ib(n.photonPlayerId, r);
if (i) return;
const o = hv(gP(e, n, r), {
allowEllipsis: !0
});
t(2, 2, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_LOBBY_MEMBER-JOIN", {
"%primaryID%": o
}),
icon: Sf.PARTY
});
};
}
}), _P = class extends TI {
constructor(e, t, n, r) {
super(r), this.moby = e, this.lobbyApi = t, this.playerInfoStore = n;
}
init() {
const e = [ this.setSeed(), this.setLobbyChangedStream() ];
return () => {
e.forEach((e => e?.()));
};
}
updateLobby(e) {
this.applyFragmentResults(PI({
data: e,
loading: !1,
skipped: !1
}), ((e, t) => e.update(t)));
}
triggerPlayerJoinedNotification(e) {
for (const t of e) this.triggerPlayerInfoNotification(this.moby.get(yP), t.photonPlayerId);
}
triggerPlayerInfoNotification(e, t) {
return LI(this.playerInfoStore.get(t), 1e4).then((({data: t}) => {
if (t) return e(t);
}));
}
setSeed() {
return this.setSeedStrategy({
fetch: async () => OI(await Xy((() => this.lobbyApi.getLobby({})), ZS, {
transformResponse: WS
})),
updater: (e, t) => e.update(t)
});
}
setLobbyChangedStream() {
return this.setStreamStrategy({
batchDuration: 0,
stream: new tv(this.lobbyApi.onLobbyChanged),
updater: (e, t) => {
let n;
if (t.data?.lobby?.members.length) {
const r = e.data, i = t.data?.lobby;
if (i) {
const e = i.lobbyId === r?.lobbyId, t = KS(i, e ? r?.members : void 0);
n = t.lobby, e && t.added.length && this.triggerPlayerJoinedNotification(t.added);
}
}
e.update({
...e.toProps(),
data: n
});
}
}, "lobbyChangedStreamStrategy");
}
}, [bP, SP] = js({
debugName: "lobbyFragmentStoreState",
create: e => {
const t = e.get(zg), n = e.get(z_);
return new _P(e, t.Lobby, n, {
debugName: "Lobby"
});
}
});
function vP(e) {
return e.getUntracked(bP).get();
}
function TP(e) {
return e.get(bP);
}
function EP(e, t, n) {
const r = e.get(bP).get().data, i = e.get(zS).get()?.data, o = HS(e, i, t, n), a = r?.members.has(t) ?? !1;
return n && a && o?.devicePlatformId && o.productId ? a && o.productId === dg.productId && pb.crossplayCompatiblePlatforms.has(o.devicePlatformId) : a;
}
var PP = Js({
debugName: "lobbyCrossplayEnabledState",
get: function({get: e}) {
return e(bP).get().data?.crossPlayEnabled;
}
});
function OP(e, t) {
function n(t) {
return Ts((() => {
const n = vP(e).data;
if (n?.lobbyId === t.lobbyId) {
const e = [];
for (const t of n.members.values()) e.push({
playerId: t.eaPlayerId,
playerNetworkId: t.playerNetworkId,
personaId: t.personaId,
displayName: t.displayName,
joinTimestampMs: t.joinTimestampMs
});
return {
...n,
members: e
};
}
}));
}
t.onMemberLeft.subscribe((e => {
const r = n(e);
if (r) {
const n = e, i = r.members.findIndex((e => n.playerId === e.playerId && n.playerNetworkId === e.playerNetworkId && n.personaId === e.personaId));
-1 !== i && (r.members.splice(i, 1), t.onLobbyChanged.trigger({
lobby: r
}));
}
})), t.onMemberJoined.subscribe((e => {
const r = n(e);
if (r) {
const n = e.member, i = r.members.findIndex((e => n.playerId === e.playerId && n.playerNetworkId === e.playerNetworkId && n.personaId === e.personaId));
-1 !== i && r.members.splice(i, 1), r.members.push(n), t.onLobbyChanged.trigger({
lobby: r
});
}
}));
}
function CP(e, t) {
const n = [], r = [], i = {}, o = 0 === t.size;
for (let r = 0, a = e.length; r < a; r++) {
const a = e[r], s = a.playerId, l = Yy(a.playerNetworkId), c = UI({
eaPlayerId: s,
playerNetworkId: l
});
i[c] = !0;
const d = t.get(c);
if (!d || d.personaId !== a.personaId) {
const e = {
eaPlayerId: s,
personaId: a.personaId,
playerNetworkId: l,
joinTimestampMs: a.joinTimestampMs,
photonPlayerId: c,
displayName: a.displayName
};
t.set(c, e), o || n.push(e);
}
}
if (e.length !== t.size) for (const e of t.values()) i[e.photonPlayerId] || (t.delete(e.photonPlayerId), 
r.push(e));
return {
added: n,
removed: r
};
}
function NP(e, t = new bs([])) {
const {added: n, removed: r} = CP(e.members, t);
return {
party: {
...e,
partyLeader: {
playerId: e.partyLeader.playerId,
personaId: e.partyLeader.personaId,
playerNetworkId: Yy(e.partyLeader.playerNetworkId)
},
members: t,
maxSize: e.maxSize,
promotionEnabled: e.promotionEnabled,
crossPlayEnabled: e.crossPlayEnabled,
joinable: e.joinable,
invitable: e.invitable,
localizedPartyTitle: e.localizedPartyTitle,
telemetryType: e.telemetryType
},
added: n,
removed: r
};
}
function AP(e) {
const t = new bs([]);
return Ts((() => NP(e, t).party));
}
function LP(e) {
return UI({
eaPlayerId: e.playerId,
playerNetworkId: Yy(e.playerNetworkId)
});
}
function wP(e, t) {
const [n, r] = H.useState((() => Ts((() => void 0 === e.data && 0 !== t))));
return H.useEffect((() => {
if (0 !== t) {
const n = Ts((() => e.data));
if (r(void 0 === n), void 0 === n) {
let n = !1;
return LI(e, t).then((() => {
n || r(!1);
})), () => {
n = !0;
};
}
} else r(!1);
}), [ e, t ]), n;
}
function kP(e, t) {
const [n, r] = H.useState((() => Ts((() => !CI(e).hasData && 0 !== t))));
return H.useEffect((() => {
if (0 !== t) {
const n = Ts((() => CI(e)));
if (r(!n.hasData), !n.hasData) {
let n = !1;
return wI(e, t).then((() => {
n || r(!1);
})), () => {
n = !0;
};
}
}
}), [ e, t ]), n;
}
function RP(e, t) {
const n = e.toProps(), r = wP(e, t);
return {
...n,
loading: r || n.loading
};
}
function xP(e, t, n) {
return RP(t.get(e), n);
}
function BP(e, t) {
const n = AI(e), r = kP(e, t);
return {
...n,
loading: r || n.loading
};
}
function DP(e, t, n) {
return BP(H.useMemo((() => t.getByIds(e)), [ e, t ]), n);
}
function FP(e, t) {
return RP(e.get(), t);
}
function MP(e, t) {
const n = e.toProps();
return {
...n,
data: n.data ? t(n.data) : void 0
};
}
function UP(e, t) {
return new eI(t.key, (() => e.get(t)));
}
function HP(e) {
const t = Os();
return H.useMemo((() => UP(t, e)), [ e, t ]);
}
function VP(e, t) {
const n = Os();
return H.useMemo((() => new eI(e.key, (() => n.getItem(e, t)))), [ e, n, t ]);
}
function JP(e, t) {
return e.size > 0 && !e.has(t);
}
function GP(e, t, n, r) {
let i = 0;
if (!e?.isOnline) return 1;
if (!e?.isEAPresence) return 1;
if (dg.devicePlatformId === e.devicePlatformId) return 1;
r.size <= 1 ? i |= 64 : JP(r, e.devicePlatformId) && (i |= 32), n && (i |= 8);
const o = e.properties?.lobbyCrossplayEnabled;
!1 === o && (i |= 16);
const a = e.properties?.partyCrossplayEnabled;
!1 === a && (i |= 16), t || (i |= 2);
const s = e.properties?.crossplayEnabled;
return !1 === s && (i |= 4), i || 1;
}
function zP(e) {
return 1 == (1 & e);
}
function jP(e) {
return 32 == (32 & e);
}
function qP(e) {
return (24 & e) > 0;
}
function YP(e) {
return 16 == (16 & e);
}
function KP(e) {
return 2 == (2 & e);
}
function WP(e) {
return 4 == (4 & e);
}
function XP(e, t, n, r) {
return !zP(GP(e, t, n, r));
}
function QP(e) {
return !zP(e) && (118 & e) > 0;
}
function $P(e) {
return !zP(e) && (110 & e) > 0;
}
var ZP = Ly.object({
playerId: Ly.string,
personaId: Ly.string,
playerNetworkId: Ly.string,
displayName: Ly.string,
joinTimestampMs: Ly.number
}), eO = Ly.object({
playerNetworkId: Ly.string,
playerId: Ly.string,
personaId: Ly.string
}), tO = Ly.object({
partyId: Ly.string,
partyLeader: eO,
members: Ly.array(ZP),
maxSize: Ly.number,
promotionEnabled: Ly.boolean,
crossPlayEnabled: Ly.boolean,
joinable: Ly.boolean,
invitable: Ly.boolean
}, {
localizedPartyTitle: Ly.string,
telemetryType: Ly.string
}), nO = class extends as {
constructor(e) {
super({
data: e
});
}
}, rO = class extends TI {
constructor(e, t, n) {
super(n), this.photonBindings = e, this.playerInfoStore = t, this.notificationEvents = {
kicked: new os,
left: new os,
joined: new os,
setLeader: new os
};
}
updateParty(e) {
this.applyFragmentResults(PI({
data: e,
loading: !1,
skipped: !1
}), ((e, t) => e.update(t)));
}
init() {
const e = [ this.setSeed(), this.setPartyChangedStream() ];
return () => {
e.forEach((e => e?.()));
};
}
setSeed() {
return super.setSeedStrategy({
fetch: async () => {
let e = (await this.photonBindings.Party.getParty({}))?.party;
return e || await this.isCreatePartySupported() ? OI(await Xy((async () => {
if (!e) try {
const t = await this.photonBindings.Party.createParty({});
if (e = t?.party, !e) throw new Error("createParty didn't return a party");
} catch (e) {
throw new Error("Failed to create party:" + e);
}
return e && this.playerInfoStore.getByIds(e.members.map(LP)), e;
}), tO, {
transformResponse: AP
})) : OI({
loading: !1,
skipped: !1
});
},
updater: (e, t) => {
this.isCreatePartySupported().then((n => {
n ? e.update(t) : e.update({
loading: !1,
data: void 0
});
}));
}
});
}
setPartyChangedStream() {
return this.setStreamStrategy({
batchDuration: 0,
stream: new nO(this.photonBindings.Party.onPartyChanged),
updater: (e, t) => {
const n = e.data;
let r;
if (t.data) {
const {party: e, context: i} = t.data;
let o;
if (n && i?.kickedPlayers.length && (o = i.kickedPlayers.map(LP), this.triggerPlayerKickedNotification(o, n)), 
e?.members.length) {
const t = e.partyId === n?.partyId, i = NP(e, t ? n?.members : void 0);
r = i.party, t && (r.partyLeader.personaId !== n.partyLeader.personaId && this.triggerSetLeaderNotification(e, n), 
i.added.length && this.triggerPlayerJoinedNotification(i.added), i.removed.length && this.triggerPlayerLeftNotification(i.removed, o));
}
}
e.update({
...e.toProps(),
data: r
});
}
}, "partyChangedStreamStrategy");
}
triggerSetLeaderNotification(e, t) {
const n = e.partyLeader, r = t.partyLeader;
this.triggerPlayerInfoNotification(this.notificationEvents.setLeader, LP(n), {
partyLeader: r
});
}
triggerPlayerKickedNotification(e, t) {
const n = t.partyLeader;
for (const r of e) t.members.has(r) && this.triggerPlayerInfoNotification(this.notificationEvents.kicked, r, {
partyLeader: n
});
}
triggerPlayerLeftNotification(e, t) {
for (const n of e) t && t.includes(n.photonPlayerId) || this.triggerPlayerInfoNotification(this.notificationEvents.left, n.photonPlayerId);
}
triggerPlayerJoinedNotification(e) {
for (const t of e) this.triggerPlayerInfoNotification(this.notificationEvents.joined, t.photonPlayerId);
}
triggerPlayerInfoNotification(e, t, ...n) {
LI(this.playerInfoStore.get(t), 1e4).then((({data: t}) => {
t && e.trigger(t, ...n);
}));
}
async isCreatePartySupported() {
return !!(await ub(this.photonBindings))?.partySupport.isSupported;
}
}, [iO, oO] = js({
debugName: "partyFragmentStoreState",
create: e => {
const t = e.get(zg), n = e.get(z_);
return new rO(t, n, {
debugName: "Party"
});
}
});
function aO(e) {
return e.get(iO);
}
function sO(e) {
const t = aO(e);
return Ts((() => t.get().data?.members.size));
}
var lO = Js({
debugName: "partyCrossplayEnabledState",
get: function({get: e}) {
return e(iO).get().data?.crossPlayEnabled;
}
});
function cO(e, t, n) {
const r = e.get(iO).get().data, i = e.get(zS).get()?.data, o = HS(e, i, t, n), a = r?.members.has(t) ?? !1;
return n && a && o?.devicePlatformId && o.productId ? a && o.productId === dg.productId && pb.crossplayCompatiblePlatforms.has(o.devicePlatformId) : a;
}
var dO = Ks({
debugName: "crossplayEnabledState",
default: !0
}), uO = Js({
debugName: "partyOrLobbyCrossplayPrevented",
get: function({get: e}) {
return !1 === e(PP) || !1 === e(lO);
}
}), pO = Gs({
debugName: "crossplayPreventedState",
get: function(e, {get: t, getItem: n}) {
const r = t(uO), i = pb.crossplayCompatiblePlatforms, {photonPlayerId: o, photonSessionId: a} = WI(e);
return GP(HS({
get: t,
getItem: n
}, t(zS).get().data, o, a), t(dO), r, i);
}
});
function fO(e, t) {
return ks(pO, XI(e, t));
}
function hO(e, t) {
return QP(ks(pO, XI(e, t)));
}
var mO = {
uninvitable: !1
}, gO = Ks({
debugName: "uninvitableFriendsState",
default: new Map
});
function yO(e, t) {
const n = Os(), r = SP().get().data, i = r && r.invitable && r.maxSize > r.members.size, o = EP(n, e, t), a = ws(gO).get(e);
return !o && i && a ? a : mO;
}
var IO = bh.PlayerList.PlayerSortOrder, _O = bh.PlayerList.SectionFilter;
function bO(e, t) {
return e && !t ? -1 : t && !e ? 1 : 0;
}
function SO(e, t) {
return e.playerNetworkId === t.personaInfo.playerNetworkId && e.playerId === t.tokenInfo.userId;
}
var vO = {
[IO.Self]: (e, t, n, r, i) => bO(SO(e, i), SO(t, i)),
[IO.Online]: (e, t, n, r, i) => {
const o = HS(n, r, e.photonPlayerId, void 0), a = HS(n, r, t.photonPlayerId, void 0);
return bO(SO(e, i) || !!o?.isOnline, SO(t, i) || !!a?.isOnline);
},
[IO.InCurrentGame]: (e, t, n, r, i) => {
const o = HS(n, r, e.photonPlayerId, void 0), a = HS(n, r, t.photonPlayerId, void 0);
return bO(SO(e, i) || o?.productId === dg.productId, SO(t, i) || a?.productId === dg.productId);
},
[IO.LastOnline]: (e, t, n, r, i, o) => {
const a = o?.get(e.photonPlayerId).data?.lastAuthDate ?? 0;
return (o?.get(t.photonPlayerId).data?.lastAuthDate ?? 0) - a;
},
[IO.Alphabetic]: (e, t, n, r, i, o) => {
const a = o?.get(e.photonPlayerId).data?.displayNameLowerCase ?? "", s = o?.get(t.photonPlayerId).data?.displayNameLowerCase ?? "";
return a < s ? -1 : a > s ? 1 : 0;
},
[IO.PlayerCustom1]: (e, t) => e.customValue1 - t.customValue1,
[IO.PlayerCustom2]: (e, t) => e.customValue2 - t.customValue2
}, TO = (e, t) => e.index - t.index;
function EO(e, t, n, r, i) {
return e.personas.slice().sort(((o, a) => {
for (const s of [ ...e.playerSortOrders.map((e => vO[e])), TO ]) {
const e = s(o, a, t, n, r, i);
if (0 !== e) return e;
}
return 0;
}));
}
function PO(e, t, n) {
n.push(e), t.delete(e);
}
function OO(e, t, n, r) {
return SO(t, n) ? !e.get(Yb) : !!HS(e, r, t.photonPlayerId, void 0)?.isOnline;
}
function CO(e, t, n, r, i) {
const o = [];
return t.sectionFilter === _O.All ? e.forEach((t => {
PO(t, e, o);
})) : t.sectionFilter === _O.Online ? e.forEach((t => {
OO(n, t, r, i) && PO(t, e, o);
})) : t.sectionFilter === _O.Offline ? e.forEach((t => {
OO(n, t, r, i) || PO(t, e, o);
})) : t.sectionFilter === _O.PlayerCustom1 ? e.forEach((t => {
t.customValue1 && PO(t, e, o);
})) : t.sectionFilter === _O.PlayerCustom2 && e.forEach((t => {
t.customValue2 && PO(t, e, o);
})), o;
}
var NO = Ks({
debugName: "playerListConfig",
default: void 0
}), [AO] = js({
debugName: "playerListMap",
create: () => new bs([], "OptimizedObservableMap<playerListMap>")
}), LO = Xs({
debugName: "playerListPersonas",
default: () => ({
uninitialized: !0,
loading: !1
})
}), wO = Js({
debugName: "playerListsOrder",
get: function({get: e}) {
const t = Array.from(e(AO).values()).sort(((e, t) => e.index - t.index));
return t.map((e => e.id));
}
}), kO = Ks({
debugName: "activePlayerListId",
default: void 0
}), RO = Gs({
debugName: "playerListSectionsFiltered",
get: function(e, {get: t, getItem: n}) {
const r = t(zS).get(), i = t(hb);
if (!r.data) return {
...r.toProps(),
data: void 0
};
const o = t(AO).get(e);
if (o) {
const a = n(LO, e);
if (a.data) {
const e = new Set(a.data.values());
return {
loading: !1,
data: o.sections.map((o => {
const a = CO(e, o, {
get: t,
getItem: n
}, i, r.data);
return {
...o,
personas: a
};
}))
};
}
return {
...a,
data: void 0
};
}
return {
loading: !1,
error: new Error("No such playerlist (1): " + e)
};
}
}), xO = Gs({
debugName: "playerListSections",
get: function(e, {get: t, getItem: n}) {
const r = n(RO, e), i = r.data;
if (!i) return r;
const o = t(zS).get().data, a = t(hb), s = t(z_);
return {
...r,
data: i.map((e => {
const r = EO(e, {
get: t,
getItem: n
}, o, a, s);
return {
...e,
personas: r
};
}))
};
}
}), BO = Gs({
debugName: "playerListState",
get: function(e, {get: t, getItem: n}) {
const r = t(AO).get(e);
if (r) {
const t = n(xO, e), i = t.data;
return i ? {
loading: !1,
data: {
...r,
sections: i
}
} : {
...t,
data: void 0
};
}
return {
loading: !1,
error: new Error("No such playerlist (2): " + e)
};
}
}), DO = Xs({
debugName: "playerListSectionExpanded",
default: () => !0
}), FO = [], MO = Gs({
debugName: "playerListSectionsExpandedState",
get: function(e, {getItem: t}) {
return t(BO, e)?.data?.sections.map((e => t(DO, e.id))) ?? FO;
}
}), UO = Gs({
debugName: "playerListSectionRows",
get: function(e, {getItem: t}) {
const n = t(BO, e);
let r;
return n.data && (r = Object.fromEntries(n.data.sections.map(((e, t) => [ t, e.personas.map(((t, n) => ({
photonPlayerId: t.photonPlayerId,
telemetryInfo: {
pg_id: "tab_player_list",
destination_name: e.id,
msg_id: e.id,
index: {
item_index: n + 1,
total_items: e.personas.length
},
context: {
tpid: dg.productId
}
}
}))) ])))), {
...n,
data: r
};
}
}), HO = Js({
debugName: "playerIdsInPlayerLists",
get: function({get: e, getItem: t}) {
const n = Array.from(e(AO).values()), r = new Set, i = [];
n.forEach((e => {
const n = t(LO, e.id);
i.push(n);
const o = n.data?.values();
if (o) for (const e of o) r.add(e.playerId);
}));
const o = CI(i);
return {
...o,
data: o.hasData ? Array.from(r) : void 0
};
}
}), VO = Gs({
debugName: "personaInPlayerListWithPresenceNotifications",
get: function(e, {get: t, getItem: n}) {
return !!Array.from(t(AO).values()).filter((e => e.showPresenceNotifications)).find((t => n(LO, t.id).data?.has(e)));
}
}), JO = Js({
debugName: "hasPlayerListWithNotifications",
get: function({get: e}) {
return dg.playerListsEnabled && !!Array.from(e(AO).values()).find((e => e.showPresenceNotifications));
}
}), GO = Gs({
debugName: "isPlayerInPlayerList",
get: function(e, {get: t, getItem: n}) {
if (!dg.playerListsEnabled) return !1;
const r = t(AO);
for (const [, t] of r) {
const r = n(LO, t.id).data?.has(e);
if (r) return !0;
}
return !1;
}
}), zO = Gs({
debugName: "playerListsWithPlayerInIt",
get: function(e, {get: t, getItem: n}) {
if (!dg.playerListsEnabled) return [];
const r = t(AO), i = [];
for (const [, t] of r) {
const r = n(LO, t.id).data?.has(e);
r && i.push(t);
}
return i;
}
});
function jO() {
return MP(oO().get(), (e => e));
}
function qO(e) {
return MP(oO().get(), (t => e(t.members)));
}
var YO = Gs({
debugName: "playerCanJoinMyPartyState",
get: function(e, {get: t, getItem: n}) {
if (!dg.isPartyEnabled) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
}
};
const {photonPlayerId: r} = WI(e);
if (!zI(r)) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("INVALID_USER")
};
const i = t(iO).get(), o = n(Jv, r), a = n(GO, r), s = CI([ i, o ]);
if (s.loading || s.uninitialized) return s;
const l = i.data;
if (!l) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("NO_PARTY")
};
if (!l.invitable) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_UNINVITABLE")
};
const c = !!l.members.get(r);
if (!(l.members.size < l.maxSize)) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_FULL")
};
if (c) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("USER_IN_PARTY")
};
if (!o.data && !a) return {
...o,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_RELATION")
};
const d = t(gO).get(r)?.uninvitable;
return $P(n(pO, e)) ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("CROSSPLAY_PREVENTED")
} : d ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("INVITE_PREVENTED")
} : {
data: {
invitable: !0,
incompatible: !1
},
loading: !1,
error: void 0
};
}
});
function KO(e, t) {
return cO(Os(), e, t);
}
function WO(e) {
return e.getUntracked(iO).get();
}
function XO(e) {
return Ts((() => WO(e).data?.members.size));
}
function QO(e, t) {
function n(t) {
return Ts((() => {
const n = WO(e).data;
if (n?.partyId === t.partyId) {
const e = [];
for (const t of n.members.values()) e.push({
playerId: t.eaPlayerId,
playerNetworkId: t.playerNetworkId,
personaId: t.personaId,
displayName: t.displayName,
joinTimestampMs: t.joinTimestampMs
});
return {
...n,
members: e,
telemetryType: n.telemetryType || ""
};
}
}));
}
t.onMemberLeft.subscribe((r => {
const i = n(r);
if (i) {
const n = LP(r);
if (bb(e.getUntracked, n).isCurrentPhotonUser) t.onPartyChanged.trigger({
party: void 0
}); else {
const e = r, n = i.members.findIndex((t => e.playerId === t.playerId && e.playerNetworkId === t.playerNetworkId && e.personaId === t.personaId));
-1 !== n && (i.members.splice(n, 1), t.onPartyChanged.trigger({
party: i
}));
}
}
})), t.onMemberJoined.subscribe((e => {
const r = n(e);
if (r) {
const n = e.member, i = r.members.findIndex((e => n.playerId === e.playerId && n.playerNetworkId === e.playerNetworkId && n.personaId === e.personaId));
-1 !== i && r.members.splice(i, 1), r.members.push(n), t.onPartyChanged.trigger({
party: r
});
}
})), t.onMemberKicked.subscribe((r => {
const i = n(r);
if (i) {
const n = LP(r);
if (bb(e.getUntracked, n).isCurrentPhotonUser) t.onPartyChanged.trigger({
party: void 0,
context: {
kickedPlayers: [ {
playerId: r.playerId,
playerNetworkId: r.playerNetworkId,
personaId: r.personaId
} ]
}
}); else {
const e = r, n = i.members.findIndex((t => e.playerId === t.playerId && e.playerNetworkId === t.playerNetworkId && e.personaId === t.personaId));
-1 !== n && (i.members.splice(n, 1), t.onPartyChanged.trigger({
party: i,
context: {
kickedPlayers: [ {
playerId: r.playerId,
playerNetworkId: r.playerNetworkId,
personaId: r.personaId
} ]
}
}));
}
}
})), t.onLeaderChanged.subscribe((e => {
const r = n(e);
r && (r.partyLeader = {
playerId: e.playerId,
playerNetworkId: e.playerNetworkId,
personaId: e.personaId
}, t.onPartyChanged.trigger({
party: r
}));
}));
}
var $O = class {
constructor(e) {
this.LobbyApi = e, this.onSendEaInvite = new os, this.onFirstPartyInviteAccepted = new os, 
this.onUninvitablePlayersChanged = new os, this.initEventAdapters();
}
initEventAdapters() {
this.LobbyApi.onSendEaInvite.subscribe((e => {
this.onSendEaInvite.trigger(e);
})), this.LobbyApi.onFirstPartyInviteAccepted.subscribe((e => {
this.onFirstPartyInviteAccepted.trigger(e);
})), this.LobbyApi.onUninvitablePlayersChanged.subscribe((e => {
this.onUninvitablePlayersChanged.trigger(e);
}));
}
async filterUninvitablePlayers(e) {
const t = await this.LobbyApi.filterUninvitablePlayers(e);
return t && {
uninvitablePlayers: t?.uninvitablePlayers.map((e => ({
playerId: e.playerId,
playerNetworkId: e.playerNetworkId,
personaId: e.personaId,
localizedReason: e.reason
})))
};
}
prepareInvite(e) {
if (1 !== e.inviteTypes.length || e.inviteTypes[0] !== bh.PhotonInvite.InviteType.Lobby) throw Error("Invalid inviteType sent to old Lobby Api.");
return this.LobbyApi.prepareInvite({
invitedPersonaId: e.invitedPersonaId,
invitedPlayerId: e.invitedPlayerId,
invitedPlayerNetworkId: e.invitedPlayerNetworkId,
invitedFirstPartyUid: e.invitedFirstPartyUid
});
}
sendEaInviteResponse(e) {
return this.LobbyApi.sendEaInviteResponse(e);
}
};
function ZO(e, t) {
const n = t.hasMethod("PhotonInvite", "prepareInvite"), r = t.hasMethod("FriendsNotificationsService", "StreamNotifications");
n || (t.PhotonInvite = new $O(t.Lobby)), r || (t.FriendsNotificationsService = new cS(t)), 
dg.featureFlags.usesSingleEventForPartyAndLobbyChanges || (QO(e, t.Party), OP(e, t.Lobby));
}
var eC = Dc("/sparta/assets/ui/lib/RoundedRect-4806f472.png"), tC = {
main: hg.link()
}, nC = [ sy, Pg ];
function rC(e) {
return !!nC.find((t => e.startsWith(t)));
}
var iC = 15, oC = 70, aC = 90, sC = 100, lC = 119, cC = 200, dC = 300, uC = 500, pC = 1e3, fC = bh.Performance.BlurMode, hC = Ec({
position: "absolute",
top: 0,
right: 0,
bottom: 0,
left: 0,
textureFadeInTime: 0
}), mC = Ec({
layerGrabBackground: !0,
layer: !0,
layerBlur: 1,
layerToTextureDownScaleFactorPerAxis: 2,
opacity: 0
}), gC = Ec({
layer: !0,
layerBlur: 1,
layerGrabBackground: !0,
layerToTextureDownScaleFactorPerAxis: 2
}), yC = Wd(Xc.OverlayBackgroundColor, .85), IC = Xc.OverlayBackgroundColor, _C = Ks({
debugName: "blurModeState",
default: void 0
}), bC = () => {
const e = Lh(), t = Os();
H.useEffect((() => (t.set(_C, e.Performance.getBlurMode({})?.blurMode), e.Performance.onBlurModeChanged.subscribe((({blurMode: e}) => t.set(_C, e))))), [ e, t ]);
}, SC = ({type: e, backgroundIndex: t, onLoaded: n, startZOffset: r, opacityTween: i}) => {
const o = mp(), a = e + "_" + t, s = "twinkleLayerToTexture://" + a, [l, c] = H.useState(!1);
H.useEffect((() => o.texture.registerOnLoadedCallback([ s ], (() => {
c(!0), n?.();
}))), [ o, s, n ]);
const d = l ? Lc("texture", s) : [ mC, Lc("layerToTexture", a) ];
return H.createElement("surface", {
key: a,
style: [ hC, d, i && i.propStyle("opacity"), Lc("zOffset", r - t) ]
});
}, vC = ({type: e, opacityTween: t, startZOffset: n, style: r}) => {
const i = H.useRef(1), o = mp(), [a, s] = H.useState([ H.createElement(SC, {
key: e + "_" + i.current,
type: e,
backgroundIndex: i.current,
startZOffset: n,
opacityTween: t
}) ]);
return H.useEffect((() => {
const r = () => {
s((e => e.length > 1 ? e.slice(0, e.length - 1) : e));
};
return o.bindings.Layout.onWindowSizeChanged.subscribe(Eu((() => {
i.current++, s((o => [ H.createElement(SC, {
startZOffset: n,
type: e,
key: e + "_" + i.current,
backgroundIndex: i.current,
onLoaded: r,
opacityTween: t
}), ...o ]));
}), 250));
}), [ o, n, e, t ]), H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ hC, Lc("backgroundColor", yC), Lc("zOffset", n + 1), t && t.propStyle("opacity"), r ]
}), a);
}, TC = ({opacityTween: e, startZOffset: t, style: n}) => H.createElement("surface", {
style: [ hC, gC, Lc("backgroundColor", yC), Lc("zOffset", t), e && e.propStyle("opacity"), n ]
}), EC = ({opacityTween: e, type: t, startZOffset: n, style: r}) => H.createElement("surface", {
style: [ hC, Lc("zOffset", n), Lc("backgroundColor", 0 === t ? Xc.BackgroundColor.body : IC), e && e.propStyle("opacity"), r ]
}), PC = Ii.observer((({type: e, opacityTween: t, style: n}) => {
const r = 0 === e ? 0 : oC, i = ws(_C);
return void 0 === i ? null : i === fC.GrabOnce ? H.createElement(vC, {
style: n,
type: e,
opacityTween: t,
startZOffset: r
}) : i === fC.Live ? H.createElement(TC, {
style: n,
type: e,
opacityTween: t,
startZOffset: r
}) : H.createElement(EC, {
style: n,
type: e,
opacityTween: t,
startZOffset: r
});
})), OC = () => {
const e = Lh(), t = Rs(dO);
H.useEffect((() => {
if (!(e.hasMethod("DeepLink", "isCrossPlayEnabled") && e.hasMethod("DeepLink", "getCrossPlayPlatformCompatibility"))) return;
const n = e.DeepLink.isCrossPlayEnabled({});
return n && t(n.on), e.DeepLink.onCrossPlayStatusChanged.subscribe((e => {
t(e.on);
}));
}), [ e, t ]);
}, CC = (fs.Input.DeviceType, fs.Input.ButtonState, Js({
debugName: "firstPartyFriendsExcludingEAFriendsPlayerInfosState",
get: function({get: e}) {
if ("EA" === e(hb).personaInfo.playerNetworkId) return {
loading: !1,
uninitialized: !1,
data: [],
error: void 0
};
const t = e(z_), n = e(LS), r = e(uS).get(), i = e(wS);
if (n.data && i.data && r.data) {
const e = [], o = new Set, a = new Set(r.data.map((e => e.eaPlayerId)));
for (const e of n.data) e.firstPartyPlayerId && o.add(e.firstPartyPlayerId);
for (const {photonPlayerId: n, firstPartyPlayerId: r, eaPlayerId: s} of i.data.values()) !r || s && a.has(s) || o.has(r) || e.push(t.get(n));
const s = CI([ n, i, r, ...e ]);
return {
...s,
data: s.hasData ? NI(e) : void 0
};
}
return {
...CI([ n, i ]),
data: void 0
};
}
})), NC = Js({
debugName: "friendsPlayerInfosState",
get: function({get: e}) {
const t = e(LS), n = e(CC), r = CI([ t, n ]);
return {
...r,
data: r.hasData ? [ ...t.data ?? [], ...n.data ?? [] ] : void 0
};
}
}), AC = (e => (e.party = "party", e.lobby = "lobby", e))(AC || {});
function LC(e) {
const t = !!e.properties?.lobbyJoinable && !!e.gameJoinTokenTypes?.includes("lobby"), n = e.productId === dg.productId, r = !!e.joinable;
return t && r && n;
}
function wC(e) {
if (!dg.isPartyEnabled) return !1;
const t = !!e.properties?.partyJoinable && !!e.gameJoinTokenTypes?.includes("party"), n = e.productId === dg.productId, r = !!e.joinable;
return t && r && n;
}
var kC = (e, t, n, r, i, o) => {
const a = o?.get(e.photonPlayerId)?.uninvitable, s = !r?.has(e.photonPlayerId) && (t && !a || wC(e)), l = !i?.has(e.photonPlayerId) && (n && !a || LC(e));
return !(!s && !l);
}, RC = e => e.presence?.isOnline ?? !1;
function xC(e) {
return (t, n) => {
if (!!t.presence?.isOnline != !!n.presence?.isOnline) return t.presence?.isOnline ? -1 : 1;
if (t.photonPlayerId === n.photonPlayerId) return t.presence?.isEAPresence ? -1 : 1;
if (t.playerInfo.playerNetworkId !== n.playerInfo.playerNetworkId && (t.playerInfo.playerNetworkId === e || n.playerInfo.playerNetworkId === e)) return t.playerInfo.playerNetworkId === e ? -1 : 1;
if (t.playerInfo.eaPlayerId === n.playerInfo.eaPlayerId) {
const r = t.playerInfo?.playerNetworkId === e, i = n.playerInfo?.playerNetworkId === e, o = "EA" === t.playerInfo?.playerNetworkId, a = "EA" === n.playerInfo?.playerNetworkId;
if (r !== i) return r ? -1 : 1;
if (o !== a) return o ? -1 : 1;
}
if (!t.mostRecentlyLoggedInPersonaDate || !n.mostRecentlyLoggedInPersonaDate) return t.mostRecentlyLoggedInPersonaDate || n.mostRecentlyLoggedInPersonaDate ? t.mostRecentlyLoggedInPersonaDate ? -1 : 1 : t.playerInfo.displayNameLowerCase.localeCompare(n.playerInfo.displayNameLowerCase);
const r = n.mostRecentlyLoggedInPersonaDate - t.mostRecentlyLoggedInPersonaDate;
return 0 === r ? t.playerInfo.displayNameLowerCase.localeCompare(n.playerInfo.displayNameLowerCase) : r;
};
}
var BC = (e, t) => {
const n = e.presence?.updateTimestamp || 0, r = t.presence?.updateTimestamp || 0;
return n === r ? e.playerInfo.displayNameLowerCase.localeCompare(t.playerInfo.displayNameLowerCase) : n > r ? -1 : 1;
};
function DC(e, t) {
const n = e.presence.productId === dg.productId;
return n !== (t.presence.productId === dg.productId) ? n ? -1 : 1 : 0;
}
function FC(e, t, n) {
const r = e.presence.playerNetworkId === n;
return r !== (t.presence.playerNetworkId === n) ? r ? -1 : 1 : 0;
}
function MC(e, t, n) {
const r = DC(e, t);
if (r) return r;
const i = FC(e, t, n);
return i || BC(e, t);
}
function UC(e, t, n, r, i, o, a, s, l, c, d) {
const u = {};
for (let t = 0, p = e.length; t < p; t++) {
const p = e[t], f = p.playerInfo.eaPlayerId, h = XP(p.presence, n, r, i);
u[p.photonPlayerId] = {
isFavoriteFriend: !(!f || !d?.has(f)),
isInMyPartyOrLobby: s?.has(p.photonPlayerId) || l?.has(p.photonPlayerId),
isInvitableOrJoinable: !h && kC(p.presence, o, a, s, l, c)
};
}
return e.sort(((e, n) => {
const r = u[e.photonPlayerId], i = u[n.photonPlayerId];
if (r?.isInMyPartyOrLobby !== i?.isInMyPartyOrLobby) return r?.isInMyPartyOrLobby ? -1 : 1;
if (r?.isFavoriteFriend !== i?.isFavoriteFriend) return r?.isFavoriteFriend ? -1 : 1;
const o = DC(e, n);
if (o) return o;
if (r?.isFavoriteFriend && i?.isFavoriteFriend) return 0;
if (r?.isInvitableOrJoinable !== i?.isInvitableOrJoinable) return r?.isInvitableOrJoinable ? -1 : 1;
const a = FC(e, n, t);
return a || BC(e, n);
})), e;
}
function HC(e, t) {
return e.sort(xC(t)), e;
}
function VC(e, t) {
const n = [], r = {};
return e.sort(xC(t)), e.forEach((e => {
const t = e.playerInfo.eaPlayerId ?? e.playerInfo.firstPartyPlayerId;
t && (r[t] && e.presence?.isEAPresence && RC(e) || !r[t]) && (n.push(e), r[t] = !0);
})), n;
}
function JC(e, t, n) {
if (e.length !== t.length) return !1;
for (let r = 0, i = e.length; r < i; r++) if (e[r][n] !== t[r][n]) return !1;
return !0;
}
function GC(e) {
return !!e.presence?.isOnline;
}
var zC = (e, t) => ({
telemetryInfo: t,
photonPlayerId: e.photonPlayerId
}), jC = (e, t) => ({
telemetryInfo: t,
photonPlayerId: e.presence.photonSessionId,
presence: e.presence
});
function qC(e, t, n, r) {
const i = [], o = Math.floor(Date.now() / 1e3) - 3024e3;
for (let a = 0, s = t.length; a < s; a++) {
const s = t[a], l = FS(e, n, s.photonPlayerId);
if (l.length) for (let e = 0, t = l.length; e < t; e++) {
const t = l[e];
i.push({
playerInfo: s,
presence: t,
photonPlayerId: s.photonPlayerId
});
} else {
let e = s.eaPlayerId ? r.get(s.eaPlayerId)?.mostRecentlyLoggedInPersonaDate : void 0;
e && e < o && (e = o), i.push({
playerInfo: s,
photonPlayerId: s.photonPlayerId,
mostRecentlyLoggedInPersonaDate: e
});
}
}
return i;
}
var YC = Js({
debugName: "relevantFriendsWithPresenceState",
get: function({get: e, getItem: t}) {
const n = e(NC), r = e(zS).get(), i = e(q_), o = e(hb).personaInfo.playerNetworkId, a = e(NS).get(), s = [ n, a ];
(a.data?.size ?? 0) > 0 && s.push({
...r.toProps(),
data: r.loading ? void 0 : r.data
});
const l = CI(s);
if (l.hasData && n.data && r.data) {
const a = VC(qC({
get: e,
getItem: t
}, n.data, r.data, i), o);
return {
...l,
data: a
};
}
return l;
}
}), KC = Js({
debugName: "blockedListState",
get: function({get: e}) {
const t = e(uS).get();
let n;
if (t.data) {
const e = t.data.size;
n = t.data.map(((t, n) => zC(t, {
pg_id: "tab_friends",
destination_name: "blocked",
index: {
item_index: n + 1,
total_items: e
}
})));
}
return {
...t.toProps(),
data: n
};
}
}), WC = Js({
debugName: "invitableToPartyOrLobbyState",
get: function({get: e}) {
const t = e(iO).get().data, n = e(bP).get().data;
let r, i, o = !1, a = !1;
return t && (r = new Set(t.members.keys()), o = t.invitable && r.size < t.maxSize), 
n && (i = new Set(n.members.keys()), a = n.invitable && i.size < n.maxSize), {
partyMembers: r,
lobbyMembers: i,
invitableToParty: o,
invitableToLobby: a
};
}
}), XC = Js({
debugName: "favoriteFriendsListState",
get: function({get: e}) {
const t = e(tT).get(), n = t.data ? new Set(Array.from(t.data.keys())) : void 0;
return {
...t.toProps(),
data: n
};
}
}), QC = Js({
debugName: "friendsListState",
get: function({get: e}) {
const t = e(hb).personaInfo.playerNetworkId, n = e(dO), r = e(uO), i = e(XC), o = e(YC), a = e(KC);
let s;
if (o.data && a.data && i.data) {
const l = [], c = [], d = [];
o.data.forEach((e => {
RC(e) ? l.push(e) : e.playerInfo.eaPlayerId && i.data?.has(e.playerInfo.eaPlayerId) ? d.push(e) : c.push(e);
}));
const {invitableToLobby: u, invitableToParty: p, lobbyMembers: f, partyMembers: h} = e(WC), m = e(gO), g = pb.crossplayCompatiblePlatforms;
s = {
0: UC(l, t, n, r, g, p, u, h, f, m, i.data).map(((e, t) => jC(e, {
pg_id: "tab_friends",
destination_name: "online_friends",
msg_id: "online_friends",
index: {
item_index: t + 1,
total_items: l.length
}
}))),
1: (d.length ? HC(d, t) : []).concat(HC(c, t)).map(((e, t) => zC(e, {
pg_id: "tab_friends",
destination_name: "offline_friends",
msg_id: "offline_friends",
index: {
item_index: t + 1,
total_items: c.length
}
}))),
2: a.data.map(((e, t) => zC(e, {
pg_id: "tab_friends",
destination_name: "blocked",
msg_id: "blocked",
index: {
item_index: t + 1,
total_items: a.data?.length ?? 0
}
}))),
favoriteOfflineFriendsCount: d.length
};
}
const l = CI([ o, a, i ]);
return {
...l,
timestamp: Date.now(),
data: l.hasData ? s : void 0
};
},
equals: function(e, t) {
if (e.loading !== t.loading || e.uninitialized !== t.uninitialized || e.error !== t.error) return !1;
const n = e.data?.[0] || [], r = t.data?.[0] || [];
return n.length === r.length && e.data?.[1].length === t.data?.[1].length && e.data?.[2].length === t.data?.[2].length && e.data?.favoriteOfflineFriendsCount === t.data?.favoriteOfflineFriendsCount && JC(n, r, "photonPlayerId");
}
}), $C = Ks({
debugName: "waitingForInitialPresence",
default: !0
}), ZC = Gs({
debugName: "isSamePlatformFriendsState",
get: function(e, {get: t}) {
const n = t(hb).personaInfo.playerNetworkId, r = t(z_).get(e), i = r.data?.playerNetworkId;
if (!i) return {
...r.toProps(),
data: void 0
};
if (n !== i) return {
...r.toProps(),
data: !1
};
if ("EA" === n) {
const n = t(NS).get(), r = !!n.data?.get(e);
return {
...n.toProps(),
data: r
};
}
const o = t(ES).get(), a = r.data?.firstPartyPlayerId, s = !!a && !!o.data?.get(a);
return {
...o.toProps(),
data: o.data ? s : void 0
};
}
}), [eN, tN] = js({
debugName: "layerStateHelper",
create: e => {
const t = e.getUntracked(Oh);
return {
get isHidden() {
return "Hidden" === t.currentState || "Hiding" === t.currentState;
},
get isRevealed() {
return "Revealed" === t.currentState || "Revealing" === t.currentState;
},
get isRevealing() {
return "Revealing" === t.currentState;
},
onRevealed: e => t.stateChangeEvent.subscribe((t => {
"Revealing" === t && e();
})),
onHidden: e => t.stateChangeEvent.subscribe((t => {
"Hiding" === t && e();
})),
open: () => {
"Revealed" !== t.currentState && t.interrupt((() => "Revealing"));
},
close: () => {
"Hidden" !== t.currentState && t.interrupt((() => "Hiding"));
},
toggle: () => {
t.interrupt((e => "Hidden" === e || "Hiding" === e ? "Revealing" : "Hiding"));
}
};
}
});
function nN(e) {
return e.getUntracked(eN);
}
function rN(e) {
const t = nN(e);
let n;
return {
start: () => {
void 0 === n && (n = t.isHidden, n && t.open());
},
stop: () => {
n && t.close(), n = void 0;
}
};
}
var iN = bh.DeepLink.PickFriendPlayerInclusion;
function oN(e, t) {
return e.joinTimestampMs - t.joinTimestampMs;
}
function aN(e, t) {
const n = xC(t);
return e.sort(((e, t) => {
const r = e.inclusion !== iN.Show;
return r !== (t.inclusion !== iN.Show) ? r ? 1 : -1 : n(e, t);
}));
}
var sN = Js({
debugName: "partyMembersPlayerInfosState",
get: function({get: e}) {
const t = e(iO).get(), n = e(z_), r = e(hb).tokenInfo.userId, i = Array.from(t.data?.members.values() ?? []).sort(oN), o = [];
i.forEach((e => {
e.eaPlayerId !== r && o.push(n.get(e.photonPlayerId));
}));
return {
...CI(o),
data: NI(o)
};
}
}), lN = Ws({
debugName: "friendPickerRequest",
default: void 0
}), cN = Js({
debugName: "friendPickerSourceState",
get: function({get: e, getItem: t}) {
const n = e(lN), r = e(QC), i = new Set;
r.data && (r.data[0].forEach((e => i.add(YI(e.photonPlayerId)))), r.data[1].forEach((e => i.add(e.photonPlayerId))));
const o = e(NC), a = new Map;
o.data?.forEach((e => {
a.set(e.photonPlayerId, e);
}));
const s = e(zS).get(), l = s.data, c = [];
i.forEach((n => {
const r = a.get(n);
if (r && r.eaPlayerId && r.personaId) {
const i = HS({
get: e,
getItem: t
}, l, n, void 0), o = $P(t(pO, XI(r.photonPlayerId, i?.photonSessionId)));
c.push({
photonPlayerId: n,
presence: i,
playerId: r.eaPlayerId,
personaId: r.personaId,
playerNetworkId: r.playerNetworkId,
isOnline: !!i && i.isOnline,
firstPartyPlayerId: r.firstPartyPlayerId,
displayName: r.displayName,
crossplayDisabled: o
});
}
}));
const d = e(sN);
n?.includePartyPlayers && d.data?.forEach((e => {
if (e && e.eaPlayerId && e.personaId) {
const n = !zP(t(pO, e.photonPlayerId));
c.push({
photonPlayerId: e.photonPlayerId,
playerId: e.eaPlayerId,
personaId: e.personaId,
playerNetworkId: e.playerNetworkId,
inParty: !0,
firstPartyPlayerId: e.firstPartyPlayerId,
displayName: e.displayName,
crossplayDisabled: n
});
}
}));
const u = CI([ r, o, d, s ]);
return {
...u,
data: u.hasData ? c : void 0
};
}
}), [, dN] = js({
debugName: "friendPickerLayerFlowHelper",
create: rN
}), uN = Ws({
debugName: "filteredPlayersPickerListState",
default: {
loading: !1,
uninitialized: !0
}
}), pN = Ws({
debugName: "friendPickerSourceSnapshotState",
default: []
});
var fN = Js({
debugName: "friendPickerListState",
get: function({get: e}) {
const t = e(lN), n = e(pN), r = e(hb).personaInfo.playerNetworkId, i = e(q_), o = e(uN), a = o.data, s = {
0: [],
1: [],
2: []
};
if (a) {
const e = [], o = [], d = [];
n.forEach((t => {
const n = a.get(t.photonPlayerId);
if (n) {
const r = Yy(t.playerNetworkId);
if (t.inParty) e.push({
photonPlayerId: t.photonPlayerId,
photonSessionId: void 0,
inclusion: n.inclusion,
disableReason: n.disableReason
}); else {
const e = {
photonPlayerId: t.photonPlayerId,
inclusion: n.inclusion,
disableReason: n.disableReason,
playerInfo: {
eaPlayerId: t.playerId,
playerNetworkId: r,
displayName: t.displayName,
displayNameLowerCase: t.displayName.toLowerCase(),
photonPlayerId: t.photonPlayerId,
personaId: t.personaId,
firstPartyPlayerId: t.firstPartyPlayerId
},
presence: t.presence
};
GC(e) ? o.push(e) : d.push({
...e,
...i.get(t.playerId)
});
}
}
})), s[1] = (l = o, c = r, l.sort(((e, t) => {
const n = e.inclusion !== iN.Show;
return n !== (t.inclusion !== iN.Show) ? n ? 1 : -1 : MC(e, t, c);
}))).map(((e, t) => ({
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "online_friends",
index: {
item_index: t + 1,
total_items: o.length
}
},
inclusion: e.inclusion,
disableReason: e.disableReason,
photonPlayerId: e.photonPlayerId,
photonSessionId: e.presence.photonSessionId
}))), t?.includePartyPlayers && (s[0] = e.map(((t, n) => ({
...t,
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "in_your_party",
index: {
item_index: n + 1,
total_items: e.length
}
}
})))), t?.includeOfflinePlayers && (s[2] = aN(d, r).map(((e, t) => ({
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "offline_friends",
index: {
item_index: t + 1,
total_items: d.length
}
},
photonPlayerId: e.photonPlayerId,
photonSessionId: void 0,
inclusion: e.inclusion,
disableReason: e.disableReason
}))));
}
var l, c, d;
return (d = s) && Object.values(d).every((e => !e?.length)), {
...o,
data: s
};
}
});
function hN(e, t) {
return e.getUntracked(z_).get(t);
}
function mN(e, t) {
return Ts((() => e.get(z_).get(t).data));
}
function gN(e, t) {
return xP(e, j_(), t);
}
function yN(e, t) {
return DP(e, j_(), t);
}
function IN(e, t) {
const n = j_(), r = n.get(e), i = r.data;
return BP(H.useMemo((() => {
const {eaPlayerId: t} = JI(e);
return t ? i ? Ts((() => n.findByEaPlayerId(t))) : [ r ] : [];
}), [ n, e, r, i ]), t);
}
function _N(e) {
const t = Y_(), {eaPlayerId: n} = JI(e);
return n ? t.get(n) : void 0;
}
function bN(e, t) {
const n = IN(e, t), r = n.data?.find((e => "EA" === e.playerNetworkId));
return {
...n,
data: r
};
}
var [SN, vN] = js({
debugName: "sessionPlayersStore",
create: () => new TI({
debugName: "sessionPlayers"
})
}), [TN, EN] = js({
debugName: "recentlyMetPlayersStore",
create: () => new TI({
debugName: "recentlyMetPlayers"
})
});
function PN(e, t) {
const n = e.get(TN).get().data?.get(t);
return {
recentlyMetEncounter: n,
playerLists: zI(t) ? e.getItem(zO, t) : []
};
}
function ON(e) {
return PN(Os(), e);
}
var CN = Ly.optional(Ly.object({}));
async function NN(e, t, n, r) {
return Xy((() => e[t]({
entityId: {
playerId: {
id: r
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), CN);
}
var AN = {
AcceptReceivedFriendInvite: "invite_accepted",
DeclineReceivedFriendInvite: "invite_declined",
CancelSentFriendInvite: "invite_canceled"
};
function LN(e, t) {
return `${e}-${t}`;
}
var wN = (e, t, n, r, i, o, a, s, l) => {
const {showNotification: c, showErrorNotification: d} = r, u = gb(e);
let p;
switch (n) {
case "AcceptReceivedFriendInvite":
case "DeclineReceivedFriendInvite":
p = e.getUntracked(zv);
break;

case "CancelSentFriendInvite":
p = e.getUntracked(qv);
break;

default:
ys("Unhandled method");
}
return async () => {
let r;
try {
const {data: d} = await LI(hN(e, i), 8e3), {eaPlayerId: g} = JI(i);
ry(g);
const y = Ts((() => p?.get().data));
s?.getSuccessMessage && d && c(3, 3, {
icon: s.successIcon,
text: s.getSuccessMessage(hv(gP(e, d, u), {
allowEllipsis: !0
}))
});
const I = Ts((() => y?.get(g)));
y?.delete(g), r = () => I && y?.set(g, I);
const _ = await NN(t, n, g, u.tokenInfo.userId);
l && o.triggerFriends({
friend: g,
friend_invite_id: (f = u.tokenInfo.userId, h = g, m = n, "CancelSentFriendInvite" === m ? LN(f, h) : LN(h, f)),
action: AN[n],
source: wT(e, l, a),
status_code: _.error ? _.error.message : void 0
}), "AcceptReceivedFriendInvite" === n && e.get(Jg).addEvent({
eventType: "photon_friends",
action: "invite_accepted",
error: !!_.error,
error_code: _.error?.message
});
const b = ("DeclineReceivedFriendInvite" === n || "CancelSentFriendInvite" === n) && _.error?.message.includes("INVITATION_NOT_FOUND"), S = "AcceptReceivedFriendInvite" === n && Ts((() => e.getUntracked(NS).get().data?.get(i)));
if (_.error && !b && !S) throw _.error;
return _;
} catch (e) {
return r?.(), d(s?.getErrorMessage && {
text: s.getErrorMessage()
}, "friend request " + n, e), {
error: e,
loading: !1,
skipped: !1
};
}
var f, h, m;
};
}, kN = (e, t, n, r) => {
const i = Os(), {Invites: o} = Lh(), a = oP(), s = cy(), l = Xg("main");
return wN(i, o, t, a, e, s, l.history.location, n, r);
}, RN = e => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIEND_INVITE-DECLINE", {
"%senderPrimaryID%": e
}), xN = () => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_DECLINE-FRIEND-REQUEST-FAIL"), BN = e => wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_FRIENDS_INVITE-CANCEL", {
"%primaryID%": e
}), DN = () => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_CANCEL-FRIEND-REQUEST-FAIL"), FN = () => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_ACCEPT-FRIEND-REQUEST-FAIL"), MN = (e, t, n) => {
const r = Os(), {recentlyMetEncounter: i, playerLists: o} = ON(e), a = kN(e, "AcceptReceivedFriendInvite", {
getErrorMessage: FN
}, n), s = !!i, l = o.length > 0;
let c = "";
return s ? c = "recently_met" : l && (c = "player_list"), AT(r, e, t, a, n && {
...n,
status: "click",
option: "accept",
context: {
friend_request: c
}
});
}, UN = (e, t, n) => {
const r = Os(), i = kN(e, "DeclineReceivedFriendInvite", {
getSuccessMessage: RN,
getErrorMessage: xN,
successIcon: Sf.REMOVE
}, n);
return AT(r, e, t, i, n && {
...n,
status: "click",
option: "decline_friend_request"
});
}, HN = (e, t, n) => {
const r = Os(), i = kN(e, "CancelSentFriendInvite", {
getSuccessMessage: BN,
getErrorMessage: DN,
successIcon: Sf.REMOVE
}, n);
return AT(r, e, t, i, n && {
...n,
status: "click",
option: "cancel_friend_request"
});
}, VN = (e, t, n) => {
const r = Os(), i = Wg("main"), o = H.useCallback((() => {
i.navigate(mg.link({
photonPlayerId: e
}));
}), [ e, i ]), {eaPlayerId: a} = JI(e), s = a ? r.get(qv).get().data?.get(a) : void 0;
return AT(r, e, t, o, n && {
msg_id: n.destination_name,
option: "view_request",
context: {
rel: s ? "pending_friend_other" : "pending_friend_self"
},
...n
});
}, JN = Nc((e => ({
color: e
})), {
fontSize: mc(gu.Headline.Text.fontSize),
zOffset: 1,
textLetterSpacing: hc(2),
textEdgeOffset: .2,
wordWrap: "break-word"
}), GN = Ec({
textEllipsis: !0,
wordWrap: "normal"
}), zN = ({text: e, useEllipsis: t, color: n, style: r}) => H.createElement("surface", {
text: e,
style: [ Bd, JN(n || gu.Headline.Text.color), t ? GN : void 0, r ]
}), jN = Ec({
fontSize: mc(Xc.TextSizeDisplay.medium),
textLetterSpacing: hc(3),
zOffset: 1,
wordWrap: "break-word"
}), qN = ({text: e, color: t, style: n}) => H.createElement("surface", {
text: e,
style: [ Bd, jN, Lc("color", t || Xc.TextColorStandard.default), n ]
}), YN = Ec({
marginBottom: hc(Xc.DimensionSpace.large)
}), KN = {
start: "flex-start",
center: "center",
end: "flex-end"
}, WN = ({title: e, headline: t, body: n, bodyStyle: r, style: i, childrenStyle: o, align: a, children: s}) => {
const l = Lc("textAlign", a), c = a ? KN[a] : void 0, d = Lc("justifyContent", c), u = Lc("alignItems", c);
return H.createElement("surface", {
style: [ d, i ]
}, !!e && H.createElement(qN, {
text: e,
color: Xc.TextColorStandard.emphasized,
style: [ YN, l ]
}), !!t && H.createElement(zN, {
text: t,
color: Xc.TextColorStandard.emphasized,
style: [ YN, l ]
}), !!n && H.createElement(iv, {
text: n,
color: Xc.TextColorStandard.default,
style: [ l, r ]
}), !!s && H.createElement("surface", {
style: [ u, o ]
}, s));
}, XN = Ec({
flex: 1
}), QN = e => H.createElement(WN, {
align: "center",
...e,
style: [ e.style, XN ]
}), $N = hc(60), ZN = Ec({
spriteAnimation: {
fps: 60,
totalFrames: 85,
startFrame: 0,
looping: !0,
spriteSheet: gc({
1: Dc("/photon/quantum/sprites/Circular_Loader_60px-399b44b9.png"),
2: Dc("/photon/quantum/sprites/Circular_Loader_60px@2x-f2961637.png")
}),
frameWidth: $N,
frameHeight: $N
},
height: $N,
width: $N
}), eA = ({style: e}) => {
const t = mp(), [n, r] = H.useState(null);
return H.useEffect((() => {
n && t.bindings.Layout.playSpriteAnimation({
surfaceId: n,
start: !0
});
}), [ n, t ]), H.createElement("surface", {
onSurfaceId: r,
style: [ ZN, e ]
});
}, tA = (e, t, n = !0) => {
const {actionKeyBindings: r} = Bp();
return up(e ? {
callback: e.callback,
keyBinding: r[e.action],
label: e.label
} : void 0, t, n);
}, nA = hc(1250), rA = Ec({
width: nA,
marginTop: hc(Xc.DimensionLayout.medium),
marginBottom: hc(Xc.DimensionLayout.medium)
}), iA = Ec({
marginTop: hc(Xc.DimensionSpace.largest),
alignItems: "center",
width: nA
}), oA = Ec({
maxWidth: hc(900),
alignSelf: "center"
}), aA = Ec({
marginBottom: hc(Xc.DimensionSpace.medium),
width: hc(675)
}), sA = Ec({
position: "absolute",
top: 0,
alignSelf: "center"
}), lA = ({actionConfig: e, closeModal: t, onFocus: n, onBlur: r, alignStart: i, style: o, narrationItem: a, narration: s}) => {
const l = Up(2), c = H.useMemo((() => {
const i = {
actionWithMaybeAutoClose: () => {
e.action(), e.autoClose && t();
}
};
return n && (i.onFocus = () => n(e)), r && (i.onBlur = () => r(e)), i;
}), [ t, n, r, e ]);
return H.createElement(lf, {
variant: e.buttonVariant,
style: o,
label: e.label,
alignStart: i,
onFocus: c.onFocus,
onBlur: c.onBlur,
id: "modal-" + e.id,
input: {
keyBinding: l,
callback: c.actionWithMaybeAutoClose
},
onClick: c.actionWithMaybeAutoClose,
narrationItem: a,
narration: s,
icon: e.icon
});
};
function cA(e) {
return "actions" in e;
}
var dA = H.memo((({actions: e, closeAction: t, onFocus: n, onBlur: r, alignStart: i, buttonStyle: o, buttonNarrationItem: a}) => {
const {closeModal: s} = uT();
let l = t ? 1 : 0, c = 0;
for (const t of e) cA(t) ? l += t.actions.length : l++;
return H.createElement(H.Fragment, null, e.map((e => cA(e) ? H.createElement(QN, {
key: e.id,
style: rA,
childrenStyle: iA,
headline: e.title,
body: e.body,
bodyStyle: oA
}, e.actions.map((e => H.createElement(lA, {
key: e.id,
style: [ aA, o ],
actionConfig: e,
closeModal: s,
onFocus: n,
onBlur: r,
narrationItem: a,
narration: {
buttonNumber: ++c,
buttonTotal: l
}
})))) : H.createElement(lA, {
key: e.id,
style: [ aA, o ],
actionConfig: e,
closeModal: s,
onFocus: n,
onBlur: r,
alignStart: i,
narrationItem: a,
narration: {
buttonNumber: ++c,
buttonTotal: l
}
}))), !!t && H.createElement(lA, {
key: t.id,
style: [ aA, o, e.length > 1 ? Lc("marginTop", hc(Xc.DimensionSpace.larger)) : void 0 ],
actionConfig: t,
closeModal: s,
onFocus: n,
onBlur: r,
alignStart: i,
narrationItem: a,
narration: {
buttonNumber: ++c,
buttonTotal: l
}
}));
})), uA = ({closeAction: e, withoutLabel: t, children: n}) => (tA({
callback: e.action,
label: t ? void 0 : e.label,
action: 3
}), H.createElement(H.Fragment, null, n)), pA = ({title: e, headline: t, body: n, overlayTitleNarrationItem: r}) => {
Du((t => r({
title: e
}, t)), [ e, r ], 0), Du((() => [ t, n ]), [ n, t ], 3);
}, fA = ({title: e, headline: t, body: n, style: r, children: i, overlayTitleNarrationItem: o}) => (pA({
title: e,
headline: t,
body: n,
overlayTitleNarrationItem: o
}), H.createElement(QN, {
style: rA,
title: e,
headline: t,
body: n,
bodyStyle: oA
}, H.createElement("surface", {
style: [ iA, r ]
}, i))), hA = ({title: e, headline: t, body: n, actions: r, closeAction: i, closeLabel: o, showLoading: a, withoutCloseButton: s = !1, withoutGlobalCloseInputLabel: l = !1, overlayTitleNarrationItem: c, buttonNarrationItem: d}) => {
const {closeModal: u} = uT(), p = H.useMemo((() => ({
id: "close",
action: i || u,
label: o || EE("CLOSE")
})), [ i, o, u ]);
return H.createElement(fA, {
title: e,
headline: t,
body: n,
overlayTitleNarrationItem: c
}, H.createElement(uA, {
closeAction: p,
withoutLabel: !s || l
}, H.createElement("surface", null, H.createElement("surface", {
style: [ Lc("opacity", a ? 0 : 1), Lc("alignItems", "center") ]
}, H.createElement(dA, {
actions: r,
closeAction: s ? void 0 : p,
buttonNarrationItem: d
})), a && H.createElement(eA, {
style: sA
}))));
}, mA = ({title: e, headline: t, body: n, confirmLabel: r = EE("CONFIRM"), cancelLabel: i = EE("INPUT_LABEL_CANCEL"), onConfirm: o, onCancel: a, showLoadingOnConfirm: s, autoClose: l = !0, overlayTitleNarrationItem: c, buttonNarrationItem: d}) => {
const {closeModal: u} = uT(), [p, f] = H.useState(!1), h = H.useMemo((() => [ {
id: "confirm",
label: r,
action: async () => {
s && f(!0), await o(), s && l && u();
},
autoClose: !s && l,
buttonVariant: 0
} ]), [ l, u, r, o, s ]), m = H.useMemo((() => {
if (a) return () => {
a(), l && u();
};
}), [ l, u, a ]);
return H.createElement(hA, {
title: e,
headline: t,
body: n,
actions: h,
showLoading: p,
closeAction: m,
closeLabel: i,
overlayTitleNarrationItem: c,
buttonNarrationItem: d
});
}, gA = ({title: e}) => e ? wh("PHOTON-SOCIAL_NARRATION_OVERLAY-DISPLAYED", {
"%overlayLabel%": e
}) : void 0, yA = 1, IA = 2, _A = 3, bA = 4, SA = 5, vA = 6, TA = e => {
const t = Os();
H.useEffect((() => dp(t, e)), [ t, e ]);
}, EA = (e, t, n = !0) => {
const r = LA();
return up(e ? {
...e,
keyBinding: r[e.action]
} : void 0, t, n);
}, PA = bh.InputBindings.Action, OA = {
[PA.Primary]: "buttonACrossDown",
[PA.Secondary]: "buttonXSquareLeft",
[PA.Decline]: "buttonBCircleRight",
[PA.OpenActionList]: "buttonYTriangleUp",
[PA.GoUp]: "up",
[PA.GoDown]: "down",
[PA.GoLeft]: "left",
[PA.GoRight]: "right",
[PA.NextPage]: "bumperRight",
[PA.PreviousPage]: "bumperLeft",
[PA.Settings]: "middleMenu",
[PA.NotificationFocus]: "middleOption",
[PA.ToggleMode]: "triggerRight",
[PA.TogglePhoton]: "buttonBCircleRight",
[PA.LeaveParty]: "rightJoystickPress",
[PA.Tertiary]: "leftJoystickPress"
};
function CA(e, t) {
return {
primaryButton: nc(e, OA[t]),
secondaryButtons: []
};
}
function NA(e, t, n, r) {
try {
const t = e.InputBindings.getActionBinding({
action: n
})?.keyBinding;
if (t) {
const {keyboardKeyLabel: e, keyboardKeycode: n, gamePadInput: i} = t.primaryButton;
if (n || e || i) return "number" == typeof r && (t.priority = r), t;
}
} catch {}
return CA(t, n);
}
var [AA, LA] = Is("PhotonKeyBindings"), wA = e => LA()[e];
function kA(e, t) {
return {
[PA.Primary]: NA(e, t, PA.Primary, SA),
[PA.Secondary]: NA(e, t, PA.Secondary),
[PA.Decline]: NA(e, t, PA.Decline, vA),
[PA.OpenActionList]: NA(e, t, PA.OpenActionList),
[PA.GoUp]: NA(e, t, PA.GoUp),
[PA.GoDown]: NA(e, t, PA.GoDown),
[PA.GoLeft]: NA(e, t, PA.GoLeft),
[PA.GoRight]: NA(e, t, PA.GoRight),
[PA.NextPage]: NA(e, t, PA.NextPage),
[PA.PreviousPage]: NA(e, t, PA.PreviousPage),
[PA.Settings]: NA(e, t, PA.Settings, IA),
[PA.NotificationFocus]: NA(e, t, PA.NotificationFocus),
[PA.ToggleMode]: NA(e, t, PA.ToggleMode, _A),
[PA.TogglePhoton]: NA(e, t, PA.TogglePhoton, yA),
[PA.LeaveParty]: NA(e, t, PA.LeaveParty, bA),
[PA.Tertiary]: dg.featureFlags.hasTertiaryAction ? NA(e, t, PA.Tertiary) : CA(t, PA.Tertiary)
};
}
var RA = Ii.observer((({children: e}) => {
const t = Lh(), n = Os(), r = mp(), i = sp(), [o, a] = H.useState((() => kA(t, i)));
return H.useEffect((() => {
const e = () => {
a(kA(t, i));
}, n = [ t.InputBindings.onBindingsChanged.subscribe(e) ];
return e(), () => {
n.forEach((e => e()));
};
}), [ t, r, n, i ]), H.createElement(AA.Provider, {
value: o
}, e);
})), xA = bh.DeepLink.ParentalControlSettings, BA = class extends TI {}, DA = class extends TI {}, [FA, MA] = js({
debugName: "voipPlayersFragmentStoreState",
create: () => new DA({
debugName: "VoipPlayersFragmentStore"
})
}), [UA, HA] = js({
debugName: "voipChannelsFragmentStoreState",
create: () => new BA({
debugName: "VoipChannels"
})
});
function VA(e) {
return e.get(FA);
}
function JA(e) {
const t = VA(e), n = gb(e);
return Ts((() => t.get().data?.players.get(n.photonPlayerId)));
}
var GA = e => {
const t = Yy(e.playerNetworkId);
return {
eaPlayerId: e.playerId,
playerNetworkId: t,
status: e.status,
channel: e.channel,
photonPlayerId: UI({
eaPlayerId: e.playerId,
playerNetworkId: t
})
};
};
function zA(e, t) {
return !!t && !!e && e.status !== bh.Voip.VoipStatus.Disabled && t.status !== bh.Voip.VoipStatus.Disabled && e.channel === t.channel;
}
function jA(e) {
return Ts((() => {
const t = e.get(Hv)(xA.Voip);
return !e.get(QT).getSetting(2, 0) || t;
}));
}
function qA(e) {
const t = JA(e);
return t?.channel === bh.Voip.VoipChannel.None || t?.status === bh.Voip.VoipStatus.Disabled;
}
var YA = Ly.object({
error: Ly.optional(Ly.string)
});
function KA(e, t) {
let n = "", r = Sf.VOIP;
const i = XO(e), {showNotification: o} = e.get(iP);
t?.channel === bh.Voip.VoipChannel.Party ? n = wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-PARTY") : t?.channel === bh.Voip.VoipChannel.Game ? n = wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-TEAM") : t?.channel === bh.Voip.VoipChannel.None && (r = Sf.VOIP_DISABLED, 
n = wh((i ?? 0) >= 2 ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_IN-PARTY" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED")), 
n && o(3, 3, {
icon: r,
text: n
});
}
var WA = async (e, t, n) => {
const r = e.get(zg);
if (jA(e) && t.channel !== bh.Voip.VoipChannel.None) return;
const i = await Xy((() => r.Voip.setActiveVoipChannel(t)), YA);
n || i.error || KA(e, t);
};
function XA() {
const e = Os();
return H.useCallback(((t, n) => WA(e, t, n)), [ e ]);
}
function QA() {
const e = XA();
return H.useCallback((() => e({
channel: bh.Voip.VoipChannel.Party
})), [ e ]);
}
var $A = e => {
const t = [];
for (let n = 0, r = e.length; n < r; n++) {
const r = e.charCodeAt(n);
t.push(r >>> 8, 255 & r);
}
return new Uint8Array(t);
}, ZA = e => {
const t = [];
for (let n = 0, r = e.length; n < r; ) t.push((255 & e[n++]) << 8 | 255 & e[n++]);
return String.fromCharCode.apply(null, t);
}, eL = e => {
const t = {};
return Object.keys(e).forEach((n => {
t[n] = ZA(e[n].token);
})), t;
};
async function tL(e, t) {
return new Promise((n => {
setTimeout((() => {
n(e());
}), t);
}));
}
async function nL(e, t, n = 1) {
const r = t?.maxAttempts ?? 3, i = t?.retryDelay ?? 2e3, o = await e();
return o.error && n < r ? tL((() => nL(e, t, n + 1)), i) : o;
}
function rL(e) {
return {
stringValue: sm($A(e))
};
}
function iL(e, t) {
const n = {
isCrossplayEnabled: {
integerValue: t ? 1 : 0
}
};
return e.has("party") || e.forEach(((e, t) => {
n[t] = rL(e);
})), n;
}
function oL(e) {
const t = {};
return Object.values(AC).forEach((n => {
const r = e.properties[n];
r && (t[n] = {
token: lm(r)
});
})), t;
}
var aL = 72e5, sL = Ly.object({
gameJoinTokens: Ly.map(Ly.object({
token: Ly.uint8Array
}))
});
function lL(e) {
return e?.properties.party || e?.properties.lobby ? eL(oL(e)) : {};
}
async function cL(e, t, n, r, i) {
const o = YI(r), a = jI(r) ? r : void 0, s = qS(e).get(), l = Ts((() => HS(e, s.data, o, a))), c = gb(e).tokenInfo.userId;
let d;
if (i) d = i.properties.party || i.properties.lobby ? {
loading: !1,
skipped: !1,
data: {
gameJoinTokens: oL(i)
}
} : await nL((() => Xy((() => n.GetGameJoinTokens({
playerId: {
id: c
},
gameInviteId: i.gameInviteId
})), sL)), {
retryDelay: 1e3,
maxAttempts: 3
}); else {
if (!l?.sessionId) return {
skipped: !1,
loading: !1,
error: new Error("Missing necessary data"),
data: void 0
};
d = await nL((() => Xy((() => t.getDirectJoinTokens({
sessionId: l.sessionId
})), sL)), {
retryDelay: 1e3,
maxAttempts: 3
});
}
if (d.data?.gameJoinTokens) {
const e = eL(d.data.gameJoinTokens);
return {
...d,
data: e
};
}
return {
...d,
data: void 0
};
}
async function dL(e, t, n, r, i, o, a) {
const {data: s, error: l} = await cL(e, t, n, r, a), c = s?.[o];
return c ? {
loading: !1,
skipped: !1,
data: c
} : (i.showErrorNotification(void 0, "get game join token", l), {
loading: !1,
skipped: !1,
error: l || new Error("Could not retrieve lobbyId")
});
}
var uL = class extends TI {}, [pL, fL] = js({
debugName: "mutedPlayersFragmentStoreState",
create: () => new uL({
debugName: "MutedPlayers"
})
}), hL = async e => {
const [t, n, r] = await Promise.all([ LI(e.get(uS).get(), 1e4), LI(e.get(pL).get(), 1e4), LI(e.get(iO).get(), 1e4) ]);
return Ts((() => {
const e = t.data, i = n.data, o = r.data, a = new Set, s = new Set;
if (o && e?.size) for (const t of o.members.values()) e.has(t.eaPlayerId) && (a.add(t.photonPlayerId), 
i?.has(t.eaPlayerId) || s.add(t.photonPlayerId));
return {
party: o,
blockedEaIds: a,
blockedAndUnmutedEaIds: s
};
}));
}, mL = Gs({
debugName: "relativePrimaryIdMap",
get: function(e, t) {
const {get: n} = t, r = n(hb), {data: i} = n(z_).get(e);
return r.photonPlayerId === e ? {
name: lP(i),
playerNetworkId: r.personaInfo.playerNetworkId
} : {
name: lP(i),
playerNetworkId: hP(t, r.personaInfo.playerNetworkId, i)
};
}
}), gL = (e, t) => e.getItemUntracked(mL, t), yL = e => ks(mL, e), IL = Ii.observer((e => {
const {playerNetworkId: t, name: n} = yL(e.photonPlayerId);
return H.createElement(yv, {
name: n,
playerNetworkId: t,
style: e.style,
textStyle: e.textStyle,
useEllipsis: e.useEllipsis,
icon: e.icon
});
})), _L = Ii.observer((({player: e, color: t = Xc.TextColorStandard.emphasized, style: n}) => {
const {playerNetworkId: r} = aP(), i = Os(), o = hv({
name: e.displayName,
playerNetworkId: hP(i, r, e)
});
return H.createElement(iv, {
text: o,
color: t,
style: [ Lc("textEllipsis", !0), n ]
});
})), bL = class extends Error {
constructor() {
super(...arguments), this.name = "JoinPreventedByFirstPartyError";
}
}, SL = class extends bL {}, vL = class extends bL {}, TL = (e, t) => {
t({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY-EXPIRED")
}, "join party", e.error);
}, EL = (e, t) => {
t({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY-EXPIRED")
}, "join lobby", e.error);
}, PL = (e, t, n) => {
e(0, 0, {
icon: Sf.VOIP
}, n, wh("PHOTON-SOCIAL_NOTIFICATION_PARTY-VOIP_BUTTON_OPEN"), t);
};
async function OL(e, t, n, r, i, o) {
const {playerNetworkId: a, name: s} = gL(n, r), {showNotification: l, showCtaNotification: c, showErrorNotification: d} = i, u = qA(n), p = jA(n), f = hv({
name: s,
playerNetworkId: a
}, {
allowEllipsis: !0
}), h = e?.error || t?.error;
if (h) {
if (h instanceof bL) return void l(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": zb(sP(n).playerNetworkId)
}),
icon: Sf.INFORMATION
});
if (e?.error) return void TL(e, d);
if (t?.error) return void EL(t, d);
}
if (e && t) return u ? void (p ? l(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-ACCEPT", {
"%primaryID%": f
}),
icon: Sf.PARTY
}) : PL(c, o, wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO-VOICE-DISABLED", {
"%primaryID%": f
}))) : void l(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO-VOICE-ENABLED", {
"%primaryID%": f
}),
icon: Sf.PARTY
});
if (e) {
if (u) return void (p ? l(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-ACCEPT", {
"%primaryID%": f
}),
icon: Sf.PARTY
}) : PL(c, o, wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY-VOICE-DISABLED", {
"%primaryID%": f
})));
const {blockedAndUnmutedEaIds: e} = await hL(n);
e.size || l(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY-VOICE-ENABLED", {
"%primaryID%": f
}),
icon: Sf.PARTY
});
} else t && l(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-ACCEPT", {
"%primaryID%": f
}),
icon: Sf.PARTY
});
}
var CL = bh.XboxPlatform.XUserPrivilege, NL = bh.XboxPlatform.XboxPermission, AL = bh.XboxPlatform.ResolveXUserPrivilegeWithUiAsyncResult;
async function LL(e, t, n, r) {
if ("XBOX" !== e.get(hb).personaInfo.playerNetworkId) return;
if (e.get(dO)) return;
const i = HS(e, e.get(zS).get().data, t, void 0), o = i?.properties?.crossplayEnabled, a = !!n.partyId && i?.properties?.partyCrossplayEnabled, s = !!n?.lobbyId && i?.properties?.lobbyCrossplayEnabled, l = r?.properties.isCrossplayEnabled;
if (!(o || a || s || l)) return;
const c = await kT(e, CL.CrossPlay);
return c?.result, AL.Resolved, c;
}
async function wL(e, t) {
const {isAllowed: n, privacyResult: r} = await DT(e, t, [ NL.PlayMultiplayer ], CL.Multiplayer);
return {
isAllowed: n,
privacyResult: r
};
}
async function kL(e, t, n, r) {
const {isAllowed: i, privacyResult: o} = await wL(e, t);
if (!i) return {
loading: !1,
skipped: !1,
error: new SL(FT(o))
};
const a = await LL(e, t, n, r);
return void 0 !== a?.result && a.result !== AL.Resolved ? {
loading: !1,
skipped: !1,
error: new vL("CrossplayDisabled")
} : {
loading: !1,
skipped: !1
};
}
function RL(e, t, n, r, i) {
const o = Os(), {PresenceSession: a, GameInvite: s} = Lh(), l = oP(), {data: c} = ks(n, XI(e, t));
return H.useMemo((() => ({
...c,
getGameJoinToken: () => dL(o, a, s, e, l, r, i)
})), [ i, s, r, c, o, l, e, a ]);
}
var xL = Ks({
debugName: "joiningPartyIdState",
default: void 0
});
function BL(e, t) {
e.set(xL, t);
}
var DL = Ks({
debugName: "partyGameInviteSentState",
default: !1
}), FL = Js({
debugName: "isInPartyState",
get: function({get: e}) {
const t = e(iO).get(), n = t.loading, r = !!e(xL) || n;
return !!t.data || r;
}
}), ML = Js({
debugName: "partyIdState",
get: function({get: e}) {
return e(iO).get().data?.partyId;
}
}), UL = Js({
debugName: "shouldRevokePartyGameInvitesWhenPartyIsFullOrLeft",
get: function({get: e}) {
const t = e(hb), n = e(iO).get().data, r = !!n?.members.get(t.photonPlayerId), i = !!n && n.maxSize <= n.members.size;
return !r || i;
}
}), HL = Js({
debugName: "shouldRevokePartyGameInvitesWhenCrossplaySettingChanges",
get: function({get: e}) {
return e(iO).get().data?.crossPlayEnabled;
}
});
function VL(e, t, n) {
e((() => H.createElement(QN, {
title: t,
bodyStyle: oA
}, H.createElement(eA, null))), {
ignoreCloseAll: !0,
telemetryId: n
});
}
function JL(e) {
const {action: t, DeepLink: n, notifications: r, modals: i, player: o, showLoading: a, loadingTelemetryId: s} = e, l = c => new Promise(((d, u) => {
a && VL(i.showModal, void 0, s), n.invokePlayerActionAsync({
playerActionId: t.playerActionId,
confirmed: c,
playerId: o.eaPlayerId ?? "",
playerNetworkId: o.playerNetworkId,
personaId: o.personaId ?? ""
}).then((t => {
if (t?.errorMessage) throw new Error(t.errorMessage);
if (a && i.closeModal(), t?.successMessage) r.showNotification(0, 3, {
icon: Sf.INFORMATION,
text: t.successMessage
}); else if (!c && t?.confirmation) return e.confirmAction ? e.confirmAction(t.confirmation, (() => l(!0))) : (n = t.confirmation, 
o = i.showModal, s = () => l(!0), new Promise(((e, t) => {
const r = async () => {
try {
await s(), e(!0);
} catch (e) {
t(e);
}
};
o((() => H.createElement(mA, {
title: n.localizedTitle,
body: n.localizedDescription,
confirmLabel: wh("BUTTON_CONTINUE"),
onConfirm: () => r(),
onCancel: () => e(!1),
showLoadingOnConfirm: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})));
})));
var n, o, s;
return !0;
})).then(d).catch((e => {
a && i.closeModal(), u(e);
}));
}));
return () => l().catch((e => (r.showErrorNotification({
text: e.message
}, `getPlayerActionCallback (${t.telemetryName}, ${t.playerActionId})`, e), Promise.reject(e))));
}
function GL(e, t, n) {
return new Promise((r => {
if ((sO(e) ?? 0) <= 1) return r(!0);
t((() => {
return H.createElement(mA, {
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_JOIN-PARTY"),
body: (e = dg.isTightlyCoupledParties, t = n.Notifications.getInGamePlay({})?.inGamePlay ?? !1, 
wh(e ? t ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-PARTY-B" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-PARTY-C" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-PARTY-A")),
confirmLabel: wh("BUTTON_CONTINUE"),
onConfirm: () => r(!0),
onCancel: () => r(!1),
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
});
var e, t;
}));
}));
}
async function zL(e, t, n, r, i, o, a) {
let s = !0;
BL(e, a);
const [l] = (await t.Party.isPartySupported({
partyIds: [ a ]
}))?.partySupport ?? [ {
isSupported: !0
} ];
return l.isSupported ? o && (s = await GL(e, n.showModal, t)) : l.enableSupportAction ? s = await JL({
action: l.enableSupportAction,
DeepLink: t.DeepLink,
notifications: r,
modals: n,
player: i,
showLoading: !0,
loadingTelemetryId: "overlay_join_new_party_confirm"
})() : (r.showErrorNotification({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_JOIN-FAIL")
}, "no enable support action", void 0), s = !1), s || BL(e), s;
}
function jL(e) {
return {
partyId: e.party,
lobbyId: e.lobby
};
}
function qL(e, t) {
const n = {
partyId: void 0,
lobbyId: void 0
};
return t.includes("party") && (n.partyId = e?.party), t.includes("lobby") && (n.lobbyId = e?.lobby), 
n;
}
function YL(e, t, n, r) {
return new Promise((i => {
const {partyId: o, lobbyId: a} = jL(n), {playerNetworkId: s, name: l} = gL(e, t);
if (!o || !a) return i({
partyId: o,
lobbyId: a
});
const c = e.get(ly), d = ET(c, (() => {
r.closeModal(), i({
partyId: void 0,
lobbyId: void 0
});
}), {
pg_id: "overlay_join_combo",
msg_id: "overlay_join_combo",
option: "cancel"
}), u = [ {
id: "party_and_lobby",
action: ET(c, (() => i({
partyId: o,
lobbyId: a
})), {
pg_id: "overlay_join_combo",
msg_id: "overlay_join_combo",
option: "join_combo_invite"
}),
autoClose: !0,
label: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO")
}, {
id: "party",
action: ET(c, (() => i({
partyId: o,
lobbyId: void 0
})), {
pg_id: "overlay_join_combo",
msg_id: "overlay_join_combo",
option: "join_party_invite"
}),
autoClose: !0,
label: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_JOIN-PARTY")
} ], p = hv({
name: l,
playerNetworkId: s
}, {
allowEllipsis: !0
});
r.showModal((() => H.createElement(hA, {
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_JOIN-COMBO", {
"%primaryID%": p
}),
body: wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-COMBO", {
"%primaryID%": p,
"%gameName%": dg.appName
}),
actions: u,
closeAction: d,
closeLabel: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CANCEL"),
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})), {
telemetryId: "overlay_join_combo"
});
}));
}
var KL = {
PS4: "ps4",
PS5: "ps5",
XBOXONE: "xbox_one",
XBSX: "xbsx",
PC: "pc",
NX: "switch",
UNKNOWN: "unknown"
}, WL = e => {
const t = KL[e];
return t || (console.error("Unknown PlatformModel: " + e), "unknown");
}, XL = "missing-group";
function QL(e, t, n, r, i, o) {
t.id === XL && (i = i ?? new Error("Missing Group"));
const a = {
class: t.class,
group_id: t.id,
members_list: t.members,
status: r,
status_code: i?.message,
members: n
};
o && (a.context = {
source: o
}), e.get(ly).triggerGroup(a);
}
function $L(e, t, n, r, i) {
let o;
if (o = t ? {
class: n ? "combo" : "party",
id: t.partyId,
members: Array.from(t.members.values()).map((t => mN(e, t.photonPlayerId)?.personaId)).filter(QI)
} : n ? {
class: "lobby",
id: n.lobbyId,
members: Array.from(n.members.values()).map((e => e.personaId))
} : {
class: void 0,
id: XL,
members: void 0
}, o.members && (r && !o.members.includes(r) && o.members.push(r), i)) {
const e = o.members.indexOf(i);
e > -1 && o.members?.splice(e, 1);
}
return o;
}
function ZL(e, t) {
return e ? t ? "combo" : "party" : t ? "lobby" : void 0;
}
function ew(e, t, n) {
let r = "unknown";
e && (r = t?.playerNetworkId === e ? "local" : "other");
const i = n ? WL(n) : "unknown";
return {
pidt: "persona",
pid: t?.personaId,
pidm: t?.eaPlayerId,
plat: i,
join_method: r
};
}
function tw(e, t, n) {
let r;
if (n === t) r = dg.devicePlatformId; else {
r = HS(e, e.get(zS).get().data, t, void 0)?.devicePlatformId ?? "UNKNOWN";
}
return r;
}
function nw(e, t, n) {
const r = gb(e), i = r.personaInfo.playerNetworkId, o = r.photonPlayerId, a = t?.members.values() ?? n?.members.values() ?? [];
return Array.from(a).map((t => {
const n = mN(e, t.photonPlayerId), r = tw(e, t.photonPlayerId, o);
return ew(i, n, r);
}));
}
function rw(e, t) {
const n = gb(e), r = n.personaInfo.playerNetworkId, i = n.photonPlayerId;
return t.filter(QI).map((t => {
const n = tw(e, t.photonPlayerId, i);
return ew(r, t, n);
}));
}
function iw(e, t) {
if (t) return e.find((e => e.pidm === t));
}
var ow = (e, t, n, r, i) => Ts((() => {
const o = rw(e, [ t ]);
return t => {
Ts((() => {
const a = $L(e, n, r, void 0, void 0);
QL(e, a, o, "invite_sent", t, i);
}));
};
})), aw = (e, t, n, r, i, o, a) => {
Ts((() => {
const s = mN(e, t), l = rw(e, [ s ]);
let c;
if (n || !r && !i) c = {
class: ZL(o, a),
id: o ?? a ?? "",
members: void 0
}; else {
const t = gb(e);
c = $L(e, r, i, t.personaInfo.personaId, void 0);
}
QL(e, c, l, "invite_accepted", n);
}));
}, sw = (e, t, n, r, i = "invite_declined") => {
Ts((() => {
const o = mN(e, t);
let a, s;
if (r?.gameJoinTokenTypes.includes("party") && r?.gameJoinTokenTypes.includes("lobby")) a = "combo"; else if (r?.gameJoinTokenTypes.includes("party")) a = "party"; else if (r?.gameJoinTokenTypes.includes("lobby")) {
a = "lobby";
s = qL(lL(r), [ "lobby" ]).lobbyId;
}
const l = {
class: a,
id: s ?? "",
members: void 0
}, c = rw(e, [ o ]);
QL(e, l, c, i, n);
}));
}, lw = (e, t, n, r, i, o, a = "join") => {
Ts((() => {
let s;
const l = gb(e), c = mN(e, l.photonPlayerId), d = rw(e, [ c ]);
s = t || !n && !r ? {
class: ZL(i, o),
id: i ?? o ?? "",
members: void 0
} : $L(e, n, r, l.personaInfo.personaId, void 0), QL(e, s, d, a, t);
}));
}, cw = (e, t, n, r) => {
Ts((() => {
const i = gb(e), o = $L(e, t, n, void 0, i.personaInfo.personaId), a = iw(nw(e, t, n), i.tokenInfo.userId);
a && (t || n) && QL(e, o, [ a ], "leave", r);
}));
}, dw = (e, t, n, r, i) => {
Ts((() => {
const o = mN(e, n), a = $L(e, r, void 0, void 0, "kickPartyMember" === t ? o?.personaId : void 0), s = iw(nw(e, r, void 0), o?.eaPlayerId);
s && r && QL(e, a, [ s ], "setPartyLeader" === t ? "promote" : "remove_member", i);
}));
}, uw = fg("/party", "tab_party"), pw = Gs({
debugName: "isPartyJoinableState",
get: function(e, {get: t, getItem: n}) {
if (!dg.isPartyEnabled) return {
uninitialized: !1,
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const {photonPlayerId: r, photonSessionId: i} = WI(e);
if (!zI(r)) return {
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const o = t(iO).get();
if (!!o.data?.members.get(r)) return {
...o.toProps(),
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const a = t(zS).get(), s = HS({
get: t,
getItem: n
}, a.data, r, i);
if (!a.data || !s) return {
...a.toProps(),
data: void 0
};
const l = QP(n(pO, e)), c = wC(s);
return {
...CI([ o, a ]),
data: {
joinable: c && !l,
crossplayPrevented: c && l
}
};
}
}), fw = Ly.object({
party: tO
});
function hw(e) {
return AP(e.party);
}
async function mw(e, t, n) {
const r = await Xy((() => e.joinParty({
partyId: n
})), fw, {
transformResponse: hw
});
return r.error || t.updateParty(r.data), r;
}
function gw(e) {
VL(e, wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_JOINING"), "overlay_join_new_party");
}
async function yw(e, t, n, r) {
const i = aO(e);
BL(e, r);
const o = await mw(t, i, r);
return BL(e, void 0), o;
}
function Iw(e, t) {
const n = Os(), r = oP(), i = uT(), o = Lh(), {data: a} = gN(e, 0), {navigate: s} = Wg("main"), {joinable: l, crossplayPrevented: c, getGameJoinToken: d} = RL(e, t, pw, "party"), u = QA(), p = H.useCallback((async () => {
if (!a) return {
loading: !1,
skipped: !1
};
const {data: t, ...l} = await d();
if (!t) return l;
try {
if (!await zL(n, o, i, r, a, !0, t)) return {
loading: !1,
skipped: !1
};
} catch (e) {
return {
loading: !1,
skipped: !1,
error: e
};
}
let c;
gw(i.showModal);
const p = await kL(n, e, {
partyId: t
}, void 0);
return c = p.error ? p : await yw(n, o.Party, o.Voip, t), i.closeModal(), await OL(c, void 0, n, e, r, u), 
lw(n, c.error, c.data, void 0, t, void 0, "hot_join"), c.data && s(uw.link()), c;
}), [ d, n, i, o, e, r, u, a, s ]);
return {
joinable: l,
crossplayPrevented: c,
directJoinParty: l ? p : void 0
};
}
var _w = Gs({
debugName: "isLobbyJoinableState",
get: function(e, {get: t, getItem: n}) {
if (dg.isTightlyCoupledParties) return {
uninitialized: !1,
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const {photonPlayerId: r, photonSessionId: i} = WI(e);
if (!zI(r)) return {
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const o = t(bP).get();
if (!!o.data?.members.get(r)) return {
...o.toProps(),
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const a = t(zS).get(), s = HS({
get: t,
getItem: n
}, a.data, r, i);
if (!a.data || !s) return {
...a.toProps(),
data: void 0
};
const l = QP(n(pO, e)), c = LC(s);
return {
...CI([ o, a ]),
data: {
joinable: c && !l,
crossplayPrevented: c && l
}
};
}
});
function bw(e, t) {
return ks(_w, XI(e, t));
}
async function Sw(e, t, n) {
const r = await Xy((() => e.joinLobby({
lobbyId: n
})), ev, {
transformResponse: XS
});
return r.error || t.updateLobby(r.data), r;
}
async function vw(e, t, n) {
const r = TP(e), i = await Sw(t, r, n);
return i.data && nN(e).close(), i;
}
function Tw(e, t) {
const n = Os(), {Lobby: r} = Lh(), i = oP(), o = uT(), a = QA(), {joinable: s, crossplayPrevented: l, getGameJoinToken: c} = RL(e, t, _w, "lobby"), d = H.useCallback((async () => {
const {data: t, ...s} = await c();
if (!t) return lw(n, s.error, void 0, void 0, void 0, t, "hot_join"), s;
let l;
gw(o.showModal);
const d = await kL(n, e, {
lobbyId: t
}, void 0);
return l = d.error ? d : await vw(n, r, t), o.closeModal(), await OL(void 0, l, n, e, i, a), 
lw(n, l.error, void 0, l.data, void 0, t, "hot_join"), l;
}), [ a, c, r, n, i, e, o ]);
return {
joinable: s,
crossplayPrevented: l,
directJoinLobby: s ? d : void 0
};
}
async function Ew(e, t, n, r, i, o, a, s, l, c, d = !0, u) {
const {data: p} = await LI(e.get(z_).get(s), 1e4);
if (!p) return {
loading: !1,
skipped: !1,
error: new Error("No player")
};
const {partyId: f, lobbyId: h} = c;
if (!f && !h) return {
loading: !1,
skipped: !1
};
try {
if (f) {
if (!await zL(e, u, i, o, p, d, f)) return {
loading: !1,
skipped: !1
};
}
} catch (e) {
return {
loading: !1,
skipped: !1,
error: e
};
}
gw(i.showModal);
const m = await kL(e, s, c, l);
let g, y;
m.error ? g = m : (f && (g = await yw(e, n, 0, f)), h && (y = await vw(e, t, h))), 
i.closeModal();
const I = !!g?.data?.partyId || !!y?.data?.lobbyId;
if (await OL(g, y, e, s, o, a), l ? aw(e, s, I ? void 0 : g?.error ?? y?.error, g?.data, y?.data, f, h) : lw(e, I ? void 0 : g?.error ?? y?.error, g?.data, y?.data, f, h), 
I) {
zh(e, "main").navigate(uw.link());
}
return {
loading: !1,
skipped: !1,
data: I
};
}
async function Pw(e, t, n, r, i, o, a, s) {
const l = await cL(e, o.PresenceSession, o.GameInvite, i, a);
if (!l.data || !Object.keys(l.data).length) return n.showErrorNotification({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_JOIN-FAIL")
}, "combo join", l.error), {
...l,
data: void 0,
error: l.error || new Error("Missing gamejointokens")
};
const {partyId: c, lobbyId: d} = s ? qL(l.data, s) : await YL(e, i, l.data, t);
return c || d ? Ew(e, o.Lobby, o.Party, o.Voip, t, n, r, i, a, {
partyId: c,
lobbyId: d
}, !0, o) : {
loading: !1,
skipped: !1
};
}
function Ow(e) {
const t = Os(), n = uT(), r = oP(), i = QA(), o = Lh();
return H.useCallback((async () => Pw(t, n, r, i, e, o)), [ o, i, t, n, r, e ]);
}
var Cw = Ly.object({
response: Ly.optional(Ly.nullable(Ly.object({
displayName: Ly.string,
assets: Ly.array(Ly.object({
url: Ly.string,
type: Ly.string,
geometry: Ly.object({
width: Ly.number,
height: Ly.number
})
}))
}))),
productId: Ly.string
});
function Nw(e) {
if (!e.response) return {
productId: e.productId
};
const t = e.response.assets.filter((e => "game-title-logo" === e.type)), n = new Map(t.map((e => [ `${e.geometry.width}x${e.geometry.height}`, e ])));
return {
productId: e.productId,
title: e.response.displayName,
gameTitleLogo: n
};
}
function Aw(e) {
const t = e.toLowerCase();
switch (t) {
case "no-no":
return "nb-no";

case "zh-hk":
return "zh-tw";

default:
return t;
}
}
var Lw = class extends bI {
async fetchWithRetries(e, t) {
const n = await nL((() => {
return this.updateFragments([ t ], {
loading: !0,
uninitialized: !1
}), n = e, r = t.id, i = dg.locale, Xy((async () => ({
...await n.GetProduct({
productId: {
id: r
},
locale: Aw(i)
}),
productId: r
})), Cw, {
transformResponse: Nw
});
var n, r, i;
}), {
maxAttempts: 3,
retryDelay: 2e3
});
this.updateFragments([ t ], n);
}
init(e) {
return new sI(this.fragmentsList, (async t => {
await this.fetchWithRetries(e, t);
})).dispose;
}
}, [ww, kw] = js({
debugName: "productInfoFragmentStoreState",
create: () => new Lw({
debugName: "ProductInfo"
})
}), Rw = class extends TI {
constructor() {
super(...arguments), this.removeInvite = e => {
const t = this.get();
return Ts((() => {
const n = t.data;
n && n.delete(e);
}));
};
}
}, [xw, Bw] = js({
debugName: "gameInvitesFragmentStore",
create: () => new Rw({
debugName: "gameInvites"
})
});
function Dw(e) {
return e.get(xw);
}
function Fw(e) {
return e.gameInviteId + ":" + e.createdTimestampMs;
}
var Mw = e => {
const t = (new Date).getTime(), n = e.purgeTimestampMs, r = e.expiryTimestampMs;
return {
purged: t >= n,
expired: t >= r,
expiredLongAgo: t >= r + aL
};
}, Uw = e => e.senderProductId === dg.productId, Hw = {
pg_id: "tab_party",
destination_name: {
2: "current_game_party_invites",
3: "other_game_party_invites",
4: "expired_game_party_invites"
}
}, Vw = {
pg_id: "tab_game_invites",
destination_name: {
2: "current_game_invites",
3: "other_game_invites",
4: "expired_game_invites"
}
};
function Jw(e, t, n) {
const r = n.length;
return n.map(((n, i) => ({
...n,
telemetryInfo: {
pg_id: e,
msg_id: t,
destination_name: t,
index: {
item_index: i + 1,
total_items: r
}
}
})));
}
var Gw = (e, t, n) => {
const r = {
2: [],
3: [],
4: []
};
t.forEach((t => {
const {purged: n, expired: i, expiredLongAgo: o} = Mw(t), a = Uw(t), s = t.senderPhotonPlayerId;
n || o || !e.get(s) || (i ? r[4].push({
gameInvite: t,
photonPlayerId: s
}) : a ? r[2].push({
gameInvite: t,
photonPlayerId: s
}) : r[3].push({
gameInvite: t,
photonPlayerId: s
}));
}));
return {
2: Jw(n ? Hw.pg_id : Vw.pg_id, n ? Hw.destination_name[2] : Vw.destination_name[2], r[2]),
3: Jw(n ? Hw.pg_id : Vw.pg_id, n ? Hw.destination_name[3] : Vw.destination_name[3], r[3]),
4: Jw(n ? Hw.pg_id : Vw.pg_id, n ? Hw.destination_name[4] : Vw.destination_name[4], r[4])
};
};
function zw(e, t) {
const n = [];
return e && n.push("party"), t && n.push("lobby"), n;
}
function jw() {
const e = Array.from(pb.crossplayCompatiblePlatforms).map((e => ({
id: e
}))), t = Object.values(Jy).map((e => ({
id: e
})));
return {
compatibleDevicePlatformIds: e,
compatiblePlayerNetworkIds: t
};
}
function qw(e, t) {
const n = Dw(e);
return Ts((() => n.get().data?.get(t)));
}
var Yw = e => MP(Bw().get(), (t => t.get(e))), Kw = bh.InputBindings.Action, Ww = Ly.object({});
function Xw(e, t, n) {
return Xy((() => e.AcceptGameInvite({
gameInviteId: t,
playerId: {
id: n
}
})), Ww);
}
function Qw(e, t, n) {
return Xy((() => e.RejectGameInvite({
gameInviteId: t,
playerId: {
id: n
}
})), Ww);
}
var $w = e => {
const t = e.gameJoinTokenTypes.includes("party"), n = e.gameJoinTokenTypes.includes("lobby"), r = t && n;
return wh(t && !r ? "PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_PARTY-JOIN" : n && !r ? "PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN" : "PHOTON-SOCIAL_PARTY_LIST_ACTIONS_ACCEPT");
};
function Zw(e, t, n) {
return async r => {
const i = e.get(zg), o = Dw(e), a = e.get(dT), s = e.get(iP), l = gb(e).tokenInfo.userId, c = qw(e, n), d = await Pw(e, a, s, t, n, i, c, r);
if (c && d.data) {
const e = await Xw(i.GameInvite, c.gameInviteId, l);
return o.removeInvite(n), e;
}
return d;
};
}
function ek(e, t, n, r, i, o, a, s, l, c, d, u = !0, p) {
return async () => {
const r = Dw(e), f = gb(e).tokenInfo.userId, h = qw(e, c), {data: m} = await cL(e, i, o, c, h), {partyId: g, lobbyId: y} = qL(m, d), I = await Ew(e, t, n, 0, a, s, l, c, h, {
partyId: g,
lobbyId: y
}, u, p);
h && I.data && (await Xw(o, h.gameInviteId, f), r.removeInvite(c));
};
}
function tk(e, t, n, r, i, o, a, s, l, c, d, u, p, f = !0, h, m, g, y) {
const I = r => ek(e, t, n, 0, i, o, s, l, c, d, r, f, g), _ = [], b = u?.gameJoinTokenTypes.includes("party"), S = u?.gameJoinTokenTypes.includes("lobby");
let v = "tst_lobby_invite_received";
return b && S ? v = "tst_combo_invite_received" : b && (v = "tst_party_invite_received"), 
u && !y && (b && S ? (_.push({
id: "accept_combo",
callback: ET(h, I([ "party", "lobby" ]), {
...m,
pg_id: v,
msg_id: v,
option: "join_combo_invite"
}),
label: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO"),
keyBinding: p
}), _.push({
id: "accept_party",
callback: ET(h, I([ "party" ]), {
...m,
pg_id: v,
msg_id: v,
option: "join_party_invite"
}),
label: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_JOIN-PARTY"),
keyBinding: p
})) : b ? _.push({
id: "accept_party",
callback: ET(h, I([ "party" ]), {
...m,
pg_id: v,
msg_id: v,
option: "join_party_invite"
}),
label: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_JOIN-PARTY"),
keyBinding: p
}) : S && _.push({
id: "accept_lobby",
callback: ET(h, I([ "lobby" ]), {
...m,
pg_id: v,
msg_id: v,
option: "join_lobby_invite"
}),
label: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN"),
keyBinding: p
})), {
actions: _,
telemetryToasterId: v
};
}
var nk = (e, t) => {
const n = (new Date).getTime() > e.expiryTimestampMs;
return e.gameJoinTokenTypes.includes("party") ? e.gameJoinTokenTypes.includes("lobby") ? n ? wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-REMOVED") : wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-DECLINE", {
"%primaryID%": t
}) : n ? wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-REMOVED") : wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-DECLINE", {
"%senderPrimaryID%": t
}) : n ? wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-REMOVED") : wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-DECLINE", {
"%primaryID%": t
});
}, rk = (e, t) => async () => {
const n = e.get(zg), r = Dw(e), {showNotification: i, showErrorNotification: o} = e.get(iP), a = gb(e).tokenInfo.userId, s = qw(e, t);
try {
ry(s);
const o = await Qw(n.GameInvite, s.gameInviteId, a);
if (o.error) throw o.error;
if (sw(e, t, void 0, s), o.data) {
const n = hv(gL(e, t), {
allowEllipsis: !0
});
r.removeInvite(t), i(3, 3, {
icon: Sf.REMOVE,
text: nk(s, n)
});
}
} catch (n) {
sw(e, t, n, s), o({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_DECLINE-INVITE-FAIL")
}, "decline invite", n);
}
};
function ik(e, t, n) {
const r = Os(), {data: i} = Yw(e), o = QA(), a = !!i && Mw(i).expired, s = i?.senderProductId;
return H.useMemo((() => ({
acceptInvite: a => {
let l = "join_party_invite";
i?.gameJoinTokenTypes.includes("party") && i?.gameJoinTokenTypes.includes("lobby") ? l = "join_combo_invite" : i?.gameJoinTokenTypes.includes("lobby") && (l = "join_lobby_invite");
const c = Zw(r, o, e);
return AT(r, e, t, (() => c(a)), n && {
...n,
option: l,
context: {
tpid: s
}
})();
},
declineInvite: () => {
const i = rk(r, e);
return AT(r, e, t, i, n && {
...n,
option: a ? "remove" : "decline",
context: {
tpid: s
}
})();
}
})), [ o, a, i?.gameJoinTokenTypes, r, e, t, s, n ]);
}
function ok(e, t, n, r) {
return async () => {
const {data: i} = await LI(t.get(e.senderProductId)), o = 1 === e.gameJoinTokenTypes.length && e.gameJoinTokenTypes.includes("lobby") ? wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_SWITCH-GAMES-LOBBY", {
"%gameName%": i?.title ?? wh("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
}) : wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_SWITCH-GAMES", {
"%gameName%": i?.title ?? wh("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
}), a = [ {
id: "close_switch_game_modal",
autoClose: !0,
label: wh("BUTTON_GOT-IT"),
action: () => TT(r, {
option: "cancel",
status: "click",
msg_id: "overlay_switch_games",
pg_id: "overlay_switch_games"
})
} ];
n.showModal((() => H.createElement(hA, {
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_SWITCH-GAMES"),
body: o,
actions: a,
withoutCloseButton: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})), {
telemetryId: "overlay_switch_games"
});
};
}
function ak(e, t, n) {
const {data: r} = Yw(e), {acceptInvite: i, declineInvite: o} = ik(e, t, n), a = hO(e, t), s = uT(), l = wA(Kw.Primary), c = wA(Kw.Secondary), d = kw(), u = cy();
return H.useMemo((() => {
if (r) {
const e = Uw(r), {expired: t} = Mw(r);
if (!t) {
if (e && i && o) {
const e = {
keyBinding: c,
callback: o,
label: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_DECLINE")
};
return a ? {
primaryAction: e
} : {
primaryAction: {
keyBinding: l,
callback: () => i(),
label: $w(r)
},
secondaryAction: e
};
}
if (!e && o) {
const e = ok(r, d, s, u);
return {
primaryAction: {
keyBinding: l,
callback: ET(u, e, n && {
...n,
option: "switch_games"
}),
label: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_SWITCH-GAMES")
},
secondaryAction: {
keyBinding: c,
callback: o,
label: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_DECLINE")
}
};
}
}
if (o) return {
primaryAction: {
keyBinding: l,
callback: o,
label: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_REMOVE")
}
};
}
return {};
}), [ r, o, i, c, a, l, d, s, u, n ]);
}
var sk = Ks({
debugName: "lobbyGameInviteSentState",
default: !1
}), lk = Js({
debugName: "shouldRevokeLobbyGameInvites",
get: function({get: e}) {
const t = e(hb), n = e(bP).get().data, r = !!n?.members.get(t.photonPlayerId), i = !!n && n.maxSize <= n.members.size;
return !r || i;
}
}), ck = Js({
debugName: "lobbyIdChangedState",
get: function({get: e}) {
return e(bP).get().data?.lobbyId;
}
}), dk = Js({
debugName: "shouldRevokeLobbyGameInvitesWhenCrossplaySettingChanges",
get: function({get: e}) {
return e(bP).get().data?.crossPlayEnabled;
}
}), uk = Ks({
debugName: "performedActionsState",
default: new Map
});
function pk(e) {
return new Map(e.getUntracked(uk));
}
var fk = new Map;
function hk(e, t) {
if (t) {
const n = fk.get(e)?.get(t);
if (void 0 !== n) {
clearTimeout(n);
fk.get(e)?.delete(t);
}
} else {
const t = fk.get(e);
t && (t.forEach((e => {
clearTimeout(e);
})), t.clear());
}
}
function mk(e, t) {
const n = pk(t);
n.size && (n.clear(), t.set(uk, n)), hk(e, void 0);
}
function gk(e, t, n) {
const r = pk(n), i = r.get(e);
i && i.has(t) && (i.delete(t), r.set(e, i), n.set(uk, r)), hk(e, t);
}
function yk(e, t, n, r) {
const i = setTimeout((() => {
gk(e, t, n);
}), r), o = fk.get(e) ?? new Map;
o.set(t, i), fk.set(e, o);
}
function Ik(e, t, n) {
const r = pk(n), i = r.get(e) ?? new Set;
i.add(t), r.set(e, i), n.set(uk, r);
}
function _k(e, t, n, r) {
const i = Os(), o = !!ws(uk).get(e)?.has(t), a = H.useCallback((() => {
gk(e, t, i);
}), [ i, t, e ]), s = H.useCallback((s => {
if (!o) {
Ik(e, t, i);
const o = n?.(s);
return o?.then((e => {
e.error && a();
})), yk(e, t, i, r?.throttleTime ?? 3e4), o;
}
}), [ o, e, t, i, n, a, r?.throttleTime ]);
return H.useMemo((() => ({
performAction: s,
resetState: a,
isActionTaken: o
})), [ o, s, a ]);
}
var bk = bh.PhotonInvite.InviteType, Sk = bh.XboxPlatform.XboxPermission, vk = bh.XboxPlatform.XUserPrivilege, Tk = Ly.object({}), Ek = {
lobby: bk.Lobby,
party: bk.Party
};
function Pk(e, t, n, r, i, o, a) {
return Xy((async () => {
ry(r.eaPlayerId), ry(r.personaId);
const s = n.tokenInfo.userId, l = n.personaInfo.playerNetworkId, {eaPlayerId: c, playerNetworkId: d, firstPartyPlayerId: u, personaId: p} = r, {compatiblePlayerNetworkIds: f, compatibleDevicePlatformIds: h} = jw(), m = iL(o, a), g = [], y = [];
for (const e of o.keys()) g.push(e), y.push(Ek[e]);
const I = await t.prepareInvite({
invitedPlayerId: c,
invitedPlayerNetworkId: d,
invitedFirstPartyUid: u,
invitedPersonaId: p,
inviteTypes: y
}), {success: _, sendEaInvite: b, errorMessage: S} = I ?? {};
if (!_) throw new Error(S);
return b ? e.SendGameInvite({
playerId: {
id: s
},
targetPlayerId: {
id: c
},
targetDevicePlatformId: h,
targetPlayerNetworkId: f,
senderPlayerNetworkId: {
id: l
},
senderDevicePlatformId: {
id: pc.devicePlatformId
},
senderProductId: {
id: i
},
gameJoinTokenTypes: g,
properties: m
}) : {};
}), Tk);
}
function Ok(e, t) {
const n = e.includes("party") && e.includes("lobby"), r = e.includes("party");
return wh(n ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-SENT" : r ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-SENT" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-SENT", {
"%primaryID%": t
});
}
var Ck = (e, t, n) => {
const r = new Map, i = Ts((() => vP(e).data)), o = Ts((() => WO(e).data)), a = Ts((() => (i?.members.size ?? 0) >= (i?.maxSize ?? 0))), s = Ts((() => (o?.members.size ?? 0) >= (o?.maxSize ?? 0))), l = n && Ts((() => o?.members.get(n))), c = n && Ts((() => i?.members.get(n))), d = !!Ts((() => o?.crossPlayEnabled)), u = !!Ts((() => i?.crossPlayEnabled));
return o && s ? {
gameJoinTokens: r,
isCrossplayEnabled: d
} : (t.includes("party") && o && !l && r.set("party", o.partyId), t.includes("lobby") && i && !a && !c && r.set("lobby", i.lobbyId), 
{
gameJoinTokens: r,
isCrossplayEnabled: d || u
});
}, Nk = new Error("Send game invite prevented by first party permissions");
function Ak(e, t, n, r, i) {
return async (o = [ "party", "lobby" ]) => {
const {showNotification: a, showErrorNotification: s} = r, l = gb(e), c = Ts((() => hN(e, i).data)), d = Ts((() => vP(e).data)), u = Ts((() => WO(e).data)), p = ow(e, c, o.includes("party") ? u : void 0, o.includes("lobby") ? d : void 0), {isAllowed: f, privacyResult: h} = await DT(e, i, [ Sk.PlayMultiplayer ], vk.Multiplayer);
try {
if (!f) throw p(new Error(FT(h))), Nk;
const r = dg.productId, {gameJoinTokens: s, isCrossplayEnabled: d} = Ck(e, o, i);
if (ry(c), !s.size) throw new Error("Invalid game invite type");
c.playerNetworkId !== l.personaInfo.playerNetworkId && a(3, 3, {
icon: Sf.PARTY,
text: Ok(Array.from(s.keys()), hv(gP(e, c, l), {
allowEllipsis: !0
}))
});
const u = await Pk(t, n, l, c, r, s, d);
if (u.error) throw u.error;
return s.get("lobby") && e.set(sk, !0), s.get("party") && e.set(DL, !0), p(void 0), 
u;
} catch (t) {
return t === Nk ? a(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": zb(sP(e).playerNetworkId)
}),
icon: Sf.INFORMATION
}) : s({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_SEND-INVITE-FAIL")
}, "send game invite", t), p(t), {
error: t,
loading: !1,
skipped: !1
};
}
};
}
function Lk(e) {
const {GameInvite: t, PhotonInvite: n} = Lh(), r = Os(), i = oP(), o = H.useMemo((() => Ak(r, t, n, i, e)), [ t, n, r, i, e ]);
return _k(0, e, o);
}
var wk = {
encode: (e, t = ns.Writer.create()) => ("" !== e.platform && t.uint32(10).string(e.platform), 
"" !== e.titleId && t.uint32(18).string(e.titleId), "" !== e.titleIdType && t.uint32(26).string(e.titleIdType), 
"" !== e.triggerId && t.uint32(34).string(e.triggerId), t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
platform: "",
titleId: "",
titleIdType: "",
triggerId: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.platform = n.string();
break;

case 2:
i.titleId = n.string();
break;

case 3:
i.titleIdType = n.string();
break;

case 4:
i.triggerId = n.string();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
platform: "",
titleId: "",
titleIdType: "",
triggerId: ""
};
return t.platform = e.platform ?? "", t.titleId = e.titleId ?? "", t.titleIdType = e.titleIdType ?? "", 
t.triggerId = e.triggerId ?? "", t;
}
};
var kk = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && ty.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.recommendationEngineRequest && wk.encode(e.recommendationEngineRequest, t.uint32(18).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
recommendationEngineRequest: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = ty.decode(n, n.uint32());
break;

case 2:
i.recommendationEngineRequest = wk.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
recommendationEngineRequest: void 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? ty.fromPartial(e.entityId) : void 0, 
t.recommendationEngineRequest = void 0 !== e.recommendationEngineRequest && null !== e.recommendationEngineRequest ? wk.fromPartial(e.recommendationEngineRequest) : void 0, 
t;
}
};
var Rk = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.friendRecommendation && xk.encode(e.friendRecommendation, t.uint32(10).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
friendRecommendation: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.friendRecommendation = xk.decode(n, n.uint32()); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
friendRecommendation: void 0
};
return t.friendRecommendation = void 0 !== e.friendRecommendation && null !== e.friendRecommendation ? xk.fromPartial(e.friendRecommendation) : void 0, 
t;
}
};
var xk = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && ty.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.recommendationReason && Bk.encode(e.recommendationReason, t.uint32(18).fork()).ldelim(), 
void 0 !== e.recommendationTracking && Fk.encode(e.recommendationTracking, t.uint32(26).fork()).ldelim(), 
void 0 !== e.createTime && ny.encode(e.createTime, t.uint32(34).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
recommendationReason: void 0,
recommendationTracking: void 0,
createTime: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = ty.decode(n, n.uint32());
break;

case 2:
i.recommendationReason = Bk.decode(n, n.uint32());
break;

case 3:
i.recommendationTracking = Fk.decode(n, n.uint32());
break;

case 4:
i.createTime = ny.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
recommendationReason: void 0,
recommendationTracking: void 0,
createTime: void 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? ty.fromPartial(e.entityId) : void 0, 
t.recommendationReason = void 0 !== e.recommendationReason && null !== e.recommendationReason ? Bk.fromPartial(e.recommendationReason) : void 0, 
t.recommendationTracking = void 0 !== e.recommendationTracking && null !== e.recommendationTracking ? Fk.fromPartial(e.recommendationTracking) : void 0, 
t.createTime = void 0 !== e.createTime && null !== e.createTime ? ny.fromPartial(e.createTime) : void 0, 
t;
}
};
var Bk = {
encode(e, t = ns.Writer.create()) {
for (const n of e.mutualFriends) ty.encode(n, t.uint32(10).fork()).ldelim();
return Object.entries(e.additionalContext).forEach((([e, n]) => {
Dk.encode({
key: e,
value: n
}, t.uint32(18).fork()).ldelim();
})), t;
},
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
mutualFriends: [],
additionalContext: {}
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.mutualFriends.push(ty.decode(n, n.uint32()));
break;

case 2:
const t = Dk.decode(n, n.uint32());
void 0 !== t.value && (i.additionalContext[t.key] = t.value);
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
mutualFriends: [],
additionalContext: {}
};
return t.mutualFriends = e.mutualFriends?.map((e => ty.fromPartial(e))) || [], t.additionalContext = Object.entries(e.additionalContext ?? {}).reduce(((e, [t, n]) => (void 0 !== n && (e[t] = String(n)), 
e)), {}), t;
}
};
var Dk = {
encode: (e, t = ns.Writer.create()) => ("" !== e.key && t.uint32(10).string(e.key), 
"" !== e.value && t.uint32(18).string(e.value), t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
key: "",
value: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.key = n.string();
break;

case 2:
i.value = n.string();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
key: "",
value: ""
};
return t.key = e.key ?? "", t.value = e.value ?? "", t;
}
};
var Fk = {
encode: (e, t = ns.Writer.create()) => ("" !== e.trackingTag && t.uint32(10).string(e.trackingTag), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
trackingTag: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.trackingTag = n.string(); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
trackingTag: ""
};
return t.trackingTag = e.trackingTag ?? "", t;
}
};
function Mk(e, t, n) {
const r = e.length;
if (0 === r || n(t, e[r - 1]) > 0) return void e.push(t);
if (n(t, e[0]) < 0) return void e.splice(0, 0, t);
let i = 0, o = r, a = 0, s = r;
for (;i < o; ) {
const r = i + o >>> 1, l = n(t, e[r]);
if (l > 0 ? i = r : l < 0 ? o = r : (o = r, i = r), a === i && s === o) break;
a = i, s = o;
}
e.splice(o, 0, t);
}
var Uk = class {
constructor(e = [], t, n = 50) {
this.sortMethod = t, this.setMultiThreshold = n, this.listAtom = Le("list");
const r = e.map((([, e]) => e));
r.sort(this.sortMethod), this.items = new bs(e), this.list = r;
}
get(e) {
return this.items.get(e);
}
has(e) {
return this.items.has(e);
}
get size() {
return this.items.size;
}
keys() {
return Array.from(this.items.keys());
}
getSortedList() {
return this.listAtom.reportObserved(), this.list;
}
set(e, t) {
return hr((() => Ts((() => {
const n = this.list.slice();
this.addToList(n, e, t), this.updateList(n);
}))));
}
setMulti(e) {
return hr((() => Ts((() => {
const t = this.list.slice();
if (e.length < this.setMultiThreshold) for (const [n, r] of e) this.addToList(t, n, r); else {
for (const [n, r] of e) {
const e = this.items.get(n);
if (e) {
t[this.findIndexOrThrow(t, e, n)] = r;
} else t.push(r);
this.items.set(n, r);
}
t.sort(this.sortMethod);
}
this.updateList(t);
}))));
}
delete(e) {
return hr((() => Ts((() => {
const t = this.items.get(e);
if (t) {
const n = this.list.slice(), r = this.findIndexOrThrow(n, t, e);
return n.splice(r, 1), this.items.delete(e), this.updateList(n), !0;
}
return !1;
}))));
}
deleteMulti(e) {
return hr((() => Ts((() => {
const t = this.list.slice();
for (const n of e) {
const e = this.items.get(n);
if (e) {
const r = this.findIndexOrThrow(t, e, n);
t.splice(r, 1), this.items.delete(n);
}
}
this.updateList(t);
}))));
}
replace(e) {
return hr((() => {
const t = e.map((([, e]) => e));
t.sort(this.sortMethod), this.items.replace(e), this.updateList(t);
}));
}
forEach(e) {
this.getSortedList().forEach(e);
}
map(e) {
return this.getSortedList().map(e);
}
observe(e) {
return ar(this.items, e);
}
addToList(e, t, n) {
const r = this.items.get(t);
if (r) {
const n = this.findIndexOrThrow(e, r, t);
e.splice(n, 1);
}
Mk(e, n, this.sortMethod), this.items.set(t, n);
}
updateList(e) {
this.list = e, this.listAtom.reportChanged();
}
findIndexOrThrow(e, t, n) {
const r = e.indexOf(t);
if (-1 === r) throw new Error("Entry for id " + n + " was not found in list");
return r;
}
}, Hk = Ly.custom(t_()), Vk = Ly.object({
playerId: Ly.object({
id: Ly.string
})
}), Jk = Ly.object({
friendRecommendation: Ly.object({
entityId: Vk,
recommendationReason: Ly.object({
mutualFriends: Ly.array(Vk)
})
})
}), Gk = {
XBOXONE: "xbox_one",
XBSX: "xbsx",
PS4: "ps4",
PS5: "ps5",
PC: "pc",
WEB: "web",
IOS: "ios",
ANDROID: "android",
NX: "switch",
UNKNOWN: "pc"
};
function zk({friendRecommendation: e}) {
const t = e.entityId.playerId.id + "";
return {
photonPlayerId: HI({
eaPlayerId: t,
playerNetworkId: "EA"
}),
eaPlayerId: t,
mutualFriendEaPlayerIds: e.recommendationReason.mutualFriends.map((e => e.playerId.id))
};
}
function jk(e) {
return e.data || new Uk([], ((e, t) => e.mutualFriendEaPlayerIds.length !== t.mutualFriendEaPlayerIds.length ? e.mutualFriendEaPlayerIds.length > t.mutualFriendEaPlayerIds.length ? -1 : 1 : e.photonPlayerId.localeCompare(t.photonPlayerId)));
}
var qk = class extends TI {
constructor() {
super(...arguments), this.dismissedRecommendations = new Set, this.unmounted = !1;
}
init(e, t, n, r, i, o) {
if (!t.tokenInfo.accessToken) return void this.setDefaultEmptyFragment();
i && (this.dismissedRecommendations = i), this.updateDismissedRecommendations = o, 
this.getStream(e, t, r).then((e => (e.data?.error.subscribe((e => {})), this.initStreamStrategy(e, n)))).catch((e => {
Ts((() => {
this.get().update({
uninitialized: !1,
loading: !1,
error: e
});
}));
}));
const a = setTimeout((() => {
this.setDefaultEmptyFragment();
}), 8e3);
return () => {
clearTimeout(a), this.disposeStreamStrategy?.(), this.unmounted = !0;
};
}
getStream(e, t, n) {
return Xy((async () => {
const r = kk.fromPartial({
entityId: {
playerId: {
id: t.tokenInfo.userId
}
},
recommendationEngineRequest: {
platform: Gk[t.personaInfo.devicePlatformId],
titleId: n,
titleIdType: "projectid"
}
});
return $m((() => e.makeServerStreamingRequest("/eadp.friendrecommendations.v1.FriendRecommendations/ListFriendRecommendationsStreaming", kk, Rk, r, {
Authorization: "Bearer " + t.tokenInfo.accessToken
})));
}), Hk, {
debugName: "FriendRecommendations"
});
}
initStreamStrategy(e, t) {
e.data && !this.unmounted && (this.disposeStreamStrategy = super.setStreamStrategy({
stream: new e_(e.data, Jk),
updater: async (e, n) => {
const r = jk(e);
if (e.data || e.update({
...n,
data: r
}), !n.data || this.dismissedRecommendations?.has(n.data.friendRecommendation.entityId.playerId.id)) return;
const i = zk(n.data), o = (await LI(t.get(i.photonPlayerId), 1e4))?.data;
o && Ts((() => {
r.set(i.photonPlayerId, i);
}));
}
}));
}
setDefaultEmptyFragment() {
Ts((() => {
const e = this.get();
e.data || e.update({
...e.toProps(),
uninitialized: !1,
loading: !1,
data: jk(e)
});
}));
}
getMutualFriends(e) {
const t = this.get().data?.get(e);
return t?.mutualFriendEaPlayerIds ?? [];
}
removeFriendRecommendation(e) {
return Ts((() => {
this.get().data?.delete(e);
}));
}
dismissFriendRecommendation(e) {
const {eaPlayerId: t} = JI(e);
t && (this.dismissedRecommendations.add(t), this.updateDismissedRecommendations?.(this.dismissedRecommendations)), 
this.removeFriendRecommendation(e);
}
}, [Yk, Kk] = js({
debugName: "friendRecommendationsFragmentStore",
create: () => new qk({
debugName: "friendRecommendations"
})
}), Wk = 1e3, Xk = 1e3, Qk = Js({
debugName: "hasReachedFriendRequestCeiling",
get: function({get: e}) {
return (e(zv).get().data?.size || 0) >= Wk;
}
}), $k = Js({
debugName: "hasReachedSentFriendRequestCeiling",
get: function({get: e}) {
return (e(qv).get().data?.size || 0) >= Xk;
}
}), Zk = Ly.object({
inviteStatus: Ly.map(Ly.object({
success: Ly.boolean
}))
});
function eR(e, t, n, r) {
return Xy((async () => {
const {data: i} = await Ts((() => LI(hN(e, r), 1e4)));
return ry(i), t.BatchSendFriendInvites({
entityId: {
playerId: {
id: n.tokenInfo.userId
}
},
invites: [ {
entityId: {
playerId: {
id: i.eaPlayerId
}
},
sourcePlayerNetworkId: {
id: n.personaInfo.playerNetworkId
},
targetPlayerNetworkId: {
id: i.playerNetworkId
}
} ]
});
}), Zk, {});
}
function tR(e, t, n, r, i, o, a) {
const {showNotification: s, showErrorNotification: l} = n, c = gb(e);
return async () => {
try {
if (e.getUntracked($k)) {
const e = new Error("Invite ceiling reached");
return l({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_INVITE-FAIL")
}, "add ea friend", e), {
error: e,
loading: !1,
skipped: !1
};
}
if (!zI(r)) throw new Error("No EA photon player for " + r);
const {data: n} = await LI(e.getUntracked(z_).get(r), 8e3);
ry(n), s(3, 3, {
icon: Sf.ADD_USER,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIENDS_INVITE-SENT", {
"%primaryID%": hv(gP(e, n, c), {
allowEllipsis: !0
})
})
}), e.get(Yk).removeFriendRecommendation(r);
const d = await eR(e, t, c, r);
if (a && n.eaPlayerId && (i.triggerFriends({
action: "invite_sent",
friend: n.eaPlayerId,
friend_invite_id: LN(c.tokenInfo.userId, n.eaPlayerId),
source: wT(e, a, o),
status_code: d.error ? d.error.message : void 0
}), e.get(Jg).addEvent({
eventType: "photon_friends",
action: "invite_sent",
error: !!d.error,
error_code: d.error?.message
})), d.error) throw d.error;
if (!n.eaPlayerId || d.data?.inviteStatus[n.eaPlayerId] && !d.data.inviteStatus[n.eaPlayerId].success) throw Error("Could not invite " + n.eaPlayerId);
return d;
} catch (e) {
return l({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_SEND-FRIEND-REQUEST-FAIL")
}, "add ea friend", e), {
error: e,
loading: !1,
skipped: !1
};
}
};
}
var nR = (e, t) => {
const n = cy(), r = Os(), {Invites: i} = Lh(), o = oP(), a = Xg("main");
return _k(1, e, ET(n, tR(r, i, o, e, n, a.history.location, t), t && {
msg_id: t.msg_id ?? t.destination_name,
option: "add_friend",
...t,
context: {
rel: "not_friend",
...t.context
}
}), {
throttleTime: 1e4
});
}, rR = Ly.object({}), iR = async (e, t, n) => {
const r = gb(e);
return Xy((async () => t.DeleteFriend({
entityId: {
playerId: {
id: r.tokenInfo.userId
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), rR, {});
}, oR = (e, t, n, r, i, o, a, s) => {
const {showNotification: l, showErrorNotification: c} = r, d = gb(e), u = d.personaInfo.playerNetworkId;
return async () => {
try {
const {data: r} = await LI(e.getUntracked(z_).get(i), 8e3);
ry(r);
const c = hv(gP(e, r, d), {
allowEllipsis: !0
});
if (await new Promise((e => {
const n = () => e(!0), r = () => e(!1);
t((() => H.createElement(mA, {
title: wh("PHOTON-SOCIAL_FRIENDS_OVERLAY_TITLE_REMOVE-FRIEND", {
"%primaryID%": c
}),
body: wh("PHOTON-SOCIAL_FRIENDS_OVERLAY_DESC_REMOVE-FRIEND", {
"%localPlatform%": zb(u)
}),
onConfirm: n,
onCancel: r,
autoClose: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})));
})) && r.eaPlayerId) {
const t = e.getUntracked(NS), i = Ts((() => t.get().data?.get(r.photonPlayerId)));
t.removeFriend(r.eaPlayerId), l(3, 3, {
icon: Sf.REMOVE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIENDS_REMOVED", {
"%primaryID%": c
})
});
const d = await iR(e, n, r.eaPlayerId);
if (s && o.triggerFriends({
friend: r.eaPlayerId,
friend_invite_id: "",
action: "remove",
source: wT(e, s, a),
status_code: d.error ? d.error.message : void 0
}), d.error) throw i && t.addFriend(i), d.error;
return d;
}
return {
data: void 0,
loading: !1,
skipped: !1
};
} catch (e) {
return c({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_REMOVE-FRIEND-FAIL")
}, "remove ea friend", e), {
error: e,
loading: !1,
skipped: !1
};
}
};
}, aR = (e, t) => {
const {Friends: n} = Lh(), r = oP(), {showModal: i} = uT(), o = cy(), a = Os(), s = Xg("main");
return ET(o, oR(a, i, n, r, e, o, s.history.location, t), t && {
...t,
option: "remove_friend"
});
}, sR = fg("/player-search", "tab_search"), lR = (bh.InputBindings.Action, fs.Input.GamePadInput), cR = (fs.Input.DeviceType, 
Ly.custom((e => "string" == typeof e && e in lR))), dR = (Ly.array(Ly.object({
buttonState: Ly.union2(Ly.literal("up"), Ly.literal("down")),
device: Ly.union2(Ly.literal("mouseandkeyboard"), Ly.union2(Ly.literal("xbox"), Ly.literal("playstation")))
}, {
gamePadInput: cR,
keyboardKeycode: Ly.number
})), Ly.object({
typedInput: Ly.string
}), bh.InputBindings.Action), uR = (fs.Input.GamePadInput, fs.Input.DeviceType, 
fs.Input.ButtonState, dR.Primary, dR.Secondary, dR.Decline, dR.OpenActionList, dR.GoUp, 
dR.GoDown, dR.GoLeft, dR.GoRight, dR.NextPage, dR.PreviousPage, dR.Settings, dR.NotificationFocus, 
dR.ToggleMode, dR.TogglePhoton, dR.LeaveParty, dR.Tertiary, class {
constructor(e, t) {
this.id = e, this.save = t, this.itemsSeenInPreviousSession = new Set, this.seenItemState = new bs({}), 
this.unseenItemCount = gt.box(0, {
deep: !1
}), this.setItems = Ln((e => {
let t = this.unseenItemCount.get();
for (let n = 0, r = e.length; n < r; n++) this._addItem(e[n]) && t++;
this.unseenItemCount.set(t);
})), this.addItem = Ln((e => {
this._addItem(e) && this.increaseUnseenCount();
})), this.removeItem = Ln((e => {
const t = this.seenItemState.get(e);
void 0 !== t && (this.seenItemState.delete(e), t || this.decreaseUnseenCount());
})), this.setItemSeen = e => {
const t = this.seenItemState.get(e);
void 0 === t || t || (this.seenItemState.set(e, !0), this.decreaseUnseenCount(), 
this.save());
}, this.addItemsSeenInPreviousSession = Ln((e => {
let t = this.unseenItemCount.get();
for (let n = 0, r = e.length; n < r; n++) {
const r = e[n], i = this.seenItemState.get(r);
void 0 === i ? this.itemsSeenInPreviousSession.add(r) : !1 === i && (this.seenItemState.set(r, !0), 
t--);
}
this.unseenItemCount.set(t);
})), this.isItemSeen = e => this.seenItemState.get(e), this.getSeenItems = () => Ts((() => {
const e = [];
for (const [t, n] of this.seenItemState.entries()) n && e.push(t);
return e;
})), this.getUnseenCount = () => this.unseenItemCount.get();
}
_addItem(e) {
if (this.seenItemState.has(e)) return void console.error(`The item '${e}' has already been added to ${this.id} before`);
const t = this.itemsSeenInPreviousSession.has(e);
if (this.seenItemState.set(e, t), !t) return !0;
this.itemsSeenInPreviousSession.delete(e);
}
increaseUnseenCount() {
this.unseenItemCount.set(this.unseenItemCount.get() + 1);
}
decreaseUnseenCount() {
this.unseenItemCount.set(this.unseenItemCount.get() - 1);
}
}), pR = Ly.custom(((e, t, n) => {
if (!Array.isArray(e)) return n(t, "Data was not an array, got: " + typeof e), !1;
for (let r = 0; r < e.length; r++) {
const i = e[r];
if ("string" != typeof i && Number.isNaN(parseInt(i, 10))) return n(t, `Index ${r} was not integer or string, got: ${i}`), 
!1;
}
return !0;
})), fR = class {
constructor(e) {
this.localStorage = e, this.seenStates = new Map, this.loadSeenState = async e => {
if (void 0 === this.userId) return;
const t = this.get(e), n = `SeenItems-${e}-${this.userId}`;
try {
const e = await this.localStorage.getItem(n);
if (e) {
const n = JSON.parse(e);
if (pR.validate(n)) return void t.addItemsSeenInPreviousSession(n);
}
} catch (e) {}
};
}
get(e) {
let t = this.seenStates.get(e);
return t || (t = new uR(e, rI((() => this.saveSeenState(e)), {
wait: 2e3,
leading: !0
})), this.seenStates.set(e, t), this.userId && this.loadSeenState(e)), t;
}
async init(e) {
this.userId = e, await Promise.all(Array.from(this.seenStates.keys()).map(this.loadSeenState));
}
async saveSeenState(e) {
if (void 0 === this.userId) return;
const t = this.get(e), n = `SeenItems-${e}-${this.userId}`, r = t.getSeenItems();
if (pR.validate(r)) {
const e = JSON.stringify(r);
await this.localStorage.setItem(n, e);
}
}
}, [hR, mR] = js({
debugName: "seenStateMapState",
create: e => {
const t = e.get(ih);
return new fR(t.localStorage);
}
});
function gR(e) {
return mR().get(e);
}
var yR = e => {
const t = yb(), n = mR();
return H.useEffect((() => {
n.init(t);
}), [ n, t ]), H.createElement(H.Fragment, null, e.children);
}, IR = Ly.array(Ly.string), _R = e => "dismissedFriendRecommendations_" + e, bR = (e, t) => {
try {
const n = JSON.parse(e.localStorage.getItemSync(_R(t)) ?? "[]");
return IR.validate(n) ? new Set(n) : new Set;
} catch {
return new Set;
}
}, SR = (e, t) => n => e.localStorage.setItem(_R(t), JSON.stringify(Array.from(n)));
function vR(e) {
return function(t, n, r) {
let i;
const o = xn((r => {
const o = t();
e(o) || (r.dispose(), i && clearTimeout(i), Ts((() => {
n(o);
})));
}), r ? {
onError: r.onError
} : void 0);
return "number" == typeof r?.timeout ? (i = setTimeout((() => {
o(), r.onError(new Error("WHEN_TIMEOUT"));
}), r.timeout), () => {
o(), i && clearTimeout(i);
}) : o;
};
}
var TR = vR((e => void 0 === e)), ER = vR((e => null === e)), PR = () => gR("FriendRequests");
function OR(e) {
return e.eaPlayerId;
}
function CR() {
const e = jv(), t = PR();
H.useEffect((() => {
let n = TR((() => e.get().data), (e => {
t.setItems(e.getSortedList().map(OR)), n = e.observe((e => {
switch (e.type) {
case "add":
t.addItem(OR(e.newValue));
break;

case "delete":
t.removeItem(OR(e.oldValue));
}
}));
}));
return () => {
n();
};
}), [ e, t ]);
}
function NR(e) {
return !!Mv(e, "frr_0", "FriendRequestReminders") || Ab.supportsUnfinishedFeatures;
}
var AR = 864e5, LR = e => e.createTimeMs + 2592e6 - Date.now(), wR = e => Math.ceil(LR(e) / AR), kR = e => wR(e) <= 23, RR = e => wR(e) <= 10, xR = e => wR(e) <= 29, BR = e => "friendRequestReminderTimestamp_" + e, DR = (e, t, n) => {
const r = [], i = [], o = [];
for (let e = 0; e < t.length; e++) {
const n = t[e];
wR(n) <= 7 && r.push(n), kR(n) && i.push(n), xR(n) && o.push(n);
}
const a = Ts((() => (e.get(NS).get().data?.size ?? 0) <= 2));
if (n > 0) {
if (r.length > 0) return {
meta: {
icon: Sf.INFORMATION,
text: 1 === r.length ? wh("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_EXPIRING_SINGLE") : wh("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_EXPIRING_PLURAL")
},
pgId: "tst_fr_reminder_exp"
};
if (i.length > 0) return {
meta: {
icon: Sf.INFORMATION,
text: 1 === i.length ? wh("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_REMINDER_SINGLE") : wh("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_REMINDER_PLURAL", {
"%numberOfFriendRequests%": `${i.length}`
})
},
pgId: "tst_fr_reminder_pending"
};
}
if (a && o.length > 0) return {
meta: {
icon: Sf.INFORMATION,
text: wh("PHOTON-SOCIAL_FTUE_TOAST_FRIEND-REQUESTS")
},
pgId: "tst_fr_reminder_first"
};
}, FR = (e, t) => {
if (!(0 === e.getSetting(0, 4))) return !1;
const n = Number(t);
return !!Number.isNaN(n) || n + 6048e5 < Date.now();
}, MR = (e = 3e5) => {
const t = Os(), n = $T(), r = yb(), {showNotification: i, notificationManager: o} = oP(), a = jv(), s = mp().localStorage, {getUnseenCount: l} = PR(), c = xv().fragment;
H.useEffect((() => {
let d;
const u = async (e = !1) => {
const c = BR(r), p = await s.getItem(c);
Ts((() => {
if (e || FR(n, p)) if (o.isInGamePlay) d = mr((() => !o.isInGamePlay), (() => u(e))); else {
const e = l(), n = a.get().data?.getSortedList() || [], r = DR(t, n, e);
r && (i(3, 1, r.meta, {
telemetryInfo: {
pg_id: r.pgId
}
}), s.setItem(c, `${Date.now()}`));
}
}));
};
d = mr((() => !c.loading && !c.uninitialized), (() => {
if (NR(t)) {
const t = setTimeout(u, e);
d = () => {
clearTimeout(t);
};
}
}));
const p = void 0;
return () => {
d(), p?.();
};
}), [ r, l, o, a, n, i, t, e, s, c ]);
}, UR = bh.XboxPlatform.XUserPrivilege, HR = bh.XboxPlatform.XboxPermission, VR = bh.XboxPlatform.XblAnonymousUserType, JR = (bh.XboxPlatform.XblPermissionDenyReason, 
bh.XboxPlatform.XUserPrivilegeOptions, bh.XboxPlatform.XGameUiMessageDialogButton, 
UR.AddFriends, UR.Broadcast, UR.UserGeneratedContent, UR.SocialNetworkSharing, UR.CloudJoinSession, 
UR.Clubs, UR.Communications, UR.CloudSavedGames, UR.CrossPlay, UR.GameDvr, UR.ManageProfilePrivacy, 
UR.Multiplayer, UR.MultiplayerParties, UR.Sessions, HR.CommunicateUsingText, HR.CommunicateUsingVideo, 
HR.CommunicateUsingVoice, HR.ViewTargetProfile, HR.ViewTargetGameHistory, HR.ViewTargetVideoHistory, 
HR.ViewTargetMusicHistory, HR.ViewTargetExerciseInfo, HR.ViewTargetPresence, HR.ViewTargetVideoStatus, 
HR.ViewTargetMusicStatus, HR.PlayMultiplayer, HR.ViewTargetUserCreatedContent, HR.BroadcastWithTwitch, 
HR.WriteComment, HR.ShareItem, HR.ShareTargetContentToExternalNetworks, VR.CrossNetworkUser, 
VR.CrossNetworkFriend, Ks({
debugName: "betaWatermarkOverride",
default: !1
})), GR = Ec({
zOffset: sC
}), zR = Ec({
zOffset: 1,
padding: hc(Xc.DimensionSpace.large),
flex: 1,
justifyContent: "center",
alignItems: "center"
}), jR = Ec({
backgroundColor: Xc.ColorNeutral._800
}), qR = ({children: e, style: t, opaque: n}) => {
const {fullscreenStyle: r} = Ep();
return H.createElement("surface", {
style: [ GR, r, t, n ? jR : void 0 ]
}, H.createElement("surface", {
style: zR
}, e));
}, YR = {
duration: Xc.AnimationTime.fastest,
easing: Xc.AnimationEasing.ease
}, KR = Ii.observer((() => {
const e = Os(), t = e.getUntracked(lT), n = ZT(t ? 1 : 1.05), r = ZT(t ? 1 : 0), [i, o] = H.useState((() => t));
H.useEffect((() => Fn((() => e.get(lT)), (e => {
const t = () => {
n.transition(1.05, 1, YR), r.transition(0, 1, YR), o(e);
};
i ? i !== e && (n.transition(1, .95, YR), r.transition(1, 0, {
...YR,
onFinished: t
})) : t();
}), {
fireImmediately: !0
})), [ i, e, r, n ]);
const a = [ n.propStyle("scaleX"), n.propStyle("scaleY"), r.propStyle("opacity") ];
return H.createElement(Jf, {
id: "modal-overlay",
isolate: !!i,
disable: !i
}, i ? H.createElement(qR, {
style: a,
opaque: i.opaque
}, H.createElement("surface", {
key: i.id
}, i.component())) : null);
})), WR = () => !1, XR = ({children: e, router: t, shouldIsolate: n = WR}) => {
const r = qh(t), [i, o] = H.useState((() => n(r.location)));
return H.useEffect((() => (o(n(r.location)), r.listen((e => {
o(n(e));
})))), [ r, n ]), H.createElement(No, {
history: r
}, H.createElement(Jf, {
id: "router:" + t,
isolate: i
}, e));
}, QR = Ec({
zOffset: cC,
position: "absolute",
start: hc(Xc.DangerZone.width),
bottom: hc(Xc.DangerZone.height)
});
function $R(e) {
return !!e.label;
}
var ZR = Js({
debugName: "bottomBarInputsState",
get: function({get: e}) {
return e(sh).filter($R).sort(((e, t) => e.priority && t.priority ? e.priority > t.priority ? 1 : -1 : e.priority ? -1 : t.priority ? 1 : 0));
}
}), ex = () => ws(ZR), tx = (Ii.observer((() => {
const e = ex();
return H.createElement(yf, {
actions: e,
style: QR
});
})), {
GlobalDismiss: "dismiss",
GlobalSettings: "social_settings",
GlobalChatParty: "chat_party",
GlobalLeaveParty: "leave_party"
}), nx = ({action: e}) => {
const {history: t} = Wg("main"), n = tx[e.id], r = cy(), i = Os(), o = H.useMemo((() => {
if (n) return {
pg_id: mT(i, t.location),
destination_name: "bottom_bar",
msg_id: "bottom_bar",
option: n,
context: {
tpid: dg.productId
}
};
}), [ t, i, n ]);
OT(o);
const a = H.useMemo((() => o ? {
...e,
callback: ET(r, e.callback, {
...o,
status: "click"
})
} : e), [ e, r, o ]);
return H.createElement(mf, {
action: a
});
}, rx = Ii.observer((() => {
const e = ex();
return H.createElement(gf, {
style: QR
}, e.map((e => H.createElement(nx, {
key: e.id,
action: e
}))));
})), ix = Ec({
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center",
height: hc(52)
}), ox = Ec({
minWidth: Kc.RB[0]
});
function ax() {
const e = Fp(), t = e ? 1 : 0;
return {
previousKeyBinding: Up(e ? 0 : 1),
nextKeyBinding: Up(t)
};
}
var sx, lx = ({children: e, onNext: t, onPrev: n}) => {
const {previousKeyBinding: r, nextKeyBinding: i} = ax(), o = sc(r.primaryButton), a = sc(i.primaryButton), s = r.primaryButton.keyboardKeyLabel, l = i.primaryButton.keyboardKeyLabel;
return up({
keyBinding: r,
callback: n
}), up({
keyBinding: i,
callback: t
}), H.createElement("surface", {
style: ix
}, H.createElement(nd, {
type: o,
buttonLabel: s,
style: s ? ox : void 0,
color: gu.TabBar.ButtonIcon.color,
onClick: n
}), e, H.createElement(nd, {
type: a,
buttonLabel: l,
style: l ? ox : void 0,
color: gu.TabBar.ButtonIcon.color,
onClick: t
}));
}, cx = yc({
singleDigitBadge: {
1: Dc("/photon/quantum/badges/Single_Digit_Badge-54006121.png"),
2: Dc("/photon/quantum/badges/Single_Digit_Badge_2x-de90746c.png")
},
doubleDigitBadge: {
1: Dc("/photon/quantum/badges/Double_Digit_Badge-0eb93931.png"),
2: Dc("/photon/quantum/badges/Double_Digit_Badge_2x-b76ffacb.png")
},
tripleDigitBadge: {
1: Dc("/photon/quantum/badges/Triple_Digit_Badge-6fba5c3e.png"),
2: Dc("/photon/quantum/badges/Triple_Digit_Badge_2x-0439d89b.png")
}
}), dx = 36, ux = Ec({
height: hc(dx),
justifyContent: "center"
}), px = Ec({
width: hc(dx),
texture: cx.singleDigitBadge
}), fx = Ec({
width: hc(44),
texture: cx.doubleDigitBadge
}), hx = Ec({
width: hc(52),
texture: cx.tripleDigitBadge
}), mx = Ec({
color: gu.DigitBadge.LabelText.color,
fontSize: mc(gu.DigitBadge.LabelText.fontSize),
fontFamily: kd.name,
textAlign: "center",
zOffset: 1
}), gx = {
easing: Xc.AnimationEasing.ease,
duration: Xc.AnimationTime.faster,
rebound: !0
}, yx = {
easing: Xc.AnimationEasing.ease,
duration: Xc.AnimationTime.average
}, Ix = ({digit: e}) => {
const t = ZT(1), n = ZT(0), r = H.useRef(0);
H.useEffect((() => {
const i = r.current;
if (r.current = e, i !== e) return e > i ? (n.set(1), void t.transition(1, 1.3, gx)) : void (0 === e && (t.transition(1, .8, yx), 
n.transition(1, 0, yx)));
}), [ e, t, n ]);
let i, o = "" + Math.max(e, 1);
return e < 10 ? i = px : e < 100 ? i = fx : (o = "99+", i = hx), H.createElement("surface", {
style: [ ux, i, t.propStyle("scaleX"), t.propStyle("scaleY"), n.propStyle("opacity") ]
}, H.createElement("surface", {
text: o,
style: mx
}));
}, _x = Ec({
padding: hc([ gu.TabButton.Container.paddingTop, gu.TabButton.Container.paddingEnd, gu.TabButton.Container.paddingBottom, gu.TabButton.Container.paddingStart ]),
marginLeft: hc(gu.TabButton.Container.marginStart),
marginRight: hc(gu.TabButton.Container.marginEnd)
}), bx = Ec({
position: "absolute",
width: hc(dx),
height: hc(dx),
top: hc(-18),
right: hc(-18),
zOffset: 1
}), Sx = Ec({
wordWrap: "normal",
maxWidth: (sx = 2, Lp(sx) + Cp)
}), vx = Ii.observer((e => {
const {focusItem: t, isFocused: n, isPressed: r} = Jp(e), i = Nf({
isFocused: n,
isPressed: r,
isActive: e.isActive
});
let o, a = gu.TabButton.LabelText.color;
return e.isActive ? (a = gu.TabButtonActive.LabelText.color, o = gu.TabButtonActive.LabelText.backgroundColor) : r ? (a = gu.TabButtonPressed.LabelText.color, 
o = gu.TabButtonPressed.LabelText.backgroundColor) : n && (a = gu.TabButtonFocused.LabelText.color), 
H.createElement("surface", {
style: [ _x, Cf({
backgroundColor: o,
borderColor: i
}) ],
...t.hooks
}, H.createElement("surface", {
style: bx
}, H.createElement(Ix, {
digit: e.counter || 0
})), H.createElement(Iu, {
text: e.label,
color: a,
style: Sx
}));
})), [, Tx] = js({
debugName: "playSoundEffectState",
create: e => {
const t = e.get(zg);
return t.hasMethod("UserExperience", "playSoundEffect") ? e => {
t.UserExperience.playSoundEffect({
effect: e
}).catch((e => {}));
} : () => {};
}
}), Ex = bh.InputBindings.Action, Px = bh.UserExperience.SoundEffect, Ox = hc(680), Cx = Ec({
position: "relative",
marginTop: hc(36),
flex: 1
}), Nx = Ec({
top: 0,
left: 0,
position: "absolute",
translateX: 0,
right: 0,
height: Ox
}), Ax = {
duration: Xc.AnimationTime.fast,
easing: Xc.AnimationEasing.ease
}, Lx = "tab", wx = hc(48), kx = H.memo((e => {
const {isCurrent: t, path: n, exact: r, children: i} = e, o = H.useContext(Co), a = H.useRef(o), s = H.useMemo((() => t ? {
...o,
match: Bo(o.location.pathname, {
path: n,
exact: r
}) ?? o.match
} : a.current), [ t, n, r, o ]);
return H.useEffect((() => {
a.current = s;
}), [ s ]), H.createElement(Co.Provider, {
value: s
}, i);
})), Rx = ({tab: e, tabIndex: t, currentTabIndex: n, previousTabIndex: r, children: i}) => {
const {timeout: o, disposeTimeout: a} = Cu(), s = t === r, l = t === n, [c, d] = H.useState(l), u = ZT(0), p = ZT(0);
return H.useEffect((() => {
if (l) {
const e = vp(t < (r ?? 0) ? -wx : wx);
a(Lx), d(!0), void 0 !== r && u.transition(e, 0, Ax), p.to(1, Ax);
} else if (s) {
const e = vp(t > n ? wx : -wx);
u.transition(0, e, Ax), p.to(0, Ax), o(Lx, (() => d(!1)), Ax.duration);
} else a(Lx), d(!1);
}), [ o, a, u, p, t, l, s, n, r ]), H.createElement("surface", {
style: [ Nx, u.propStyle("translateX"), p.propStyle("opacity") ]
}, (l || s && c) && H.createElement(kx, {
isCurrent: l,
path: e.route.path,
exact: e.exact
}, i));
}, xx = Ii.observer((({tab: e, onSelect: t, isSelected: n}) => {
const r = H.useCallback((() => {
t(e.route);
}), [ t, e.route ]), i = e.getUnseenCount?.() ?? void 0;
return H.createElement(vx, {
id: e.route.path,
isActive: n,
label: e.title,
onClick: r,
counter: i
});
}));
function Bx(e, t) {
const n = Bo(e, t.route.path);
return !!n && (!t.exact || n.isExact);
}
function Dx(e, t) {
const n = e.findIndex((e => Bx(t, e)));
return -1 !== n ? n : 0;
}
function Fx(e) {
const t = Dx(e, qo().pathname), n = H.useRef({
current: t
}).current, r = n.current === t ? n.previous : n.current;
return H.useEffect((() => {
n.current !== t && (n.previous = n.current, n.current = t);
}), [ n, t ]), {
currentTabIndex: t,
previousTabIndex: r
};
}
var Mx = ({tabs: e}) => {
const {currentTabIndex: t, previousTabIndex: n} = Fx(e), {history: r, navigate: i} = Wg(), o = Tx(), {previousKeyBinding: a, nextKeyBinding: s} = ax(), l = wA(Ex.Settings), c = wA(Ex.TogglePhoton), d = wA(Ex.ToggleMode);
Du((({getKeyBindingText: n}) => [ wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_TAB-MENU_NAME", {
"%tabLabel%": e[t].title
}), wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_TAB-MENU_TAB-NUMBER", {
"%tabNumber%": t + 1 + "",
"%tabTotal%": e.length + ""
}), wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_TAB-MENU_NAVIGATION", {
"%leftNavKey%": n(a),
"%rightNavKey%": n(s)
}) ]), [ e, t, a, s ], 0), Du((({getKeyBindingText: e}) => [ dg.isPartyEnabled ? wh("PHOTON-SOCIAL_NARRATION_BOTTOM-BAR_PARTIES-ENABLED", {
"%backKey%": e(c),
"%settingsKey%": e(l),
"%voipKey%": e(d)
}) : wh("PHOTON-SOCIAL_NARRATION_BOTTOM-BAR_PARTIES-DISABLED", {
"%backKey%": e(c),
"%settingsKey%": e(l)
}) ]), [ t, c, l, d ], 3);
const {onTabSelect: u, onPrevTab: p, onNextTab: f} = H.useMemo((() => ({
onTabSelect(e) {
i(e.link());
},
onPrevTab() {
const t = Dx(e, r.location.pathname), n = e[t <= 0 ? e.length - 1 : t - 1];
o(Px.PageLeft), i(n.route.link());
},
onNextTab() {
const t = Dx(e, r.location.pathname), n = e[(t + 1) % e.length];
o(Px.PageRight), i(n.route.link());
}
})), [ i, e, r, o ]);
return H.createElement(H.Fragment, null, H.createElement(lx, {
onPrev: p,
onNext: f
}, H.createElement(Jf, {
disableForControllerMode: !0
}, e.map(((e, n) => H.createElement(xx, {
key: e.route.path,
tab: e,
onSelect: u,
isSelected: n === t
}))))), H.createElement("surface", {
style: Cx
}, e.map(((e, r) => H.createElement(Rx, {
key: e.route.path,
tab: e,
tabIndex: r,
currentTabIndex: t,
previousTabIndex: n
}, H.createElement(Jf, {
disable: r !== t
}, e.content))))));
}, Ux = yc({
dotBadge: {
1: Dc("/photon/quantum/badges/Dot_Badge-282ef68e.png"),
2: Dc("/photon/quantum/badges/Dot_Badge@2x-fc6ef56e.png")
}
}), Hx = hc(gu.DotBadge.Container.width), Vx = Ec({
width: Hx,
height: hc(gu.DotBadge.Container.height),
texture: Ux.dotBadge
}), Jx = ({style: e}) => H.createElement("surface", {
style: [ Vx, e ]
}), Gx = hc(gu.ListControlBase.Content.paddingStart), zx = hc(Xc.DimensionSpace.smaller), jx = hc(gu.ListControlBase.Container.minHeight), qx = 1, Yx = 2, Kx = 3, Wx = {
container: Nc((e => ({
minHeight: jx + (e ? 0 : 2 * zx)
})), {
flexDirection: "row",
alignItems: "center",
justifyContent: "space-between"
}),
content: Ec({
flex: 1,
flexDirection: "row",
alignItems: "center",
justifyContent: "space-between",
padding: [ 0, hc(gu.ListControlBase.Content.paddingEnd), 0, hc(gu.ListControlBase.Content.paddingStart) ],
zOffset: qx
}),
borderStyle: Nc((e => ({
top: e ? hc(gu.ListControlBase.Border.top) : 0,
left: e ? hc(gu.ListControlBase.Border.left) : 0,
right: e ? hc(gu.ListControlBase.Border.right) : 0,
bottom: e ? hc(gu.ListControlBase.Border.bottom) : 0,
zOffset: qx
}))),
actionContainer: Ec({
flexDirection: "row",
flexShrink: 0
}),
action: Ec({
minHeight: hc(gu.ListControlBase.Action.minHeight),
padding: hc([ gu.ListControlBase.Action.paddingTop, gu.ListControlBase.Action.paddingEnd, gu.ListControlBase.Action.paddingBottom, gu.ListControlBase.Action.paddingStart ]),
alignItems: "center",
zOffset: Yx,
flexShrink: 0
}),
actionIdentifier: Lc("zOffset", Kx),
actionColor: (e, t, n, r) => {
let i;
return i = n ? r ? gu.ListControlBaseActionSecondaryDisabled.Container.backgroundColor : gu.ListControlBaseActionPrimaryDisabled.Container.backgroundColor : e ? r ? gu.ListControlBaseActionSecondaryPressed.Container.backgroundColor : gu.ListControlBaseActionPrimaryPressed.Container.backgroundColor : t ? r ? gu.ListControlBaseActionSecondaryHover.Container.backgroundColor : gu.ListControlBaseActionPrimaryHover.Container.backgroundColor : r ? gu.ListControlBaseActionSecondary.Container.backgroundColor : gu.ListControlBaseActionPrimary.Container.backgroundColor, 
Lc("color", i);
},
icon: Ec({
width: hc(32),
height: hc(32)
}),
dividerStyle: Ec({
marginLeft: hc(gu.ListControlBase.Divider.marginStart),
marginRight: hc(gu.ListControlBase.Divider.marginEnd),
width: hc(gu.ListControlBase.Divider.width),
height: hc(gu.ListControlBase.Divider.height),
backgroundColor: gu.ListControlBase.Divider.backgroundColor
}),
textContainerStyle: Ec({
minHeight: hc(gu.ListControlBase.LabelText.minHeight),
padding: [ hc(gu.ListControlBase.LabelText.paddingTop), hc(gu.ListControlBase.LabelText.paddingEnd), hc(gu.ListControlBase.LabelText.paddingBottom), hc(gu.ListControlBase.LabelText.paddingStart) ]
}),
controlBodyWrapperStyle: Ec({
flexShrink: 1,
flexDirection: "row",
alignItems: "center"
}),
controlBodyIconStyle: Ec({
width: hc(Xc.DimensionSpace.larger),
height: hc(Xc.DimensionSpace.larger),
marginStart: hc(Xc.DimensionSpace.medium)
})
}, Xx = Ec({
padding: hc([ gu.SectionHeader.Container.paddingTop, gu.SectionHeader.Container.paddingEnd, gu.SectionHeader.Container.paddingBottom, gu.SectionHeader.Container.paddingStart ]),
flexDirection: "row",
justifyContent: "space-between",
alignItems: "center",
color: gu.SectionHeader.Container.color
}), Qx = e => H.createElement("surface", {
style: [ Xx, wf({
radius: Xc.DimensionSpace.smaller
}), e.style ]
}, e.children), $x = Ec({
fontSize: mc(Xc.TextSizeLabel.medium),
zOffset: 1,
textLineSpacing: hc(0),
textLetterSpacing: hc(.5)
}), Zx = e => H.createElement("surface", {
text: e.text,
style: [ Fd, $x, e.style, Lc("color", e.color || Xc.TextColorStandard.default) ]
}), eB = Ec({
flexDirection: "row",
flexShrink: 0
}), tB = Ec({
flexDirection: "row",
alignItems: "center",
zOffset: 1
}), nB = Ec({
width: hc(Xc.DimensionSpace.micro),
height: hc(Xc.DimensionSpace.larger),
backgroundColor: Xc.ColorNeutral._400
}), rB = Ec({
rotateZ: 0
}), iB = Ec({
rotateZ: 180,
width: hc(Xc.DimensionSpace.larger),
height: hc(Xc.DimensionSpace.larger),
color: Xc.ColorNeutral._0,
zOffset: 1,
texture: vf.down
}), oB = Ec({
marginStart: hc(Xc.DimensionSpace.large)
}), aB = Xs({
debugName: "collapsibleSectionsState",
default: () => {}
});
function sB() {
return Up(2);
}
var lB = Ii.observer((e => {
const {onToggle: t, isExpanded: n, showDot: r, children: i, ...o} = e, a = sB(), s = sc(a.primaryButton), l = a.primaryButton.keyboardKeyLabel, {focusItem: c, isFocused: d, isPressed: u} = Jp({
...o,
onClick: t,
input: {
keyBinding: a,
callback: t
}
}), p = af(u, "large"), f = Xc.TextColorStandard.emphasized, h = !n && r, m = "string" == typeof e.title ? H.createElement(Zx, {
text: e.title,
color: f
}) : e.title, g = h ? H.createElement("surface", {
style: tB
}, H.createElement(Jx, {
style: Lc("marginEnd", hc(Xc.DimensionSpace.small))
}), m) : m;
return H.createElement("surface", {
style: e.style,
...c.hooks
}, H.createElement(Qx, {
style: p
}, d ? H.createElement("surface", {
style: [ Wp, Wx.borderStyle(!0) ]
}) : void 0, g, H.createElement("surface", {
style: eB
}, H.createElement("surface", {
style: nB
}), (s || l) && d ? H.createElement(vu, {
buttonLabel: l,
icon: s,
style: oB
}) : null, H.createElement("surface", {
style: [ iB, n ? rB : void 0, oB ]
}))), n ? i : null);
}));
function cB({id: e, rememberExpandedState: t, isInitiallyExpanded: n, onToggleCallback: r}) {
const [i, o] = [ ks(a = aB, s = e), Bs(a, s) ];
var a, s;
const l = Ms(aB, e);
H.useEffect((() => t ? void 0 : l), [ l, t ]);
const c = H.useCallback((() => {
o((e => {
const t = !(e ?? n);
return r?.(t), t;
}));
}), [ o, r, n ]);
return {
isExpanded: i ?? n,
onToggle: c
};
}
Ii.observer((({children: e, ...t}) => {
const {isExpanded: n, onToggle: r} = cB(t);
return H.createElement(lB, {
title: t.title,
id: t.id,
isExpanded: n,
onToggle: r,
style: t.style,
showDot: t.showDot
}, e);
}));
var dB = ({style: e, height: t, width: n, delay: r = 0, lightVariant: i}) => {
const [o, a] = H.useState(0 === r), {timeout: s} = Cu();
return H.useEffect((() => {
o || s("delay", (() => {
a(!0);
}), r);
}), [ r, s, o ]), o ? H.createElement("surface", {
style: [ e, Lc("height", t), n ? Lc("width", n) : void 0, Cf({
backgroundColor: i ? Xc.BackgroundColor.alt2 : Xc.BackgroundColor.base,
borderColor: void 0
}) ]
}) : null;
}, uB = hc(30), pB = hc(600), fB = ({numSections: e, numRows: t, width: n, height: r, lightVariant: i}) => {
const o = e > 0 ? e : 1, a = n || pB, s = r || uB;
return H.createElement(H.Fragment, null, Array.from({
length: o
}).map(((n, r) => H.createElement("surface", {
style: Lc("flexDirection", "column"),
key: r
}, e > 0 && H.createElement(dB, {
height: hc(60),
width: a,
lightVariant: i
}), Array.from({
length: t
}).map(((e, t) => H.createElement(dB, {
key: t,
style: Lc("margin", hc([ Xc.DimensionSpace.medium, 0, Xc.DimensionSpace.medium, 0 ])),
height: s,
width: a,
lightVariant: i
})))))));
}, hB = Ec({
flexDirection: "row"
}), mB = Ec({
width: hc(32),
height: hc(32),
marginEnd: hc(Xc.DimensionSpace.small)
}), gB = ({texture: e, text: t, iconColor: n, textColor: r, style: i}) => H.createElement("surface", {
style: [ hB, i ]
}, H.createElement("surface", {
style: [ mB, Lc("texture", e), Lc("color", n) ]
}), H.createElement(Iu, {
color: r,
text: t
})), yB = e => H.createElement(gB, {
...e,
texture: Sf.CHECK_FILL,
iconColor: Xc.ColorSystem.success
}), IB = Ec({
minWidth: hc(32),
width: hc(32),
height: hc(32),
marginStart: hc(Xc.DimensionSpace.smallest)
}), _B = H.forwardRef((({children: e, interaction: t, transparent: n, style: r, borderOutside: i, isFocusableWhenActive: o}, a) => {
const {isFocused: s, focusItem: l, isActive: c, isDisabled: d} = t;
let u;
return u = c ? o ? gu.ListControlBaseActive.Container.backgroundColor2 : gu.ListControlBaseActive.Container.backgroundColor : d ? n ? void 0 : gu.ListControlBaseDisabled.Container.backgroundColor : n ? void 0 : gu.ListControlBase.Container.backgroundColor, 
H.createElement(Gp.Provider, {
value: t
}, H.createElement("surface", {
ref: a,
...l.hooks,
style: [ Wx.container(i), u ? wf({
radius: gu.ListControlBase.Container.borderRadius
}) : void 0, r, Lc("color", u) ]
}, !s || !o && c ? void 0 : H.createElement("surface", {
style: [ Wp, Wx.borderStyle(i) ]
}), e));
})), bB = ({style: e, children: t}) => H.createElement("surface", {
style: [ Wx.content, e ]
}, t), SB = Ii.observer((e => {
const {children: t, transparent: n, style: r, ...i} = e, o = Jp(i);
return H.createElement(_B, {
style: r,
interaction: o,
transparent: n,
isFocusableWhenActive: e.isFocusableWhenActive
}, H.createElement(bB, null, t));
})), vB = ({isActive: e, isDisabled: t, isFocused: n}, r, i) => e ? i ? gu.ListControlBaseActive.LabelText.colorFocusable : gu.ListControlBaseActive.LabelText.color : t ? gu.ListControlBaseDisabled.LabelText.color : n ? gu.ListControlBaseFocused.LabelText.color : r ? gu.ListControlBaseDimmed.LabelText.color : gu.ListControlBase.LabelText.color, TB = e => {
const t = zp(), n = t.isFocused || t.isPressed;
if (e.showOnPressedOrFocused && !n) return null;
if (e.hideOnPressedOrFocused && n) return null;
const r = vB(t, !0);
return H.createElement("surface", {
style: [ Wx.controlBodyWrapperStyle, Wx.textContainerStyle, e.wrapperStyle ]
}, H.createElement(iv, {
color: r,
...e
}), e.icon && H.createElement("surface", {
style: [ Wx.controlBodyIconStyle, Lc("color", e.icon.color), Lc("texture", e.icon.type), e.icon.style ]
}));
}, EB = Ec({
flex: 1
}), PB = Ec({
marginStart: hc(gu.ListControlBase.PrimaryID.marginStart),
textEllipsis: !0
}), OB = Ec({
marginStart: hc(gu.ListControlBase.Skeleton.marginStart)
}), CB = ({isFocusableWhenActive: e, style: t, ...n}) => {
const r = zp(), i = vB(r, void 0, e);
return H.createElement("surface", {
style: [ Lc("flex", 1), Wx.textContainerStyle ]
}, H.createElement(Iu, {
...n,
style: [ EB, t ],
color: i
}));
}, NB = e => {
const t = zp(), n = vB(t);
return H.createElement("surface", {
style: [ cv.primaryId, EB, Wx.textContainerStyle, e.style ]
}, H.createElement(mv, {
platform: e.playerNetworkId,
style: Lc("color", n)
}), e.name ? H.createElement(iv, {
style: [ PB, Lc("color", n) ],
text: e.name,
key: "name"
}) : H.createElement(dB, {
key: "name",
style: OB,
height: hc(gu.ListControlBase.Skeleton.height),
width: hc(gu.ListControlBase.Skeleton.width)
}), !!e.icon && H.createElement("surface", {
style: [ IB, Lc("texture", e.icon) ]
}));
}, AB = Ii.observer((e => {
const {action: t, isSecondary: n, roundedSides: r} = e, i = xl({
onClick: t.callback,
disabled: t.disabled
}), o = pp({
keyBinding: t.keyBinding,
callback: t.callback
}, void 0, !t.disabled);
if (t.disabled && t.disabledContent) return H.createElement("surface", null, t.disabledContent);
const a = sc(t.keyBinding.primaryButton), s = i.isPressed || o, l = t.keyBinding.primaryButton.keyboardKeyLabel, c = af(s);
let d;
return (a || l) && t.label ? d = H.createElement(Tu, {
style: Wx.actionIdentifier,
label: t.label,
icon: a,
buttonLabel: l
}) : a || l ? d = H.createElement(vu, {
buttonLabel: l,
icon: a
}) : t.label && (d = H.createElement(Iu, {
style: Wx.actionIdentifier,
text: t.label,
color: gu.ListControlBase.Action.color
})), H.createElement("surface", {
style: [ Wx.action, Wx.actionColor(s, i.isHovered, t.disabled, n), wf({
radius: gu.ListControlBase.Action.borderRadius,
applyRadiusTo: r
}), c ],
...i.hooks
}, d);
})), LB = ({primaryAction: e, secondaryAction: t}) => {
const n = Fp();
return t ? H.createElement("surface", {
style: Wx.actionContainer
}, H.createElement(AB, {
action: t,
isSecondary: !0,
roundedSides: n ? 1 : 0
}), H.createElement(AB, {
action: e,
roundedSides: n ? 0 : 1
})) : H.createElement(AB, {
action: e
});
}, wB = ({text: e}) => {
const t = zp(), n = vB(t);
return H.createElement(yB, {
style: Wx.action,
textColor: n,
text: e
});
}, kB = ({texture: e, isFocusableWhenActive: t, style: n}) => {
const r = zp(), i = vB(r, void 0, t);
return H.createElement("surface", {
style: [ Wx.icon, Lc("texture", e), Lc("color", i), n ]
});
}, RB = ({type: e, showOnPressedOrFocused: t, isFocusableWhenActive: n, style: r}) => {
const i = zp(), {isPressed: o, isFocused: a, isActive: s, isDisabled: l} = i, c = o || a, d = vB(i, void 0, n), u = t && !c || s && !n || l ? Lc("opacity", 0) : void 0;
return H.createElement(nd, {
type: e,
color: d,
style: [ u, r ]
});
}, xB = () => H.createElement("surface", {
style: Wx.dividerStyle
}), BB = ({showOnPressedOrFocused: e, hideOnPressedOrFocused: t, children: n}) => {
const r = zp(), {isPressed: i, isFocused: o} = r, a = i || o;
return e && !a || t && a ? null : H.createElement(H.Fragment, null, n);
}, DB = Ec({
position: "absolute",
marginStart: hc(gu.ActionIdentifierListControl.UnseenMarker.marginStart),
zOffset: 1
}), FB = Ec({
paddingStart: hc(gu.ActionIdentifierListControl.Content.paddingStart),
marginStart: Hx + hc(Xc.DimensionSpace.small)
}), MB = Ii.observer((e => {
const {children: t, primaryAction: n, secondaryAction: r, showDot: i, narrationItem: o, style: a, ...s} = e, l = Jp(s), {isFocused: c, isPressed: d} = l, u = c || d;
return Fu((e => o({
primaryAction: n,
secondaryAction: r
}, e)), [ o, n, r ], l.focusItem.focusId), H.createElement(_B, {
style: a,
transparent: !0,
interaction: l,
borderOutside: !0
}, i && H.createElement(Jx, {
style: DB
}), H.createElement(bB, {
style: FB
}, t), n && u ? H.createElement(LB, {
primaryAction: n,
secondaryAction: r
}) : null);
}));
function UB({playerName: e, supplementaryText: t}) {
return H.useCallback((({primaryAction: n, secondaryAction: r}, {getKeyBindingText: i, getRegisteredTertiaryActions: o}) => {
const a = o(), s = [ e, t, n || r || a.length ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-BUTTON") : void 0, n?.label ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-1", {
"%buttonPrimary%": i(n.keyBinding),
"%actionPrimary%": n.label
}) : void 0, r?.label ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-2", {
"%buttonSecondary%": i(r.keyBinding),
"%actionSecondary%": r.label
}) : void 0 ];
return a.length && s.push(...a.map((e => wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-3", {
"%buttonTertiary%": i(e.keyBinding),
"%actionTertiary%": e.label
})))), s;
}), [ e, t ]);
}
var HB = 6e4, VB = 36e5, JB = 24 * VB, GB = 7 * JB;
function zB(e, t, n) {
const r = Math.abs(e - t) % n;
return t > e ? r || n : n - r;
}
var jB, qB = (e, t, n) => {
const r = Date.now(), i = Math.abs(r - n), o = n > r;
let a, s, l = {
singular: "",
plural: ""
};
if (i >= 3024e6) return {
str: t.fiveWeeks
};
if (i >= GB) a = Math.floor(i / GB), l = t.weeks; else if (i >= JB) {
a = Math.floor(i / JB), l = t.days;
s = zB(r, n, o && 1 === a ? VB : JB);
} else if (i >= VB) {
a = Math.floor(i / VB), l = t.hours;
s = zB(r, n, o && 1 === a ? HB : VB);
} else {
if (!(i >= HB)) return {
nextUpdateMs: zB(r, n, HB),
str: t.seconds
};
a = Math.floor(i / HB), l = t.minutes, s = zB(r, n, HB);
}
return {
nextUpdateMs: s,
str: a ? e.replace("[num]", String(a)).replace("[unit]", 1 === a ? l.singular : l.plural) : t.seconds
};
}, YB = (e, t, n) => {
const [r, i] = H.useState((() => qB(e, t, n)));
return H.useEffect((() => {
let r;
if (function o() {
const a = qB(e, t, n);
i((e => e.str !== a.str || e.nextUpdateMs !== a.nextUpdateMs ? a : e)), a.nextUpdateMs && (r = setTimeout(o, a.nextUpdateMs));
}(), r) return () => {
r && clearTimeout(r);
};
}), [ e, n, t ]), r.str;
}, KB = (e, t) => t === e.seconds || t === e.fiveWeeks, WB = (e, t, n) => {
const r = n || wh("TIME_AGO");
return KB(e, t) ? t : r.replace("%time%", t);
};
function XB(e, t) {
const n = jB || (jB = {
fiveWeeks: wh("MORE-THAN-4-WEEKS"),
weeks: {
singular: wh("WEEK_SINGULAR"),
plural: wh("WEEK_PLURAL")
},
days: {
singular: wh("DAY_SINGULAR"),
plural: wh("DAY_PLURAL")
},
hours: {
singular: wh("HOUR_SINGULAR"),
plural: wh("HOURS_PLURAL")
},
minutes: {
singular: wh("MINUTE_SINGULAR"),
plural: wh("MINUTE_PLURAL")
},
seconds: wh("LESS-THAN-A-MINUTE_1")
}), r = YB("[num] [unit]", n, e);
return WB(n, r, t);
}
var QB = Ec({
textEllipsis: !0,
marginStart: hc(Xc.DimensionSpace.macro),
maxWidth: hc(525),
flexShrink: 0
}), $B = Ii.observer((({style: e, ...t}) => H.createElement(TB, {
...t,
style: [ QB, e ]
}))), ZB = ({timeMs: e, hideOnPressedOrFocused: t, customText: n, ...r}) => {
const i = XB(e, n);
return H.createElement($B, {
hideOnPressedOrFocused: t,
text: i,
...r
});
}, eD = e => (Du((() => [ e.title, e.headline, e.body ]), [ e.title, e.headline, e.body ], 1), 
H.createElement(QN, {
...e
})), tD = ({telemetryInfo: e, onClick: t, onFocus: n, input: r, ...i}) => {
const o = cy(), {onClickWithTelemetry: a, onFocusWithTelemetry: s, callbackWithTelemetry: l} = H.useMemo((() => ({
onClickWithTelemetry: ET(o, t, e),
callbackWithTelemetry: ET(o, r?.callback, e),
onFocusWithTelemetry: ET(o, n, {
status: "impression",
...e
})
})), [ o, r?.callback, t, n, e ]), c = r && {
...r,
callback: l
};
return H.createElement(lf, {
...i,
onFocus: s,
onClick: a,
input: c,
narrationItem: QE
});
}, nD = bh.InputBindings.Action, rD = Ec({
marginTop: hc(Xc.DimensionSpace.larger)
}), iD = {
destination_name: "empty_state",
msg_id: "empty_state",
option: "start_adding_friends"
}, oD = ({headline: e, body: t, telemetryPageId: n}) => {
const {navigate: r} = Wg(), i = wA(nD.Primary), o = H.useCallback((() => {
r(sR.link());
}), [ r ]), a = H.useMemo((() => ({
keyBinding: i,
callback: o
})), [ i, o ]), s = H.useMemo((() => ({
...iD,
pg_id: n
})), [ n ]);
return OT(s), H.createElement(eD, {
headline: e,
body: t
}, H.createElement("surface", {
style: [ wp(4), rD ]
}, H.createElement(tD, {
onClick: o,
input: a,
label: wh("PHOTON-SOCIAL_FRIENDS_LIST_EMPTY_BUTTON"),
id: "friends-no-friends",
telemetryInfo: s
})));
};
function aD(e) {
const {eaPlayerId: t} = JI(e);
return MP(pS().get(), (e => t ? e.get(t) : void 0));
}
var sD = fg("/player-actions/:photonPlayerId/:photonSessionId?", "overlay_player_actions_other"), lD = fg("/player-actions/:photonPlayerId/:photonSessionId?", "overlay_player_actions_self");
function cD(e, t, n, r, i, o = "", a, s) {
const {data: l} = e.getItemUntracked(Jv, r), c = {
friend: l ? "yes" : "no",
group_member: Ts((() => EP(e, r, void 0) || cO(e, r, void 0))) ? "yes" : "no"
};
return a && (c.details = a), {
action: i,
target: o,
source: mT(e, n),
status_code: s,
context: c
};
}
function dD(e, t, n, r, i, o, a, s) {
t.triggerPlayerGrievance(cD(e, 0, n, r, i, o, a, s));
}
function uD(e, t, n, r, i, o, a, s) {
const l = cD(e, 0, n, r, i, o, a, s);
return e => {
t.triggerPlayerGrievance({
...l,
status_code: e
});
};
}
var pD = Ly.object({});
function fD() {
const e = Os(), t = cy(), n = Xg("main"), {BlockService: r} = Lh(), {showNotification: i, showErrorNotification: o} = oP(), a = jS(), {showModal: s} = uT(), l = Hs((({get: e}) => t => {
const {eaPlayerId: n} = JI(t);
if (!n) return [];
const r = e(z_).findByEaPlayerId(n);
return Ts((() => NI(r).map((e => e.photonPlayerId))));
}), []), c = Hs((({get: e, getItem: t}) => n => {
const r = e(hb).tokenInfo.userId, {eaPlayerId: i} = JI(n), {name: o, playerNetworkId: a} = t(mL, n);
return {
targetPlayerId: i,
name: o,
playerNetworkId: a,
isSelf: r === i,
ownPlayerId: r
};
}), []), d = H.useCallback(((e, t) => {
const {name: n, playerNetworkId: r} = c(e);
l(e).forEach((e => {
a.removePresence(e);
})), i(3, 3, {
icon: Sf.BLOCK,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_BLOCK", {
"%primaryID%": hv({
name: n,
playerNetworkId: r
}, {
allowEllipsis: !0
})
})
}), t.onSuccess?.();
}), [ c, l, i, a ]), u = H.useCallback(((e, t) => {
o({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_BLOCK-PLAYER-FAIL")
}, "block player", e.error), t.onError?.(e.error?.message ?? "Unknown");
}), [ o ]), p = H.useCallback(((e, t) => {
const {name: n, playerNetworkId: r} = c(e);
i(3, 3, {
icon: Sf.CHECK_CIRCLE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_UNBLOCK", {
"%primaryID%": hv({
name: n,
playerNetworkId: r
}, {
allowEllipsis: !0
})
})
}), t.onSuccess?.();
}), [ c, i ]), f = H.useCallback(((e, t) => {
o({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_UNBLOCK-PLAYER-FAIL")
}, "unblock player", e.error), t.onError?.(e.error?.message ?? "Unknown");
}), [ o ]), h = H.useCallback(((e, t) => {
const {targetPlayerId: n, ownPlayerId: i} = c(e), o = Xy((() => r.BlockPlayer({
entityId: {
playerId: {
id: i
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), pD);
return o.then((n => {
Qy(n, {
onSuccess: () => d(e, t),
onError: () => u(n, t)
});
})), o;
}), [ r, c, u, d ]), m = Hs((({get: e}) => (t, n) => {
const {targetPlayerId: r} = c(t), i = Ts((() => e(uS).get().data));
if (r && i) {
Ts((() => i.has(r))) || (i.set(r, {
eaPlayerId: r,
createTimeMs: Date.now(),
photonPlayerId: UI({
eaPlayerId: r,
playerNetworkId: "EA"
})
}), h(t, n).then((e => {
e.error && hr((() => {
i.delete(r);
}));
})));
}
}), [ c, h ]), g = H.useCallback(((e, t) => {
const {targetPlayerId: n, ownPlayerId: i} = c(e), o = Xy((() => r.UnblockPlayer({
entityId: {
playerId: {
id: i
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), pD);
return o.then((n => {
Qy(n, {
onSuccess: () => p(e, t),
onError: () => f(n, t)
});
})), o;
}), [ r, c, f, p ]), y = Hs((({get: e}) => (t, n) => {
const {targetPlayerId: r} = c(t), i = Ts((() => e(uS).get().data));
if (r && i) {
const e = Ts((() => i.get(r)));
e && (i.delete(r), g(t, n).then((t => {
t.error && i.set(r, e);
})));
}
}), [ c, g ]), I = H.useCallback(((r, i = {}) => {
if (!zI(r)) return void u({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
}, {});
const {name: o, playerNetworkId: a, targetPlayerId: l} = c(r), d = i.onSuccess, p = i.onError, f = uD(e, t, n.history.location, r, "block", l), h = t => {
e.get(Jg).addEvent({
eventType: "photon_player_grievance",
action: "block",
source: mT(e, n.history.location),
error: !!t,
error_code: t
});
};
i.onSuccess = () => {
f(), h(), d?.();
}, i.onError = e => {
f(e), h(e), p?.(e);
}, s((() => H.createElement(mA, {
title: wh("PHOTON-SOCIAL_BLOCK_AFFIRM_TITLE", {
"%playerID%": hv({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
}),
body: wh("PHOTON-SOCIAL_BLOCK_AFFIRM_DESC"),
onConfirm: () => m(r, i),
autoClose: i.autoClose,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})), {
sequenceId: i.modalSequenceId
});
}), [ e, t, n, c, s, u, m ]), _ = H.useCallback((r => {
if (!zI(r)) return void f({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
}, {});
const {name: i, playerNetworkId: o, targetPlayerId: a} = c(r), l = uD(e, t, n.history.location, r, "unblock", a), d = {
onSuccess: () => {
l();
},
onError: e => {
l(e);
}
};
s((() => H.createElement(mA, {
title: wh("PHOTON-SOCIAL_UNBLOCK_AFFIRM_TITLE", {
"%playerID%": hv({
name: i,
playerNetworkId: o
}, {
allowEllipsis: !0
})
}),
body: wh("PHOTON-SOCIAL_UNBLOCK_AFFIRM_DESC"),
onConfirm: () => y(r, d),
autoClose: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})));
}), [ e, t, n, c, s, f, y ]);
return H.useMemo((() => ({
block: I,
unblock: _
})), [ I, _ ]);
}
var [hD, mD] = Is("BlockPlayerControlsContext"), gD = ({children: e}) => {
const t = fD();
return H.createElement(hD.Provider, {
value: t
}, e);
}, yD = Ks({
debugName: "noop",
default: {
skipped: !0,
loading: !1
}
});
function ID(e, t) {
const {skipQueryOnMount: n, queryIsReady: r = !0} = t, i = n || !r;
H.useEffect((() => {
i || e();
}), [ t.debugName, e, i ]);
}
function _D(e, t, n, r) {
return H.useCallback((async i => {
n((e => ({
...e,
loading: !0,
skipped: !1
})), i);
const o = await Xy((() => e(i)), t, {
transformResponse: r.transformResponse,
debugName: r.debugName
});
return n(o, i), o;
}), [ r.debugName, r.transformResponse, n, t, e ]);
}
function bD(e) {
const t = H.useRef(!1);
return H.useEffect((() => (t.current = !0, () => {
t.current = !1;
})), []), H.useCallback((n => {
t.current && e(n);
}), [ e ]);
}
function SD(e) {
const t = Rs(e.cache ?? yD);
return H.useCallback((n => {
e.cache && t(n);
}), [ e.cache, t ]);
}
function vD(e) {
const t = e.onSuccess, n = e.onError;
return H.useCallback(((e, r) => {
const i = "function" == typeof e ? e({
skipped: !1,
loading: !1
}) : e;
i.loading || !t && !n || (i.error && n ? n(i, r) : i.data && t && t(i, r));
}), [ n, t ]);
}
function TD(e, t) {
const n = bD(e), r = SD(t), i = vD(t), o = H.useMemo((() => {
const e = [ i ];
return t.cache ? e.push(r) : e.push(n), e;
}), [ t.cache, i, r, n ]);
return H.useCallback(((e, t) => {
o.forEach((n => n(e, t)));
}), [ o ]);
}
function ED(e, t, n, r = {}) {
const i = H.useCallback(e, t), [o, a] = H.useState({
skipped: !0,
loading: !1
}), s = ws(r.cache ?? yD), l = _D(i, n, TD(a, r), r);
ID(l, r);
const c = r.cache ? s : o;
return H.useMemo((() => ({
...c,
fetch: r.queryIsReady ?? 1 ? l : void 0
})), [ c, r.queryIsReady, l ]);
}
function PD(e, t, n, r = {}) {
const i = _D(H.useCallback(e, t), n, vD(r), r);
return r.queryIsReady ?? 1 ? i : void 0;
}
function OD() {
return FP(fL());
}
function CD(e) {
const {eaPlayerId: t} = JI(e);
return MP(fL().get(), (e => t ? e.get(t) : void 0));
}
function ND(e) {
return MP(MA().get(), (t => e ? t.players.get(e) : void 0));
}
function AD() {
return MP(HA().get(), (e => e));
}
var LD = Ly.object({
error: Ly.optional(Ly.string)
});
function wD() {
const {Voip: e} = Lh();
return PD((t => (ry(t, "Couldn't mute player, params were missing."), e.mutePlayer(t))), [ e ], LD);
}
function kD() {
const {Voip: e} = Lh();
return PD((t => (ry(t, "Couldn't unmute player, params were missing."), e.unmutePlayer(t))), [ e ], LD);
}
function RD() {
const {Voip: e} = Lh();
return PD((t => (ry(t, "Couldn't set muted players, params were missing."), e.setMutedPlayers(t))), [ e ], LD);
}
function xD() {
const e = wD(), t = kD(), n = RD(), r = H.useCallback((async e => {
if (n) return n({
playerIds: e
});
}), [ n ]);
return {
mutePlayer: H.useCallback((async t => {
if (e) return e({
playerId: t
});
}), [ e ]),
unmutePlayer: H.useCallback((async e => {
if (t) return t({
playerId: e
});
}), [ t ]),
setMutedPlayers: r
};
}
function BD() {
const {data: e} = OD(), {data: t} = MP(MA().get(), (e => e)), {mutePlayer: n, unmutePlayer: r, setMutedPlayers: i} = xD();
H.useEffect((() => {
Ts((() => {
if (e && (e?.size ?? 0) > 0) {
const t = Array.from(e.keys());
i(t);
}
}));
}), [ n, e, i ]), H.useEffect((() => {
Ts((() => {
if (e && t) return e?.observe_((({type: e, name: t}) => {
t && ("add" === e ? n(t) : "delete" === e && r(t));
}));
}));
}), [ n, e, r, t ]);
}
var DD = bh.XboxPlatform.XboxPermission, FD = bh.XboxPlatform.XblPermissionDenyReason, MD = bh.XboxPlatform.XUserPrivilege, UD = Ly.object({});
function HD() {
const e = Os(), t = cy(), n = Xg("main"), {MuteService: r} = Lh(), {showNotification: i, showErrorNotification: o} = oP(), a = cy(), {mutePlayer: s, unmutePlayer: l} = xD(), c = Hs((({get: e, getItem: t}) => n => {
const r = e(hb).tokenInfo.userId, {eaPlayerId: i} = JI(n), {name: o, playerNetworkId: a} = t(mL, n);
return {
targetPlayerId: i,
name: o,
playerNetworkId: a,
isSelf: r === i,
ownPlayerId: r
};
}), []), d = H.useCallback((r => {
const {name: o, playerNetworkId: a, isSelf: s, targetPlayerId: l} = c(r);
s ? i(3, 3, {
icon: Sf.MICROPHONE_MUTE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_SELF-MUTE")
}) : (i(3, 3, {
icon: Sf.MUTE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_MUTE", {
"%primaryID%": hv({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
})
}), dD(e, t, n.history.location, r, "mute", l));
}), [ e, t, n, c, i ]), u = H.useCallback(((r, i, a, s, l) => {
if (o(i, r + " player", a.error), s) {
const {targetPlayerId: i} = c(s);
dD(e, t, n.history.location, s, r, i, void 0, l ?? a.error?.message ?? "");
}
}), [ c, n, e, t, o ]), p = H.useCallback(((e, t) => {
u("mute", {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_MUTE-FAIL")
}, e, t);
}), [ u ]), f = H.useCallback(((e, t, n = {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_UNMUTE-FAIL")
}, r) => {
u("unmute", n, e, t, r);
}), [ u ]), h = H.useCallback((r => {
const {name: o, playerNetworkId: a, isSelf: s, targetPlayerId: l} = c(r);
s ? i(3, 3, {
icon: Sf.MICROPHONE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_SELF-UNMUTE")
}) : (i(3, 3, {
icon: Sf.VOLUME_UP,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_UNMUTE", {
"%primaryID%": hv({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
})
}), dD(e, t, n.history.location, r, "unmute", l));
}), [ e, t, n, c, i ]), m = H.useCallback((e => {
const {targetPlayerId: t, ownPlayerId: n} = c(e), i = Xy((() => r.MutePlayer({
entityId: {
playerId: {
id: n
}
},
targetEntityId: {
playerId: {
id: t
}
}
})), UD);
return i.then((t => {
Qy(t, {
onSuccess: () => d(e),
onError: () => p(t, e)
});
})), i;
}), [ c, r, p, d ]), g = Hs((({get: e}) => (t, n) => {
if (!zI(t)) return void p({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
});
const {isSelf: r, targetPlayerId: i} = c(t), o = Ts((() => e(pL).get().data));
r && i ? s(i).then((e => {
e?.error ? p(e, t) : d(t);
})) : i && o && (o.set(i, {
eaPlayerId: i,
photonPlayerId: UI({
eaPlayerId: i,
playerNetworkId: "EA"
})
}), m(t).then((e => {
e.error && o.delete(i);
}))), n && TT(a, {
...n,
option: "mute"
});
}), [ a, c, s, m, p, d ]), y = H.useCallback((e => {
const {targetPlayerId: t, ownPlayerId: n} = c(e), i = Xy((() => r.UnmutePlayer({
entityId: {
playerId: {
id: n
}
},
targetEntityId: {
playerId: {
id: t
}
}
})), UD);
return i.then((t => {
Qy(t, {
onSuccess: () => h(e),
onError: () => f(t, e)
});
})), i;
}), [ c, r, f, h ]), I = Hs((({get: t}) => async (n, r) => {
if (!zI(n)) return void f({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
});
const {isAllowed: i, privacyResult: o} = await DT(e, n, [ DD.CommunicateUsingVoice ], MD.Communications), s = o?.permissionChecks[0]?.permissionDeniedReason[0], {targetPlayerId: d, isSelf: u, name: p, playerNetworkId: m} = c(n);
if (!i) return void f({
loading: !1,
skipped: !1,
error: new Error("Prevented by xbox permissions")
}, n, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-UNMUTE", {
"%playerID%": hv({
name: p,
playerNetworkId: m
}, {
allowEllipsis: !0
})
}),
icon: Sf.MUTE
}, void 0 !== s ? FD[s] : void 0);
const g = Ts((() => t(pL).get().data));
if (u && d) l(d).then((e => {
e?.error ? f(e) : h(n);
})); else if (d && y && g) {
const e = Ts((() => g.get(d)));
e && (g.delete(d), y(n).then((t => {
t.error && g.set(d, e);
})));
}
r && TT(a, {
...r,
option: "unmute"
});
}), [ e, c, y, f, l, h, a ]);
return H.useMemo((() => ({
mute: g,
muteQuery: m,
unmute: I,
unmuteQuery: y
})), [ m, g, y, I ]);
}
var [VD, JD] = Is("MutePlayerControlsContext"), GD = ({children: e}) => {
const t = HD();
return H.createElement(VD.Provider, {
value: t
}, e);
}, zD = [ wf({
radius: gu.Card.Container.borderRadius
}), Ec({
color: gu.Card.Container.color,
padding: hc(gu.Card.Container.padding)
}) ], jD = ({children: e, style: t}) => H.createElement("surface", {
style: [ zD, t ]
}, e), qD = Ec({
marginBottom: hc(gu.Card.Headline.marginBottom)
}), YD = ({headline: e, body: t}) => H.createElement(jD, null, H.createElement(zN, {
text: e,
color: gu.Card.Headline.color,
style: qD
}), H.createElement(iv, {
text: t,
color: gu.Card.Body.color
}));
function KD() {
const [e, t] = H.useState((() => !1));
return {
isHovered: e,
hoverHooks: H.useMemo((() => ({
onMouseEnter: () => {
t(!0);
},
onMouseLeave: () => {
t(!1);
}
})), [])
};
}
var WD = hc(gu.ScrollBar.Container.width), XD = hc(200), QD = hc(gu.ScrollBar.Container.marginTop), $D = Ec({
width: WD,
position: "absolute",
top: 0,
right: 0,
bottom: 0,
backgroundColor: "#00000001"
}), ZD = Ec({
width: WD,
borderRadius: hc(gu.ScrollBar.Container.borderRadius)
}), eF = gu.ScrollBar.Container.backgroundColor, tF = gu.ScrollBarHovered.Container.backgroundColor;
function nF(e, t, n, r, i) {
return e / (n - t) * (i - r);
}
function rF(e, t, n) {
const r = mp(), i = $s(), [o, a] = H.useState(!1), s = H.useRef({
isCapturing: !1
}).current, l = H.useRef(), c = H.useRef();
H.useEffect((() => () => {
s.isCapturing && (s.isCapturing = !1, r.inputHandler.stopCapture());
}), [ r, s ]);
const d = H.useMemo((() => {
const o = r => {
const i = l.current, o = c.current;
i && n && o && n(nF(r - i.bounds.absY, o.bounds.absHeight, i.bounds.absHeight, e, t));
};
return {
onScrollbarMouseDown: e => {
const t = c.current, n = t?.bounds, l = e.surfaces.find((e => e.surfaceId === t?.surfaceId));
if (!n || !l) return;
i.setMouseMode(!0);
const d = l.y + n.y - n.absY, u = Uf(i);
a(!0), s.isCapturing = !0, r.inputHandler.captureMouse(((e, t) => {
o(t - d);
}), (() => {
u(), a(!1), s.isCapturing = !1;
})), e.stopPropagation();
},
onScrollbarContainerMouseDown: e => {
i.setMouseMode(!0);
const t = l.current, n = c.current?.bounds, r = t?.bounds, a = e.surfaces.find((e => e.surfaceId === t?.surfaceId));
if (!a || !r || !n) return;
const s = a.y + r.y;
o(s - n.absHeight / 2);
},
onScrollbarContainerBounds: (e, t) => {
l.current = {
bounds: e,
surfaceId: t
};
},
onScrollbarBounds: (e, t) => {
c.current = {
bounds: e,
surfaceId: t
};
}
};
}), [ r, i, e, t, n, s ]);
return {
...d,
isScrolling: o
};
}
var iF = ({scrollPercent: e, containerHeight: t, contentHeight: n, visible: r = !0, setContentScrollPosition: i}) => {
const o = Math.max(Math.floor(t / n * t), XD) + 2 * QD, a = Math.max(Math.min(e, 1), 0), s = Math.floor(a * (t - o)), l = wc((() => ({
height: o - 2 * QD,
translateY: s + QD
})), [ o, s ]), {onScrollbarMouseDown: c, onScrollbarContainerMouseDown: d, onScrollbarContainerBounds: u, onScrollbarBounds: p, isScrolling: f} = rF(t, n, i), h = ZT(f || r ? 1 : 0);
H.useEffect((() => {
h.to(f || r ? 1 : 0, {
duration: Xc.AnimationTime.fast
});
}), [ h, r, f ]);
const {isHovered: m, hoverHooks: g} = KD();
return n <= t || o >= t ? null : H.createElement("surface", {
style: $D,
onBounds: u,
onMouseDown: d
}, H.createElement("surface", {
style: [ ZD, l, h.propStyle("opacity"), Lc("backgroundColor", f || m ? tF : eF) ],
onBounds: p,
onMouseDown: c,
...g
}));
}, oF = hc(1084), aF = oF - WD - 2 * zx, sF = Ec({
width: aF
}), lF = Ec({
marginBottom: hc(Xc.DimensionSpace.small),
width: oF
}), cF = ({children: e, noScrollbar: t}) => H.createElement("surface", {
style: [ lF, t ? sF : void 0 ]
}, e), dF = Ec({
flexDirection: "row"
}), uF = ({children: e, justifyContent: t = "space-between"}) => H.createElement("surface", {
style: [ dF, Lc("justifyContent", t) ]
}, e), pF = Ec({
width: hc(570)
}), fF = ({children: e}) => H.createElement("surface", {
style: pF
}, e), hF = bh.InputBindings.Action, mF = Ec({
width: Rp.width,
height: Rp.height
}), gF = Ec({
height: hc(314),
marginTop: hc(Xc.DimensionLayout.smallest)
}), yF = Ec({
textEllipsis: !0,
marginBottom: hc(Xc.DimensionSpace.large)
}), IF = Ec({
width: aF
}), _F = Ec({
width: aF
}), bF = ({title: e, body: t, actions: n, closeAction: r, closeLabel: i, buttonNarrationItem: o}) => {
const {closeModal: a} = uT(), [s, l] = H.useState();
pA({
title: e,
body: t,
overlayTitleNarrationItem: gA
}), EA({
callback: r || a,
label: i,
action: hF.Decline
});
const c = l, d = H.useCallback((e => {
l((t => t?.id === e.id ? void 0 : t));
}), [ l ]);
return H.createElement("surface", {
style: mF
}, H.createElement("surface", {
style: gF
}, H.createElement(qN, {
text: e,
color: Xc.TextColorStandard.emphasized,
style: yF
}), !!t && H.createElement(iv, {
text: t,
color: Xc.TextColorStandard.default,
style: IF
})), H.createElement(uF, null, H.createElement(cF, {
noScrollbar: !0
}, H.createElement(dA, {
actions: n,
onFocus: c,
onBlur: d,
alignStart: !0,
buttonStyle: _F,
buttonNarrationItem: o
})), H.createElement(fF, null, s?.title && s?.description ? H.createElement(YD, {
headline: s.title,
body: s.description
}) : void 0)));
};
function SF(e) {
const t = yb(), {eaPlayerId: n} = JI(e), {data: r} = ND(e), {data: i} = CD(e);
if (!zI(e)) return !1;
const o = t === n, a = r?.status === bh.Voip.VoipStatus.SelfMuted;
return o ? a : !!i;
}
function vF(e, t) {
const n = Os(), r = mb(), {mute: i, unmute: o} = JD(), a = SF(e), s = r.photonPlayerId === e, l = s && qA(n);
return H.useMemo((() => {
if (!(s && !dg.isPartyEnabled || l) && zI(e)) return {
id: "mute_ea_friend",
text: wh(a ? "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_UNMUTE" : "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_MUTE"),
action: () => {
a ? o(e, t) : i(e, t);
}
};
}), [ e, s, a, l, o, t, i ]);
}
var TF = class {
constructor(e, t, n, r) {
this.photon = e, this.config = t, this.pinClient = n, this.onDone = r, this.current = {
state: 0
}, this.categoryPath = [], this.sendReport = e => {
const t = this.currentCategory;
if (t && 2 === this.current.state) {
this.current = {
state: 3
};
const n = this.getCurrentCategoryChain();
this.photon.Moderation.reportPlayer({
categoryId: t.categoryId,
targetPlayerId: this.config.targetPlayerId,
targetPlayerNetworkId: this.config.targetPlayerNetworkId,
targetPersonaId: this.config.targetPersonaId,
targetPersonaName: this.config.targetPersonaName
}).then((t => {
t?.success ? e(n) : (e(n, t?.errorMessage ?? "Unknown"), this.current = {
state: 4,
errorMessage: t?.errorMessage ?? wh("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL")
});
})).catch((() => {
this.current = {
state: 4,
errorMessage: wh("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL")
};
}));
} else this.current = {
state: 4,
errorMessage: wh("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL")
};
}, this.abortConfirmation = () => {
this.categoryPath.pop(), this.current = {
state: 0
};
}, Cr(this, {
current: gt,
categoryPath: gt,
currentCategory: bt
}), this.photonPlayerId = UI({
eaPlayerId: this.config.targetPlayerId,
playerNetworkId: Yy(this.config.targetPlayerNetworkId)
});
}
getCurrentCategoryChain() {
const e = [];
let t = this.config.categories;
return this.categoryPath.forEach((n => {
const r = t.find((e => e.categoryId === n));
r && (e.push(r), t = r.subCategories);
})), e;
}
get currentCategory() {
const e = this.getCurrentCategoryChain();
return e.length ? e[e.length - 1] : void 0;
}
currentCategories() {
return this.currentCategory?.subCategories ?? this.config.categories;
}
get title() {
return this.currentCategory?.title ?? this.config.title;
}
get description() {
return this.currentCategory?.description ?? wh("PHOTON-SOCIAL_REPORT_INTRO_DESC");
}
get telemetryPageId() {
const e = this.currentCategory;
return e ? `overlay_report_${e.telemetryName}` : "overlay_report";
}
abort() {
this.onDone(!0);
}
complete() {
this.onDone(!1);
}
goBack() {
TT(this.pinClient, {
pg_id: this.telemetryPageId,
msg_id: this.telemetryPageId,
option: "back"
}), 0 === this.current.state ? this.categoryPath.length > 0 ? this.categoryPath.pop() : this.abort() : this.complete();
}
selectCategory(e) {
if (0 !== this.current.state) return;
const t = this.currentCategories();
this.categoryPath.push(e.categoryId), 0 === e.subCategories.length && (this.current = {
state: 2
});
const n = 1 + t.findIndex((t => t.categoryId === e.categoryId));
TT(this.pinClient, {
pg_id: this.telemetryPageId,
msg_id: this.telemetryPageId,
option: "sub_category",
index: {
item_index: n,
total_items: t.length
}
});
}
}, EF = ({reportPlayer: e}) => {
const t = e.current, n = 4 === t.state ? t.errorMessage : void 0, {showErrorNotification: r} = oP();
return H.useEffect((() => {
r({
text: n
}, "report player error modal", new Error(n)), e.complete();
}), [ r, e, n ]), null;
}, PF = Ii.observer((({reportPlayer: e}) => {
const t = Os(), n = cy(), r = Xg("main"), i = e.photonPlayerId, {name: o, playerNetworkId: a} = yL(i);
if (2 !== e.current.state) return null;
const s = e.telemetryPageId, l = H.useCallback((() => {
TT(n, {
pg_id: s,
msg_id: s,
option: "back"
}), e.abortConfirmation();
}), [ n, s, e ]), c = H.useCallback((() => {
TT(n, {
pg_id: s,
msg_id: s,
option: "confirm"
}), e.sendReport(((i, o) => {
const a = i.map((e => ({
id: e.telemetryName,
name: e.title
})));
dD(t, n, r.history.location, e.photonPlayerId, "report", e.config.targetPlayerId, a, o), 
t.get(Jg).addEvent({
eventType: "photon_player_grievance",
action: "report",
source: mT(t, r.history.location),
error: !!o,
error_code: o
});
}));
}), [ n, s, e, t, r ]);
return H.createElement(mA, {
title: wh("PHOTON-SOCIAL_REPORT_INTRO_TITLE", {
"%primaryID%": hv({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
}),
body: wh("PHOTON-SOCIAL_REPORT_OVERLAY_DESC_CONFIRM", {
"%selectedCategory%": e.title
}),
cancelLabel: wh("BUTTON_BACK"),
onConfirm: c,
onCancel: l,
autoClose: !1,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
});
})), OF = Ii.observer((({reportPlayer: e}) => {
const t = e.photonPlayerId, {name: n, playerNetworkId: r} = yL(t), i = cy(), {showNotification: o} = oP(), a = SF(t), {mute: s} = JD(), {data: l} = aD(t), {block: c} = mD(), d = e.telemetryPageId;
H.useEffect((() => {
o(3, 3, {
icon: Sf.CHECK_CIRCLE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_REPORT_CONFIRM", {
"%primaryID%": hv({
name: n,
playerNetworkId: r
}, {
allowEllipsis: !0
})
})
});
}), [ n, r, o ]);
const {actions: u, closeAction: p} = H.useMemo((() => {
const n = {
id: "done",
action: ET(i, (() => e.complete()), {
pg_id: d,
msg_id: d,
option: "done"
}),
label: wh("BUTTON_DONE")
}, r = [ n ], o = [];
return !a && s && o.push({
id: "mute_ea_friend",
label: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_MUTE"),
action: ET(i, (() => {
s(t), e.complete();
}), {
pg_id: d,
msg_id: d,
option: "mute"
})
}), l || o.push({
id: "block_ea_friend",
label: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_BLOCK"),
action: ET(i, (() => {
c(t), e.complete();
}), {
pg_id: d,
msg_id: d,
option: "block"
})
}), o.length && r.push({
id: "more_actions",
title: wh("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_SUBTITLE"),
body: wh("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_ADDITIONAL_DESC"),
actions: o
}), {
closeAction: n.action,
actions: r
};
}), [ a, s, l, e, d, i, t, c ]);
return H.createElement(hA, {
title: wh("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_TITLE"),
body: wh("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_DESC"),
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E,
actions: u,
closeAction: p,
closeLabel: wh("BUTTON_DONE"),
withoutCloseButton: !0,
withoutGlobalCloseInputLabel: !0
});
})), CF = Ii.observer((({reportPlayer: e}) => {
const t = H.useCallback((() => {
e.goBack();
}), [ e ]), n = e.current, r = e.currentCategories(), i = e.telemetryPageId, o = H.useMemo((() => r.map((t => ({
id: t.categoryId,
label: t.title,
title: t.title,
description: t.description,
action: () => e.selectCategory(t)
})))), [ r, e ]);
return pT(i), 4 === n.state ? H.createElement(EF, {
reportPlayer: e
}) : 2 === n.state ? H.createElement(PF, {
reportPlayer: e
}) : 3 === n.state ? H.createElement(OF, {
reportPlayer: e
}) : H.createElement(bF, {
closeAction: t,
closeLabel: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK"),
title: e.title,
body: e.description,
actions: o,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
});
})), NF = () => {
const e = Lh(), {showModal: t, closeModal: n} = uT(), r = Os(), {showErrorNotification: i} = oP(), o = cy(), a = kw(), s = H.useCallback((async s => {
const {name: l, playerNetworkId: c} = gL(r, s), d = Ts((() => hN(r, s).data));
if (d && d.eaPlayerId && d.personaId) try {
const r = await e.Moderation.getReportCategories({
targetPlayerId: d.eaPlayerId,
targetPlayerNetworkId: d.playerNetworkId,
targetPersonaId: d.personaId,
targetPersonaName: d.displayName
});
if (!r?.categories) return void i(void 0, "open report player modal", new Error("Empty report player categories"));
if (0 === r?.categories.length) {
const {data: e} = await LI(a.get(dg.productId));
return t((() => H.createElement(hA, {
title: wh("PHOTON-SOCIAL_REPORT_OVERLAY_UNREPORTABLE_TITLE"),
body: wh("PHOTON-SOCIAL_REPORT_OVERLAY_UNREPORTABLE_DESC", {
"%gameName%": e?.title ?? wh("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
}),
actions: [],
closeAction: () => {
TT(o, {
pg_id: "overlay_reporting_unavailable",
msg_id: "overlay_reporting_unavailable",
option: "got_it"
}), n();
},
closeLabel: wh("BUTTON_GOT-IT"),
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})), {
telemetryId: "overlay_reporting_unavailable"
});
}
const s = {
targetPlayerId: d.eaPlayerId,
targetPlayerNetworkId: d.playerNetworkId,
targetPersonaId: d.personaId,
targetPersonaName: d.displayName,
title: wh("PHOTON-SOCIAL_REPORT_INTRO_TITLE", {
"%primaryID%": hv({
name: l,
playerNetworkId: c
})
}),
categories: r.categories
}, u = new TF(e, s, o, (() => {
n();
}));
return t((() => H.createElement(CF, {
reportPlayer: u
})), {
telemetryId: "overlay_report"
}), () => u.abort();
} catch (e) {
i(void 0, "open report player modal", e);
}
}), [ a, o, n, r, e, i, t ]);
return {
openReportPlayerModal: s
};
};
function AF(e, t, n) {
const {isCurrentEaUser: r} = _b(e), {openReportPlayerModal: i} = NF(), o = Os();
return H.useMemo((() => {
if (zI(e)) return r ? void 0 : {
id: "report_ea_friend",
text: wh("BUTTON_REPORT"),
action: AT(o, e, t, (() => i(e)), n && {
msg_id: n.destination_name,
option: "report",
...n
})
};
}), [ o, r, i, e, t, n ]);
}
function LF(e, t, n) {
return e && e.playerNetworkId === n && e.playerId === t;
}
function wF(e, t) {
return LF(e?.partyLeader, t?.tokenInfo.userId, t?.personaInfo.playerNetworkId);
}
var kF = Ly.object({}), RF = {
setPartyLeader: "overlay_promote_player",
kickPartyMember: "overlay_kick_player"
}, xF = (e, t) => ({
pg_id: RF[e],
msg_id: RF[e],
option: t
}), BF = ({method: e, getSuccessMessage: t, icon: n, getConfirmTitle: r, getConfirmBody: i, getErrorMessage: o, telemetryId: a}) => js({
debugName: "party leader " + e,
create: s => {
const l = s.get(zg), c = s.get(ly), d = s.get(dT), {showNotification: u, showErrorNotification: p} = s.get(iP);
return f => {
const h = gb(s);
if (!wF(Ts((() => WO(s).data)), h)) return void p({}, "party leader" + e, new Error("not party leader"));
const m = hv(gL(s, f), {
allowEllipsis: !0
}), g = t => {
const n = Ts((() => WO(s).data));
dw(s, e, f, n, t);
}, y = ET(c, (async () => {
const r = await Xy((() => {
const {eaPlayerId: t, playerNetworkId: n} = JI(f);
return ry(t), l.Party[e]({
playerId: t,
playerNetworkId: n
});
}), kF);
r.error ? p(o && {
text: o(m)
}, "party leader " + e, r.error) : u(3, 3, {
icon: n,
text: t(m)
}), g(r.error);
}), xF(e, "confirm")), I = () => TT(c, xF(e, "cancel"));
d.showModal((() => H.createElement(mA, {
title: r(m),
body: i(m),
onConfirm: y,
onCancel: I,
showLoadingOnConfirm: !0,
autoClose: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})), {
telemetryId: a
});
};
}
}), [DF, FF] = BF({
method: "kickPartyMember",
getSuccessMessage: e => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_REMOVE", {
"%primaryID%": e
}),
icon: Sf.REMOVE,
getConfirmTitle: e => wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_KICK", {
"%primaryID%": e
}),
getConfirmBody: () => wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_KICK"),
getErrorMessage: () => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_KICK-PLAYER-FAIL"),
telemetryId: "overlay_kick_player"
}), MF = Js({
debugName: "isCurrentUserPartyLeader",
get: function({get: e}) {
if (!dg.isPartyEnabled) return !1;
const t = e(hb), {data: n} = e(iO).get();
return wF(n, t);
}
});
function UF() {
return ws(MF);
}
function HF({title: e, body: t, actions: n, overlayTitleNarrationItem: r, buttonNarrationItem: i}, o) {
const {showModal: a} = uT();
return H.useCallback((() => {
a((() => H.createElement(hA, {
title: e,
body: t,
actions: n,
overlayTitleNarrationItem: r,
buttonNarrationItem: i,
withoutCloseButton: !0,
withoutGlobalCloseInputLabel: !0
})), {
sequenceId: o
});
}), [ a, o, e, t, n, r, i ]);
}
function VF(e, t, n) {
const r = Os(), {closeModal: i} = uT(), o = "block_ea_friend", a = SF(e), {mute: s} = JD(), {openReportPlayerModal: l} = NF(), c = UF(), d = qO((t => t.has(e))).data, u = H.useMemo((() => {
const t = [];
if (c && d) {
const n = r.get(DF);
t.push({
id: "kick",
action: () => {
n(e), i();
},
label: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_REMOVE")
});
}
return !a && s && t.push({
id: "mute",
action: () => {
s(e), i();
},
label: wh("BUTTON_MUTE")
}), t.push({
id: "report",
action: () => {
l(e), i();
},
label: wh("BUTTON_REPORT")
}), [ {
id: "close",
action: () => {
i();
},
label: wh("BUTTON_DONE")
}, {
id: "additionalSteps",
title: wh("PHOTON-SOCIAL_BLOCK_CONFIRM_SUBTITLE"),
body: wh("PHOTON-SOCIAL_BLOCK_CONFIRM_DESC"),
actions: t
} ];
}), [ r, a, s, i, l, e, c, d ]), p = HF({
title: wh("PHOTON-SOCIAL_BLOCK_CONFIRM_TITLE"),
actions: u,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
}, o), {block: f, unblock: h} = mD(), {data: m} = aD(e), {isCurrentEaUser: g} = _b(e);
return H.useMemo((() => {
if (zI(e) && !g) {
const i = () => {
m ? h(e) : f(e, {
onSuccess: p,
modalSequenceId: o,
autoClose: !1
});
};
return {
id: "block_ea_friend",
text: wh(m ? "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_UNBLOCK" : "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_BLOCK"),
action: AT(r, e, t, i, n && {
msg_id: n.destination_name,
...n,
option: m ? "unblock" : "block"
})
};
}
}), [ p, g, m, n, h, e, t, f, r ]);
}
var JF = (e, t) => {
e(3, 3, {
icon: Sf.INFORMATION,
text: t
}, {
screenTimeInSec: 6
});
}, GF = (e, t, n) => {
const r = nT(), i = Os(), o = mb(), {showNotification: a, showErrorNotification: s} = oP(), l = H.useCallback((async () => Ts((async () => {
try {
const t = hN(i, e).data;
if (!t || !t.eaPlayerId) throw Error("Could not find player info.");
const n = i.get(NS).get().data?.get(e);
if (n) return await r.addFavoriteFriend(e), void a(3, 3, {
icon: Sf.STAR,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE", {
"%primaryID%": hv(gP(i, t, o), {
allowEllipsis: !0
})
})
});
const s = i.get(qv).get().data?.get(t.eaPlayerId);
if (s) return JF(a, wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE-PENDING-SENT"));
const l = i.get(zv).get().data?.get(t.eaPlayerId);
if (l) return JF(a, wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE-PENDING-RECEIVED"));
JF(a, wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE-NOT-CONNECTED"));
} catch (e) {
s({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_ADD-FAVORITE-FAIL")
}, "add favorite ea friend", e);
}
}))), [ i, e, s, a, r, o ]);
return AT(i, e, t, l, n && {
...n,
option: "add_fav"
});
}, zF = (e, t, n) => {
const r = nT(), i = Os(), o = mb(), {showNotification: a, showErrorNotification: s} = oP(), l = H.useCallback((async () => {
try {
const t = Ts((() => hN(i, e).data));
if (!t) throw Error("Could not find player info.");
await r.removeFavoriteFriend(e), a(3, 3, {
icon: Sf.REMOVE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_REMOVE-FAVORITE", {
"%primaryID%": hv(gP(i, t, o), {
allowEllipsis: !0
})
})
});
} catch (e) {
s({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_REMOVE-FAVORITE-FAIL")
}, "remove favorite ea friend", e);
}
}), [ i, e, s, a, r, o ]);
return AT(i, e, t, l, n && {
...n,
option: "remove_fav"
});
};
function jF(e, t) {
return {
id: e ? "remove_ea_favorite_friend" : "add_ea_favorite_friend",
keepOverlay: t
};
}
var qF = Gs({
debugName: "eaFriendActionsState",
get: function(e, {get: t}) {
const {isCurrentEaUser: n} = bb(t, e);
if (n) return [];
const r = e ? JI(e).eaPlayerId : void 0;
if (!r || !e) return [];
const {data: i} = t(z_).get(e), {data: o} = t(uS).get(), {data: a} = t(NS).get(), {data: s} = t(tT).get();
if (!i || !a || !o || o.has(r) || !s) return [];
const l = s.has(r);
if (a.has(e)) return [ jF(l, !1), {
id: "remove_ea_friend"
} ];
const {data: c} = t(qv).get();
if (c?.get(r)) return [ {
id: "cancel_ea_friend_request"
}, jF(l, !0) ];
const {data: d} = t(zv).get();
return d?.get(r) ? [ {
id: "accept_ea_friend_request"
}, {
id: "decline_ea_friend_request"
}, jF(l, !0) ] : [ {
id: "add_ea_friend"
}, jF(l, !0) ];
}
}), YF = (e, t, n) => {
const r = nR(e, n), i = aR(e, n), o = MN(e, t, n), a = UN(e, t, n), s = HN(e, t, n), l = GF(e, t, n), c = zF(e, t, n), d = ks(qF, e);
return H.useMemo((() => d.map((e => {
const {id: t, keepOverlay: n} = e;
return "add_ea_favorite_friend" === t && l ? {
id: t,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ADD-FAVORITE"),
action: l,
icon: Sf.STAR,
keepOverlay: n
} : "remove_ea_favorite_friend" === t && c ? {
id: t,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_REMOVE-FAVORITE"),
action: c,
keepOverlay: n
} : "add_ea_friend" === t && r ? {
id: t,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-ADD"),
action: r.performAction,
keepOverlay: n
} : "remove_ea_friend" === t && i ? {
id: t,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-REMOVE"),
action: i,
keepOverlay: n
} : "accept_ea_friend_request" === t && o ? {
id: t,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-ACCEPT"),
action: o,
keepOverlay: n
} : "cancel_ea_friend_request" === t && s ? {
id: t,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-RESCIND"),
action: s,
keepOverlay: n
} : "decline_ea_friend_request" === t && a ? {
id: t,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-DECLINE"),
action: a,
keepOverlay: n
} : void 0;
})).filter((e => !!e))), [ d, l, c, r, i, o, s, a ]);
};
function KF(e, t, n, r, i, o) {
return ET(t, (() => {
o.DeepLink.invokePlayerAction({
playerId: n.eaPlayerId,
playerNetworkId: n.playerNetworkId,
personaId: n.personaId,
playerActionId: e.playerActionId
}), i.close();
}), r && {
...r,
option: "game_action",
context: {
game_action: e.telemetryName
}
});
}
function WF(e, t, n, r, i, o, a) {
return ET(t, JL({
action: e,
DeepLink: i.DeepLink,
notifications: o,
modals: a,
player: n,
showLoading: !1
}), r && {
...r,
option: "game_action",
context: {
game_action: e.telemetryName
}
});
}
var XF = (e, t) => {
const n = Lh(), r = tN(), i = cy(), o = uT(), a = oP(), {data: s} = gN(e), l = !!JI(e).eaPlayerId, [c, d] = H.useState({
actions: [],
isLoading: n.hasMethod("DeepLink", "getPlayerActionsAsync") && l
});
return H.useEffect((() => {
const {eaPlayerId: e, playerNetworkId: l, personaId: c} = s ?? {};
if (!e || !l || !c) return;
(async () => {
const t = [];
if (n.hasMethod("DeepLink", "getPlayerActionsAsync")) {
const r = await n.DeepLink.getPlayerActionsAsync({
playerId: e,
playerNetworkId: l,
personaId: c
});
r?.actions && t.push(...r.actions);
}
if (n.hasMethod("DeepLink", "getPlayerActions")) {
const r = n.DeepLink.getPlayerActions({
playerId: e,
playerNetworkId: l,
personaId: c
});
r?.actions && t.push(...r.actions);
}
return t;
})().then((s => {
if (!s.length) return void d({
actions: [],
isLoading: !1
});
const u = n.hasMethod("DeepLink", "invokePlayerActionAsync");
return d({
actions: s.map((s => ({
id: `game_${s.playerActionId}`,
text: s.localizedName,
icon: u ? void 0 : Sf.OPEN_EXTERNAL,
action: u ? WF(s, i, {
eaPlayerId: e,
playerNetworkId: l,
personaId: c
}, t, n, a, o) : KF(s, i, {
eaPlayerId: e,
playerNetworkId: l,
personaId: c
}, t, r, n)
}))),
isLoading: !1
});
})).catch((e => {}));
}), [ s, n, i, t, r, a, o ]), c;
}, [QF, $F] = BF({
method: "setPartyLeader",
getSuccessMessage: e => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_PROMOTE", {
"%primaryID%": e
}),
icon: Sf.PARTY_LEADER,
getConfirmTitle: e => wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_PROMOTE", {
"%primaryID%": e
}),
getConfirmBody: e => wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_PROMOTE", {
"%primaryID%": e
}),
getErrorMessage: () => wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_PROMOTE-PLAYER-FAIL"),
telemetryId: "overlay_promote_player"
}), ZF = Ly.object({});
async function eM(e, t) {
const n = await Xy((() => e.leaveParty({})), ZF);
return n.error || t.updateParty(void 0), n;
}
function tM(e) {
return {
status: "click",
pg_id: "overlay_leave_current_party",
msg_id: "overlay_leave_current_party",
option: e
};
}
async function nM(e, t, n, r, i, o) {
const {showNotification: a, showErrorNotification: s} = r, l = await eM(t, n);
return l.error ? s({
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_LEAVE-PARTY-FAIL")
}, "leave party", l.error) : a(3, 3, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_LEFT"),
icon: Sf.EXIT
}), cw(e, i, o, l.error), l;
}
function rM() {
const e = oP(), {showModal: t} = uT(), n = oO(), r = Os(), i = Lh(), {data: o} = qO((e => e.size)), a = cy(), s = void 0 !== o && o > 1;
return H.useMemo((() => {
if (s) {
return {
leaveParty: () => new Promise((o => {
const {data: s} = vP(r), {data: l} = WO(r), c = async () => {
const t = await nM(r, i.Party, n, e, l, s);
o(t);
};
t((() => {
return H.createElement(mA, {
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_LEAVE-PARTY"),
body: (e = !dg.isTightlyCoupledParties, t = i.Notifications.getInGamePlay({})?.inGamePlay ?? !1, 
n = !!s, wh(t && e && n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-A" : t && e && !n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-B" : t && !e ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-C" : !t && e && n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-D" : t || !e || n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-F" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-E")),
confirmLabel: wh("BUTTON_CONTINUE"),
onConfirm: ET(a, c, tM("continue")),
onCancel: ET(a, (() => o(void 0)), tM("cancel")),
showLoadingOnConfirm: !0,
autoClose: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
});
var e, t, n;
}), {
telemetryId: "overlay_leave_current_party"
});
})),
isLeaveable: s
};
}
return {
leaveParty: void 0,
isLeaveable: s
};
}), [ s, r, t, n, e, a, i ]);
}
var iM = Gs({
debugName: "playerCanJoinMyLobbyState",
get: function(e, {get: t, getItem: n}) {
if (dg.isTightlyCoupledParties) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
}
};
const {photonPlayerId: r} = WI(e);
if (!zI(r)) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("INVALID_USER")
};
const i = t(bP).get(), o = t(iO).get(), a = t(z_).get(r), s = n(Jv, r), l = n(GO, r), c = CI([ i, a, s ]), d = o.data;
if (c.loading || c.uninitialized) return c;
const u = i.data;
if (!u) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_LOBBY")
};
if (!a.data) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_PLAYER_INFO")
};
if (!u.invitable) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("LOBBY_UNINVITABLE")
};
const p = !!u.members.get(r);
if (!(u.members.size < u.maxSize)) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("LOBBY_FULL")
};
if (p) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("USER_IN_LOBBY")
};
if (d) {
if (!d.invitable) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_NOT_INVITABLE")
};
if (d.members.size >= d.maxSize) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_FULL")
};
}
if (!s.data && !l) return {
...s,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_RELATION")
};
const f = t(gO).get(r)?.uninvitable;
return $P(n(pO, e)) ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("CROSSPLAY_PREVENTED")
} : f ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("INVITE_PREVENTED")
} : {
data: {
invitable: !0,
incompatible: !1
},
loading: !1,
error: void 0
};
}
}), oM = Gs({
debugName: "commonInviteOptionsState",
get: function(e, {getItem: t}) {
const n = t(YO, e), r = t(iM, e), i = CI([ n, r ]);
if (n.data && r.data) {
const {data: e} = n, {data: t} = r, o = e.invitable, a = t.invitable;
return {
...i,
data: {
canInvite: a || o,
isMyPartyJoinable: o,
isMyLobbyJoinable: a,
isIncompatible: e.incompatible || t.incompatible,
gameInviteTypes: zw(o, a)
}
};
}
return {
...i,
data: void 0
};
}
}), aM = (e, t) => ks(oM, XI(e, t));
function sM(e, t) {
const {data: n} = Yw(e), r = dg.isPartyEnabled && n?.gameJoinTokenTypes.includes("party"), i = n?.gameJoinTokenTypes.includes("lobby"), o = n && n.senderProductId === dg.productId, a = n && !Mw(n).expired && o, s = hO(e, t) && a, {acceptInvite: l} = ik(e, t);
return {
joinable: a,
crossplayPrevented: s,
acceptGameInvite: H.useCallback((async () => {
const e = [];
return r && e.push("party"), i && e.push("lobby"), l(e);
}), [ l, r, i ]),
gameInvite: n,
isPartyGameInvite: r,
isLobbyGameInvite: i,
isGameInviteForSameGame: o
};
}
var lM = (e, t) => {
const {joinable: n, crossplayPrevented: r, acceptGameInvite: i, gameInvite: o, isPartyGameInvite: a, isLobbyGameInvite: s, isGameInviteForSameGame: l} = sM(e, t), {joinable: c, crossplayPrevented: d, directJoinParty: u} = Iw(e, t), {joinable: p, crossplayPrevented: f, directJoinLobby: h} = Tw(e, t), m = d || f || r, g = Ow(e), y = !m && (n || c || p), I = H.useCallback((async () => {
n ? await i() : c && p && u && h ? await g() : c && u ? await u() : p && h && await h();
}), [ n, p, c, i, h, u, g ]);
return H.useMemo((() => ({
canJoin: y,
joinAction: I,
gameInvite: o,
isCrossplayPrevented: m,
isGameInviteForSameGame: l,
isPartyGameInvite: a,
isLobbyGameInvite: s,
isPartyJoinable: c,
isLobbyJoinable: p
})), [ y, o, m, l, s, p, a, c, I ]);
};
function cM(e) {
return Ts((() => {
const t = new Set;
let n = 0;
const r = e.get(QC).data?.[0];
if (r) for (const {presence: i} of r) {
const {photonPlayerId: r, photonSessionId: o} = i, {eaPlayerId: a} = JI(r);
if (!a) continue;
const s = XI(r, o);
(e.getItem(_w, s).data?.joinable || e.getItem(pw, s).data?.joinable || e.getItem(iM, s).data?.invitable || e.getItem(YO, s).data?.invitable) && (t.add(a), 
n++);
}
return {
frnds_on_act: t.size,
pop_on_act: n
};
}));
}
var dM = (e, t, n, r, i) => () => AT(e, t, n, r, i && {
...i,
context: {
...cM(e),
...i.context
}
})(), uM = (e, t, n) => {
const r = Os(), i = cy(), o = mb(), {data: a} = jO(), {data: s} = aM(e, t), {isActionTaken: l, performAction: c} = Lk(e), d = KO(e, t), {gameInvite: u, isGameInviteForSameGame: p, isPartyGameInvite: f, isLobbyGameInvite: h, isPartyJoinable: m, isLobbyJoinable: g, joinAction: y, canJoin: I} = lM(e, t), _ = u?.senderProductId ?? dg.productId, {declineInvite: b} = ik(e, t, n), {isLeaveable: S, leaveParty: v} = rM();
return H.useMemo((() => {
const T = [], {isCurrentPhotonUser: E} = Ib(e, o);
if (E) S && v && T.push({
id: "party_leave",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_LEAVE"),
action: ET(i, v, {
pg_id: "overlay_player_actions_self",
msg_id: "overlay_player_actions_self",
option: "leave_party"
})
}); else {
if (u) {
p && I && (f ? T.push({
id: "party_join",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_JOIN"),
action: dM(r, e, t, y, n && {
...n,
option: "join_party_invite",
context: {
tpid: _
}
})
}) : h && !f && T.push({
id: "lobby_join",
text: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN"),
action: dM(r, e, t, y, n && {
...n,
option: "join_lobby_invite",
context: {
tpid: _
}
})
}), f && h && T.push({
id: "combo_join",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO"),
action: dM(r, e, t, y, n && {
...n,
option: "join_combo_invite",
context: {
tpid: _
}
})
}));
const {expired: i} = Mw(u);
if (!i) {
let i = "not_set";
f && h ? i = "decline_combo_invite" : f && !h ? i = "decline_party_invite" : !f && h && (i = "decline_lobby_invite"), 
T.push({
id: "invite_decline",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-INVITE-DECLINE"),
action: AT(r, e, t, b, n && {
...n,
option: i,
context: {
tpid: _
}
})
});
}
} else m && g && I ? T.push({
id: "combo_join",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO"),
action: dM(r, e, t, y, n && {
...n,
option: "join_combo_hot_join",
context: {
tpid: _
}
})
}) : m ? T.push({
id: "party_join",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_JOIN"),
action: dM(r, e, t, y, n && {
...n,
option: "join_party_hot_join",
context: {
tpid: _
}
})
}) : g && T.push({
id: "lobby_join",
text: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN"),
action: dM(r, e, t, y, n && {
...n,
option: "join_lobby_hot_join",
context: {
tpid: _
}
})
});
if (s?.canInvite) {
let i, o, a;
s.isMyLobbyJoinable && s.isMyPartyJoinable ? (o = "combo_invite", i = wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-LOBBY"), 
a = "invite_to_combo") : s.isMyPartyJoinable ? (o = "party_invite", i = wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-PARTY"), 
a = "invite_to_party") : (o = "lobby_invite", i = wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-LOBBY"), 
a = "invite_to_lobby"), T.push({
id: o,
isDisabled: l,
text: i,
disabledContent: H.createElement(yB, {
textColor: Xc.TextColorStandard.emphasized,
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_INVITE-SENT")
}),
action: dM(r, e, t, (() => c(s.gameInviteTypes)), n && {
...n,
context: {
tpid: _
},
option: a
})
});
}
if (a && d && wF(a, o)) {
if (a.promotionEnabled) {
const t = r.get(QF);
T.push({
id: "party_promote_leader",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_PROMOTE"),
action: ET(i, (() => t(e)), n && {
...n,
option: "promote_to_party_leader"
})
});
}
const t = r.get(DF);
T.push({
id: "party_kick_player",
text: wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_REMOVE"),
action: ET(i, (() => t(e)), n && {
...n,
option: "remove_from_party"
})
});
}
}
return T;
}), [ _, r, e, t, o, S, v, u, m, g, I, s, a, d, p, f, h, i, y, n, b, l, c ]);
};
function pM(e, t, n) {
const r = mb(), i = IN(e, n);
return H.useMemo((() => {
const n = i.data.filter((n => {
const i = n.photonPlayerId !== e, o = "EA" === n.playerNetworkId || r.playerNetworkIds.includes(n.playerNetworkId);
return t ? i && o : i;
})).sort((e => "EA" === e.playerNetworkId ? -1 : 1));
return {
...i,
data: n
};
}), [ r, i, e, t ]);
}
function fM(e) {
return "NINTENDO" === e ? wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-PLATFORM_VIEW_SWITCH") : wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-PLATFORM_VIEW", {
"%localPlatform%": zb(e)
});
}
var hM = (e, t) => {
const {playerNetworkId: n} = aP(), r = Lh(), i = tN(), o = cy(), {showNotification: a} = oP(), {navigate: s} = Wg(), l = H.useCallback((() => s(Qg.link())), [ s ]), {data: c} = pM(e, !0), {data: d} = gN(e), u = d?.playerNetworkId === n ? d : c.find((e => e.playerNetworkId === n));
return H.useMemo((() => {
const e = [];
if (!u || u.playerNetworkId !== n) return e;
const s = "EA" === u.playerNetworkId ? u.eaPlayerId : u.firstPartyPlayerId;
return s ? (e.push({
id: "platform_view_profile",
text: fM(n),
action: ET(o, (async () => {
try {
if (r.hasMethod("DeepLink", "openFirstPartyProfileAsync")) {
const e = await r.DeepLink.openFirstPartyProfileAsync({
playerId: s
});
e?.errorMessage && a(0, 0, {
text: e.errorMessage,
icon: Sf.WARNING,
iconColor: Xc.ColorSystem.warning
});
} else r.DeepLink.openFirstPartyProfile({
playerId: s
});
l(), i.close();
} catch (e) {
dg.isPC && a(0, 0, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_VIEW-PROFILE-FAIL"),
icon: Sf.WARNING,
iconColor: Xc.ColorSystem.warning
});
}
}), t && {
...t,
option: "view_local_platform_profile"
}),
icon: Sf.OPEN_EXTERNAL,
keepOverlay: !0
}), e) : e;
}), [ u, n, o, t, r, l, i, a ]);
};
function mM(e, t, n) {
const {navigate: r} = Wg("overlay"), {isCurrentEaUser: i} = _b(e), o = H.useCallback((() => {
r(i ? lD.link({
photonPlayerId: e,
photonSessionId: t
}) : sD.link({
photonPlayerId: e,
photonSessionId: t
}));
}), [ i, r, e, t ]);
return LT(e, t, o, n && {
option: "see_player_actions",
msg_id: n.destination_name,
...n
});
}
var gM = [ "party_join", "lobby_join", "combo_join", "party_invite", "lobby_invite", "combo_invite", "add_ea_friend", "accept_ea_friend_request" ], yM = (e, t, n) => {
const r = [];
return e.forEach((e => {
if (e) {
if (n && gM.includes(e.id)) return;
r.push({
...e,
action: () => {
e.action(), e.keepOverlay || t();
}
});
}
})), r;
}, IM = {
pg_id: "overlay_player_actions_other",
msg_id: "overlay_player_actions_other"
}, _M = (e, t, n) => {
const {isCurrentEaUser: r} = _b(e), i = !!aD(e).data, o = uM(e, t, IM), a = YF(e, t, IM), s = hM(e, IM), l = XF(e, IM), c = vF(e, H.useMemo((() => {
const e = r ? "overlay_player_actions_self" : "overlay_player_actions_other";
return {
pg_id: e,
msg_id: e
};
}), [ r ])), d = VF(e, t, IM), u = AF(e, t, IM);
return H.useMemo((() => {
const e = [];
return o && e.push({
id: dg.isPartyEnabled ? "party_actions" : "lobby_actions",
actions: yM(o, n, i)
}), e.push({
id: "ea_actions",
actions: yM([ c, ...a, d, u ], n, i)
}), s && e.push({
id: "platform_actions",
actions: yM(s, n, i)
}), e.push({
id: "game_actions",
isLoading: l.isLoading,
actions: yM(l.actions, n, i)
}), e;
}), [ o, d, c, a, u, n, i, s, l ]);
}, bM = ({children: e, navigate: t}) => {
const n = Vu(), r = H.useCallback(((e, r) => {
const i = t(e, r);
return i !== fp ? i : n(e, r);
}), [ t, n ]);
return H.createElement(Hu.Provider, {
value: r
}, e);
}, SM = Ec({
position: "relative",
layer: !0,
layerClip: !0
});
function vM({rows: e, height: t, width: n, scrollPosition: r, style: i, prefetchRows: o}) {
const a = e[e.length - 1]?.bottom ?? 0, s = Math.max(0, Math.min(a - t, r)), l = wc((() => ({
height: t,
width: n
})), [ t, n ]), c = s, d = c + t, u = [], p = [], f = [];
let h;
for (let t = 0, n = e.length; t < n; t++) {
const n = e[t];
if (n.bottom > c && n.top < d) 0 === u.length && t > 0 && p.push(e[t - 1]), u.push(n); else if (u.length > 0) {
f.push(e[t]), o && (h = e.slice(t + 1, t + 1 + o));
break;
}
}
const m = [ ...p, ...u, ...f ];
return H.useEffect((() => {
if (h) {
for (let e = 0, t = m.length; e < t; e++) {
const t = m[e];
t.prefetch?.(t.renderProps);
}
for (let e = 0, t = h.length; e < t; e++) {
const t = h[e];
t.prefetch?.(t.renderProps);
}
}
})), H.createElement("surface", {
style: [ SM, l, i ]
}, m.map((e => e.render(e.top - s, e.renderProps))));
}
var TM = Ec({
layer: !0,
layerClip: !0
}), EM = (e, t, n = hc(64)) => {
const r = e ? Lc("layerSoftClipTop", n) : void 0, i = t ? Lc("layerSoftClipBottom", n) : void 0;
return [ TM, r, i ];
}, PM = ({fadeTop: e, fadeBottom: t, fadeHeight: n = hc(64), style: r, children: i}) => {
const o = EM(e, t, n);
return H.createElement("surface", {
style: [ o, r ]
}, i);
}, OM = class {
constructor() {
this.height = 0, this.rows = [];
}
addRow(e, t, n, r, i, o, a) {
this.rows.push({
focused: i,
focusId: t,
render: n,
renderProps: r,
prefetch: o,
top: this.height,
bottom: this.addSpace(e)
}), void 0 !== a && this.addSpace(a);
}
addSpace(e) {
return this.height += e, this.height;
}
}, CM = Ii.observer((e => {
const {onMouseScroll: t, height: n, contentHeight: r, scrollPosition: i, children: o, style: a} = e, s = Hf(), l = Vf(s), {isHovered: c, hoverHooks: d} = KD(), u = Math.max(0, r - n), p = r > n;
return H.createElement(Jf, {
id: s
}, H.createElement("surface", {
onMouseScroll: t,
...d,
style: [ Lc("backgroundColor", "#00000001"), a ]
}, o, p && H.createElement(iF, {
setContentScrollPosition: e.setContentScrollPosition,
visible: l || c,
scrollPercent: u > 0 ? i / u : 0,
containerHeight: n,
contentHeight: r
})));
}));
function NM(e, t) {
if (t > -1) {
const n = e[t - 1]?.top;
return 0 === t ? 0 : n ?? e[t]?.top;
}
}
function AM({rows: e, height: t, width: n, style: r, prefetchRows: i}) {
const o = e.findIndex((e => e.focused)), a = NM(e, o), s = e[o]?.focusId, l = Rs(rl), [c, d] = H.useState(a ?? 0), u = H.useRef(c);
H.useLayoutEffect((() => {
void 0 !== a && (d(a), s && l({
focusId: s,
source: 2
}));
}), [ a, s, l ]), H.useEffect((() => {
u.current = c;
}), [ c ]);
const p = e[e.length - 1]?.bottom ?? 0, f = Math.max(0, p - t);
H.useEffect((() => {
d((e => Math.min(f, e)));
}), [ f ]);
const h = H.useCallback((n => {
const r = u.current, i = e[n];
if (!i) return;
if (0 === n) return void d(0);
const o = e[n - 1], a = e[n + 1], s = (a ? a.bottom : i.bottom) - t, l = o ? o.top : i.top;
s > r ? d(s) : l < r && d(l);
}), [ e, d, t ]), m = H.useCallback(((t, n) => {
if (3 === n || 2 === n) {
const r = e.findIndex((e => e.focusId === t));
if (-1 !== r) {
const t = r + (3 === n ? 1 : -1), i = e[t];
if (i) return h(t), i.focusId;
}
}
return fp;
}), [ e, h ]), g = n - WD, y = c > 0, I = f > c;
return H.createElement(bM, {
navigate: m
}, H.createElement(CM, {
setContentScrollPosition: d,
onMouseScroll: e => {
const t = e.scrollDelta * hc(Xc.ScrollFactor.fast);
d((e => Math.min(f, Math.max(0, e - t))));
},
height: t,
contentHeight: p,
scrollPosition: c,
style: Lc("width", n)
}, H.createElement(vM, {
height: t,
rows: e,
width: g,
scrollPosition: c,
prefetchRows: i,
style: [ EM(y, I), r ]
})));
}
var LM = ({headline: e = wh("PHOTON-SOCIAL_PAGE-ERROR_TITLE_GENERIC"), body: t = wh("PHOTON-SOCIAL_PAGE-ERROR_DESC_GENERIC"), buttonLabel: n = wh("PHOTON-SOCIAL_PAGE-ERROR_BUTTON_GENERIC"), buttonAction: r}) => H.createElement(eD, {
headline: e,
body: t
}, r && H.createElement(lf, {
variant: 0,
id: "error-content-button",
label: n,
onClick: r,
narrationItem: QE
})), wM = {
duration: Xc.AnimationTime.rapid,
easing: Xc.AnimationEasing.ease
}, kM = ({children: e, style: t}) => {
const n = ZT(1), [r, i] = H.useState(void 0), o = H.Children.toArray(e);
let a;
return o.forEach(((e, t) => {
if (void 0 !== a || !H.isValidElement(e)) return;
e.props.visible && (a = t);
})), H.useEffect((() => {
if (void 0 === r) return i(a), void n.set(1);
r !== a && n.to(0, {
...wM,
onFinished: () => {
i(a), n.to(1, wM);
}
});
}), [ r, n, a ]), void 0 !== r ? H.createElement("surface", {
style: [ n.propStyle("opacity"), t ]
}, o[r]) : null;
}, RM = ({children: e}) => H.createElement(H.Fragment, null, e), xM = Ox, BM = oF, [DM, FM] = Is("PlayerDetailsPage"), MM = Ks({
debugName: "selectedItemState",
default: void 0
}), UM = e => H.createElement(AM, {
...e,
height: e.height ?? xM,
width: BM,
style: Lc("margin", -zx)
}), HM = Ii.observer((({fallbackContent: e}) => {
const t = ws(MM);
let n;
if (t) {
const {photonPlayerId: e, photonSessionId: r, PlayerDetailsComponent: i, telemetryInfo: o} = t;
n = H.createElement(i, {
photonPlayerId: e,
photonSessionId: r,
telemetryInfo: o
});
} else n = e;
return H.createElement(fF, null, n);
})), VM = ({children: e, contentHasNoScrollbar: t, fallbackContent: n}) => {
const r = Rs(MM), i = H.useMemo((() => ({
setSelectedItem: r
})), [ r ]);
return H.createElement(DM.Provider, {
value: i
}, H.createElement(uF, null, H.createElement(cF, {
noScrollbar: t
}, e), H.createElement(HM, {
fallbackContent: n
})));
}, JM = Ii.observer((({loading: e, error: t, empty: n, emptyContent: r, rows: i, prefetchRows: o, beforeContent: a, scrollHeight: s}) => t ? H.createElement(LM, null) : H.createElement(kM, {
style: Lc("flex", 1)
}, H.createElement(RM, {
visible: e
}, H.createElement(cF, {
noScrollbar: !0
}, H.createElement(fB, {
numSections: 2,
numRows: 1
}))), r ? H.createElement(RM, {
visible: n
}, r) : null, H.createElement(RM, {
visible: !n
}, H.createElement(VM, null, a, H.createElement(UM, {
height: s,
rows: i,
prefetchRows: o
}))))));
function GM(e, t) {
const n = jS().get(), r = Os();
return {
...n.toProps(),
data: HS(r, n.data, e, t)
};
}
function zM(e) {
const t = kw();
return e ? t.get(e) : {
loading: !1,
data: void 0
};
}
function jM(e, t) {
const n = hc(t);
return e?.get(`${n}x${n}`);
}
var qM = e => {
const {data: t} = zM(e?.productId);
return t?.title ?? e?.productTitle;
}, YM = (e, t) => {
const {data: n} = GM(e, t), r = qM(n), i = Os();
return EP(i, e, t) ? wh("PHOTON-SOCIAL_LOBBY_YOUR") : cO(i, e, t) ? wh("PHOTON-SOCIAL_PARTY_PARTY-YOUR") : r;
}, KM = (e, t) => {
const {data: n} = GM(e, t);
if (VS() && n?.properties?.status) {
if ("DO_NOT_DISTURB" === n?.properties?.status) return {
text: wh("PHOTON-SOCIAL_STATUS_BUSY_RADIO")
};
if ("DOWN_TO_PLAY" === n.properties.status) return {
text: wh("PHOTON-SOCIAL_STATUS_READY-TO-PLAY_RADIO"),
color: Xc.ColorSystem.success
};
}
}, WM = {
container: Ec({
marginBottom: hc(Xc.DimensionSpace.larger)
}),
header: Ec({
flexDirection: "row",
alignItems: "center"
}),
title: Ec({
marginBottom: hc(Xc.DimensionSpace.smallest)
}),
iconStyle: Ec({
width: hc(Xc.DimensionSpace.largest),
height: hc(Xc.DimensionSpace.larger),
marginEnd: hc(Xc.DimensionSpace.medium)
})
}, XM = ({sectionTitle: e, icon: t, style: n, textColor: r, children: i}) => H.createElement("surface", {
style: [ WM.container, n ]
}, H.createElement("surface", {
style: WM.header
}, t && H.createElement("surface", {
style: [ WM.iconStyle, Lc("color", t.color), Lc("texture", t.type), t.style ]
}), H.createElement(iv, {
text: e,
color: r ?? Xc.TextColorStandard.default,
style: WM.title
})), i), QM = (e, t, n) => {
if (1 !== e) {
if (64 == (64 & e)) return wh("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-PLATFORM-SELF_DESC");
if (jP(e)) return wh("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-PLATFORM-OTHER_DESC");
if (t ? YP(e) : qP(e)) return wh("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-GAME_DESC");
if (KP(e)) return wh("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-SELF_DESC");
if (WP(e)) return wh("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-OTHER_DESC");
}
if (n && n.uninvitable) return n.reason ?? wh("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-GENERIC_DESC");
}, $M = Ii.observer((({isReceivedGameInvite: e, photonPlayerId: t, photonSessionId: n, style: r, bodyTextStyle: i}) => {
const o = fO(t, n), a = yO(t, n), s = QM(o, e, a);
return s ? H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER_TITLE"),
icon: {
type: Sf.INCOMPATIBLE_WHITE
},
style: r,
textColor: Xc.TextColorStandard.emphasized
}, H.createElement(iv, {
style: i,
text: s,
color: Xc.TextColorStandard.default
})) : null;
}));
function ZM(e, t) {
const {data: n} = aM(e, t), r = lM(e, t), i = r.isCrossplayPrevented || n?.isIncompatible;
return !(r.canJoin || n?.canInvite || !i);
}
var eU = bh.PresenceSession.InputType, tU = fs.Input.DeviceType, nU = (Ly.object({
presenceSessionId: Ly.optional(Ly.nullable(Ly.string)),
presenceSessionToken: Ly.optional(Ly.nullable(Ly.object({
token: Ly.optional(Ly.anyObject)
})))
}), Ly.object({})), rU = Ly.object({
playerNetworkId: Ly.optional(My),
productId: Ly.optional(Ly.nullable(Ly.object({
id: Ly.nullable(Ly.string)
}))),
devicePlatformId: Ly.optional(Uy),
locale: Ly.optional(Ly.string)
}), iU = Ly.object({
integerValue: Ly.number
}), oU = Ly.object({
stringValue: Ly.string
}), aU = Ly.enum(eU, eU.INPUT_TYPE_UNSPECIFIED), sU = Ly.object({
presenceSessionId: Ly.string,
online: Ly.boolean,
joinable: Ly.optional(Ly.boolean),
updateTimestamp: Ly.nullable(wy),
client: Ly.optional(rU),
inputTypes: Ly.optional(Ly.nullable(Ly.array(aU))),
activityDescription: Ly.optional(Ly.string),
activityDetails: Ly.optional(Ly.string),
properties: Ly.optional(Ly.object({}, {
photon_maxPartySize: iU,
photon_currentPartySize: iU,
photon_partyJoinable: iU,
photon_partyCrossplayEnabled: iU,
photon_maxLobbySize: iU,
photon_currentLobbySize: iU,
photon_lobbyJoinable: iU,
photon_lobbyCrossplayEnabled: iU,
photon_crossplayEnabled: iU,
photon_status: oU
})),
gameJoinTokenTypes: Ly.optional(Ly.array(Ly.string)),
updated: Ly.boolean
}), lU = Ly.object({
playerId: By,
playerOnline: Ly.optional(Ly.nullable(Ly.boolean)),
lastSeenOnline: Ly.optional(Ly.nullable(wy)),
sessionNotification: sU
}), cU = Ly.object({
presenceNotification: lU
}), dU = Ly.object({}), uU = Ly.object({
stream: Ly.custom(t_()),
response: dU
});
function pU(e) {
if (e) {
if (e.includes(eU.INPUT_TYPE_MOUSE)) return eU.INPUT_TYPE_MOUSE;
if (e.includes(eU.INPUT_TYPE_KEYBOARD)) return eU.INPUT_TYPE_MOUSE;
if (e.includes(eU.INPUT_TYPE_CONTROLLER)) return eU.INPUT_TYPE_CONTROLLER;
}
}
function fU(e) {
return e === tU.MouseAndKeyboard ? eU.INPUT_TYPE_MOUSE : eU.INPUT_TYPE_CONTROLLER;
}
function hU(e) {
return !(e.locale && dg.locale && Ab.preTranslatedRichPresence) || Cd(dg.locale, e.locale);
}
function mU(e, t) {
return {
addedItems: new Set(Array.from(e).filter((e => !t.has(e)))),
removedItems: new Set(Array.from(t.values()).filter((t => !e.has(t))))
};
}
function gU() {
const e = H.useRef(new Set), t = H.useCallback((t => {
t.forEach((t => {
e.current.add(t);
}));
}), []), n = H.useCallback((t => {
t.forEach((t => {
e.current.delete(t);
}));
}), []);
return H.useCallback(((r, i) => {
const {addedItems: o, removedItems: a} = mU(r, e.current);
(o.size || a.size) && (t(o), n(a), i({
addedItems: o,
removedItems: a
}));
}), [ t, n ]);
}
var yU = Js({
debugName: "extraPresenceEaPlayerIdsState",
get: function({get: e}) {
const t = e(hb).tokenInfo.userId, n = e(NS).get(), r = e(ES).get(), i = e(bP).get(), o = e(iO).get(), a = e(uS).get(), s = e(HO), l = [ n, r, a ];
dg.isPartyEnabled && l.push(o), dg.isTightlyCoupledParties || l.push(i), dg.playerListsEnabled && l.push(s);
const c = CI(l);
if (c.loading || c.uninitialized) return new Set;
const d = new Set(a.data?.keys()), u = e(xS), p = [ ...RS(Array.from(r.data?.values() ?? []).map((e => e.photonPlayerId))), ...RS(Array.from(i.data?.members.keys() ?? [])), ...RS(Array.from(o.data?.members.keys() ?? [])), ...s.data ?? [] ].filter((e => !d.has(e) && !u.has(e) && e !== t));
return new Set(p);
}
}), IU = Ly.object({});
function _U(e) {
const t = Os();
Us((({get: e}) => {
t.set(kS, e(yU));
}), [ t ]);
const n = gU(), r = Hs((({get: e}) => t => !e(xS).has(t)), []), {PresenceSession: i} = Lh(), o = H.useCallback((e => Xy((() => i.subscribeToPlayersPresence({
targetPlayerIds: e.map((e => ({
id: e
})))
})), IU)), [ i ]), a = Hs((({get: e}) => async t => {
await Xy((() => i.unsubscribeFromPlayersPresence({
targetPlayerIds: t.map((e => ({
id: e
})))
})), IU);
const n = e(z_), r = e(zS);
Ts((() => {
t.forEach((e => {
n.findByEaPlayerId(e).forEach((e => {
const t = e.data?.photonPlayerId;
t && r.removeSelectPointsOfPresence(t, (e => e.isEAPresence));
}));
}));
}));
}), [ i ]);
Us((({get: t}) => {
e && n(t(yU), (async ({addedItems: e, removedItems: t}) => {
const n = Array.from(t).filter(r);
if (n.length && await a(n), e.size) {
const t = Array.from(e);
await o(t);
}
}));
}), [ e, r, o, a, n ]);
}
var bU = Ks({
debugName: "userStatusState",
default: void 0
}), SU = bh.PresenceSession.InputType, vU = bh.PresenceSession.Operation, TU = bh.DeepLink.Setting, EU = Ks({
debugName: "throttledDeviceTypeState",
default: void 0
});
Object.values(SU).filter((e => "string" != typeof e));
function PU() {
const e = Os();
H.useEffect((() => Fn((() => e.get(ap)), (t => {
e.set(EU, t);
}), {
delay: 1e4,
fireImmediately: !0
})), [ e ]);
}
var OU = class {
constructor(e, t) {
this.gameJoinTokenType = e, this.customFields = t;
}
clearCachedState() {
this.gameJoinToken = void 0, this.maxSize = void 0, this.currentSize = void 0, this.joinable = void 0, 
this.crossplayEnabled = void 0;
}
setGameJoinToken(e, t) {
this.gameJoinToken !== t && (e.gameJoinTokens[this.gameJoinTokenType] = {
operation: vU.OPERATION_UPDATE,
value: {
token: $A(t)
}
}, this.gameJoinToken = t);
}
removeGameJoinToken(e) {
void 0 !== this.gameJoinToken && (e.gameJoinTokens[this.gameJoinTokenType] = {
operation: vU.OPERATION_REMOVE
}, this.gameJoinToken = void 0);
}
setMaxSize(e, t) {
this.maxSize !== t && (e.properties[this.customFields.maxSize] = {
operation: vU.OPERATION_UPDATE,
value: {
integerValue: t
}
}, this.maxSize = t);
}
removeMaxSize(e) {
void 0 !== this.maxSize && (e.properties[this.customFields.maxSize] = {
operation: vU.OPERATION_REMOVE
}, this.maxSize = void 0);
}
setCurrentSize(e, t) {
this.currentSize !== t && (e.properties[this.customFields.currentSize] = {
operation: vU.OPERATION_UPDATE,
value: {
integerValue: t
}
}, this.currentSize = t);
}
removeCurrentSize(e) {
void 0 !== this.currentSize && (e.properties[this.customFields.currentSize] = {
operation: vU.OPERATION_REMOVE
}, this.currentSize = void 0);
}
setJoinable(e, t) {
this.joinable !== t && (e.properties[this.customFields.joinable] = {
operation: vU.OPERATION_UPDATE,
value: {
integerValue: t ? 1 : 0
}
}, this.joinable = t);
}
removeJoinable(e) {
void 0 !== this.joinable && (e.properties[this.customFields.joinable] = {
operation: vU.OPERATION_REMOVE
}, this.joinable = void 0);
}
setCrossplayEnabled(e, t) {
this.crossplayEnabled !== t && this.customFields.crossplayEnabled && (e.properties[this.customFields.crossplayEnabled] = {
operation: vU.OPERATION_UPDATE,
value: {
integerValue: t ? 1 : 0
}
}, this.crossplayEnabled = t);
}
removeCrossplayEnabled(e) {
void 0 !== this.crossplayEnabled && this.customFields.crossplayEnabled && (e.properties[this.customFields.crossplayEnabled] = {
operation: vU.OPERATION_REMOVE
}, this.crossplayEnabled = void 0);
}
getJoinable() {
return this.joinable;
}
get() {
return {
joinable: this.joinable,
currentSize: this.currentSize,
maxSize: this.maxSize,
crossPlayEnabled: this.crossplayEnabled
};
}
}, CU = class {
constructor() {
this.party = new OU("party", {
maxSize: "photon_maxPartySize",
currentSize: "photon_currentPartySize",
joinable: "photon_partyJoinable",
crossplayEnabled: "photon_partyCrossplayEnabled"
}), this.lobby = new OU("lobby", {
maxSize: "photon_maxLobbySize",
currentSize: "photon_currentLobbySize",
joinable: "photon_lobbyJoinable",
crossplayEnabled: "photon_lobbyCrossplayEnabled"
});
}
clearCachedState() {
this.inputType = void 0, this.appearOffline = void 0, this.joinable = void 0, this.crossplayEnabled = void 0, 
this.party.clearCachedState(), this.lobby.clearCachedState();
}
setInputType(e, t) {
this.inputType !== t && (e.inputTypes = {
operation: vU.OPERATION_UPDATE,
values: [ fU(t) ]
}, this.inputType = t);
}
setAppearOffline(e, t) {
this.appearOffline !== t && (e.appearOffline = {
operation: vU.OPERATION_UPDATE,
value: t
}, this.appearOffline = t);
}
removeInputType(e) {
void 0 !== this.inputType && (e.inputTypes = {
operation: vU.OPERATION_REMOVE,
values: []
}, this.inputType = void 0);
}
updateJoinable(e) {
const t = !!this.lobby.getJoinable() || !!this.party.getJoinable();
this.joinable !== t && (e.joinable = {
operation: vU.OPERATION_UPDATE,
value: !!t
}, this.joinable = t);
}
updateCrossplayEnabled(e, t) {
this.crossplayEnabled !== t && (e.properties.photon_crossplayEnabled = {
operation: vU.OPERATION_UPDATE,
value: {
integerValue: t ? 1 : 0
}
}, this.crossplayEnabled = t);
}
setStatus(e, t) {
this.status !== t && (e.properties.photon_status = {
operation: vU.OPERATION_UPDATE,
value: {
stringValue: t
}
}, this.status = t);
}
removeStatus(e) {
void 0 !== this.status && (e.properties.photon_status = {
operation: vU.OPERATION_REMOVE
}, this.status = void 0);
}
getCurrent() {
const e = this.party.get(), t = this.lobby.get();
return {
joinable: this.joinable,
inputType: void 0 !== this.inputType ? fU(this.inputType) : void 0,
appearOffline: this.appearOffline,
properties: {
maxPartySize: e.maxSize,
currentPartySize: e.currentSize,
partyJoinable: e.joinable,
maxLobbySize: t.maxSize,
currentLobbySize: t.currentSize,
lobbyJoinable: t.joinable,
crossplayEnabled: this.crossplayEnabled
}
};
}
}, [, NU] = js({
debugName: "presenceStateCacheState",
create: () => new CU
}), AU = Ks({
debugName: "userPresenceState",
default: {
properties: {}
}
});
function LU(e) {
for (const t of Object.values(e)) {
if ("operation" in t) return !0;
if (Object.keys(t).length > 0) return !0;
}
return !1;
}
var wU = e => {
const {PresenceSession: t} = Lh(), n = $T(), r = pb.availableSettings.includes(TU.Party);
PU();
const i = NU(), o = Rs(AU);
Us((({get: a}) => {
if (e) {
const e = a(EU), s = a(Yb), l = a(iO).get().data, c = a(bP).get().data, d = a(dO), u = a(bU);
let p = !0;
(!dg.isPartyEnabled && r || dg.isPartyEnabled) && (p = n.getSetting(1, 0));
const f = {
properties: {},
gameJoinTokens: {}
};
if (void 0 !== e ? i.setInputType(f, e) : i.removeInputType(f), u ? i.setStatus(f, u) : i.removeStatus(f), 
l) {
const e = l.joinable && l.members.size < l.maxSize;
i.party.setJoinable(f, e && p), i.party.setGameJoinToken(f, l.partyId), i.party.setMaxSize(f, l.maxSize), 
i.party.setCurrentSize(f, l.members.size), i.party.setCrossplayEnabled(f, l.crossPlayEnabled);
} else i.party.removeJoinable(f), i.party.removeGameJoinToken(f), i.party.removeMaxSize(f), 
i.party.removeCurrentSize(f), i.party.removeCrossplayEnabled(f);
if (c) {
const e = c.joinable && c.members.size < c.maxSize;
i.lobby.setJoinable(f, e && p), i.lobby.setGameJoinToken(f, c.lobbyId), i.lobby.setMaxSize(f, c.maxSize), 
i.lobby.setCurrentSize(f, c.members.size), i.lobby.setCrossplayEnabled(f, c.crossPlayEnabled);
} else i.lobby.removeJoinable(f), i.lobby.removeGameJoinToken(f), i.lobby.removeMaxSize(f), 
i.lobby.removeCurrentSize(f), i.lobby.removeCrossplayEnabled(f);
i.updateCrossplayEnabled(f, d), i.updateJoinable(f), qb() && i.setAppearOffline(f, s), 
LU(f) && (t.partialUpdatePresence({
presenceUpdate: f
}), o(i.getCurrent()));
}
}), [ e, t, i, r, o, n ]), H.useEffect((() => {
if (e) return () => {
i.clearCachedState();
};
}), [ e, i ]);
}, kU = {
small: Lc("marginBottom", hc(gu.DetailCardGameInfo.Body.marginBottom))
}, RU = Ec({
width: hc(128),
height: hc(128),
borderCenter: !0,
texture2Border: hc(gu.DetailCardGameInfo.Texture.borderRadius),
flexShrink: 0,
texture2: Lf({
radius: gu.DetailCardGameInfo.Texture.borderRadius
}),
marginEnd: hc(gu.DetailCardGameInfo.Texture.marginEnd)
}), xU = ({texture: e, title: t, body1: n, body2: r, inactive: i, style: o}) => {
const a = wc((() => ({
texture: e,
opacity: i ? gu.DetailCardGameInfoInactive.Texture.opacity : 1
})), [ e, i ]), s = i ? gu.DetailCardGameInfoInactive.Body1.color : gu.DetailCardGameInfo.Body1.color;
if (!(e || t || n || r)) return null;
let l = null;
return n && r ? l = H.createElement(H.Fragment, null, H.createElement(iv, {
useEllipsis: !0,
text: n,
color: s,
style: kU.small
}), H.createElement(iv, {
useEllipsis: !0,
text: r,
color: gu.DetailCardGameInfo.Body2.color
})) : n ? l = H.createElement(iv, {
text: sv(n, 72),
color: s,
style: kU.small
}) : r && (l = H.createElement(iv, {
text: sv(r, 72),
color: gu.DetailCardGameInfo.Body2.color,
style: kU.small
})), H.createElement("surface", {
style: [ Lc("flexDirection", "row"), o ]
}, e ? H.createElement("surface", {
style: [ a, RU ]
}) : null, H.createElement("surface", {
style: Lc("flex", 1)
}, t ? H.createElement(iv, {
useEllipsis: !0,
text: t,
color: gu.DetailCardGameInfo.Title.color,
style: kU.small
}) : null, l));
};
function BU(e) {
return 1 === e.gameJoinTokenTypes.length && e.gameJoinTokenTypes.includes("lobby");
}
var DU = Ii.observer((({body1: e, body2: t, productId: n, expired: r, gameInvite: i}) => {
const {data: o} = zM(n);
let a = o?.title;
i && a && BU(i) && (a = wh("PHOTON-SOCIAL_INVITE-DETAILS-CARD_GAME-LOBBY", {
"%gameName%": a
}));
const s = (l = o?.gameTitleLogo, jM(l, 128))?.url;
var l;
return H.createElement(xU, {
texture: s,
title: a,
body1: e,
body2: t,
inactive: r || i?.isRevoked,
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
});
})), FU = ({input: e, ...t}) => {
up(e);
const n = sc(e.keyBinding.primaryButton);
return H.createElement(Tu, {
buttonLabel: e.keyBinding.primaryButton.keyboardKeyLabel,
icon: n,
...t
});
}, MU = bh.InputBindings.Action, UU = ({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, ...r}) => {
const i = mM(e, t, n), o = wA(MU.OpenActionList);
return Uu({
keyBinding: o,
label: wh("PHOTON-SOCIAL_BUTTON_SEE-ACTIONS")
}), H.createElement(FU, {
label: wh("PHOTON-SOCIAL_BUTTON_SEE-ACTIONS"),
input: {
keyBinding: o,
callback: i
},
...r
});
};
function HU(e, t) {
return EP(Os(), e, t);
}
var VU = Ii.observer((({photonPlayerId: e, photonSessionId: t}) => {
const {data: n} = GM(e, t), {data: r} = bw(e, t), i = n?.properties?.currentLobbySize, o = n?.properties?.maxLobbySize, a = HU(e, t);
if (void 0 === r || void 0 === i || void 0 === o) return null;
let s;
return s = a ? wh("PHOTON-SOCIAL_LOBBY_YOUR") : i >= o ? wh("PHOTON-SOCIAL_LOBBY_FULL", {
"%currentLobbySize%": "" + i,
"%maxLobbySize%": "" + o
}) : r.joinable ? wh("PHOTON-SOCIAL_LOBBY_JOINABLE", {
"%currentLobbySize%": "" + i,
"%maxLobbySize%": "" + o
}) : wh("PHOTON-SOCIAL_LOBBY_NOT-JOINABLE", {
"%currentLobbySize%": "" + i,
"%maxLobbySize%": "" + o
}), H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_LOBBY_TITLE")
}, H.createElement(iv, {
text: s,
color: Xc.TextColorStandard.emphasized
}));
})), JU = Ii.observer((() => {
const e = ws(AU), {currentLobbySize: t, maxLobbySize: n, lobbyJoinable: r} = e.properties;
if (void 0 === r || void 0 === t || void 0 === n) return null;
const i = wh(r ? "PHOTON-SOCIAL_LOBBY_JOINABLE" : "PHOTON-SOCIAL_LOBBY_NOT-JOINABLE", {
"%currentLobbySize%": "" + t,
"%maxLobbySize%": "" + n
});
return H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_LOBBY_TITLE")
}, H.createElement(iv, {
text: i,
color: Xc.TextColorStandard.emphasized
}));
}));
function GU(e, t, n) {
return RP(VP(pw, XI(e, t)), n);
}
var zU = bh.Voip.VoipChannel;
function jU(e, t, n) {
if (e?.status !== bh.Voip.VoipStatus.Disabled && t?.status !== bh.Voip.VoipStatus.Disabled) switch (t?.channel) {
case zU.Party:
return wh(n ? "PHOTON-SOCIAL_VOICE_CHAT-PARTY" : "PHOTON-SOCIAL_PARTY_LIST_PRESENCE_PARTY-CHAT");

case zU.Game:
return wh(n ? "PHOTON-SOCIAL_VOICE_CHAT-TEAM" : "PHOTON-SOCIAL_PARTY_LIST_PRESENCE_TEAM-CHAT");
}
}
var qU = Ii.observer((({photonPlayerId: e, inlineTitle: t}) => {
const n = mb(), {data: r} = ND(n.photonPlayerId), {data: i} = ND(e), o = jU(r, i, t);
return o ? H.createElement(H.Fragment, null, t ? void 0 : H.createElement(iv, {
text: wh("PHOTON-SOCIAL_VOICE_TITLE"),
color: Xc.TextColorStandard.default,
style: Lc("marginBottom", hc(Xc.DimensionSpace.smallest))
}), H.createElement(iv, {
text: o,
color: Xc.TextColorStandard.emphasized,
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
})) : null;
})), YU = Ii.observer((({photonPlayerId: e, photonSessionId: t}) => {
const {data: n} = GM(e, t), {data: r} = GU(e, t, 0), i = n?.properties?.currentPartySize, o = n?.properties?.maxPartySize, a = KO(e, t);
if (void 0 === r?.joinable || void 0 === i || void 0 === o) return null;
let s;
return s = a ? wh("PHOTON-SOCIAL_PARTY_PARTY-YOUR") : i >= o ? wh("PHOTON-SOCIAL_PARTY_FULL", {
"%currentPartySize%": "" + i,
"%maxPartySize%": "" + o
}) : r.joinable ? wh("PHOTON-SOCIAL_PARTY_PARTY-JOINABLE", {
"%currentPartySize%": "" + i,
"%maxPartySize%": "" + o
}) : wh("PHOTON-SOCIAL_PARTY_PARTY-NOT-JOINABLE", {
"%currentPartySize%": "" + i,
"%maxPartySize%": "" + o
}), s ? H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_PARTY_TITLE")
}, H.createElement(iv, {
text: s,
style: Lc("marginBottom", hc(gu.DetailCardGameInfo.Body.marginBottom)),
color: Xc.TextColorStandard.emphasized
}), H.createElement(qU, {
photonPlayerId: e,
inlineTitle: !0
})) : null;
})), KU = Ii.observer((() => {
const e = ws(AU), {currentPartySize: t, maxPartySize: n, partyJoinable: r} = e.properties;
if (void 0 === r || void 0 === t || void 0 === n) return null;
let i;
return t > 1 ? i = wh(r ? "PHOTON-SOCIAL_PARTY_PARTY-JOINABLE" : "PHOTON-SOCIAL_PARTY_PARTY-NOT-JOINABLE", {
"%currentPartySize%": "" + t,
"%maxPartySize%": "" + n
}) : r && 1 === t && (i = wh("PHOTON-SOCIAL_PARTY_SOLO-JOINABLE")), i ? H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_PARTY_TITLE")
}, H.createElement(iv, {
text: i,
color: Xc.TextColorStandard.emphasized
})) : null;
})), WU = bh.PresenceSession.InputType, XU = (Ec({
position: "relative",
flexDirection: "row",
flexWrap: "nowrap"
}), Ec({
color: Xc.IconColorStandard.emphasized,
position: "absolute",
alignSelf: "center"
}), ({inputDevice: e}) => {
const t = e === WU.INPUT_TYPE_CONTROLLER ? wh("PHOTON-SOCIAL_PLAYER-DETAIL_INPUT_CONTROLLER") : wh("PHOTON-SOCIAL_PLAYER-DETAIL_INPUT_MOUSE-KEYBOARD");
return H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_PLAYER-DETAIL_INPUT_TITLE")
}, H.createElement(iv, {
text: t,
color: Xc.TextColorStandard.emphasized
}));
});
function QU(e, t) {
let n, r;
for (const e of t) if ("ANONYMOUS" !== e.toUpperCase()) {
r = e;
break;
}
if (r) {
const i = e.getItem(mL, UI({
eaPlayerId: r,
playerNetworkId: "EA"
}));
i.name && (n = t.length > 1 ? wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-MUTUALS", {
"%playerID%": hv(i, {
allowEllipsis: !0
}),
"%numberOfMutualFriends%": t.length - 1 + ""
}) : wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-SINGLE-MUTUALS", {
"%playerID%": hv(i, {
allowEllipsis: !0
})
}));
}
return n || (n = t.length > 1 ? wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-ANON-MUTUALS", {
"%numberOfMutualFriends%": t.length + ""
}) : wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-ANON-SINGLE-MUTUALS")), n;
}
var $U = Ii.observer((e => {
const {photonPlayerId: t} = e, n = AS().get().data?.get(t), r = Kk(), i = Os();
if (n) return null;
const o = r.getMutualFriends(t);
if (!o.length) return null;
const a = QU(i, o);
return H.createElement(iv, {
text: a,
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
});
})), ZU = Ii.observer((e => {
const {photonPlayerId: t, playerPresence: n} = e, {eaPlayerId: r} = JI(t), {data: i} = pM(t, !0), o = mb();
if (n?.isOnline || o.tokenInfo.userId === r || 0 === i.length) return null;
const a = i.slice(0, 2);
return H.createElement(H.Fragment, null, H.createElement(Zx, {
text: wh("PHOTON-SOCIAL_IDENTITIES_TITLE"),
style: [ Lc("marginBottom", hc(Xc.DimensionSpace.smallest)), Dd ]
}), a.map((e => H.createElement(_L, {
key: e.photonPlayerId,
player: e,
style: Lc("marginBottom", hc(Xc.DimensionSpace.smallest))
}))), H.createElement("surface", {
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger - Xc.DimensionSpace.smallest))
}));
}));
function eH(e) {
switch (e) {
case "EA":
return wh("PHOTON-SOCIAL_FRIENDS_LIST_PRESENCE_EA-APP");

case "PSN":
return wh("PHOTON-SOCIAL_FRIENDS_LIST_PRESENCE_LOCAL-PLATFORM-PS");

default:
return wh("PHOTON-SOCIAL_FRIENDS_LIST_PRESENCE_LOCAL-PLATFORM", {
"%localPlatform%": zb(e)
});
}
}
var tH = Ii.observer((({photonPlayerId: e, playerPresence: t}) => {
const n = Os(), r = mb(), {playerNetworkId: i, eaPlayerId: o} = JI(e);
if (r.photonPlayerId === e) return n.get(Yb) ? null : H.createElement(DU, {
productId: dg.productId
});
if (t?.isOnline) {
if (t.productId) {
let e, n;
return hU(t) && (e = t.activityDescription, n = t.activityDetails), H.createElement(DU, {
productId: t.productId,
body1: e,
body2: n
});
}
return t.productTitle ? H.createElement(XM, {
sectionTitle: t.productTitle,
textColor: Xc.TextColorStandard.emphasized
}) : H.createElement(XM, {
sectionTitle: eH(i),
textColor: Xc.TextColorStandard.emphasized
});
}
return n.getItem(Jv, e).data || o && n.get(yU)?.has(o) ? H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_PRESENCE_OFFLINE"),
textColor: Xc.TextColorStandard.emphasized
}) : null;
})), nH = Ii.observer((({photonPlayerId: e, photonSessionId: t, playerPresence: n}) => {
const r = mb();
return r.photonPlayerId === e || n?.productId ? dg.isPartyEnabled ? r.photonPlayerId === e ? H.createElement(KU, null) : H.createElement(YU, {
photonPlayerId: e,
photonSessionId: t
}) : r.photonPlayerId === e ? H.createElement(JU, null) : H.createElement(VU, {
photonPlayerId: e,
photonSessionId: t
}) : null;
})), rH = Ii.observer((({photonPlayerId: e, playerPresence: t, showIncompatibleWarning: n}) => {
const r = Os();
if (mb().photonPlayerId === e) {
const e = r.get(AU);
if (e.inputType) return H.createElement(XU, {
inputDevice: e.inputType,
key: "presence-input"
});
} else if (t?.isOnline && !n && void 0 !== t.inputType) return H.createElement(XU, {
inputDevice: t.inputType,
key: "presence-input"
});
return null;
})), iH = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = e, {playerNetworkId: r, name: i} = yL(t), {data: o} = gN(t, 0), a = iT(t), s = KM(t, n);
return o ? H.createElement(jD, null, H.createElement("surface", {
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
}, H.createElement(yv, {
name: i,
playerNetworkId: r,
icon: a ? Sf.STAR : void 0
}), s && H.createElement(iv, {
text: s?.text,
color: s?.color,
style: Lc("marginStart", gv + lv)
})), H.createElement(H.Fragment, null, e.children), H.createElement(UU, {
photonPlayerId: t,
photonSessionId: n,
telemetryInfo: e.telemetryInfo
})) : null;
})), oH = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = e, {data: r} = GM(t, n), i = ZM(t, n);
return H.createElement(iH, {
...e
}, H.createElement(tH, {
photonPlayerId: t,
playerPresence: r,
key: "product-player-details"
}), H.createElement(rH, {
photonPlayerId: t,
playerPresence: r,
showIncompatibleWarning: i,
key: "input-player-details"
}), H.createElement(nH, {
photonPlayerId: t,
photonSessionId: n,
playerPresence: r,
key: "party-lobby-status"
}), !e.excludeMutualFriends && H.createElement($U, {
photonPlayerId: t,
key: "mutual-friends"
}), H.createElement(ZU, {
photonPlayerId: t,
playerPresence: r,
key: "other-identities"
}), i && H.createElement($M, {
photonPlayerId: t,
photonSessionId: n,
key: "compatibility-warnings"
}), e.additionalDetails);
})), aH = ({photonPlayerId: e, photonSessionId: t, PlayerDetailsComponent: n = oH, telemetryInfo: r}) => {
const i = FM();
return H.useMemo((() => ({
handleFocus: () => {
i.setSelectedItem({
photonPlayerId: e,
photonSessionId: t,
PlayerDetailsComponent: n,
telemetryInfo: r
});
},
handleBlur: () => {
i.setSelectedItem((n => {
if (e !== n?.photonPlayerId || t !== n.photonSessionId) return n;
}));
}
})), [ i, e, t, n, r ]);
}, sH = Ec({
position: "absolute",
left: zx,
right: zx
}), lH = class {
constructor() {
this.sections = [];
}
addSection(e) {
this.sections.push(e);
}
getSections() {
return this.sections;
}
isEmpty(e) {
return !e || this.sections.every((t => !e[t.id]?.length));
}
size(e) {
let t = 0;
for (const n of this.sections) t += e?.[n.id]?.length ?? 0;
return t;
}
static createMergedSection(e, t) {
const n = new lH;
return n.sections.push(...e.getSections(), ...t.getSections()), n;
}
}, cH = Ii.observer((({focusId: e, title: t, narrationTitle: n, top: r, isExpanded: i, getShowDot: o, onToggle: a, itemsInSection: s, telemetryInfo: l}) => {
const c = wc((() => ({
top: r
})), [ r ]), d = o?.(), u = sB(), p = H.useRef(i);
return OT(l), Fu((({getKeyBindingText: e}) => {
const r = p.current !== i;
if (p.current = i, r) return wh(i ? "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-EXPAND-ACTION" : "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-COLLAPSE-ACTION", {
"%primaryKey%": e(u)
});
const o = "string" == typeof t ? t : n ?? "";
return wh(i ? "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-EXPANDED" : "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-COLLAPSED", {
"%headerLabel%": o,
"%sectionCount%": s + "",
"%primaryKey%": e(u)
});
}), [ i, t, n, s, u ], e), H.createElement(lB, {
title: t,
id: e,
focusId: e,
style: [ sH, c ],
isExpanded: i,
showDot: d,
onToggle: a
});
})), dH = ({top: e, forwardFocusId: t, children: n}) => {
const r = wc((() => ({
top: e
})), [ e ]);
return H.createElement("surface", {
style: [ sH, r ],
key: t
}, H.createElement(Gu, {
id: t
}, n));
}, uH = {
headingHeight: hc(76),
itemHeight: hc(76),
defaultWidth: oF,
scrollbarWidth: WD + hc(Xc.DimensionSpace.large)
};
function pH(e, t) {
return e + "[" + t.photonPlayerId + "]";
}
function fH(e, t) {
const {focusId: n, component: r} = t;
return H.createElement(dH, {
top: e,
forwardFocusId: n,
key: n
}, H.createElement(r));
}
function hH(e, t) {
const {focusId: n, itemWidth: r, titleString: i, isExpanded: o, getShowDot: a, onToggle: s, itemsLength: l, telemetryObject: c, narrationTitle: d} = t;
return H.createElement(cH, {
key: n,
top: e,
width: r,
focusId: n,
title: i,
isExpanded: o,
getShowDot: a,
onToggle: s,
itemsInSection: l,
telemetryInfo: c,
narrationTitle: d
});
}
function mH(e, t) {
const {forwardFocusId: n, component: r, props: i} = t;
return H.createElement(dH, {
top: e,
forwardFocusId: n,
key: n
}, H.createElement(r, i));
}
var [gH] = js({
debugName: "ScrollWindowPhotonPlayerRowsCacheState",
create: () => ({})
});
function yH(e, t, n, r) {
const i = r?.itemHeight ?? uH.itemHeight, o = r?.width ?? uH.defaultWidth, a = r?.prefetch, {history: s} = Wg(), {photonPlayerId: l, photonSessionId: c} = Yo(), d = Os(), u = H.useMemo((() => {
const n = c || l;
if (!n || !t) return;
const r = e => e.photonPlayerId === n, i = e.getSections();
for (let e = 0; e < i.length; e++) {
const o = i[e];
if ((t[o.id] ?? []).some(r)) return {
focusId: pH(o.focusId, {
photonPlayerId: n
}),
section: o
};
}
}), [ t, e, l, c ]);
return H.useEffect((() => {
if (u) return !1 === u.section.isExpanded && u.section.onToggle(), mr((() => d.get(il) === u.focusId), (() => s.replace(n.link())));
}), [ u, s, n, d ]), H.useMemo((() => {
if (!t) return {
rows: [],
height: 0
};
const n = new OM;
if (r?.cacheName && r.cacheKey) {
let e = r.cacheKey;
u && (e += "-" + u.focusId);
const t = d.get(gH), i = t[r.cacheName];
if (i && i.cacheKey === e) return i.rowFactory;
t[r.cacheName] = {
cacheKey: e,
rowFactory: n
};
}
const s = o - uH.scrollbarWidth, l = e.getSections();
if (n.addSpace(zx), r?.beforeListContent) {
const e = r.beforeListContent.focusId, t = {
focusId: e,
component: r.beforeListContent.component
};
n.addRow(uH.headingHeight, e, fH, t, void 0, void 0, hc(Xc.DimensionSpace.large));
}
for (let e = 0; e < l.length; e++) {
const {id: o, title: c, isExpanded: d, getShowDot: p, onToggle: f, component: h, afterItemsComponent: m, focusId: g, telemetryInfo: y, narrationTitle: I} = l[e], _ = t[o] ?? [];
if (0 === _.length) continue;
const b = "function" == typeof c ? c(_) : c, S = "function" == typeof y ? y(_) : y, v = {
focusId: g,
itemWidth: s,
titleString: b,
isExpanded: d,
getShowDot: p,
onToggle: f,
itemsLength: _.length,
telemetryObject: S,
narrationTitle: I
};
if (r?.flat || n.addRow(uH.headingHeight, g, hH, v, void 0, void 0, hc(Xc.DimensionSpace.medium)), 
r?.flat || d || u?.section.id === o) {
const e = _.length;
for (let t = 0; t < e; t++) {
const o = _[t], s = pH(g, o), l = e === t + 1 && !m && !r?.flat, c = {
forwardFocusId: s,
component: h,
props: o
};
n.addRow(i, s, mH, c, s === u?.focusId, a, l ? hc(Xc.DimensionSpace.large) : void 0);
}
if (m) {
const e = g + "[afterContent]", t = {
focusId: e,
component: m
};
n.addRow(uH.headingHeight, e, fH, t, void 0, void 0, hc(Xc.DimensionSpace.large));
}
}
}
return n;
}), [ d, t, o, e, r?.beforeListContent, r?.cacheKey, r?.cacheName, r?.flat, u, i, a ]);
}
function IH(e, t, n) {
const {delay: r = 1e3} = n || {}, [i, o] = H.useState(e);
H.useEffect((() => {
function n(t) {
return t.data !== e.data || t.timestamp !== e.timestamp ? e : t;
}
if (t.isEmpty(e.data)) {
const e = setTimeout((() => {
o(n);
}), r);
return () => {
clearTimeout(e);
};
}
o(n);
}), [ r, e, t ]);
const a = !e.data && (e.loading || !!e.uninitialized), s = !a && t.isEmpty(e.data);
return {
...e,
loading: a,
empty: s,
data: i.data,
sectionsState: t,
cacheKey: i.timestamp + t.getSections().map((({isExpanded: e}) => e)).join("-")
};
}
var _H = Ec({
maxHeight: hc(150),
layer: !0
}), bH = Ii.observer((({recentlyMetEncounter: e}) => {
const t = e.primaryContext, n = e.secondaryContext, r = XB(1e3 * (e.timestamp ?? 0));
return H.createElement(H.Fragment, null, H.createElement(Zx, {
text: wh("PHOTON-SOCIAL_RECENTLY-MET_LIST_DESCRIPTOR-CARD_TITLE"),
style: [ Lc("marginBottom", hc(Xc.DimensionSpace.smallest)), Dd ]
}), H.createElement("surface", {
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
}, t ? H.createElement(iv, {
text: t,
useEllipsis: !!n,
color: Xc.TextColorStandard.emphasized,
style: n ? Lc("marginBottom", hc(Xc.DimensionSpace.smallest)) : _H
}) : null, n ? H.createElement(iv, {
text: n,
useEllipsis: !!t,
color: Xc.TextColorStandard.emphasized,
style: Lc("marginBottom", hc(Xc.DimensionSpace.smallest))
}) : null, H.createElement(iv, {
text: r,
color: Xc.TextColorStandard.emphasized
})));
})), SH = Ii.observer((({playerLists: e}) => H.createElement(H.Fragment, null, H.createElement(Zx, {
text: wh("PHOTON-SOCIAL_FRIEND-REQUEST_DETAILS_SHARED-GROUPS_LABEL"),
style: [ Lc("marginBottom", hc(Xc.DimensionSpace.smallest)), Dd ]
}), H.createElement("surface", {
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
}, e.map(((e, t, {length: n}) => H.createElement(iv, {
key: e.localizedTitle,
text: e.localizedTitle,
color: Xc.TextColorStandard.emphasized,
style: t !== n - 1 ? Lc("marginBottom", hc(Xc.DimensionSpace.smallest)) : _H,
useEllipsis: !0
}))))))), vH = Ii.observer((e => {
const {recentlyMetEncounter: t, playerLists: n} = ON(e.photonPlayerId);
return H.createElement(iH, {
...e
}, t && H.createElement(bH, {
recentlyMetEncounter: t
}), n.length > 0 && H.createElement(SH, {
playerLists: n
}));
})), TH = (e, t, n, r = !1) => {
const i = e.length, o = e.map(((e, r) => ({
telemetryInfo: {
pg_id: "tab_friend_requests",
msg_id: n,
destination_name: n,
index: {
item_index: r + 1,
total_items: i
}
},
friendRequest: e,
photonPlayerId: UI({
eaPlayerId: e.eaPlayerId,
playerNetworkId: e[t]
}),
expiresInMs: LR(e)
})));
return r ? o.sort(((e, t) => {
const n = RR(e.friendRequest), r = RR(t.friendRequest);
return n && r ? e.expiresInMs - t.expiresInMs : n ? -1 : r ? 1 : t.friendRequest.createTimeMs - e.friendRequest.createTimeMs;
})) : o;
}, EH = Js({
debugName: "friendRequestsListState",
get: function({get: e}) {
const t = e(zv).get(), n = e(qv).get(), r = e(z_), i = t.data?.getSortedList(), o = n.data?.getSortedList(), a = i?.slice(0, 20) ?? [];
a.length < 20 && o && a.push(...o.slice(0, 20 - a.length));
const s = CI([ t, n, {
...CI(a.map((e => r.get(UI({
eaPlayerId: e.eaPlayerId,
playerNetworkId: "EA"
}))))),
error: void 0
} ]), l = !s.loading && !s.uninitialized;
return {
...s,
data: l && i && o ? {
0: TH(i, "sourcePlayerNetworkId", "received_requests", !0),
1: TH(o, "targetPlayerNetworkId", "sent_requests")
} : void 0
};
}
}), PH = bh.InputBindings.Action, OH = {
0: ju(),
1: ju()
}, CH = Ii.observer((e => {
const {id: t, photonPlayerId: n, friendRequest: r, primaryAction: i, secondaryAction: o, onFocus: a, showDot: s, metaInfo: l} = e, c = void 0, {name: d, playerNetworkId: u} = yL(n), p = mM(n, c, e.telemetryInfo), f = r.createTimeMs ? H.createElement(ZB, {
hideOnPressedOrFocused: !0,
timeMs: r.createTimeMs
}) : null, h = l ?? f, {handleFocus: m, handleBlur: g} = aH({
photonPlayerId: n,
photonSessionId: c,
telemetryInfo: e.telemetryInfo,
PlayerDetailsComponent: vH
}), y = H.useCallback((() => {
a?.(), m();
}), [ a, m ]), I = UB({
playerName: d
});
return H.createElement(MB, {
id: t,
narrationItem: I,
onFocus: y,
onBlur: g,
onClick: p,
primaryAction: i,
secondaryAction: o,
showDot: s
}, H.createElement(NB, {
playerNetworkId: u,
name: d
}), h);
})), NH = Ii.observer((e => {
const {friendRequest: t, photonPlayerId: n, expiresInMs: r} = e, i = void 0, o = OR(t), {setItemSeen: a, isItemSeen: s} = PR(), l = MN(n, i, e.telemetryInfo), c = UN(n, i, e.telemetryInfo), d = wA(PH.Primary), u = wA(PH.Secondary), p = H.useCallback((() => {
a(o);
}), [ a, o ]), f = wR(t);
let h;
f < 10 && (h = H.createElement($B, {
hideOnPressedOrFocused: !0,
text: 1 === f ? wh("PHOTON-SOCIAL_FRIEND-REQUESTS_VIOLATOR_EXPIRING_DAY-SINGLE") : wh("PHOTON-SOCIAL_FRIEND-REQUESTS_VIOLATOR_EXPIRING_DAYS-PLURAL", {
"%numberOfDays%": `${f}`
}),
color: Xc.TextColorStandard.warning
}));
let m = {
primaryAction: {
label: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_ACCEPT"),
keyBinding: d,
callback: l
},
secondaryAction: {
label: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_DECLINE"),
keyBinding: u,
callback: c
}
};
return gN(n).data || (m = {
primaryAction: {
label: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_DECLINE"),
keyBinding: d,
callback: c
}
}), l && c ? H.createElement(CH, {
id: "received-" + n,
photonPlayerId: n,
friendRequest: t,
expiresInMs: r,
...m,
onFocus: p,
showDot: !1 === s(o),
telemetryInfo: e.telemetryInfo,
metaInfo: h
}) : null;
})), AH = H.memo((e => {
const t = e.photonPlayerId, n = HN(t, void 0, e.telemetryInfo), r = wA(PH.Primary);
return n ? H.createElement(CH, {
friendRequest: e.friendRequest,
id: "sent-" + t,
photonPlayerId: t,
expiresInMs: e.expiresInMs,
primaryAction: {
label: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_CANCEL"),
keyBinding: r,
callback: n
},
telemetryInfo: e.telemetryInfo
}) : null;
}));
function LH() {
const {isExpanded: e, onToggle: t} = cB({
id: "friend-requests-section-received",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: PT("tab_friend_requests", "received_requests")
}), {isExpanded: n, onToggle: r} = cB({
id: "friend-requests-section-sent",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: PT("tab_friend_requests", "sent_requests")
}), {getUnseenCount: i} = PR();
return H.useMemo((() => {
const o = new lH;
return o.addSection({
id: 0,
isExpanded: e,
getShowDot: () => i() > 0,
onToggle: t,
title: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_SECTION-HEAD_RECEIVED"),
component: NH,
focusId: OH[0],
telemetryInfo: {
pg_id: "tab_friend_requests",
destination_name: "received_requests",
msg_id: "received_requests"
}
}), o.addSection({
id: 1,
isExpanded: n,
onToggle: r,
title: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_SECTION-HEAD_SENT"),
component: AH,
focusId: OH[1],
telemetryInfo: {
pg_id: "tab_friend_requests",
destination_name: "sent_requests",
msg_id: "sent_requests"
}
}), o;
}), [ e, n, i, t, r ]);
}
var wH = Ii.observer((() => {
const e = IH(ws(EH), LH()), t = j_(), n = H.useCallback((e => {
const n = YI(e.props.photonPlayerId);
t.get(n);
}), [ t ]), {rows: r} = yH(e.sectionsState, e.data, mg, {
prefetch: n
});
return H.createElement(JM, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(oD, {
headline: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_EMPTY-TITLE"),
body: wh("PHOTON-SOCIAL_FRIEND-REQUESTS_EMPTY-DESC"),
telemetryPageId: "tab_friend_requests"
}),
error: e.error,
rows: r,
prefetchRows: 20
});
})), kH = () => {
const {showNotification: e} = oP();
Ns((t => {
t && e(0, 0, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_FRIENDS_MAX-REQUEST"),
icon: Sf.WARNING,
iconColor: Xc.IconColorStandard.alert
}, {
telemetryInfo: {
pg_id: "tst_friend_max"
}
});
}), [ e ], Qk, !0);
}, RH = bh.InputBindings.Action, [xH, BH] = js({
debugName: "friendRequestsListUpdateEventState",
create: () => new os
}), DH = () => {
const e = Os(), t = Wg("main"), n = BH(), {showNotification: r} = oP(), i = mb(), {Invites: o} = Lh(), a = oP(), s = cy(), l = wA(RH.Primary), c = Xg("main");
H.useEffect((() => n.subscribe((async t => {
let n;
const d = await LI(e.get(TN).get());
if (Ts((() => d.data?.get(t.photonPlayerId)))) n = wh("PHOTON-SOCIAL-FRIEND-REQUEST-RECENTLY_MET_CONTEXT_ACTIONABLE_TOAST"); else if (zI(t.photonPlayerId)) {
const [r] = e.getItemUntracked(zO, t.photonPlayerId);
r && (n = wh("PHOTON-SOCIAL-FRIEND-REQUEST-PLAYER_LIST_CONTEXT_ACTIONABLE_TOAST", {
"%nameOfPlayerList%": r.localizedTitle
}));
}
r(1, 2, {
icon: Sf.ADD_USER,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_FRIENDS_INVITE-RECEIVE", {
"%senderPrimaryID%": hv(gP(e, t, i), {
allowEllipsis: !0
})
}),
secondaryText: n,
actions: [ {
id: "accept",
callback: () => {
const n = wN(e, o, "AcceptReceivedFriendInvite", a, t.photonPlayerId, s, c.history.location);
ET(s, n, {
pg_id: "tst_friendreq_received",
msg_id: "tst_friendreq_received",
destination_name: "actions",
option: "accept"
})();
},
label: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_ACCEPT"),
keyBinding: l
}, {
id: "decline",
callback: () => {
const n = wN(e, o, "DeclineReceivedFriendInvite", a, t.photonPlayerId, s, c.history.location, {
getSuccessMessage: RN,
successIcon: Sf.REMOVE
});
ET(s, n, {
pg_id: "tst_friendreq_received",
msg_id: "tst_friendreq_received",
destination_name: "actions",
option: "decline"
})();
},
label: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_DECLINE"),
keyBinding: l
} ]
}, {
telemetryInfo: {
pg_id: "tst_friendreq_received"
},
setting: 2
});
}))), [ c, r, i, l, t, n, e, o, a, s ]);
}, FH = class {
constructor() {
this.gates = new bs({}), this.teleport = (e, t) => {
this.gates.set(e, t);
}, this.clear = e => {
this.gates.delete(e);
};
}
}, [MH, UH] = js({
debugName: "portalState",
create: () => new FH
}), HH = {
ftue_lobby_intro: "tst_ftue_lobby_hidden",
ftue_settings_button: "ttip_adjust_notif_pref_hidden",
ftue_settings_notification: "tst_set_notif_hidden"
}, VH = Ly.custom((e => null !== e && "object" == typeof e && (!!e && Object.values(e).every((e => "boolean" == typeof e))))), JH = class {
constructor(e, t, n, r) {
this.moby = e, this.storage = t, this.notificationManager = n, this.skipFTUEFlow = r, 
this.completedState = void 0, this.showingToast = !1, this.seenState = {}, Cr(this, {
completedState: gt,
showingToast: gt,
setShowingToast: Ln,
isLoaded: bt
});
}
init(e) {
return this.storageKey = "ftue_" + e, this.loadStoredSettings();
}
setShowingToast(e) {
this.showingToast = e;
}
getCompletedState() {
return Ts((() => this.completedState));
}
seenThisSession(e) {
this.seenState[e] = !0;
}
get isInGamePlay() {
return this.notificationManager.isInGamePlay;
}
sendHiddenByExperimentTelemetry(e) {
const t = this.moby.get(ly), n = HH[e];
TT(t, {
pg_id: n,
msg_id: n,
status: "impression"
});
}
shouldShowFTUE(e, t) {
return Ts((() => Mv(this.moby, "ftue_0", Dv.ftue_0.SkipFTUE) ? (this.completedState?.[e] || (this.sendHiddenByExperimentTelemetry(t ?? e), 
this.setAsDone(e)), !1) : !(void 0 === this.completedState || this.isInGamePlay || this.completedState[e] || this.seenState[e] || this.skipFTUEFlow)));
}
get isLoaded() {
return !!this.completedState;
}
isDone(e) {
return this.completedState?.[e];
}
async setAsDone(e) {
return Ts((async () => {
this.completedState && (this.completedState[e] = !0, await this.saveSettings());
}));
}
async loadStoredSettings() {
if (this.storageKey) try {
const e = await this.storage.getItem(this.storageKey);
if (e) {
const t = JSON.parse(e);
VH.validate(t) ? this.completedState = t : this.completedState = {};
} else this.completedState = {};
} catch (e) {}
}
getSetting(e) {
return Ts((() => this.completedState?.[e] ?? !1));
}
async saveSettings() {
if (this.storageKey) return this.storage.setItem(this.storageKey, JSON.stringify(ur(this.completedState)));
}
}, GH = bh.InputBindings.Action, zH = hc(52), jH = hc(30), qH = Ec({
width: zH,
height: hc(27),
texture: Dc("/photon/quantum/misc/Bird_Beak-a49d6f3c.png"),
zOffset: 1,
flex: 1,
alignSelf: "flex-start",
justifyContent: "flex-start",
marginStart: jH
}), YH = Ec({
flexDirection: "row",
alignItems: "center"
}), KH = Ec({
marginStart: hc(Xc.DimensionSpace.smaller),
marginEnd: hc(Xc.DimensionSpace.smaller)
}), WH = yc({
GRADIENT: {
1: Dc("/photon/quantum/misc/Gradient_Primary-bd6f1a2d.png"),
2: Dc("/photon/quantum/misc/Gradient_Primary@2x-a247e5f9.png")
}
}), XH = ({id: e, onDismiss: t, message: n, onMount: r, showArrow: i, withOpenInfo: o}) => {
H.useEffect((() => (r?.(), () => {
t();
})), [ t, r ]);
const a = wA(GH.TogglePhoton), s = sc(a.primaryButton), l = a.primaryButton.keyboardKeyLabel, [c, d] = xE(wh("PHOTON-SOCIAL_FTUE_ACTIONABLE-TOAST_BUTTON-PRESS"));
return H.createElement(dE, null, H.createElement(sE, {
key: e,
style: Lc("color", Xc.ColorNeutral._0)
}, H.createElement(cE, null, H.createElement(yE, {
texture: Sf.LIGHT_BULB,
backgroundTexture: WH.GRADIENT,
color: Xc.TextColorStandard.emphasized
}), H.createElement("surface", null, H.createElement(_E, {
text: n,
color: Xc.TextColorInverted.default
}), o ? H.createElement("surface", {
style: YH
}, H.createElement(iv, {
text: c,
color: Xc.TextColorInverted.default
}), H.createElement(vu, {
style: KH,
inverted: !0,
buttonLabel: l,
icon: s
}), H.createElement(iv, {
text: d,
color: Xc.TextColorInverted.default
})) : void 0))), i && H.createElement("surface", {
style: qH
}));
}, [QH, $H] = js({
debugName: "FTUEManager",
create: e => {
const t = e.get(ih), n = e.get(iP), r = Ab.disableFTUE || !Ub.UseFTUE(t.bindings.Utilities);
return {
ftueManager: new JH(e, t.localStorage, n.notificationManager, r),
showFTUENotification: (e, r, i, o, a) => {
const {telemetryInfo: s, showAsToast: l, attachToSurface: c, withOpenInfo: d} = a ?? {}, u = l ? i : () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !0
}), i();
}, p = l ? r : () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !1
}), r();
}, f = {
telemetryInfo: s,
screenTimeInSec: 8
};
l && (f.appearance = {
attachToSurface: c,
animation: 1,
animationOffset: hc(Xc.DimensionSpace.small),
portalId: "InsideContent"
}), n.showNotificationComponent(0, 1, (t => H.createElement(XH, {
...t,
type: e,
message: o,
onDismiss: p,
onMount: u,
showArrow: !!l,
withOpenInfo: d
})), f, {
text: o
});
}
};
}
}), ZH = Js({
debugName: "hasOnlineFriendState",
get: function({get: e}) {
const t = e(QC), n = (t.data?.[0].length ?? -1) > 0;
return {
...t,
data: t.data ? n : void 0
};
}
}), eV = () => {
const {ftueManager: e, showFTUENotification: t} = $H(), {data: n} = ws(ZH), r = H.useMemo((() => !!e.shouldShowFTUE("ftue_lobby_intro") && n), [ e, n ]);
H.useEffect((() => {
if (r) {
t("ftue_lobby_intro", (async () => {
await e.setAsDone("ftue_lobby_intro");
}), (() => {}), wh("PHOTON-SOCIAL_FTUE_INVITE-TO-LOBBY_TOAST"), {
telemetryInfo: {
pg_id: "tst_ftue_lobby"
}
});
}
}), [ e, r, t ]);
}, tV = ({children: e, delay: t}) => {
const [n, r] = H.useState(!1);
return H.useEffect((() => {
let e = setTimeout((() => {
e = void 0, r(!0);
}), t);
return () => {
e && clearTimeout(e);
};
}), [ r, t ]), n ? H.createElement(H.Fragment, null, e) : null;
}, nV = Ec({
maxWidth: hc(525),
flexShrink: 0,
flexDirection: "row",
alignItems: "center"
}), rV = Ec({
textEllipsis: !0
}), iV = Ec({
marginStart: hc(Xc.DimensionSpace.small),
marginEnd: hc(Xc.DimensionSpace.small)
}), oV = ({texts: e, style: t, ...n}) => {
const r = e.filter((e => "string" == typeof e || !!e?.text));
return r.length ? H.createElement("surface", {
style: nV
}, r.map(((e, r) => {
const i = "string" == typeof e ? e : e.text, o = "string" == typeof e ? void 0 : e.color;
return H.createElement(H.Fragment, {
key: i
}, r > 0 ? H.createElement(TB, {
...n,
text: "-",
color: Xc.TextColorStandard.default,
style: iV
}) : void 0, H.createElement(TB, {
...n,
text: i,
color: o,
style: [ rV, t ]
}));
}))) : null;
}, aV = Ec({
width: hc(Xc.DimensionSpace.largest),
height: hc(Xc.DimensionSpace.larger),
marginStart: hc(Xc.DimensionSpace.small)
}), sV = Ii.observer((() => {
const {isFocused: e} = zp();
return H.createElement("surface", {
style: [ aV, Lc("texture", e ? Sf.INCOMPATIBLE_WHITE : Sf.INCOMPATIBLE_NEUTRAL) ]
});
})), lV = bh.InputBindings.Action;
function cV(e, t, n) {
const r = Os();
return H.useCallback(((i, o, a) => {
const s = !n && o?.isPartyJoinable || o?.isPartyGameInvite, l = !n && o?.isLobbyJoinable || o?.isLobbyGameInvite;
if (!s && !l) return;
let c = {};
return s && l ? c = {
label: wh("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_JOIN"),
telemetryOption: "join_party_and_lobby"
} : s ? c = {
label: wh("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_PARTY-JOIN"),
telemetryOption: "join_party"
} : l && (c = {
label: wh("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_LOBBY-JOIN"),
telemetryOption: "join_lobby"
}), {
label: c.label,
keyBinding: i,
callback: () => AT(r, e, t, o?.joinAction, {
...a(),
status: "click",
option: c.telemetryOption
})()
};
}), [ n, r, e, t ]);
}
function dV(e, t) {
const {data: n} = gN(e), {isActionTaken: r, performAction: i} = Lk(e), o = Os();
return H.useCallback(((a, s, l) => {
let c = "invite_to_combo";
s.data?.isMyPartyJoinable && !s.data?.isMyLobbyJoinable ? c = "invite_to_party" : !s.data?.isMyPartyJoinable && s.data?.isMyLobbyJoinable && (c = "invite_to_lobby");
const d = async () => {
n && n.eaPlayerId && n.personaId && await i();
};
return {
label: (u = s.data?.gameInviteTypes ?? [], u.includes("lobby") ? wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-LOBBY") : wh("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-PARTY")),
keyBinding: a,
callback: () => AT(o, e, t, d, {
...l(),
status: "click",
option: c
})(),
disabled: r,
disabledContent: H.createElement(wB, {
text: wh("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_INVITE-SENT")
})
};
var u;
}), [ r, o, e, t, n, i ]);
}
function uV(e, t, n) {
const {navigate: r} = Wg("main"), i = aM(e, t), o = KO(e, t), a = lM(e, t), s = wA(lV.Primary), l = wA(lV.Secondary), c = cV(e, t)(s, a, n), d = dV(e, t);
return H.useMemo((() => {
const e = e => o ? {
label: wh("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_VIEW-PARTY"),
keyBinding: e,
callback: () => {
r(uw.link());
}
} : void 0;
return a?.canJoin ? i.data?.canInvite ? {
primaryAction: c,
secondaryAction: d(l, i, n)
} : {
primaryAction: c
} : i.data?.canInvite ? {
primaryAction: d(s, i, n),
secondaryAction: e(l)
} : {
primaryAction: e(l)
};
}), [ a, i, l, o, r, c, d, n, s ]);
}
var pV = bh.InputBindings.Action;
function fV(e, t, n) {
const {eaPlayerId: r} = JI(e), i = H.useMemo((() => n && {
...n,
msg_id: "player_details_card"
}), [ n ]), o = nR(e, i), a = GF(e, t, i), s = zF(e, t, i), l = AS().get().data?.has(e), c = iT(e), d = Yv().get(), u = !!r && d.data?.has(r), p = jv().get(), f = !!r && p.data?.has(r);
let h, m;
const g = !l && !u && !f;
g ? h = wh("PHOTON-SOCIAL_BUTTON_REQUEST-ADD") : c ? h = wh("PHOTON-SOCIAL_PLAYER-ACTIONS_REMOVE-FAVORITE") : (h = wh("PHOTON-SOCIAL_PLAYER-ACTIONS_ADD-FAVORITE"), 
m = Sf.STAR);
return {
action: H.useCallback((async () => g ? o.performAction() : c && s ? s() : !c && a ? a() : void 0), [ a, s, o, c, g ]),
label: h,
icon: m
};
}
var hV = Ec({
backgroundColor: gu.ListControlBase.Divider.backgroundColor,
height: hc(2),
flex: 1,
marginBottom: hc(Xc.DimensionSpace.larger)
}), mV = Ec({
marginBottom: hc(Xc.DimensionSpace.larger)
}), gV = () => H.createElement("surface", {
style: hV
}), yV = Ec({
alignSelf: "stretch",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "flex-start"
}), IV = Ec({
marginStart: hc(Xc.DimensionSpace.smallest),
marginTop: hc(2),
minWidth: hc(32),
width: hc(32),
height: hc(32)
}), _V = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, ...r}) => {
const {label: i, action: o, icon: a} = fV(e, t, n), s = wA(pV.Tertiary);
return Uu({
keyBinding: s,
label: i
}), H.createElement(H.Fragment, null, H.createElement(gV, null), H.createElement("surface", {
style: yV
}, H.createElement(FU, {
style: mV,
label: i,
input: {
keyBinding: s,
callback: o
},
textStyle: Lc("textEllipsis", !0),
...r
}), !!a && H.createElement("surface", {
style: [ IV, Lc("texture", a) ]
})));
})), bV = e => {
const {photonPlayerId: t, photonSessionId: n} = e, {eaPlayerId: r} = JI(t), i = !!r && H.createElement(_V, {
photonPlayerId: t,
photonSessionId: n,
telemetryInfo: e.telemetryInfo
});
return H.createElement(oH, {
...e,
excludeMutualFriends: !0,
additionalDetails: i
});
}, SV = bh.InputBindings.Action;
function vV(e, t, n) {
const r = Os();
return uV(e, t, H.useCallback((() => ({
...n,
context: {
...n.context,
...cM(r)
}
})), [ r, n ]));
}
var TV = Ii.observer((({photonPlayerId: e, photonSessionId: t, setFriendActions: n, telemetryInfo: r}) => {
const i = vV(e, t, r);
return H.useEffect((() => {
n(i);
}), [ n, i ]), null;
})), EV = ({photonPlayerId: e, photonSessionId: t, setHandlers: n, telemetryInfo: r}) => {
const i = aH({
photonPlayerId: e,
photonSessionId: t,
telemetryInfo: r,
PlayerDetailsComponent: bV
});
return H.useEffect((() => {
n(i);
}), [ n, i ]), null;
}, PV = {
pg_id: "tab_friends",
destination_name: "online_friends",
option: "see_player_actions"
}, OV = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = WI(e.photonPlayerId), [r, i] = H.useState(void 0), [o, a] = H.useState(void 0), {data: s} = gN(t), l = mM(t, n, PV), c = ZM(t, n), {name: d, playerNetworkId: u} = yL(t), p = YM(t, n), f = KM(t, n), h = UB({
playerName: d,
supplementaryText: p
}), m = iT(t);
if (!s) return null;
const g = !(!r?.primaryAction && !r?.secondaryAction);
return H.createElement(MB, {
id: "onlineFriend-" + t,
narrationItem: h,
onFocus: o?.handleFocus,
onBlur: o?.handleBlur,
onClick: l,
...r
}, H.createElement(tV, {
delay: 500
}, H.createElement(TV, {
photonPlayerId: t,
photonSessionId: n,
setFriendActions: i,
telemetryInfo: e.telemetryInfo
}), H.createElement(EV, {
photonPlayerId: t,
photonSessionId: n,
setHandlers: a,
telemetryInfo: e.telemetryInfo
})), H.createElement(NB, {
playerNetworkId: u,
name: d,
icon: m ? Sf.STAR : void 0
}), H.createElement(oV, {
hideOnPressedOrFocused: g,
texts: [ p, f ]
}), c && H.createElement(sV, null));
})), CV = {
pg_id: "tab_friends",
destination_name: "offline_friends",
option: "see_player_actions"
}, NV = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const [n, r] = H.useState(void 0), [i, o] = H.useState(void 0), a = mb(), {playerNetworkId: s} = JI(e), {data: l} = gN(e), {data: c} = bN(e), d = _N(e), u = c?.photonPlayerId || e;
let p;
p = s !== a.personaInfo.playerNetworkId ? u : e;
const f = void 0, h = mM(p, f, CV), m = yL(p), g = UB({
playerName: m.name
}), y = iT(p);
if (!l) return null;
const I = !(!i?.primaryAction && !i?.secondaryAction);
return H.createElement(MB, {
id: "offlineFriend-" + e,
narrationItem: g,
onFocus: n?.handleFocus,
onBlur: n?.handleBlur,
onClick: h,
...i
}, H.createElement(tV, {
delay: 500
}, H.createElement(TV, {
photonPlayerId: p,
photonSessionId: f,
setFriendActions: o,
telemetryInfo: t
}), H.createElement(EV, {
photonPlayerId: p,
photonSessionId: f,
setHandlers: r,
telemetryInfo: t
})), H.createElement(NB, {
playerNetworkId: m.playerNetworkId,
name: m.name,
icon: y ? Sf.STAR : void 0
}), d?.mostRecentlyLoggedInPersonaDate ? H.createElement(ZB, {
hideOnPressedOrFocused: I,
timeMs: 1e3 * d.mostRecentlyLoggedInPersonaDate
}) : null);
})), AV = {
pg_id: "tab_friends",
destination_name: "blocked",
option: "see_player_actions"
}, LV = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const [n, r] = H.useState(void 0), i = void 0, o = Os(), {data: a} = aD(e), s = mM(e, i, AV), {name: l, playerNetworkId: c} = yL(e), {unblock: d} = mD(), u = wA(SV.Primary), p = H.useMemo((() => ({
keyBinding: u,
label: wh("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_UNBLOCK"),
callback: AT(o, e, i, (() => d(e)), t && {
...t,
msg_id: t.destination_name,
option: "unblock"
})
})), [ e, i, u, t, d, o ]), f = UB({
playerName: l
});
return a ? H.createElement(MB, {
id: "blockedPlayer-" + e,
narrationItem: f,
onFocus: n?.handleFocus,
onBlur: n?.handleBlur,
onClick: s,
primaryAction: p
}, H.createElement(tV, {
delay: 500
}, H.createElement(EV, {
photonPlayerId: e,
photonSessionId: i,
setHandlers: r,
telemetryInfo: t
})), H.createElement(NB, {
playerNetworkId: c,
name: l
}), !!a.createTimeMs && H.createElement(ZB, {
hideOnPressedOrFocused: !0,
timeMs: a.createTimeMs
})) : null;
}));
function wV(e) {
const [t, n] = Ds($C), r = RP(jS().get(), e);
return H.useEffect((() => {
!t || r.loading || r.uninitialized || n(!1);
}), [ r.loading, r.uninitialized, n, t ]), {
...r,
loading: t
};
}
function kV(e) {
const t = wV(e), n = RP(HP(QC), e), r = CI([ n, t ]);
return {
...r,
timestamp: n.timestamp,
data: r.loading ? void 0 : n.data
};
}
var RV = {
0: ju(),
1: ju(),
2: ju()
};
function xV() {
const {isExpanded: e, onToggle: t} = cB({
id: "friend-section-online",
onToggleCallback: PT("tab_friends", "online_friends"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: n, onToggle: r} = cB({
id: "friend-section-offline",
onToggleCallback: PT("tab_friends", "offline_friends"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: i, onToggle: o} = cB({
id: "friend-section-blocked",
onToggleCallback: PT("tab_friends", "blocked"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
});
return H.useMemo((() => {
const a = new lH;
return a.addSection({
id: 0,
isExpanded: e,
onToggle: t,
title: wh("PHOTON-SOCIAL_FRIENDS_LIST_SECTION-HEAD_ONLINE-ALL"),
component: OV,
focusId: RV[0],
telemetryInfo: {
pg_id: "tab_friends",
destination_name: "online_friends",
msg_id: "online_friends"
}
}), a.addSection({
id: 1,
isExpanded: n,
onToggle: r,
title: wh("PHOTON-SOCIAL_FRIENDS_LIST_SECTION-HEAD_OFFLINE"),
component: NV,
focusId: RV[1],
telemetryInfo: {
pg_id: "tab_friends",
destination_name: "offline_friends",
msg_id: "offline_friends"
}
}), a.addSection({
id: 2,
isExpanded: i,
onToggle: o,
title: wh("PHOTON-SOCIAL_FRIENDS_LIST_SECTION-HEAD_BLOCKED"),
component: LV,
focusId: RV[2],
telemetryInfo: {
pg_id: "tab_friends",
destination_name: "blocked",
msg_id: "blocked"
}
}), a;
}), [ i, e, n, o, t, r ]);
}
var BV = Ks({
debugName: "metricSentThisGameSession",
default: !1
}), DV = e => {
const t = Os(), n = H.useRef(Date.now());
H.useEffect((() => {
Ts((() => {
if (!t.get(BV) && !e) {
const e = (() => {
const e = t.get(QC);
return e.data ? e.data[0].length + e.data[1].length : -1;
})();
t.get(Jg).addEvent({
eventType: "photon_page_view",
num_of_friends: e,
ldur_ms: Date.now() - n.current
}), t.set(BV, !0);
}
}));
}), [ e, t ]);
}, FV = Ii.observer((() => {
const e = IH(kV(8e3), xV()), {rows: t} = yH(e.sectionsState, e.data, hg, {
cacheName: "friends-page",
cacheKey: e.cacheKey
});
return eV(), DV(e.loading), H.createElement(JM, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(oD, {
headline: wh("PHOTON-SOCIAL_FRIENDS_EMPTY_TITLE"),
body: wh("PHOTON-SOCIAL_FRIENDS_LIST_EMPTY_DESC"),
telemetryPageId: "tab_friends"
}),
error: e.error,
rows: t
});
})), [MV, UV] = js({
debugName: "friendListUpdateEventState",
create: () => new os
}), HV = () => {
const e = UV(), {showNotification: t} = oP(), n = mb(), r = Os();
H.useEffect((() => e.subscribe((e => {
t(2, 2, {
icon: Sf.AVATAR,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIENDS_ADD-CONFIRM", {
"%primaryID%": hv(gP(r, e, n), {
allowEllipsis: !0
})
})
}, {
setting: 3,
telemetryInfo: {
pg_id: "tst_friendreq_accepted"
}
});
}))), [ r, e, n, t ]);
}, VV = () => {
const e = cy();
return H.useEffect((() => {
TT(e, {
pg_id: "tab_game_invites",
status: "impression",
destination_name: "empty_state",
msg_id: "empty_state"
});
}), [ e ]), H.createElement(eD, {
headline: wh("PHOTON-SOCIAL_INVITES_EMPTY_TITLE"),
body: wh("PHOTON-SOCIAL_INVITES_EMPTY_DESC")
});
}, JV = Ii.observer((({productId: e, productTitle: t, ...n}) => {
const {data: r} = zM(e), i = r?.title ?? t;
return i ? H.createElement($B, {
...n,
text: i
}) : null;
})), GV = ({gameInvite: e, presence: t}) => {
const n = (new Date).getTime() < e.expiryTimestampMs, r = !n && !e.isRevoked, i = XB(e.createdTimestampMs), o = wh("PHOTON-SOCIAL_INVITE-DETAILS-CARD_TIME-RECEIVED", {
"%time%": i.toLowerCase()
}), a = XB(e.expiryTimestampMs), s = wh("PHOTON-SOCIAL_INVITE-DETAILS-CARD_TIME-EXPIRED", {
"%time%": a.toLowerCase()
}), l = t?.properties?.currentPartySize, c = t?.properties?.maxPartySize;
let d, u;
if (n ? void 0 !== l && void 0 !== c && (d = wh("PHOTON-SOCIAL_INVITE-DETAILS-CARD_PARTY-SIZE", {
"%currentPartySize%": "" + l,
"%maxPartySize%": "" + c
})) : d = s, n) u = o; else {
u = r ? wh("PHOTON-SOCIAL_INVITE-DETAILS-CARD_EXPIRED-TIMED-OUT") : void 0;
}
return H.createElement(DU, {
productId: e.senderProductId,
body1: d,
body2: u,
expired: r,
gameInvite: e
});
};
function zV(e) {
const t = e.gameJoinTokenTypes.includes("party"), n = e.gameJoinTokenTypes.includes("lobby"), r = t && n;
return wh(t && !r ? "PHOTON-SOCIAL_INVITE-DETAILS-CARD_TITLE" : n && !r ? "PHOTON-SOCIAL_LOBBY-INVITE-DETAILS-CARD_TITLE" : "PHOTON-SOCIAL_COMBO-INVITE-DETAILS-CARD_TITLE");
}
var jV = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n, telemetryInfo: r} = e, {data: i} = GM(t, n), {data: o} = Yw(t), {name: a, playerNetworkId: s} = yL(t), l = hO(t, n);
if (!o) return null;
let c, d;
if (i?.isOnline) {
const e = hU(i);
c = e ? i.activityDescription : void 0, d = e ? i.activityDetails : void 0;
} else c = wh("PHOTON-SOCIAL_PRESENCE_OFFLINE");
return H.createElement(jD, null, H.createElement(zN, {
text: zV(o),
color: Xc.TextColorStandard.emphasized,
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
}), H.createElement(GV, {
gameInvite: o,
presence: i
}), H.createElement(iv, {
text: wh("PHOTON-SOCIAL_INVITE-DETAILS-CARD_SENDER-INFO", {
"%senderPrimaryID%": hv({
name: a,
playerNetworkId: s
}, {
allowEllipsis: !0
})
}),
color: Xc.TextColorStandard.emphasized,
style: Lc("marginBottom", hc(Xc.DimensionSpace.smaller))
}), c ? H.createElement(iv, {
text: c,
color: Xc.TextColorStandard.default,
style: d ? Lc("marginBottom", hc(Xc.DimensionSpace.smallest)) : void 0
}) : null, d ? H.createElement(iv, {
text: d,
color: Xc.TextColorStandard.default
}) : null, l && H.createElement($M, {
isReceivedGameInvite: !0,
photonPlayerId: t,
photonSessionId: n,
style: Lc("marginTop", hc(Xc.DimensionSpace.larger))
}), H.createElement(UU, {
photonPlayerId: t,
telemetryInfo: r,
photonSessionId: n,
style: Lc("marginTop", hc(Xc.DimensionSpace.larger))
}));
})), [qV, YV] = Is("GameInvitesSeenStatus");
function KV(e, t) {
e.length && e.push(H.createElement(xB, {
key: "divider" + e.length
})), e.push(t);
}
var WV = Ii.observer((({photonPlayerId: e, expired: t, forAnotherGame: n, gameInvite: r, seenState: i, telemetryInfo: o}) => {
const a = r?.senderProductId ?? dg.productId, s = void 0, l = H.useMemo((() => ({
...o,
context: {
tpid: a
}
})), [ a, o ]), c = mM(e, s, l), d = ak(e, s, l), {name: u, playerNetworkId: p} = yL(e), f = hO(e, s), {handleFocus: h, handleBlur: m} = aH({
photonPlayerId: e,
photonSessionId: s,
PlayerDetailsComponent: jV,
telemetryInfo: l
}), g = Fw(r), y = H.useCallback((() => {
i?.setItemSeen(g), h();
}), [ h, g, i ]), I = [];
(t || n) && KV(I, H.createElement(JV, {
hideOnPressedOrFocused: !0,
productId: r.senderProductId,
key: "productTitle",
style: Lc("marginEnd", hc(Xc.DimensionSpace.small))
})), t || KV(I, H.createElement(ZB, {
timeMs: r.createdTimestampMs,
key: "fromNow",
style: Lc("marginStart", hc(Xc.DimensionSpace.small))
}));
const _ = UB({
playerName: u
});
return H.createElement(MB, {
id: e,
narrationItem: _,
onFocus: y,
onBlur: m,
onClick: c,
showDot: !1 === i?.isItemSeen(g),
...d
}, H.createElement(NB, {
playerNetworkId: p,
name: u
}), H.createElement(BB, {
hideOnPressedOrFocused: !0
}, H.createElement(H.Fragment, null, I, f && H.createElement(sV, null))));
})), XV = H.memo((({photonPlayerId: e, gameInvite: t, telemetryInfo: n}) => {
const {gameInvites: r} = YV();
return H.createElement(WV, {
photonPlayerId: e,
gameInvite: t,
telemetryInfo: n,
seenState: r
});
})), QV = H.memo((({photonPlayerId: e, gameInvite: t, telemetryInfo: n}) => {
const {crossGameInvites: r} = YV();
return H.createElement(WV, {
photonPlayerId: e,
gameInvite: t,
telemetryInfo: n,
seenState: r,
forAnotherGame: !0
});
})), $V = H.memo((({photonPlayerId: e, gameInvite: t, telemetryInfo: n}) => H.createElement(WV, {
photonPlayerId: e,
gameInvite: t,
telemetryInfo: n,
expired: !0
}))), ZV = Js({
debugName: "PlayersByGameInviteSection",
get: function({get: e}) {
const t = e(xw).get(), n = e(z_);
let r;
return t.data && (r = Gw(n, t.data, !1)), {
...t.toProps(),
data: r
};
}
}), eJ = e => e.photonPlayerId, tJ = e => {
const t = RP(HP(ZV), e), n = yN(H.useMemo((() => {
return t.data ? [ ...(e = t.data)[2].map(eJ), ...e[3].map(eJ), ...e[4].map(eJ) ] : [];
var e;
}), [ t.data ]), e);
return {
...CI([ t, n ]),
data: t.data
};
}, nJ = fg("/game-invite/:photonPlayerId?", "tab_game_invites"), rJ = {
2: ju(),
3: ju(),
4: ju()
};
function iJ(e = "tab_game_invites") {
const {isExpanded: t, onToggle: n} = cB({
id: "game-invite-section-current-game-invites",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: PT(e, "current_game_invites")
}), {isExpanded: r, onToggle: i} = cB({
id: "game-invite-section-ea-game-invites",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: PT(e, "other_game_invites")
}), {isExpanded: o, onToggle: a} = cB({
id: "game-invite-section-expired-invites",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: PT(e, "expired_game_invites")
}), {gameInvites: s, crossGameInvites: l} = YV(), {data: c} = zM(dg.productId), d = wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_INVITES_GAME-CURRENT", {
"%currentGame%": c?.title ?? wh("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
});
return H.useMemo((() => {
const c = new lH;
return c.addSection({
id: 2,
isExpanded: t,
getShowDot: () => s.getUnseenCount() > 0,
onToggle: n,
title: d,
component: XV,
focusId: rJ[2],
telemetryInfo: {
pg_id: e,
destination_name: "current_game_invites",
msg_id: "current_game_invites"
}
}), c.addSection({
id: 3,
isExpanded: r,
getShowDot: () => l.getUnseenCount() > 0,
onToggle: i,
title: wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_INVITES_GAME-OTHER"),
component: QV,
focusId: rJ[3],
telemetryInfo: {
pg_id: e,
destination_name: "other_game_invites",
msg_id: "other_game_invites"
}
}), c.addSection({
id: 4,
isExpanded: o,
onToggle: a,
title: wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_INVITES_EXPIRED"),
component: $V,
focusId: rJ[4],
telemetryInfo: {
pg_id: e,
destination_name: "expired_game_invites",
msg_id: "expired_game_invites"
}
}), c;
}), [ e, t, n, d, r, i, o, a, s, l ]);
}
var oJ = Ii.observer((() => {
const e = IH(tJ(8e3), iJ()), {rows: t} = yH(e.sectionsState, e.data, nJ);
return H.createElement(JM, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(VV, null),
error: e.error,
rows: t
});
})), [aJ, sJ] = Is("NotificationStepsContext"), lJ = ({children: e, initialStep: t}) => {
const [n, r] = H.useState(t), i = H.useMemo((() => ({
currentStep: n,
setCurrentStepCallback: e => () => r(e)
})), [ n ]);
return H.createElement(aJ.Provider, {
value: i
}, e);
}, cJ = ({children: e, id: t}) => {
const {currentStep: n} = sJ(), [r, i] = H.useState(n === t), {timeout: o} = Cu(), a = ZT(r ? 1 : 0);
return H.useEffect((() => {
n !== t ? (a.to(0, aE), o("opacityOutDone", (() => {
i(!1);
}), aE.duration)) : (o("showContent", (() => {
i(!0);
}), aE.duration), o("opacityInStart", (() => {
a.to(1, aE);
}), 1.75 * aE.duration));
}), [ n, t, a, o ]), H.createElement("surface", {
style: a.propStyle("opacity")
}, r ? e : void 0);
}, dJ = ({confirmAction: e, dismiss: t, narrationItem: n}) => H.createElement(H.Fragment, null, H.createElement(cE, {
style: eE
}, H.createElement(fE, {
texture: Sf.EXIT
}), H.createElement(_E, {
text: e.title
})), H.createElement(SE, {
style: eE
}, H.createElement(fE, {
texture: Sf.INFORMATION
}), H.createElement(_E, {
text: e.description ?? wh("PHOTON-SOCIAL_NOTIFICATION_INVITE-DESC_LEAVE-PARTY")
})), H.createElement(Jf, {
id: "notificationConfirmStep",
isolate: !0
}, H.createElement(vE, null, H.createElement(TE, {
variant: 0,
id: "confirm",
text: wh("BUTTON_CONFIRM"),
callback: e.callback,
narration: {
buttonNumber: 1,
buttonTotal: 2
},
narrationItem: n
}), H.createElement(TE, {
style: tE,
id: "cancel",
text: wh("BUTTON_CANCEL"),
callback: t,
narration: {
buttonNumber: 2,
buttonTotal: 2
},
narrationItem: n
})))), uJ = ({actions: e, onDecline: t, narrationItem: n}) => H.createElement(vE, null, e.map(((t, r) => H.createElement(TE, {
key: t.id,
narration: {
buttonNumber: r + 1,
buttonTotal: e.length + 1
},
narrationItem: n,
variant: 0 === r ? 0 : void 0,
id: t.id,
style: 0 !== r ? tE : void 0,
text: t.label,
callback: t.callback
}))), H.createElement(TE, {
id: "decline",
text: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_DECLINE"),
callback: t,
style: tE,
narration: {
buttonNumber: e.length + 1,
buttonTotal: e.length + 1
},
narrationItem: n,
variant: 0 === e.length ? 0 : 1
})), pJ = Ec({
justifyContent: "center",
alignItems: "center",
padding: hc(Xc.DimensionSpace.smallest)
}), fJ = (e, t, n) => {
const r = e.gameJoinTokenTypes.includes("party"), i = e.gameJoinTokenTypes.includes("lobby");
return r && !i ? wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_INVITE-RECEIVE", {
"%senderPrimaryID%": t
}) : i && !r ? wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_LOBBY_INVITE-RECEIVE", {
"%senderPrimaryID%": t
}) : wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_COMBO_INVITE-RECEIVE", {
"%senderPrimaryID%": t,
"%gameName%": n
});
}, hJ = Ii.observer((({declineAction: e, dismiss: t, onClose: n, isActivated: r, stayActive: i, holdOptions: o, disclaimer: a, actions: s, gameImage: l, gameName: c, invite: d, primaryId: u, player: p, partySupport: f, showConfirm: h}) => {
const {DeepLink: m} = Lh(), g = oP(), y = uT(), [I, _] = H.useState(), [b, S] = H.useState(!1), {activateText: v, holdActivateText: T} = ZE(), {setCurrentStepCallback: E} = sJ(), P = H.useCallback((() => {
e(), t();
}), [ e, t ]), O = H.useMemo((() => s.map((e => ({
...e,
callback: async () => {
!f?.isSupported && f?.enableSupportAction ? (S(!0), await JL({
action: f?.enableSupportAction,
DeepLink: m,
notifications: g,
modals: y,
player: p,
confirmAction: (n, r) => new Promise((() => {
_({
callback: async () => {
t(), await r(), e.callback();
},
title: n.localizedTitle,
description: n.localizedDescription
}), E("Confirm")();
}))
})()) : h ? (_({
callback: async () => {
e.callback(), t();
},
title: d.gameJoinTokenTypes.includes("party") ? wh("PHOTON-SOCIAL_NOTIFICATION_INVITE_CONFIRM-LEAVE-PARTY") : wh("PHOTON-SOCIAL_NOTIFICATION_INVITE_CONFIRM-LEAVE-LOBBY")
}), E("Confirm")()) : (e.callback(), t());
}
})))), [ s, f?.isSupported, f?.enableSupportAction, h, m, g, y, p, E, t, d.gameJoinTokenTypes ]);
return H.createElement(H.Fragment, null, H.createElement(cJ, {
id: "Actions"
}, H.createElement(cE, {
style: eE
}, l ? H.createElement(mE, {
texture: l
}) : void 0, H.createElement(_E, {
text: fJ(d, u, c)
})), H.createElement(jE, {
onDismiss: t,
onClose: n,
isActivated: r,
onActivated: i,
activateText: v,
holdActivateText: T,
holdRequired: o?.holdRequired,
holdTime: o?.holdTimeMs
}, a ? H.createElement(SE, {
style: eE
}, H.createElement(fE, {
texture: a.icon
}), H.createElement(_E, {
text: a.text
})) : void 0, b ? H.createElement("surface", {
style: pJ
}, H.createElement(eA, null)) : H.createElement(uJ, {
actions: O,
onDecline: P,
narrationItem: $E
}))), I ? H.createElement(cJ, {
id: "Confirm"
}, H.createElement(dJ, {
confirmAction: I,
dismiss: t,
narrationItem: $E
})) : void 0);
})), mJ = ({id: e, ...t}) => H.createElement(sE, {
key: e
}, H.createElement(lJ, {
initialStep: "Actions"
}, H.createElement(hJ, {
...t
}))), gJ = bh.InputBindings.Action, [yJ, IJ] = js({
debugName: "gameInviteAddedEventState",
create: () => new os
}), _J = () => {
const e = IJ(), t = Wg("main"), n = mb(), r = wA(gJ.Primary), i = Os(), o = uT(), a = oP(), s = cy(), l = QA(), c = Lh(), d = kw();
H.useEffect((() => {
const {Lobby: t, Party: d, PresenceSession: u, GameInvite: p, Voip: f, DeepLink: h} = c, {showNotification: m, showNotificationComponent: g} = a;
return e.subscribe((async (e, f, h) => {
const {senderProductId: y, senderPlayerNetworkId: I} = e;
if (n.personaInfo.playerNetworkId === I) return;
const _ = dg.productId === y, b = h?.title ?? wh("PHOTON-SOCIAL_GAME-NAME-FALLBACK"), S = hv(gP(i, f, n), {
allowEllipsis: !0
}), v = (T = h?.gameTitleLogo, jM(T, 80))?.url;
var T;
const E = i.getItemUntracked(pO, f.photonPlayerId), P = QP(E), O = QM(E, !0), C = O ? {
text: O,
icon: Sf.INCOMPATIBLE_WHITE
} : void 0;
if (_) {
const {actions: n, telemetryToasterId: m} = tk(i, t, d, 0, u, p, 0, o, a, l, f.photonPlayerId, e, r, !1, s, {
pg_id: "tst_combo_invite_received",
destination_name: "actions",
context: {
tpid: h?.productId
}
}, c, P), y = ET(s, rk(i, f.photonPlayerId), {
pg_id: m,
msg_id: m,
destination_name: "actions",
option: "decline",
context: {
tpid: h?.productId
}
});
let I;
if (dg.isPartyEnabled) {
const {data: t} = await cL(i, u, p, f.photonPlayerId, e), {partyId: n} = qL(t, [ "party" ]);
n && (I = (await d.isPartySupported({
partyIds: [ n ]
}))?.partySupport[0] ?? {
isSupported: !0
});
}
const _ = !!vP(i).data, T = (XO(i) ?? 0) > 1 || _;
g(1, 4, (t => H.createElement(mJ, {
gameName: b,
gameImage: v,
primaryId: S,
invite: e,
showConfirm: T,
actions: n,
declineAction: y,
disclaimer: C,
partySupport: I,
player: f,
...t
})), {
setting: 5,
telemetryInfo: {
pg_id: m,
msg_id: m,
context: {
tpid: h?.productId
}
}
}, {
hasActions: !0,
text: "GameJoinNotification - " + e.gameInviteId
});
} else m(1, 4, {
icon: v,
iconSize: 1,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_GAME_INVITE-RECEIVE", {
"%senderPrimaryID%": S
}),
infoArea: {
icon: Sf.INFORMATION,
text: wh("PHOTON-SOCIAL_NOTIFICATION_INVITE-DESC_SWITCH-GAMES", {
"%gameName%": b
})
},
actions: [ {
id: "got-it",
callback: () => {},
label: wh("BUTTON_GOT-IT"),
keyBinding: r
}, {
id: "decline",
callback: () => {
rk(i, f.photonPlayerId)();
},
label: wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_DECLINE"),
keyBinding: r
} ]
}, {
setting: 5
});
}));
}), [ l, s, e, n, r, t, i, o, a, c, d ]);
}, bJ = fs.Input.DeviceType, SJ = () => {
const {showNotification: e} = oP(), [t, n] = H.useState(new Set);
Ns((e => {
e !== bJ.NotSet && n((t => new Set(t).add(e)));
}), [], ap, !0), H.useEffect((() => {
t.size > 1 && e(3, 3, {
icon: Sf.INFORMATION,
text: wh("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_INPUT_CONFIRM-NEW")
});
}), [ e, t.size ]);
};
function vJ(e, t) {
const n = Gg();
H.useEffect((() => {
n.addSessionEvent(e, t);
}), [ n, e, t ]);
}
var TJ = bh.InputBindings.Action, EJ = Ec({
marginEnd: hc(Xc.DimensionSpace.large)
}), PJ = Ec({
marginStart: 0
}), OJ = Ec({
flexDirection: "row",
alignItems: "center"
}), CJ = ({primaryAction: e}, {getKeyBindingText: t}) => [ wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_ADD-PLAYERS"), e ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-ACTION", {
"%key%": t(e.keyBinding)
}) : void 0 ], NJ = Ii.observer((() => {
const e = Os(), {navigate: t} = Wg(), n = cy(), r = wA(TJ.Primary), i = H.useCallback((() => {
TT(n, {
pg_id: "tab_party",
destination_name: "party_members",
msg_id: "party_members",
option: "add_players_to_voice_party",
context: {
tpid: dg.productId
}
});
const r = e.getUntracked(QC).data?.[0][0].photonPlayerId;
t(hg.link(r ? {
photonPlayerId: YI(r),
photonSessionId: r
} : void 0));
}), [ e, t, n ]);
return H.createElement(MB, {
onClick: i,
id: "addPartyMembersLink",
primaryAction: {
callback: i,
keyBinding: r
},
narrationItem: CJ
}, H.createElement("surface", {
style: OJ
}, H.createElement(kB, {
texture: Sf.PLUS,
style: EJ
}), H.createElement($B, {
style: PJ,
color: Xc.TextColorStandard.emphasized,
text: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_ADD-PLAYERS")
})));
})), AJ = bh.InputBindings.Action, LJ = (e, t, n) => {
const r = cy(), i = wA(AJ.Primary), o = wA(AJ.Secondary), a = mb(), {eaPlayerId: s, playerNetworkId: l} = JI(e), {data: c} = ND(e), {data: d} = ND(a.photonPlayerId), u = s === a.tokenInfo.userId, p = vF(e, n), {data: f} = aM(e, t), h = f?.isMyLobbyJoinable, {isActionTaken: m, performAction: g} = Lk(e), y = H.useCallback((() => {
g([ "lobby" ]);
}), [ g ]);
if (u && s && l) return d && p ? {
primaryAction: {
keyBinding: i,
label: p.text,
callback: p.action
}
} : {};
const I = h ? {
keyBinding: i,
label: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-INVITE"),
disabled: m,
disabledContent: H.createElement(wB, {
text: wh("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_INVITE-SENT")
}),
callback: ET(r, y, n && {
...n,
status: "click",
option: "invite_to_lobby",
pg_id: "tab_party"
})
} : void 0, _ = e => zA(d, c) && p ? {
keyBinding: e,
label: p.text,
callback: p.action
} : void 0;
return I ? {
primaryAction: I,
secondaryAction: _(o)
} : {
primaryAction: _(i)
};
}, wJ = bh.XboxPlatform.XboxPermission, kJ = bh.XboxPlatform.XUserPrivilege;
function RJ(e, t) {
const [n, r] = H.useState({
isAllowed: !0,
privacyResult: void 0
}), i = Os(), o = SF(e);
return H.useEffect((() => {
if (gb(i).photonPlayerId === e || !o) return;
let n = !0;
return DT(i, e, [ wJ.CommunicateUsingVoice ], t ? kJ.Communications : void 0).then((e => {
n && r((t => t.isAllowed !== e.isAllowed || t.privacyResult !== e.privacyResult ? e : t));
})), () => {
n = !1;
};
}), [ i, e, t, o, r ]), n;
}
var xJ = e => gN(e), BJ = bh.Voip.VoipStatus, DJ = Ec({
position: "absolute",
top: 0,
left: 0,
right: 0,
bottom: 0
}), FJ = {
speakerStroke: Ec({
texture: Sf.SPEAKER_STROKE
}),
speakerFill: Ec({
texture: Sf.SPEAKER_FILL
}),
speakerMuteLine: Ec({
texture: Sf.SPEAKER_MUTE_LINE
}),
speakingLines: Ec({
texture: Sf.SPEAKING_LINES
}),
microphone: Ec({
texture: Sf.MICROPHONE
}),
microphoneMute: Ec({
texture: Sf.MICROPHONE_MUTE_LINE
})
}, MJ = Xc.TextColorStandard.emphasized, UJ = Xc.IconColorStandard.error, HJ = Xc.IconColorStandard.success, VJ = H.memo((({status: e, style: t}) => {
if (e === BJ.None || e === BJ.Disabled) return null;
let n;
return e === BJ.Muted ? n = H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ DJ, FJ.speakerStroke, Lc("color", MJ) ]
}), H.createElement("surface", {
style: [ DJ, FJ.speakerMuteLine, Lc("color", UJ) ]
})) : e === BJ.Speaking ? n = H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ DJ, FJ.speakerFill, Lc("color", MJ) ]
}), H.createElement("surface", {
style: [ DJ, FJ.speakingLines, Lc("color", HJ) ]
})) : e === BJ.Silent ? n = H.createElement("surface", {
style: [ DJ, FJ.speakerStroke, Lc("color", MJ) ]
}) : e === BJ.SelfMuted && (n = H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ DJ, FJ.microphone, Lc("color", MJ) ]
}), H.createElement("surface", {
style: [ DJ, FJ.microphoneMute, Lc("color", UJ) ]
}))), H.createElement("surface", {
style: [ Wx.icon, t ]
}, n);
})), JJ = bh.XboxPlatform.XboxPermission, GJ = {
type: Sf.VOIP_RESTRICTED,
style: Ec({
height: hc(Xc.DimensionSpace.larger),
width: hc(Xc.DimensionSpace.larger)
})
}, zJ = ({photonPlayerId: e}) => {
const [t, n] = H.useState(!1), r = Os(), i = fL(), {eaPlayerId: o} = JI(e), a = !!o && Ts((() => !!i.get().data?.get(o))), s = gb(r).photonPlayerId === e;
return H.useEffect((() => {
if (s || !a) return;
let t = !0;
return DT(r, e, [ JJ.CommunicateUsingVoice ]).then((({isAllowed: e}) => {
!e && t && n(!0);
})), () => {
t = !1;
};
}), [ s, a, r, e ]), t ? H.createElement(XM, {
sectionTitle: wh("PHOTON-SOCIAL_PARTY_LIST_PRESENCE_RESTRICTED"),
textColor: Xc.TextColorStandard.emphasized,
icon: GJ
}, H.createElement(iv, {
text: wh("PHOTON-SOCIAL_PLAYER-DETAIL_RESTRICTED", {
"%localPlatform%": zb(sP(r).playerNetworkId)
})
})) : null;
}, jJ = e => {
const t = $I() && H.createElement(zJ, {
photonPlayerId: e.photonPlayerId
});
return H.createElement(oH, {
...e,
additionalDetails: t
});
}, qJ = bh.Voip.VoipStatus;
function YJ(e, t) {
return e && e.status !== qJ.Disabled && void 0 !== t && t.status !== qJ.None && t.status !== qJ.Disabled && e.channel === t.channel;
}
var KJ = Ec({
marginLeft: hc(Xc.DimensionSpace.small),
marginRight: hc(Xc.DimensionSpace.small)
}), WJ = Ii.observer((e => {
const {photonPlayerId: t, isMemberPartyLeader: n, isCommunicationRestricted: r} = e, {data: i} = ND(t), o = mb(), {data: a} = ND(o.photonPlayerId), s = r, l = n, c = YJ(a, i), d = c || l, u = s ? wh("PHOTON-SOCIAL_PARTY_LIST_PRESENCE_RESTRICTED") : jU(a, i);
if (!d && !u) return null;
const p = e.hideOnPressedOrFocused;
return H.createElement(H.Fragment, null, d ? H.createElement(xB, null) : null, l && H.createElement(kB, {
texture: Sf.PARTY_LEADER
}), c && i && H.createElement(VJ, {
style: n ? KJ : void 0,
status: i.status
}), H.createElement("surface", {
style: Lc("flex", 1)
}), u ? H.createElement($B, {
hideOnPressedOrFocused: p,
text: u,
icon: s ? {
type: Sf.VOIP_RESTRICTED,
color: Xc.IconColorStandard.default
} : void 0
}) : null);
})), XJ = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const n = void 0, {name: r, playerNetworkId: i} = yL(e), {isAllowed: o} = RJ(e), a = mM(e, n, t), s = LJ(e, n, t), {handleFocus: l, handleBlur: c} = aH({
photonPlayerId: e,
photonSessionId: n,
telemetryInfo: t,
PlayerDetailsComponent: jJ
}), {data: d} = xJ(e), {data: u} = jO(), p = UB({
playerName: r
});
if (!d || !u) return null;
const f = LF(u.partyLeader, d.eaPlayerId, d.playerNetworkId), h = !(!s?.primaryAction && !s?.secondaryAction);
return H.createElement(MB, {
id: e,
narrationItem: p,
onFocus: l,
onBlur: c,
onClick: a,
...s
}, H.createElement(NB, {
playerNetworkId: i,
name: r,
style: Lc("flex", 0)
}), H.createElement(WJ, {
hideOnPressedOrFocused: h,
isMemberPartyLeader: f,
photonPlayerId: e,
isCommunicationRestricted: !o
}));
})), QJ = Ii.observer((({encounter: e, telemetryInfo: t}) => {
const n = e.photonPlayerId, r = void 0, i = Os(), {data: o} = gN(n), {isAllowed: a} = RJ(n), s = mM(n, r, t), l = LJ(n, r, t), {handleFocus: c, handleBlur: d} = aH({
photonPlayerId: n,
photonSessionId: r,
telemetryInfo: t
}), {playerNetworkId: u} = aP(), p = o?.displayName ?? "", f = hP(i, u, o), h = UB({
playerName: p
}), m = !(!l?.primaryAction && !l?.secondaryAction);
return H.createElement(MB, {
id: n,
narrationItem: h,
onFocus: c,
onBlur: d,
onClick: s,
...l
}, H.createElement(NB, {
playerNetworkId: f,
name: p,
style: Lc("flex", 0)
}), H.createElement(WJ, {
photonPlayerId: n,
hideOnPressedOrFocused: m,
isCommunicationRestricted: !a
}));
})), $J = Ks({
debugName: "canCreatePartyState",
default: void 0
}), ZJ = bh.Voip.VoipChannel, eG = () => {
const e = Lh(), t = Rs($J), n = oO(), r = Os(), i = oP(), o = cy(), a = XA();
H.useEffect((() => Fn((() => ({
isInParty: r.get(FL),
isPartySupported: !!r.get($J)?.isSupported
})), (({isInParty: e, isPartySupported: t}, {isPartySupported: o}) => {
!e && t && n.reseed().then((() => {
if (!o) {
const e = qA(r);
jA(r) || (e ? i.showCtaNotification(3, 3, {
icon: Sf.VOIP
}, wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_IN-PARTY"), wh("PHOTON-SOCIAL_NOTIFICATION_PARTY-VOIP_BUTTON_OPEN"), (() => a({
channel: ZJ.Party
}))) : KA(r, {
channel: ZJ.Party
}));
}
}));
}))), [ r, i, n, a ]), H.useEffect((() => (ub(e).then((e => {
t(e?.partySupport);
})), e.Party.onCreatePartySupportedChanged.subscribe((({partySupport: e}) => {
t(e);
})))), [ r, i, n, o, t, e ]);
}, tG = () => ws($J), nG = bh.InputBindings.Action, rG = {
destination_name: "empty_state",
msg_id: "empty_state",
pg_id: "tab_party"
}, iG = () => {
const e = tG(), t = mb(), n = uT(), r = oP(), i = cy(), o = wA(nG.Primary), {DeepLink: a} = Lh(), s = H.useMemo((() => {
const s = e?.enableSupportAction;
if (!s) return;
return {
callback: () => (TT(i, {
pg_id: "tab_party",
destination_name: "empty_state",
msg_id: "empty_state",
option: s.telemetryName
}), JL({
action: s,
DeepLink: a,
notifications: r,
modals: n,
player: {
eaPlayerId: t.tokenInfo.userId,
playerNetworkId: t.personaInfo.playerNetworkId,
personaId: t.personaInfo.personaId
},
showLoading: !0,
loadingTelemetryId: "overlay_enable_party"
})()),
keyBinding: o
};
}), [ e?.enableSupportAction, a, r, i, o, n, t ]);
OT(rG);
const l = e?.enableSupportAction?.localizedName;
return s && l ? {
action: s,
label: l
} : void 0;
}, oG = Ec({
marginTop: hc(Xc.DimensionSpace.larger)
}), aG = Ii.observer((({action: e, label: t}) => H.createElement("surface", {
style: [ wp(4), oG ]
}, H.createElement(lf, {
onClick: e?.callback,
input: e,
label: t,
id: "no-party-cta"
})))), sG = Ii.observer((() => {
const e = tG(), t = iG();
return H.createElement(eD, {
headline: e?.localizedTitle,
body: e?.localizedReason
}, t && H.createElement(aG, {
action: t.action,
label: t.label
}));
})), lG = UI({
eaPlayerId: "1",
playerNetworkId: "EA"
}), cG = Ec({
marginEnd: hc(Xc.DimensionSpace.large)
}), dG = Ec({
marginStart: 0
}), uG = Ec({
flexDirection: "row",
alignItems: "center"
}), pG = Ii.observer((() => {
const e = tG();
return e?.localizedTitle && e?.localizedReason ? H.createElement(jD, null, H.createElement(zN, {
text: e.localizedTitle,
color: Xc.TextColorStandard.emphasized,
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
}), H.createElement(iv, {
text: e.localizedReason
})) : null;
})), fG = Ii.observer((() => {
const e = iG();
let t = wh("PHOTON-SOCIAL_PARTY_EMPTY_NO-PARTY"), n = Sf.PARTY;
e && (t = e.label, n = Sf.EXIT);
const {handleBlur: r, handleFocus: i} = aH({
photonPlayerId: lG,
photonSessionId: void 0,
PlayerDetailsComponent: pG
}), o = H.useMemo((() => ({primaryAction: e}, {getKeyBindingText: n}) => [ t, e ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-ACTION", {
"%key%": n(e.keyBinding)
}) : void 0 ]), [ t ]);
return H.createElement(MB, {
onClick: e?.action.callback,
id: "partiesUnavailable",
primaryAction: e?.action,
narrationItem: o,
onFocus: i,
onBlur: r
}, H.createElement("surface", {
style: uG
}, H.createElement(kB, {
texture: n,
style: cG
}), H.createElement($B, {
style: dG,
color: Xc.TextColorStandard.emphasized,
text: t
})));
})), hG = e => {
if (e?.length) return {
100: vT(e.slice(0, 3))
};
}, mG = Js({
debugName: "friendRecommendationsBySection",
get: function({get: e}) {
const t = e(Yk).get();
return {
...t.toProps(),
data: hG(t.data?.getSortedList())
};
}
}), gG = Js({
debugName: "sessionPlayersState",
get: function({get: e}) {
const t = e(hb).tokenInfo.userId, n = e(SN).get();
let r;
if (t && n.data) {
const e = n.data.getSortedList(), i = [];
let o = [];
const a = e.find((e => e.playerId === t));
a ? e.forEach((e => {
e.playerId !== t && (e.teamId === a.teamId ? i.push(e) : o.push(e));
})) : o = e, r = {
teammates: i,
opponents: o
};
}
return {
...n.toProps(),
data: r
};
}
}), yG = Js({
debugName: "recentlyMetListState",
get: function({get: e}) {
const t = e(hb).tokenInfo.userId, n = e(NS).get(), r = e(TN).get(), i = e(gG), o = e(uS).get(), a = e(Yk).get(), s = e(Rv).isInVariant("fr_1", "FindFriends");
let l;
if (i.data && r.data && n.data && o.data) {
const e = r.data.getSortedList();
let c = i.data.opponents, d = i.data.teammates;
const u = new Set(n.data.keys()), p = new Set(o.data.keys()), f = [], h = new Set, m = new Set(c.concat(d).map((e => e.photonPlayerId)));
for (const n of e) n.playerId === t || u.has(n.photonPlayerId) || p.has(n.playerId) || m.has(n.photonPlayerId) || h.has(n.photonPlayerId) || (h.add(n.photonPlayerId), 
f.push(n));
c = c.filter((e => !p.has(e.playerId))), d = d.filter((e => !p.has(e.playerId)));
l = {
...hG(s ? a.data?.getSortedList() : void 0) ?? {
100: []
},
0: vT(d),
1: vT(c),
2: vT(f)
};
}
const c = [ n, i, r ];
s && c.push(a);
const d = CI(c);
return {
...d,
data: d.hasData ? l : void 0
};
},
equals: (e, t) => {
if (e.loading !== t.loading || e.uninitialized !== t.uninitialized || e.error !== t.error) return !1;
const n = e.data?.[0] || [], r = t.data?.[0] || [], i = e.data?.[1] || [], o = t.data?.[1] || [], a = e.data?.[2] || [], s = t.data?.[2] || [], l = e.data?.[100] || [], c = t.data?.[100] || [];
return n.length === r.length && i.length === o.length && a.length === s.length && l.length === c.length && (JC(n, r, "photonPlayerId") && JC(i, o, "photonPlayerId") && JC(a, s, "photonPlayerId") && JC(l, c, "photonPlayerId"));
}
}), IG = e => MP(EN().get(), (t => t.get(e))), _G = (e, t, n) => {
const r = n.sort(((n, r) => n.photonPlayerId === e ? -1 : r.photonPlayerId === e ? 1 : LF(t, n.eaPlayerId, n.playerNetworkId) ? -1 : LF(t, r.eaPlayerId, r.playerNetworkId) ? 1 : n.joinTimestampMs - r.joinTimestampMs)), i = r.length;
return r.map(((e, t) => ({
...e,
telemetryInfo: {
pg_id: "tab_party",
msg_id: "party_members",
destination_name: "party_members",
index: {
item_index: t + 1,
total_items: i
},
context: {
tpid: dg.productId
}
}
})));
}, bG = (e, t) => {
const n = {};
t.forEach((e => {
n[e.photonPlayerId] = !0;
}));
const r = e.teammates.filter((e => !n[e.photonPlayerId])), i = r.length;
return r.map(((e, t) => ({
encounter: e,
photonPlayerId: e.photonPlayerId,
telemetryInfo: {
pg_id: "tab_party",
msg_id: "other_team_members",
destination_name: "other_team_members",
index: {
item_index: t + 1,
total_items: i
},
context: {
tpid: dg.productId
}
}
})));
}, SG = Js({
debugName: "playersBySectionState",
get: function({get: e}) {
const t = e(hb), n = e(iO).get(), r = e(xw).get(), i = e(z_), o = e(gG);
let a;
if (r.data) {
let e = [], s = [];
if (n.data && o.data) {
const r = Array.from(n.data.members.values());
e = _G(t.photonPlayerId, n.data.partyLeader, r), s = bG(o.data, r);
}
a = {
0: e,
1: s,
...Gw(i, r.data, !0)
};
}
const s = CI([ r, o ]);
return {
...CI([ s, n ]),
data: s.hasData ? a : void 0
};
}
}), vG = e => e.photonPlayerId, TG = e => {
const t = RP(HP(SG), e), n = yN(H.useMemo((() => {
return t.data ? [ ...(e = t.data)[0].map(vG), ...e[1].map(vG), ...e[2].map(vG), ...e[3].map(vG), ...e[4].map(vG) ] : [];
var e;
}), [ t.data ]), e);
return {
...CI([ t, n ]),
data: t.data
};
}, EG = {
0: ju(),
1: ju(),
2: ju(),
3: ju(),
4: ju()
}, PG = Ec({
flexDirection: "row"
}), OG = Ec({
marginEnd: hc(8),
flexShrink: 1
}), CG = Ec({
flexShrink: 0,
marginEnd: hc(Xc.DimensionSpace.large)
}), NG = ({title: e, partyMaxSize: t, partySize: n}) => H.createElement("surface", {
style: PG
}, H.createElement("surface", {
style: OG
}, H.createElement(Zx, {
color: Xc.TextColorStandard.emphasized,
style: Lc("textEllipsis", !0),
text: e
})), H.createElement(Zx, {
color: Xc.TextColorStandard.emphasized,
style: CG,
text: wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_PARTY-SIZE", {
"%currentPartySize%": String(n),
"%maxPartySize%": String(t)
})
}));
function AG() {
const e = iJ("tab_party"), {isExpanded: t, onToggle: n} = cB({
id: "party-section-party-members",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: PT("tab_party", "party_members")
}), {isExpanded: r, onToggle: i} = cB({
id: "party-section-other-team-members",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: PT("tab_party", "other_team_members")
}), {data: o} = jO(), {data: a = 0} = qO((e => e.size)), s = o?.maxSize ?? 0, l = a >= s;
let c, d;
return o?.localizedPartyTitle ? (c = H.createElement(NG, {
partyMaxSize: s,
partySize: a,
title: o.localizedPartyTitle
}), d = wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_OPTIONAL", {
"%partyName%": o.localizedPartyTitle,
"%currentPartySize%": String(a),
"%maxPartySize%": String(s)
})) : c = dg.isTightlyCoupledParties ? wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_TIGHTLY-COUPLED", {
"%gameName%": dg.appName,
"%currentPartySize%": String(a),
"%maxPartySize%": String(s)
}) : wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_LOOSELY-COUPLED", {
"%gameName%": dg.appName,
"%currentPartySize%": String(a),
"%maxPartySize%": String(s)
}), H.useMemo((() => {
const o = new lH;
return o.addSection({
id: 0,
isExpanded: t,
onToggle: n,
title: c,
component: XJ,
focusId: EG[0],
afterItemsComponent: l ? void 0 : NJ,
telemetryInfo: {
pg_id: "tab_party",
destination_name: "party_members",
msg_id: "party_members"
},
narrationTitle: d
}), o.addSection({
id: 1,
isExpanded: r,
onToggle: i,
title: wh("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_TEAM-CURRENT"),
component: QJ,
focusId: EG[1],
telemetryInfo: {
pg_id: "tab_party",
destination_name: "other_team_members",
msg_id: "other_team_members"
}
}), lH.createMergedSection(o, e);
}), [ t, n, c, l, d, r, i, e ]);
}
var LG = {
component: fG,
focusId: "partyEmptyListControl"
}, wG = Ii.observer((() => {
const e = IH(TG(8e3), AG()), t = e.data?.[0].length, {rows: n} = yH(e.sectionsState, e.data, uw, {
beforeListContent: t ? void 0 : LG
});
return H.createElement(JM, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(sG, null),
error: e.error,
rows: n
});
})), kG = fs.Input.ButtonState, RG = fs.Input.DeviceType, xG = /[\u0020-\u007E\u00A0-\u017F\u0192\u01FA-\u01FF\u20AC\u2122\u2012\u2013\u2014\u2018\u2019\u201C\u201D\u0410-\u042F\u0490\u0406\u0402\u0452\u0403\u0453\u0456\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\u040B\u045B\u040C\u045C\u0455\u040E\u045E\u040F\u045F\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E]/, BG = class {
constructor(e, t, {value: n = "", onEnter: r, onChange: i, onActivate: o, onDeactivate: a, onButtonDown: s, onClear: l, maxTextLength: c, clearButton: d}) {
this.twinkle = e, this.inputHandler = t, this.state = {
text: "",
cursor: 0,
active: !1
}, this.shouldUseVirtualKeyboard = !0, this.inputAreaRef = H.createRef(), this.setText = Ln((e => {
this.state.text = e || "", this.onChange?.(this.state.text, "");
})), this._onButtonDown = Ln((e => {
const {text: t, cursor: n} = this.state;
switch (e.keyboardKeycode) {
case 13:
this.onEnter?.(t);
break;

case 27:
this.deactivate();
break;

case 37:
this.state.cursor = Math.max(0, n - 1);
break;

case 39:
this.state.cursor = Math.min(t.length, n + 1);
break;

case 8:
this.state.text = t.substring(0, n - 1) + t.substring(n), this.state.cursor = Math.max(0, n - 1), 
this.onChange?.(this.state.text, "");
break;

case 46:
this.state.text = t.substring(0, n) + t.substring(n + 1), this.state.cursor = Math.min(this.state.text.length, n), 
this.onChange?.(this.state.text, "");
}
this.clearButton && (e.keyboardKeycode && this.clearButton.keyboardKeycode === e.keyboardKeycode || e.gamePadInput && this.clearButton.gamePadInput === e.gamePadInput) && (this.state.text = "", 
this.state.cursor = 0, this.onClear?.(), this.onChange?.("", "")), this.onButtonDown?.({
button: e,
state: this.state,
deactivate: this.deactivate
});
})), this.onTypingInput = Ln(((e, t) => {
e || "" !== t || (t = this.getTextFromClipboard());
let n = t.split("").filter((e => xG.test(e))).join("").substr(0, this.maxTextLength);
if (e) this.state = {
text: n,
cursor: n.length,
active: !1
}, this.onEnter?.(n), this.onDeactivate?.(); else {
if (!n) return;
const {text: e, cursor: t} = this.state;
if (e.length >= this.maxTextLength) return;
n = n.substr(0, this.maxTextLength - e.length), this.state = {
text: e.substring(0, t) + n + e.substring(t),
cursor: t + n.length,
active: !0
};
}
this.onChange?.(this.state.text, n);
})), this.deactivate = Ln((() => {
this.state.active && (this.state.active = !1, this.onDeactivate?.());
})), this.activate = Ln((() => {
if (this.state.active) return;
this.state.active = !0, this.onActivate?.(), this.inputHandler.resetPressed();
const e = this.shouldUseVirtualKeyboard;
e && this.twinkle.bindings.Input.showVirtualKeyboard({
characterType: fs.Input.KeyboardCharType.LatinFull,
defaultText: this.state.text,
title: "",
description: "",
maxTextLength: this.maxTextLength
});
const t = [ () => {
e && this.twinkle.bindings.Input.hideVirtualKeyboard({});
}, this.twinkle.bindings.Input.onButtonStateChanged.subscribe((e => {
e.state === kG.Down && this._onButtonDown(e.button);
})), this.twinkle.bindings.Input.onTypingInput.subscribe((e => {
const t = e.fromVirtualKeyboard, n = e.virtualKeyboardSuccess, r = e.typedInput;
t && !n ? this.deactivate() : this.onTypingInput(t, r);
})), this.twinkle.inputHandler.onMouseEventHandled.subscribe((e => {
if (e.event === fs.Input.MouseEventType.Click && (e.button === fs.Input.MouseButton.Left || e.button === fs.Input.MouseButton.Right)) {
const t = this.inputAreaRef.current?.getSurfaceId();
e.surfaces.every((e => e.surfaceId !== t)) && this.deactivate();
}
})), this.inputHandler.disable() ];
mr((() => !this.state.active), (() => {
t.forEach((e => e()));
}));
})), this.state.text = n, this.state.cursor = n.length, this.clearButton = d, this.onEnter = r, 
this.onChange = i, this.onActivate = o, this.onDeactivate = a, this.onButtonDown = s, 
this.onClear = l, this.maxTextLength = c, Cr(this, {
state: gt,
shouldUseVirtualKeyboard: gt,
setShouldUseVirtualKeyboard: Ln
});
}
getState() {
return {
...this.state
};
}
setOnEnter(e) {
this.onEnter = e;
}
setOnChange(e) {
this.onChange = e;
}
setOnActivate(e) {
this.onActivate = e;
}
setOnDeactivate(e) {
this.onDeactivate = e;
}
setOnButtonDown(e) {
this.onButtonDown = e;
}
setOnClear(e) {
this.onClear = e;
}
setClearKeyButton(e) {
this.clearButton = e;
}
setShouldUseVirtualKeyboard(e) {
this.shouldUseVirtualKeyboard = e;
}
getTextFromClipboard() {
const e = 100 * this.maxTextLength;
try {
return this.twinkle.bindings.Clipboard.getText({
maxSizeBytes: e
})?.text || "";
} catch (e) {
return "";
}
}
}, DG = ({value: e, onEnter: t, onChange: n, onActivate: r, onDeactivate: i, onButtonDown: o, onClear: a, maxTextLength: s, clearButton: l}) => {
const c = mp(), d = uh(), [u] = H.useState((() => new BG(c, d, {
value: e,
onEnter: t,
onChange: n,
onActivate: r,
onDeactivate: i,
onButtonDown: o,
maxTextLength: s,
clearButton: l,
onClear: a
})));
return Ns((e => {
const t = u.shouldUseVirtualKeyboard, n = !pc.isPC && e !== RG.MouseAndKeyboard;
u.setShouldUseVirtualKeyboard(n), t !== n && u.deactivate();
}), [ u ], ap, !0), H.useEffect((() => {
u.setOnChange(n), u.setOnEnter(t), u.setOnActivate(r), u.setOnDeactivate(i), u.setOnButtonDown(o), 
u.setOnClear(a), u.setClearKeyButton(l);
}), [ u, n, t, r, i, o, e, a, l ]), H.useEffect((() => u.deactivate), [ u ]), {
setText: u.setText,
state: u.getState(),
activate: u.activate,
deactivate: u.deactivate,
inputAreaRef: u.inputAreaRef,
shouldUseVirtualKeyboard: u.shouldUseVirtualKeyboard
};
}, FG = hc(34), MG = Ec({
position: "absolute",
top: 0,
left: 0,
flexDirection: "row"
}), UG = Ec({
width: hc(2),
height: FG,
backgroundColor: gu.InputField.Cursor.backgroundColor
}), HG = Ec({
flex: 1,
flexDirection: "row"
}), VG = Ec({
layer: !0,
layerClip: !0,
flex: 1,
position: "relative",
height: FG
}), JG = Nc((e => ({
textAlign: e ? "end" : "start"
})), {
color: gu.InputField.LabelText.color,
whiteSpace: "nowrap"
}), GG = Ec({
padding: 0,
minHeight: 0
}), zG = Ec({
position: "absolute"
}), jG = "cursorTimeout", qG = ({text: e, cursor: t, active: n, shouldUseVirtualKeyboard: r}) => {
const i = ZT(0), {timeout: o, disposeTimeout: a} = Cu();
return H.useEffect((() => {
r || (n ? (i.set(1), o(jG, (() => {
i.to(0, {
duration: 500,
rebound: !0,
loopDelay: 500,
loopCount: -1
});
}), 1e3)) : (a(jG), i.set(0)));
}), [ n, i, e, t, a, o, r ]), i;
};
function YG(e, t) {
if (e.gamePadInput) return e.gamePadInput === t.primaryButton.gamePadInput || t.secondaryButtons.some((t => t.gamePadInput === e.gamePadInput));
}
var KG = Ii.observer((e => {
const {navigate: t} = $s(), {id: n, focusId: r, value: i, onChange: o, onEnter: a, onClear: s, onActivate: l, onDeactivate: c, primaryAction: d, secondaryAction: u, clearActionInfo: p, icon: f, openButtonLabel: h, placeholder: m, style: g, assistiveText: y, maxTextLength: I} = e, _ = Up(5), b = Up(6), S = Up(2), v = H.useCallback((({button: e, deactivate: n, state: r}) => {
switch (e.keyboardKeycode) {
case 27:
return void n();

case 38:
return n(), void t(2);

case 40:
return n(), void t(3);
}
YG(e, _) && (n(), t(2)), YG(e, b) && (n(), t(3)), YG(e, S) && a?.(r.text);
}), [ b, _, t, a, S ]), T = Fp(), {activate: E, deactivate: P, state: O, inputAreaRef: C, shouldUseVirtualKeyboard: N, setText: A} = DG({
value: i,
onChange: o,
onEnter: a,
onActivate: l,
onDeactivate: c,
onClear: s,
maxTextLength: I,
onButtonDown: v,
clearButton: p?.keyBinding.primaryButton
}), L = qG(O), [w, k] = H.useState({
outerBounds: 1,
innerBounds: 0
}), R = Jp({
id: n,
focusId: r,
isFocused: e => e || O.active
}), {isFocused: x, isPressed: B} = R;
Us((({get: e}) => {
if (O.active) {
const t = e(il);
t && t !== R.focusItem.focusId && P();
}
}), [ P, R.focusItem.focusId, O.active ]), tA(N || !x || O.active ? void 0 : {
callback: E,
action: 2
});
const D = (x || B) && (!!N || O.active), F = O.active && w.innerBounds > w.outerBounds ? w.innerBounds - w.outerBounds : 0, M = wc((() => ({
left: -F
})), [ F ]), {onOuterBounds: U, onInnerBounds: V} = H.useMemo((() => ({
onOuterBounds: e => k((t => t.outerBounds === e.width ? t : {
...t,
outerBounds: e.width
})),
onInnerBounds: e => k((t => t.innerBounds === e.width ? t : {
...t,
innerBounds: e.width
}))
})), []), J = H.useMemo((() => {
if (p?.label && p?.keyBinding) return {
label: p.label,
keyBinding: p.keyBinding,
callback: () => {
A(""), s?.();
}
};
}), [ p?.keyBinding, p?.label, s, A ]);
let G;
D && (N ? G = H.createElement(LB, {
primaryAction: {
callback: E,
keyBinding: S,
label: h
}
}) : d && (G = H.createElement(LB, {
primaryAction: d,
secondaryAction: u || (O.text ? J : void 0)
})));
const {text: z, cursor: j} = O, q = T ? z.substring(j) : z.substring(0, j);
return H.createElement("surface", {
style: g
}, H.createElement(_B, {
borderOutside: !0,
interaction: R,
ref: C
}, H.createElement("surface", {
style: Lc("flex", 1),
onClick: E
}, H.createElement(bB, null, H.createElement("surface", {
style: HG
}, void 0 !== f && H.createElement(kB, {
style: Lc("marginEnd", hc(Xc.DimensionSpace.medium)),
texture: f
}), H.createElement("surface", {
style: VG,
onBounds: U
}, H.createElement("surface", {
style: [ zG, M ]
}, !N && O.active && H.createElement("surface", {
style: MG,
onBounds: V
}, H.createElement(iv, {
style: [ Lc("opacity", 0), JG(T) ],
text: q
}), H.createElement("surface", {
style: [ UG, L.propStyle("opacity") ]
})), z ? H.createElement(TB, {
style: JG(T),
wrapperStyle: GG,
text: z
}) : H.createElement(iv, {
text: m
})))))), G), !!y && H.createElement(iv, {
style: Lc("marginTop", hc(gu.InputField.AssistiveText.marginTop)),
text: y
}));
})), WG = ({text: e, children: t}) => (Du((() => e), [ e ], 1), H.createElement(H.Fragment, null, t)), XG = bh.InputBindings.Action, QG = e => ({
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_ADD-FRIEND"),
callback: e.performAction,
disabled: e.isActionTaken,
disabledContent: H.createElement(wB, {
text: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REQUEST-SENT")
})
}), $G = (e, t, n = oT, r) => {
const i = ks(n, e), o = VF(e, t, r), a = nR(e, r), s = VN(e, t, r), l = AF(e, t, r), c = wA(XG.Primary), d = wA(XG.Secondary), u = {
keyBinding: c
};
switch (i) {
case 5:
return {};

case 0:
case 1:
case 2:
if (o) return {
primaryAction: {
...u,
label: o.text,
callback: o.action
}
};
break;

case 3:
case 4:
case 6:
if ((3 === i || 4 === i) && l && !a.isActionTaken) return {
primaryAction: {
...u,
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_VIEW-REQUEST"),
callback: s
},
secondaryAction: {
keyBinding: d,
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REPORT"),
callback: l.action
}
};
if (a && l) return {
primaryAction: {
...u,
...QG(a)
},
secondaryAction: {
keyBinding: d,
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REPORT"),
callback: l.action
}
};
break;

case void 0:
return {};

default:
ys("Unhandled case");
}
return {};
}, ZG = bh.InputBindings.Action, ez = (e, t, n) => {
const r = e.getUntracked(ly), i = e.getUntracked(Yk), {showModal: o} = e.getUntracked(dT), a = gL(e, t), s = ET(r, (() => i.dismissFriendRecommendation(t)), n);
o((() => H.createElement(mA, {
title: wh("PHOTON-SOCIAL_FRIEND-REC_OVERLAY_TITLE_REMOVE-PLAYER", {
"%playerName%": hv(a, {
allowEllipsis: !0
})
}),
body: wh("PHOTON-SOCIAL_FRIEND-REC_OVERLAY_DESC_REMOVE-PLAYER", {
"%playerName%": hv(a, {
allowEllipsis: !0
})
}),
onConfirm: s,
showLoadingOnConfirm: !0,
autoClose: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})), {
telemetryId: "overlay_remove_friend_recommendation"
});
}, tz = (e, t) => {
const n = nR(e, t), r = Os(), i = wA(ZG.Primary), o = wA(ZG.Secondary), a = cy();
return H.useMemo((() => {
const s = QG(n);
return {
primaryAction: {
...s,
keyBinding: i,
callback: ET(a, s.callback, {
...t,
option: "add_friend"
})
},
secondaryAction: {
label: wh("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_REMOVE"),
keyBinding: o,
callback: ET(a, (() => {
ez(r, e, t);
}), {
...t,
option: "dismiss"
})
}
};
}), [ n, r, e, a, i, o, t ]);
}, nz = ju(), rz = Ii.observer((({photonPlayerId: e}) => {
const t = Kk().getMutualFriends(e), n = t.length;
if (!n) return null;
const r = n > 1 ? wh("PHOTON-SOCIAL_FRIEND_RECOS_LIST_MUTUALS_MULTIPLE", {
"%numberOfMutualFriends%": t.length + ""
}) : wh("PHOTON-SOCIAL_FRIEND_RECOS_LIST_MUTUALS_SINGLE");
return H.createElement(TB, {
text: r,
hideOnPressedOrFocused: !0
});
})), iz = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const n = void 0, r = yL(e), i = gT(), o = H.useMemo((() => ({
...t,
destination_name: "friend_recos",
pg_id: i
})), [ i, t ]), a = mM(e, n, o), s = tz(e, o), {handleFocus: l, handleBlur: c} = aH({
photonPlayerId: e,
photonSessionId: n,
telemetryInfo: o
}), d = UB({
playerName: r.name
});
return H.createElement(MB, {
id: e,
narrationItem: d,
onFocus: l,
onBlur: c,
onClick: a,
...s
}, H.createElement(NB, {
playerNetworkId: r.playerNetworkId,
name: r.name
}), H.createElement(rz, {
photonPlayerId: e
}));
})), oz = () => {
const e = gT(), {isExpanded: t, onToggle: n} = cB({
id: "friend-recommendations-section",
onToggleCallback: PT(e, "friend_recos"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
});
return H.useMemo((() => {
const r = new lH;
return r.addSection({
id: 100,
isExpanded: t,
onToggle: n,
title: wh("PHOTON-SOCIAL_FRIEND_RECOS_HEADING"),
component: iz,
focusId: nz,
telemetryInfo: {
pg_id: e,
destination_name: "friend_recos",
msg_id: "friend_recos"
}
}), r;
}), [ t, n, e ]);
}, az = Ii.observer((({height: e}) => {
const t = IH((n = 8e3, RP(HP(mG), n)), oz());
var n;
const {rows: r} = yH(t.sectionsState, t.data, nJ);
return H.createElement(AM, {
rows: r,
height: e ?? xM,
width: BM,
style: Lc("margin", -zx)
});
})), sz = Ly.object({}, {
value: Ly.string
}), lz = Ly.object({
personaId: sz,
pidId: sz,
displayName: sz,
nameSpaceName: sz
}), cz = Ly.object({
personas: Ly.array(lz),
searchPhrase: Ly.string
}), dz = {
cem_ea_id: "EA",
ps3: "PSN",
steam: "STEAM",
nx: "NINTENDO",
xbox: "XBOX"
};
function uz(e) {
return dz[e] || "EA";
}
function pz(e, t) {
return e.displayNameLowerCase.localeCompare(t.displayNameLowerCase);
}
var fz = {
PSN: 0,
XBOX: 0,
EA: 1,
EPIC: 1,
APPLE_GAMECENTER: 1,
GOOGLE_PLAY: 1,
STEAM: 2,
NINTENDO: 3
}, hz = e => (t, n) => {
const r = fz[t.playerNetworkId] - fz[n.playerNetworkId];
if (0 === r) {
return pz(e[t.photonPlayerId], e[n.photonPlayerId]);
}
return r;
}, mz = (e, t) => {
const n = hz(t);
return (t, r) => {
if ("EA" === t.playerNetworkId || "EA" === r.playerNetworkId) {
if (t.playerNetworkId === r.playerNetworkId) return pz(t, r);
if ("EA" === t.playerNetworkId) return -1;
if ("EA" === r.playerNetworkId) return 1;
}
return t.playerNetworkId === e || r.playerNetworkId === e ? t.playerNetworkId === r.playerNetworkId ? pz(t, r) : t.playerNetworkId === e ? -1 : 1 : n(t, r);
};
}, gz = Ks({
debugName: "playerSearchCache",
default: {
loading: !1,
skipped: !0
}
}), yz = Ks({
debugName: "inputFieldValueState",
default: ""
}), Iz = Js({
debugName: "playerSearchList",
get: function({get: e}) {
const t = e(hb).personaInfo.playerNetworkId, n = (r = e(gz), {
...r,
uninitialized: r.skipped
});
var r;
if (void 0 === n.data) return n;
const {searchPhrase: i, players: o} = n.data, a = e(z_), s = CI(o.map((e => a.get(e.photonPlayerId)))), l = o.filter((e => a.getMaybeUntracked(e.photonPlayerId)?.data)), c = {}, d = {
0: [],
1: [],
2: []
};
for (let e = 0; e < l.length; e++) {
const n = l[e];
"EA" === n.playerNetworkId ? d[0].push(n) : n.playerNetworkId === t ? d[1].push(n) : d[2].push(n);
const r = a.get(UI({
eaPlayerId: n.eaPlayerId,
playerNetworkId: "EA"
})).data;
r && (c[n.photonPlayerId] = r);
}
var u;
d[1].sort((u = c, (e, t) => pz(u[e.photonPlayerId], u[t.photonPlayerId]))), d[2].sort(hz(c)), 
l.sort(mz(t, c));
return {
...CI([ n, {
...s,
error: void 0
} ]),
data: {
searchPhrase: i,
sections: d,
players: l
}
};
}
});
function _z(e) {
const t = [];
return e.personas.forEach((e => {
if (!(e.pidId.value && e.personaId.value && e.displayName.value && e.nameSpaceName.value)) return;
const n = uz(e.nameSpaceName.value), r = e.pidId.value;
t.push({
playerNetworkId: n,
personaId: e.personaId.value,
photonPlayerId: UI({
eaPlayerId: r,
playerNetworkId: n
}),
eaPlayerId: r,
displayName: e.displayName.value,
displayNameLowerCase: e.displayName.value.toLowerCase()
});
})), {
searchPhrase: e.searchPhrase,
players: t,
sections: {
0: [],
1: [],
2: []
}
};
}
var bz = new Set(Object.keys(dz));
function Sz(e) {
return `${e.replaceAll('"', '\\"')}`;
}
function vz(e) {
let t = `displayName="${Sz(e)}"`;
return e.includes("#") && (t += ` OR displayName="${Sz(e.replaceAll("#", ""))}"`), 
t;
}
function Tz(e) {
const {PlayerSearch: t} = Lh(), n = j_(), r = xI(), i = Gg();
return ED((async e => {
if (e = e?.trim(), !e) return {
personas: [],
searchPhrase: e
};
const o = Date.now(), a = () => {
i.addEvent({
eventType: "photon_search",
duration_ms: Date.now() - o
});
}, s = await t.SearchPlayers({
query: {
value: vz(e)
},
namespaces: []
});
if (!s?.personas?.length) return a(), {
personas: [],
searchPhrase: e
};
const l = [], c = [];
return s.personas.forEach((e => {
e.pidId?.value && e.nameSpaceName?.value && bz.has(e.nameSpaceName.value) && (l.push(UI({
eaPlayerId: e.pidId.value,
playerNetworkId: uz(e.nameSpaceName.value)
})), c.push(e));
})), await r(n.getByIds(l)), a(), {
personas: c,
searchPhrase: e
};
}), [ r, t, n, i ], cz, {
cache: gz,
transformResponse: _z,
skipQueryOnMount: !0,
debugName: "playerSearch",
onError: e?.onError,
onSuccess: e?.onSuccess
});
}
function Ez(e, t, n, r) {
e.triggerSearch({
term: t.searchPhrase,
type: "friend_search",
duration_ms: r ?? 0,
status: n,
result_count: t.players.length,
result: t.players.map((e => e.eaPlayerId + "_" + e.playerNetworkId))
});
}
function Pz() {
const e = cy(), {showErrorNotification: t} = oP(), n = ws(Iz), r = H.useCallback(((n, r) => {
r && Ez(e, {
searchPhrase: r,
players: [],
sections: {
0: [],
1: [],
2: []
}
}, "error", 0), t({}, "search player", n.error);
}), [ e, t ]);
return {
...n,
fetch: Tz({
onSuccess: H.useCallback((t => {
t.data && Ez(e, t.data, "success", t.duration);
}), [ e ]),
onError: r
}).fetch
};
}
function Oz(e, t) {
const n = !e.data && e.loading, r = !n && t.isEmpty(e.data?.sections), i = t.size(e.data?.sections);
return {
...e,
loading: n,
empty: r,
sectionsState: t,
size: i
};
}
var Cz = Ii.observer((({photonPlayerId: e}) => {
const t = Os(), {eaPlayerId: n, playerNetworkId: r} = JI(e), i = mb(), o = aP();
if ("EA" === r && "EA" === o.playerNetworkId) return null;
let a;
if (n) {
const e = "EA" !== r ? "EA" : o.playerNetworkId;
a = hN(t, UI({
eaPlayerId: n,
playerNetworkId: e
})).data;
}
if (!a) return null;
const s = hv("EA" === a.playerNetworkId ? {
name: a.displayName,
playerNetworkId: a.playerNetworkId
} : gP(t, a, i), {
allowEllipsis: !0
});
return H.createElement(TB, {
hideOnPressedOrFocused: !0,
text: s
});
})), Nz = Ec({
marginBottom: hc(Xc.DimensionSpace.medium)
}), Az = Ii.observer((({photonPlayerId: e, displayName: t, playerNetworkId: n, telemetryInfo: r}) => {
const i = void 0, o = Os(), a = "EA" === n ? {
name: t,
playerNetworkId: n
} : o.getItem(mL, e), s = {
destination_name: "search_results",
...r
}, l = mM(e, i, s), c = $G(e, i, void 0, s), {handleFocus: d, handleBlur: u} = aH({
photonPlayerId: e,
photonSessionId: i,
telemetryInfo: s
}), p = UB({
playerName: t
});
return H.createElement(MB, {
id: e,
narrationItem: p,
onFocus: d,
onBlur: u,
onClick: l,
style: Nz,
...c
}, H.createElement(NB, {
playerNetworkId: a.playerNetworkId,
name: a.name
}), H.createElement(Cz, {
photonPlayerId: e
}));
})), Lz = {
0: ju(),
1: ju(),
2: ju()
};
function wz() {
const {isExpanded: e, onToggle: t} = cB({
id: "search-section-ea",
onToggleCallback: PT("tab_search", "search_results"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
}), n = aP(), {isExpanded: r, onToggle: i} = cB({
id: "search-section-same-platform",
onToggleCallback: PT("tab_search", "search_results"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
}), {isExpanded: o, onToggle: a} = cB({
id: "search-section-other-platform",
onToggleCallback: PT("tab_search", "search_results"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
});
return H.useMemo((() => {
const s = new lH;
return s.addSection({
id: 0,
isExpanded: e,
onToggle: t,
title: e => wh("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_SECTION-HEAD_EA", {
"%numberEaResults%": String(e.length)
}),
component: Az,
focusId: Lz[0],
telemetryInfo: {
pg_id: "tab_search",
destination_name: "search_results",
msg_id: "search_results"
}
}), s.addSection({
id: 1,
isExpanded: r,
onToggle: i,
title: e => wh("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_SECTION-HEAD_SAME", {
"%localPlatform%": zb(n.playerNetworkId),
"%numberLocalResults%": String(e.length)
}),
component: Az,
focusId: Lz[1],
telemetryInfo: {
pg_id: "tab_search",
destination_name: "search_results",
msg_id: "search_results"
}
}), s.addSection({
id: 2,
isExpanded: o,
onToggle: a,
title: e => wh("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_SECTION-HEAD_OTHER", {
"%numberOtherResults%": String(e.length)
}),
component: Az,
focusId: Lz[2],
telemetryInfo: {
pg_id: "tab_search",
destination_name: "search_results",
msg_id: "search_results"
}
}), s;
}), [ e, r, o, t, i, a, n ]);
}
var kz = bh.InputBindings.Action, Rz = "narrate-search-action", xz = Ec({
marginBottom: hc(Xc.DimensionSpace.larger),
flexDirection: "row",
flexWrap: "wrap"
}), Bz = Ec({
marginEnd: hc(Xc.DimensionSpace.medium)
}), Dz = Ii.observer((() => {
const e = yb(), t = gN(UI({
eaPlayerId: e,
playerNetworkId: "EA"
})).data;
return t ? H.createElement(jD, null, H.createElement(zN, {
color: Xc.TextColorStandard.emphasized,
text: wh("PHOTON-SOCIAL_PLAYER-SEARCH_INFO-CARD_TITLE_ADDING-FRIENDS"),
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
}), H.createElement("surface", {
style: xz
}, H.createElement(Iu, {
text: wh("PHOTON-SOCIAL_PLAYER-SEARCH_INFO-CARD_YOUR-ID"),
color: Xc.TextColorStandard.emphasized,
style: Bz
}), H.createElement(yv, {
name: t.displayName,
playerNetworkId: t.playerNetworkId
})), H.createElement(iv, {
text: wh("PHOTON-SOCIAL_PLAYER-SEARCH_INFO-CARD_DESC")
})) : H.createElement("surface", null);
})), Fz = Ox - hc(200), Mz = Ec({
marginBottom: hc(Xc.DimensionSpace.larger),
fontSize: mc(Xc.TextSizeHeading.small)
}), Uz = {
pg_id: "tab_search",
msg_id: "search_results",
destination_name: "search_results"
}, Hz = Ii.observer((({rows: e, searchStr: t, players: n}) => (OT(Uz), H.createElement(H.Fragment, null, H.createElement(zN, {
text: wh("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_TITLE", {
"%numberSearchResults%": String(n?.length || 0),
"%playerSearchID%": t || ""
}),
color: Xc.ColorNeutral._0,
style: Mz
}), H.createElement(AM, {
rows: e,
height: Fz,
width: BM,
style: [ Lc("margin", -zx) ]
}))))), Vz = {
pg_id: "tab_search",
msg_id: "search_input",
destination_name: "search_input"
}, Jz = Ii.observer((e => {
const {assistiveText: t, onSearch: n} = e, [r, i] = Ds(yz), o = wA(kz.Primary), a = wA(kz.Secondary), s = cy(), l = Bu(), c = Qu(), [d, u] = H.useState(!1), {timeout: p, disposeTimeout: f} = Cu();
OT(Vz), Fu((({getKeyBindingText: e}) => wh("PHOTON-SOCIAL_NARRATION_PLAYER-SEARCH_INPUT-FIELD-FOCUSED", {
"%primaryKey%": e(o)
})), [ o ], c);
const h = H.useCallback((e => {
n?.(e), f(Rz), TT(s, {
destination_name: "search_input",
msg_id: "search_input",
option: "search",
pg_id: "tab_search"
});
}), [ f, n, s ]), m = Hs((({get: e}) => () => {
h(e(yz));
}), [ h ]), g = H.useCallback((() => {
u(!0), pc.isPC || TT(s, {
destination_name: "search_input",
msg_id: "search_input",
option: "open",
pg_id: "tab_search"
});
}), [ s ]), y = H.useCallback((() => {
u(!1);
}), []);
H.useEffect((() => {
f(Rz), d && r.length && p(Rz, (() => {
l.narrate(wh("PHOTON-SOCIAL_NARRATION_PLAYER-SEARCH_SEARCH-ACTION", {
"%primaryKey%": l.getKeyBindingText(o)
}));
}), 2e3);
}), [ f, r, d, l, o, p ]);
const I = H.useCallback(((e, t) => {
i(e), t.length && l.narrateNow(t), e || n?.("");
}), [ l, n, i ]), _ = n && r ? {
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_ACTIONS_SEARCH"),
keyBinding: o,
callback: m
} : void 0, b = {
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_ACTIONS_CLEAR"),
keyBinding: a
}, S = H.useCallback((() => {
TT(s, {
destination_name: "search_input",
msg_id: "search_input",
pg_id: "tab_search",
option: "clear"
});
}), [ s ]);
return H.createElement(KG, {
id: "search-field",
focusId: c,
icon: Sf.SEARCH,
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger)),
placeholder: wh("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-BAR_PLACEHOLDER"),
onEnter: h,
onChange: I,
onClear: S,
onActivate: g,
onDeactivate: y,
value: r,
primaryAction: _,
clearActionInfo: b,
maxTextLength: 50,
openButtonLabel: wh("PHOTON-SOCIAL_PLAYER-SEARCH_ACTIONS_OPEN"),
assistiveText: t
});
})), Gz = Ii.observer((() => {
const e = Pz(), {sectionsState: t, data: n, loading: r, error: i, size: o} = Oz(e, wz()), a = Uv("fr_1", "PlayerSearch"), {rows: s} = yH(t, e.data?.sections, sR, {
flat: o <= 5
});
let l = a ? H.createElement(az, {
height: Fz
}) : void 0;
return r ? l = H.createElement(fB, {
numSections: 1,
numRows: 1
}) : !i && n?.players && n.searchPhrase && (l = n.players.length ? H.createElement(WG, {
text: wh("PHOTON-SOCIAL_NARRATION_PLAYER-SEARCH_VIEW-RESULTS")
}, H.createElement(Hz, {
rows: s,
searchStr: n.searchPhrase,
players: n.players
})) : H.createElement(WG, {
text: wh("PHOTON-SOCIAL_PLAYER-SEARCH_NO-SEARCH-RESULTS")
}, H.createElement(QN, {
style: Lc("marginTop", hc(Xc.DimensionSpace.larger)),
headline: wh("PHOTON-SOCIAL_PLAYER-SEARCH_NO-SEARCH-RESULTS")
}))), H.createElement(VM, {
contentHasNoScrollbar: !0,
fallbackContent: H.createElement(Dz, null)
}, H.createElement(Jz, {
onSearch: e.fetch
}), l);
}));
function zz(e) {
const t = H.useRef(e);
return H.useEffect((() => {
null != e && (t.current = e);
}), [ e ]), e ?? t.current ?? void 0;
}
var jz = hc(64), qz = Ec({
backgroundColor: "#00000001",
flex: 1
}), Yz = Ec({
flex: 1,
position: "relative"
}), Kz = Ec({
position: "absolute",
left: 0,
right: 0
}), Wz = Ii.observer((e => {
const {id: t, height: n, children: r, style: i, scrollbarAlwaysVisible: o} = e, a = Hf(), [s, l] = H.useState(0), [c, d] = H.useState(n), u = H.useRef(0), p = s < 0, f = 0 === c || c + s - n > 0, h = c > n, m = h ? -s / (c - n) : 0, g = wc((() => ({
height: n
})), [ n ]), y = wc((() => ({
translateY: s
})), [ s ]), I = -(c - n), _ = H.useCallback((e => {
if (!h) return void l(0);
const t = e.scrollDelta * hc(Xc.ScrollFactor.fast);
l((e => Math.max(I, Math.min(0, e + t))));
}), [ h, I, 0 ]), b = H.useCallback((e => {
l(h ? Math.max(I, Math.min(0, -e)) : 0);
}), [ h, I, 0 ]), S = H.useCallback((e => {
const t = e.height;
u.current = e.y, l((e => n >= t ? 0 : t - n < Math.abs(e) ? -t + n : e)), d(t);
}), [ n ]);
Us((({get: e, getItem: t}) => {
if (e(ll)) return;
if (c <= n) return void l(0);
const r = t(Ll, a), i = t(nl, r);
if (!r || !i) return;
const o = (s = t(gl, a), Object.keys(s).sort(((e, t) => (s[e]?.y || 0) - (s[t]?.y || 0))));
var s;
const d = o[0], p = o[o.length - 1];
l(d !== r ? p !== r ? e => {
const t = Math.floor(i.y - u.current);
if (-t + jz > e) return -t + jz;
const r = i.height;
return -t - r + n - jz < e ? -t - r + n - jz : e;
} : -c + n : 0);
}), [ a, n, c ]);
const v = Vf(a), {isHovered: T, hoverHooks: E} = KD();
return H.createElement(Jf, {
id: a
}, H.createElement("surface", {
onMouseScroll: _,
...E,
style: [ Lc("paddingRight", hc(Xc.DimensionSpace.large) + WD), g, qz, i ]
}, H.createElement(PM, {
fadeTop: p,
fadeBottom: f,
fadeHeight: jz,
style: [ g, Yz, i ]
}, H.createElement("surface", {
style: [ Kz, y ],
onBounds: S
}, r)), h && H.createElement(iF, {
setContentScrollPosition: b,
visible: o || v || T,
scrollPercent: m,
containerHeight: n,
contentHeight: c
})));
})), Xz = ({children: e}) => {
const [t, n] = H.useState(0);
return H.createElement("surface", {
onBounds: e => n(e.height),
style: Lc("flex", 1)
}, e(t));
}, Qz = ({children: e, ...t}) => H.createElement(Xz, null, (n => H.createElement(Wz, {
...t,
height: n,
style: 0 === n ? Lc("flex", 1) : void 0
}, e))), $z = class {
constructor(e) {
this.moby = e, this.focusIds = gt.box([], {
deep: !1
}), this.hasFocus = bt((() => {
const e = this.moby.get(il);
return !!e && this.focusIds.get().includes(e);
}));
}
addFocusId(e) {
return Ts((() => {
this.focusIds.set(this.focusIds.get().concat(e));
})), () => {
Ts((() => {
const t = this.focusIds.get(), n = t.indexOf(e);
if (n > -1) {
const e = t.slice();
e.splice(n, 1), this.focusIds.set(e);
}
}));
};
}
setMetadata(e, t) {
Ts((() => {
this.metadata || (this.metadata = gt.box({}, {
deep: !1
})), this.metadata.set({
...this.metadata.get(),
[e]: t
});
}));
}
getMetadata(e) {
return this.metadata || (this.metadata = gt.box({}, {
deep: !1
})), this.metadata.get()[e];
}
}, [Zz, ej] = Is("NarrationGroupContext"), tj = () => {
const e = Os();
return H.useState((() => new $z(e)))[0];
}, nj = Ec({
padding: Gx,
marginBottom: hc(Xc.DimensionSpace.smaller)
}), rj = Ec({
margin: hc(Xc.DimensionSpace.medium),
marginStart: hc(Xc.DimensionSpace.large)
}), ij = e => {
const {item: t, narrationItem: n, style: r} = e, i = Qu(e.focusId), o = Up(2), a = sc(o.primaryButton), s = ej(), l = {
keyBinding: o,
callback: t.action
};
return Fu((e => t.isDisabled ? void 0 : n({
keyBinding: o,
label: t.text,
group: s,
icon: t.icon
}, e)), [ n, o, t.text, t.icon, t.isDisabled, s ], i), H.useEffect((() => s.addFocusId(i)), [ s, i ]), 
t.isDisabled && t.disabledContent ? H.createElement("surface", {
style: nj
}, t.disabledContent) : H.createElement(SB, {
key: t.id,
id: t.id,
onClick: t.isDisabled ? void 0 : t.action,
input: t.isDisabled ? void 0 : l,
isActive: t.isActive,
isDisabled: t.isDisabled,
isFocusableWhenActive: t.isFocusableWhenActive,
focusId: i,
transparent: !0,
style: [ r, Lc("marginBottom", hc(Xc.DimensionSpace.smaller)) ]
}, void 0 !== t.inputIconOverride && H.createElement(kB, {
isFocusableWhenActive: t.isFocusableWhenActive,
texture: t.inputIconOverride,
style: Lc("marginEnd", hc(Xc.DimensionSpace.small))
}), !t.inputIconOverride && a ? H.createElement(RB, {
type: a,
showOnPressedOrFocused: !0,
isFocusableWhenActive: t.isFocusableWhenActive,
style: Lc("marginEnd", hc(Xc.DimensionSpace.small))
}) : null, H.createElement(CB, {
text: t.text,
isFocusableWhenActive: t.isFocusableWhenActive
}), t.icon ? H.createElement(kB, {
texture: t.icon,
isFocusableWhenActive: t.isFocusableWhenActive,
style: [ Lc("marginStart", hc(Xc.DimensionSpace.small)), t.iconStyle ]
}) : null);
}, oj = Ec({
flexDirection: "column"
}), aj = hc(300), sj = hc(15), lj = ({items: e, narrationItem: t}) => {
const n = tj();
return H.createElement(Zz.Provider, {
value: n
}, e.filter((e => e.isLoading || e.actions.length)).map(((e, n) => H.createElement("surface", {
style: oj,
key: e.id
}, !!e.title && H.createElement(Zx, {
color: Xc.ColorNeutral._0,
style: [ Lc("marginBottom", hc(Xc.DimensionSpace.small)), 0 !== n ? Lc("marginTop", hc(Xc.DimensionSpace.larger)) : void 0 ],
text: e.title
}), e.isLoading ? H.createElement("surface", {
style: rj
}, H.createElement(fB, {
numRows: 3,
numSections: e.title ? 1 : 0,
width: aj,
height: sj,
lightVariant: !0
})) : e.actions.map((e => H.createElement(ij, {
key: e.id,
item: e,
narrationItem: t
})))))));
}, cj = (Ec({
marginBottom: hc(Xc.DimensionSpace.larger)
}), Lc("marginBottom", hc(Xc.DimensionSpace.largest))), dj = Ec({
color: Xc.TextColorStandard.emphasized
}), uj = [ Ec({
marginBottom: hc(53)
}), dj ], pj = 755, fj = hc(60), hj = hc(66), mj = {
portal: aC,
background: 1,
contextualMenu: 2,
menu: 3
}, gj = Ec({
zOffset: mj.portal,
flexDirection: "row"
}), yj = Ec({
position: "absolute",
top: 0,
bottom: 0,
left: 0,
width: hc(pj),
paddingRight: hc(Xc.DangerZone.width),
backgroundColor: Xc.BackgroundColor.base,
flexDirection: "column",
zOffset: mj.menu
}), Ij = Ec({
zOffset: mj.background,
flex: 1
}), _j = Ec({
zOffset: mj.contextualMenu,
position: "absolute",
left: hc(pj),
top: 0,
bottom: 0,
width: hc(731),
flexDirection: "row"
}), bj = Ec({
width: hc(2),
backgroundColor: Xc.BackgroundColor.alt2
}), Sj = Ec({
flex: 1,
backgroundColor: Xc.BackgroundColor.base,
paddingLeft: hc(Xc.DimensionSpace.largest),
paddingRight: hc(Xc.DimensionSpace.largest)
}), vj = {
duration: Xc.AnimationTime.faster,
easing: Xc.AnimationEasing.accelerate
}, Tj = H.memo((e => {
const {children: t, isVisible: n} = e, r = ZT(vp(-fj)), i = ZT(0), [o, a] = H.useState(n), {fullScreenHorizontalMargin: s, fullScreenVerticalMargin: l} = Ep(), c = wc((() => ({
left: s + hc(pj)
})), [ s ]), d = wc((() => ({
paddingTop: l + hc(Xc.DangerZone.height),
paddingBottom: l + hc(Xc.DangerZone.height) + hj
})), [ l ]);
return H.useEffect((() => {
if (!n) {
r.to(vp(-fj), vj), i.to(0, vj);
const e = setTimeout((() => {
a(!1);
}), vj.duration);
return () => {
clearTimeout(e);
};
}
a(!0), r.to(0, vj), i.to(1, vj);
}), [ n, i, r ]), H.createElement(Jf, {
disable: !n
}, o || n ? H.createElement("surface", {
style: [ _j, c, r.propStyle("translateX"), i.propStyle("opacity") ]
}, H.createElement(H.Fragment, null, H.createElement("surface", {
style: bj
}), H.createElement("surface", {
style: [ Sj, d ]
}, t))) : null);
})), Ej = ({children: e, isVisible: t, contextualSheet: n, onDimmerClick: r, extraDimmerContent: i}) => {
const o = ZT(vp(-fj)), a = ZT(0), s = ZT(0), [l, c] = H.useState(t), {fullscreenStyle: d, fullScreenHorizontalMargin: u, fullScreenVerticalMargin: p} = Ep(), f = wc((() => ({
paddingTop: p + hc(Xc.DangerZone.height),
paddingBottom: p + hc(Xc.DangerZone.height) + hj,
paddingLeft: u + hc(Xc.DangerZone.width),
width: u + hc(pj)
})), [ u, p ]);
return H.useEffect((() => {
if (!t) {
o.to(vp(-fj), vj), a.to(0, vj), s.to(0, vj);
const e = setTimeout((() => {
c(!1);
}), vj.duration);
return () => {
clearTimeout(e);
};
}
c(!0), o.to(0, vj), a.to(1, vj), s.to(1, vj);
}), [ s, t, a, o ]), l || t ? H.createElement("surface", {
style: [ gj, d ]
}, H.createElement("surface", {
style: [ yj, f, o.propStyle("translateX"), a.propStyle("opacity") ]
}, e), n, H.createElement("surface", {
style: [ Ij, s.propStyle("opacity") ],
onClick: r
}, i)) : null;
};
function Pj() {
const {navigate: e} = Wg();
return H.useCallback((() => e(Qg.link())), [ e ]);
}
var Oj = Ii.observer((e => {
const {isVisible: t, ...n} = e, {addZoom: r, removeZoom: i} = Ph();
return H.useEffect((() => {
if (t) return r(), () => {
setTimeout((() => i()), 100);
};
}), [ r, t, i ]), H.createElement(Ej, {
isVisible: t,
...n
});
})), Cj = bh.InputBindings.Action, Nj = Ec({
padding: hc(24),
marginBottom: hc(Xc.DimensionSpace.larger)
}), Aj = ({label: e, group: t, keyBinding: n}, {getKeyBindingText: r}) => [ wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_PLAYER-ACTIONS_ACTION-FOCUSED", {
"%actionName%": e,
"%primaryKey%": r(n)
}), t.getMetadata(0) ], Lj = Ii.observer((({photonPlayerId: e, photonSessionId: t, onClose: n}) => {
const r = _M(e, t, n);
return H.createElement(lj, {
items: r,
narrationItem: Aj
});
})), wj = Ii.observer((({photonPlayerId: e, photonSessionId: t}) => {
const {navigate: n} = Wg(), r = H.useCallback((() => n(Qg.link())), [ n ]), {data: i, loading: o} = gN(e, 8e3), {data: a} = pM(e, !0), {name: s} = yL(e), l = iT(e), c = ZM(e, t);
return Du((() => s ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_PLAYER-ACTIONS_MENU-OPEN", {
"%primaryID%": s
}) : void 0), [ s ], 0), H.useEffect((() => {
o || i || r();
}), [ r, e, i, o ]), H.createElement(H.Fragment, null, H.createElement(zN, {
text: wh("PHOTON-SOCIAL_ACTIONS-PLAYER_TITLE"),
style: [ dj, Lc("marginBottom", hc(Xc.DimensionSpace.largest)) ]
}), H.createElement(IL, {
photonPlayerId: e,
style: Lc("marginBottom", hc(Xc.DimensionSpace.large)),
textStyle: Lc("fontSize", mc(Xc.TextSizeHeading.smaller)),
useEllipsis: !1,
icon: l ? Sf.STAR : void 0
}), a.length ? H.createElement("surface", {
style: [ Nj, Cf({
backgroundColor: Xc.BackgroundColor.body,
borderColor: void 0
}) ]
}, a.map(((e, t) => H.createElement(_L, {
key: e.photonPlayerId,
player: e,
style: 0 !== t ? Lc("marginTop", hc(Xc.DimensionSpace.small)) : void 0
})))) : null, c && H.createElement($M, {
photonPlayerId: e,
photonSessionId: t,
bodyTextStyle: Lc("marginStart", hc(Xc.DimensionSpace.macro))
}), H.createElement(Qz, {
id: "player_actions"
}, i && H.createElement(Lj, {
photonPlayerId: e,
photonSessionId: t,
onClose: r
})));
})), kj = {
pg_id: "overlay_player_actions_self",
msg_id: "overlay_player_actions_self"
}, Rj = {
pg_id: "overlay_player_actions_other",
msg_id: "overlay_player_actions_other"
}, xj = Ii.observer((({match: e}) => {
const {navigate: t} = Wg(), n = cy(), r = mb(), i = zz(e?.params.photonPlayerId), o = zz(e?.params.photonSessionId), {isCurrentPhotonUser: a} = i ? Ib(i, r) : {
isCurrentPhotonUser: !1
}, s = a ? kj : Rj, l = !!e;
OT(l ? s : void 0);
const c = H.useCallback((() => {
t(Qg.link()), TT(n, {
...s,
option: "back"
});
}), [ t, n, s ]), d = Cj.Decline, u = wA(d);
return EA(l ? {
action: d,
callback: c,
label: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK")
} : void 0), Du((({getKeyBindingText: e}) => wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_MENU-EXIT", {
"%backKey%": e(u)
})), [ u ], 2, l), i ? H.createElement(Oj, {
onDimmerClick: c,
isVisible: l
}, H.createElement(Jf, {
disable: !l
}, H.createElement(wj, {
photonPlayerId: i,
photonSessionId: o
}))) : null;
})), Bj = bh.InputBindings.Action, Dj = {
destination_name: "empty_state",
msg_id: "empty_state",
option: "player_list_empty"
}, Fj = Ii.observer((({emptyState: e}) => {
const t = wA(Bj.Primary), {DeepLink: n} = Lh(), r = oP(), i = uT(), o = mb();
OT({
...Dj,
pg_id: "tab_player_list",
option: void 0
});
const a = e.playerActions.map((e => {
const a = JL({
action: e,
DeepLink: n,
notifications: r,
modals: i,
player: {
eaPlayerId: o.tokenInfo.userId,
personaId: o.personaInfo.personaId,
playerNetworkId: o.personaInfo.playerNetworkId
},
loadingTelemetryId: "overlay_player_list_action"
});
return H.createElement(tD, {
onClick: a,
input: {
keyBinding: t,
callback: a
},
label: e.localizedName,
id: "player_list_empty_action-" + e.playerActionId,
telemetryInfo: {
pg_id: "tab_player_list",
...Dj,
option: e.telemetryName
},
key: "action-" + e.playerActionId
});
}));
return H.createElement(eD, {
headline: e.localizedTitle,
body: e.localizedReason
}, H.createElement("surface", {
style: [ wp(4), Lc("marginTop", hc(Xc.DimensionSpace.larger)) ]
}, a));
})), Mj = bh.PlayerList.Icon, Uj = yc({
[Mj.Star]: {
1: Dc("/photon/quantum/icons/playerlist/Star_48px-cc2c4df6.png"),
2: Dc("/photon/quantum/icons/playerlist/Star_48px@2x-94aa5a32.png")
},
[Mj.Shield]: {
1: Dc("/photon/quantum/icons/playerlist/Shield_48px-2c5c6c35.png"),
2: Dc("/photon/quantum/icons/playerlist/Shield_48px@2x-27477021.png")
},
[Mj.Hexagon]: {
1: Dc("/photon/quantum/icons/playerlist/Hexagon_48px-c6ff4787.png"),
2: Dc("/photon/quantum/icons/playerlist/Hexagon_48px@2x-fbd9a547.png")
},
[Mj.ClipBoard]: {
1: Dc("/photon/quantum/icons/playerlist/Clipboard_48px-82d2e599.png"),
2: Dc("/photon/quantum/icons/playerlist/Clipboard_48px@2x-d7ac333c.png")
},
[Mj.StarShield]: {
1: Dc("/photon/quantum/icons/playerlist/Shield_with_star_48px-3c7b0a48.png"),
2: Dc("/photon/quantum/icons/playerlist/Shield_with_star_48px@2x-35133720.png")
},
[Mj.Flag]: {
1: Dc("/photon/quantum/icons/playerlist/Flag_48px-8d9e77b9.png"),
2: Dc("/photon/quantum/icons/playerlist/Flag_48px@2x-2f51557a.png")
}
}), Hj = yc({
[Mj.Star]: {
1: Dc("/photon/quantum/icons/playerlist/Star_32px-903d224a.png"),
2: Dc("/photon/quantum/icons/playerlist/Star_32px@2x-8c9c4d67.png")
},
[Mj.Shield]: {
1: Dc("/photon/quantum/icons/playerlist/Shield_32px-308b7e5c.png"),
2: Dc("/photon/quantum/icons/playerlist/Shield_32px@2x-cac135f6.png")
},
[Mj.Hexagon]: {
1: Dc("/photon/quantum/icons/playerlist/Hexagon_32px-7fd6f41b.png"),
2: Dc("/photon/quantum/icons/playerlist/Hexagon_32px@2x-4127c97b.png")
},
[Mj.ClipBoard]: {
1: Dc("/photon/quantum/icons/playerlist/Clipboard_32px-6960d790.png"),
2: Dc("/photon/quantum/icons/playerlist/Clipboard_32px@2x-2a0f078c.png")
},
[Mj.StarShield]: {
1: Dc("/photon/quantum/icons/playerlist/Shield_with_star_32px-1ff0a8e6.png"),
2: Dc("/photon/quantum/icons/playerlist/Shield_with_star_32px@2x-fda712a3.png")
},
[Mj.Flag]: {
1: Dc("/photon/quantum/icons/playerlist/Flag_32px-2aa77ec1.png"),
2: Dc("/photon/quantum/icons/playerlist/Flag_32px@2x-55c74680.png")
}
});
function Vj(e) {
const t = Os();
return e ? t.getItem(BO, e) : {
data: void 0,
loading: !1,
uninitialized: !1,
error: new Error("No playerlists")
};
}
var [Jj, Gj] = Is("PlayerListIdContext");
function zj() {
const {playerListId: e} = Gj();
return Vj(e);
}
function jj(e) {
const {playerListId: t} = Gj(), n = Os();
if (t) return n.getItem(LO, t).data?.get(e);
}
var qj = bh.PlayerList.Icon, Yj = hc(32), Kj = {
iconRow: Ec({
position: "relative",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center",
marginBottom: hc(Xc.DimensionSpace.smaller)
}),
icon: Ec({
width: Yj,
height: Yj,
color: Xc.IconColorStandard.emphasized,
position: "absolute"
})
};
function Wj(e, t) {
return t?.[e] ?? qj[e];
}
function Xj(e) {
return Uj[e];
}
var Qj = Ii.observer((({photonPlayerId: e}) => {
const t = jj(e), n = zj();
if (!t?.icons.size) return null;
const r = Array.from(t.icons).map((e => H.createElement("surface", {
style: Kj.iconRow,
key: "icon-" + e
}, H.createElement("surface", {
style: [ Kj.icon, Lc("texture", Xj(e)) ]
}), H.createElement(iv, {
text: Wj(e, n.data?.localizedIconLegend),
color: Xc.TextColorStandard.emphasized,
style: Lc("marginStart", Yj + hc(Xc.DimensionSpace.small))
}))));
return H.createElement(XM, {
sectionTitle: n.data?.localizedLegendTitle ?? wh("PHOTON-SOCIAL_LEGEND_TITLE")
}, r);
})), $j = bh.PlayerList.Purpose, Zj = (e, t) => {
const n = ZM(e, t), r = zj().data?.purpose === $j.PlayTogether;
return n && r;
}, eq = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n}) => {
let r;
zI(e) && (r = H.createElement(Qj, {
photonPlayerId: e,
key: "icon-legend"
}));
const {data: i} = GM(e, t), o = Zj(e, t);
return H.createElement(iH, {
photonPlayerId: e,
photonSessionId: t,
telemetryInfo: n
}, H.createElement(tH, {
photonPlayerId: e,
playerPresence: i,
key: "product-player-details"
}), r, H.createElement(nH, {
photonPlayerId: e,
photonSessionId: t,
playerPresence: i,
key: "party-lobby-status"
}), H.createElement(ZU, {
photonPlayerId: e,
playerPresence: i,
key: "other-identities"
}), o && H.createElement($M, {
photonPlayerId: e,
photonSessionId: t,
key: "compatibility-warnings"
}));
})), tq = bh.PlayerList.Purpose, nq = bh.InputBindings.Action;
function rq(e, t) {
return e.data?.title ? e.data.title : t.data?.productTitle ? t.data.productTitle : t.data?.isOnline ? wh("PHOTON-SOCIAL_PRESENCE_ONLINE") : wh("PHOTON-SOCIAL_PRESENCE_OFFLINE");
}
var iq = ({icons: e}) => e.size ? H.createElement(H.Fragment, null, H.createElement(xB, null), Array.from(e.keys()).map((e => H.createElement(kB, {
texture: Hj[e],
key: "icon-" + e,
style: Lc("marginRight", hc(Xc.DimensionSpace.smallest))
})))) : null, oq = Ii.observer((({photonPlayerId: e, photonSessionId: t, hideTitleOnFocus: n}) => {
const r = jj(e), i = GM(e, t), o = zM(i.data?.productId), a = mb(), s = KM(e, t), l = Zj(e, t);
if (!r) return null;
const c = r.playerId === a.tokenInfo.userId ? void 0 : rq(o, i);
return H.createElement(H.Fragment, null, H.createElement(iq, {
icons: r.icons
}), H.createElement("surface", {
style: Lc("flex", 1)
}), H.createElement(oV, {
hideOnPressedOrFocused: n,
texts: [ c, s ]
}), l && H.createElement(sV, null));
}));
function aq(e, t) {
H.useEffect((() => t(e)), [ t, e ]);
}
function sq(e, t, n, r, i) {
const o = Ib(e, n.get(hb)).isCurrentEaUser;
if (!!n.get(NS).get().data?.get(e) || o) return;
const {eaPlayerId: a} = JI(e), s = a ? n.get(qv).get().data?.get(a) : void 0, l = a ? n.get(zv).get().data?.get(a) : void 0;
return r.isActionTaken || !s && !l ? {
keyBinding: t,
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_ADD-FRIEND"),
callback: r.performAction,
disabled: r.isActionTaken,
disabledContent: H.createElement(wB, {
text: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REQUEST-SENT")
})
} : {
keyBinding: t,
label: wh("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_VIEW-REQUEST"),
callback: i
};
}
var lq = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, setActions: r}) => {
const i = lM(e, t), o = cV(e, t, !0), a = aM(e, t), s = dV(e, t), l = wA(nq.Primary), c = wA(nq.Secondary), d = H.useCallback((() => n), [ n ]), u = Os(), p = nR(e, n), f = VN(e, t, n);
return aq(H.useMemo((() => i.canJoin && i.gameInvite && a.data?.canInvite ? {
primaryAction: o(l, i, d),
secondaryAction: s(c, a, d)
} : a.data?.canInvite ? {
primaryAction: s(l, a, d),
secondaryAction: sq(e, c, u, p, f)
} : {
primaryAction: sq(e, l, u, p, f)
}), [ p, s, o, d, a, i, u, e, l, c, f ]), r), null;
})), cq = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, setActions: r}) => {
const i = nR(e, n), o = VN(e, t, n), a = wA(nq.Primary), s = Os(), l = !!s.get(NS).get().data?.get(e);
return aq(H.useMemo((() => l ? {} : {
primaryAction: sq(e, a, s, i, o)
}), [ i, l, a, s, e, o ]), r), null;
})), dq = {
[tq.PlayTogether]: lq,
[tq.MakeFriends]: cq,
[tq.None]: void 0
}, uq = Ii.observer((({playerListId: e, ...t}) => {
const {data: n} = Vj(e);
if (void 0 !== n?.purpose && n.purpose !== tq.None) {
const e = dq[n.purpose];
if (e) return H.createElement(e, {
...t
});
}
return null;
})), pq = Ii.observer((({photonPlayerId: e, photonSessionId: t, PlayerDetailsComponent: n, setHandlers: r, telemetryInfo: i}) => (aq(aH({
photonPlayerId: e,
photonSessionId: t,
PlayerDetailsComponent: n,
telemetryInfo: i
}), r), null))), fq = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const n = void 0, {name: r, playerNetworkId: i} = yL(e), o = mM(e, n, t), [a, s] = H.useState(), [l, c] = H.useState(), {playerListId: d} = Gj(), u = H.useMemo((() => e => H.createElement(Jj.Provider, {
value: {
playerListId: d
}
}, H.createElement(eq, {
...e
}))), [ d ]), p = UB({
playerName: r
}), f = !(!a?.primaryAction && !a?.secondaryAction);
return H.createElement(MB, {
id: "playerList-" + e,
narrationItem: p,
onClick: o,
onFocus: l?.handleFocus,
onBlur: l?.handleBlur,
...a
}, !!d && H.createElement(tV, {
delay: 500
}, H.createElement(pq, {
photonPlayerId: e,
photonSessionId: n,
PlayerDetailsComponent: u,
setHandlers: c,
telemetryInfo: t,
key: "handlers-loader"
}), H.createElement(uq, {
photonPlayerId: e,
photonSessionId: n,
setActions: s,
playerListId: d,
telemetryInfo: t,
key: "actions-loader"
})), H.createElement(NB, {
playerNetworkId: i,
name: r,
style: Lc("flex", 0)
}), H.createElement(oq, {
photonPlayerId: e,
photonSessionId: n,
hideTitleOnFocus: f
}));
})), hq = fg("/playerList/:photonPlayerId?", "tab_player_list");
function mq(e) {
const {data: t} = e, n = Os();
return t ? n.getItem(UO, t.id) : {
...e,
data: void 0
};
}
function gq(e, t, n) {
return () => {
const r = e.getItemUntracked(DO, t);
e.setItem(DO, t, !r), TT(n, {
pg_id: "tab_player_list",
destination_name: t,
msg_id: t,
option: r ? "collapse" : "expand"
});
};
}
function yq(e) {
const {data: t} = e, n = Os(), r = cy(), i = t?.id ? n.getItem(MO, t.id) : FO;
return H.useMemo((() => {
const e = new lH;
return t ? (t.sections.forEach(((o, a) => {
var s, l;
e.addSection({
id: a,
isExpanded: i[a],
onToggle: gq(n, o.id, r),
title: o.localizedTitle,
component: fq,
focusId: (s = t.id, l = o.id, `playerlist-${s}-section-${l}`),
telemetryInfo: {
pg_id: "tab_player_list",
msg_id: o.id,
index: {
total_items: t.sections.length,
item_index: 1 + a
},
context: {
p_cnt: o.personas.length
}
}
});
})), e) : e;
}), [ i, n, t, r ]);
}
function Iq() {
const e = Os();
return Ns((() => {
const t = e.getUntracked(kO), n = e.getUntracked(wO);
void 0 !== t && n.includes(t) || e.set(kO, n[0]);
}), [ e ], wO, !0), [ e.get(kO), Rs(kO) ];
}
var _q = hc(Xc.DimensionSpace.larger), bq = hc(Xc.TextSizeHeading.medium) + _q, Sq = Ii.observer((() => {
const [e] = Iq(), t = Vj(e), n = Os().get(NO), r = IH(mq(t), yq(t)), {rows: i} = yH(r.sectionsState, r.data, hq);
return n?.emptyState && t.error ? H.createElement(Fj, {
emptyState: n.emptyState
}) : H.createElement(Jj.Provider, {
value: {
playerListId: t.data?.id
}
}, H.createElement(JM, {
loading: r.loading,
empty: r.empty,
error: r.error,
beforeContent: H.createElement(zN, {
text: t.data?.localizedTitle ?? "",
color: Xc.TextColorStandard.emphasized,
style: Lc("marginBottom", _q),
useEllipsis: !0
}),
scrollHeight: xM - bq,
rows: i,
emptyContent: t.data?.emptyState ? H.createElement(Fj, {
emptyState: t.data?.emptyState
}) : void 0
}));
})), vq = Ii.observer((({portalId: e}) => UH().gates.get(e) ?? null)), [Tq, Eq] = js({
debugName: "presenceUpdateEventState",
create: () => new os
});
function Pq(e, t) {
switch (e) {
case 0:
return {
notificationText: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_FRIENDS_FRIEND-ONLINE", {
"%primaryID%": t
}),
notificationOptions: {
setting: 1,
telemetryInfo: {
pg_id: "tst_friend_online"
}
}
};

case 2:
return {
notificationText: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_FRIENDS_FRIEND-ONLINE", {
"%primaryID%": t
}),
notificationOptions: {
setting: 8,
telemetryInfo: {
pg_id: "tst_fav_online"
}
}
};

case 1:
return {
notificationText: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PLAYER_LIST-ONLINE", {
"%primaryID%": t
}),
notificationOptions: {
setting: 7,
telemetryInfo: {
pg_id: "tst_playerlist_member_online"
}
}
};

default:
ys("Unhandled PlayerType");
}
}
var Oq = () => {
const e = Eq(), {showNotification: t} = oP(), n = mb(), r = Os();
H.useEffect((() => e.subscribe(((e, i, o) => {
const a = hv(gP(r, i, n), {
allowEllipsis: !0
}), {notificationText: s, notificationOptions: l} = Pq(o.playerType, a);
t(2, 2, {
text: s
}, l);
}))), [ r, e, n, t ]);
}, Cq = () => {
const e = gT();
return OT({
pg_id: e,
destination_name: "empty_state",
msg_id: "empty_state"
}), H.createElement(eD, {
headline: wh("PHOTON-SOCIAL_RECENT-MET_EMPTY-TITLE"),
body: wh("PHOTON-SOCIAL_RECENT-MET_EMPTY-DESC")
});
}, Nq = Ec({
maxHeight: hc(150),
layer: !0
}), Aq = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = e, {data: r} = IG(t), {data: i} = GM(t, n), o = r?.primaryContext, a = r?.secondaryContext, s = !!o || !!a;
return H.createElement(iH, {
...e
}, s && H.createElement("surface", {
style: Lc("marginBottom", hc(Xc.DimensionSpace.larger))
}, H.createElement(Zx, {
text: wh("PHOTON-SOCIAL_DETAILS_TITLE"),
style: [ Lc("marginBottom", hc(Xc.DimensionSpace.smallest)), Dd ]
}), o ? H.createElement(iv, {
text: o,
useEllipsis: !!a,
color: Xc.TextColorStandard.emphasized,
style: a ? Lc("marginBottom", hc(Xc.DimensionSpace.smallest)) : Nq
}) : null, a ? H.createElement(iv, {
text: a,
useEllipsis: !!o,
color: Xc.TextColorStandard.emphasized
}) : null), H.createElement(ZU, {
photonPlayerId: t,
playerPresence: i
}));
})), Lq = fg("/recently-met", "tab_recently_met"), wq = fg("/find-friends", "tab_find_friends"), kq = {
0: ju(),
1: ju(),
2: ju()
}, Rq = Ii.observer((({type: e, photonPlayerId: t, setActions: n, telemetryInfo: r, source: i}) => {
const o = void 0, a = gT(), s = H.useMemo((() => r && {
pg_id: a,
destination_name: i,
...r
}), [ a, i, r ]), l = aH({
photonPlayerId: t,
photonSessionId: o,
PlayerDetailsComponent: 1 === e ? Aq : oH,
telemetryInfo: s
}), c = $G(t, o, void 0, s);
return H.useEffect((() => {
n({
...l,
...c
});
}), [ n, l, c ]), null;
})), xq = Ii.observer((e => {
const t = e.photonPlayerId, n = gN(t), r = gT(), [i, o] = H.useState(), {name: a, playerNetworkId: s} = mP(n.data), l = mM(t, void 0, H.useMemo((() => ({
...e.telemetryInfo,
pg_id: r,
destination_name: "played_together",
option: "see_player_actions"
})), [ e.telemetryInfo, r ])), c = UB({
playerName: a
});
return H.createElement(MB, {
id: "player" + t,
narrationItem: c,
onFocus: i?.handleFocus,
onBlur: i?.handleBlur,
onClick: l,
primaryAction: i?.primaryAction,
secondaryAction: i?.secondaryAction
}, n.data ? H.createElement(H.Fragment, null, H.createElement(tV, {
delay: 500
}, H.createElement(Rq, {
type: 1,
photonPlayerId: t,
setActions: o,
telemetryInfo: e.telemetryInfo,
source: "played_together"
})), H.createElement(NB, {
playerNetworkId: s,
name: a
})) : H.createElement(H.Fragment, null, H.createElement(dB, {
height: uB,
width: pB
}), H.createElement("surface", {
style: Lc("flex", 1)
})), !!e.timestamp && H.createElement(ZB, {
hideOnPressedOrFocused: !!i?.primaryAction,
timeMs: 1e3 * e.timestamp
}));
})), Bq = Ii.observer((e => {
const t = gT(), n = e.photonPlayerId, r = gN(n), [i, o] = H.useState(), {name: a, playerNetworkId: s} = mP(r.data), l = mM(n, void 0, H.useMemo((() => ({
...e.telemetryInfo,
pg_id: t,
destination_name: e.source,
option: "see_player_actions"
})), [ e, t ])), c = UB({
playerName: a
});
return H.createElement(MB, {
id: "player" + n,
narrationItem: c,
onFocus: i?.handleFocus,
onBlur: i?.handleBlur,
onClick: l,
primaryAction: i?.primaryAction,
secondaryAction: i?.secondaryAction
}, H.createElement(tV, {
delay: 500
}, H.createElement(Rq, {
type: 0,
photonPlayerId: n,
setActions: o,
telemetryInfo: e.telemetryInfo,
source: e.source
})), H.createElement(NB, {
playerNetworkId: s,
name: a
}));
}));
function Dq() {
const e = gT(), {isExpanded: t, onToggle: n} = cB({
id: "recently-met-section-teammates",
onToggleCallback: PT(e, "playing_together_teammates"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: r, onToggle: i} = cB({
id: "recently-met-section-opponents",
onToggleCallback: PT(e, "playing_together_opponents"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: o, onToggle: a} = cB({
id: "recently-met-section-played-together",
onToggleCallback: PT(e, "played_together"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), s = Hs((({get: e}) => t => {
const n = e(NS).get();
if (!n.data) return t.length;
const r = new Set(n.data.keys());
return t.filter((e => !r.has(e.photonPlayerId))).length;
}), []), l = oz();
return H.useMemo((() => {
const c = new lH;
return c.addSection({
id: 0,
isExpanded: t,
onToggle: n,
title: e => wh("PHOTON-SOCIAL_RECENT-MET_LIST_SECTION-HEAD_TEAMMATES", {
"%numberTeammates%": e.length + ""
}),
component: e => H.createElement(Bq, {
source: "playing_together_teammates",
...e
}),
focusId: kq[0],
telemetryInfo: t => ({
pg_id: e,
destination_name: "playing_together_teammates",
msg_id: "playing_together_teammates",
context: {
rel: "not_friend",
p_cnt: s(t)
}
})
}), c.addSection({
id: 1,
isExpanded: r,
onToggle: i,
title: e => wh("PHOTON-SOCIAL_RECENT-MET_LIST_SECTION-HEAD_OPPONENTS", {
"%numberOpponents%": e.length + ""
}),
component: e => H.createElement(Bq, {
source: "playing_together_opponents",
...e
}),
focusId: kq[1],
telemetryInfo: t => ({
pg_id: e,
destination_name: "playing_together_opponents",
msg_id: "playing_together_opponents",
context: {
rel: "not_friend",
p_cnt: s(t)
}
})
}), c.addSection({
id: 2,
isExpanded: o,
onToggle: a,
title: e => wh("PHOTON-SOCIAL_RECENT-MET_LIST_SECTION-HEAD_PAST-PLAYERS", {
"%numberPlayedTogether%": e.length + ""
}),
component: xq,
focusId: kq[2],
telemetryInfo: {
pg_id: e,
destination_name: "played_together",
msg_id: "played_together"
}
}), lH.createMergedSection(l, c);
}), [ e, t, n, r, i, o, a, l, s ]);
}
var Fq = Ii.observer((() => {
const e = IH(RP(HP(yG)), Dq()), {rows: t} = yH(e.sectionsState, e.data, Lq);
return H.createElement(JM, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(Cq, null),
error: e.error,
rows: t
});
})), Mq = Ec({
justifyContent: "center"
}), Uq = Ec({
marginBottom: hc(Xc.DimensionSpace.smaller)
}), Hq = Ec({
marginBottom: hc(Xc.DimensionSpace.larger)
}), Vq = ({title: e, body: t, style: n}) => H.createElement("surface", {
style: [ Mq, n ]
}, !!e && H.createElement(Zx, {
text: e,
color: Xc.TextColorStandard.emphasized,
style: Uq
}), !!t && H.createElement(iv, {
text: t,
color: Xc.TextColorStandard.default
})), Jq = ({title: e, body: t, style: n, children: r}) => {
const i = tj();
return Mu((() => e), [ e ], 1, i), H.useEffect((() => {
i.setMetadata(0, t);
}), [ i, t ]), H.createElement(H.Fragment, null, H.createElement(Vq, {
title: e,
body: t,
style: [ Hq, n ]
}), H.createElement(Zz.Provider, {
value: i
}, r));
}, Gq = class {
constructor(e) {
this.settings = gt.box([], {
deep: !1
});
const t = e.DeepLink.getSettingsAvailability({});
t && this.updateSettings(t.temporaryDisabled), e.DeepLink.onTemporaryDisabledSettingsChanged.subscribe((e => {
this.updateSettings(e.temporaryDisabled);
})), Cr(this, {
updateSettings: Ln
});
}
updateSettings(e) {
e && this.settings.set(e);
}
getSettingDisabled(e) {
return this.settings.get().includes(e);
}
}, [zq, jq] = js({
debugName: "disabledSettingsState",
create: e => {
const t = e.get(zg);
return new Gq(t);
}
}), qq = e => ({
disabled: jq().getSettingDisabled(e)
}), Yq = ({label: e, group: t, keyBinding: n, icon: r}, {getKeyBindingText: i}) => [ r === Sf.OPEN_EXTERNAL ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_EXTERNAL-LINK-FOCUSED", {
"%linkLabel%": e,
"%primaryKey%": i(n)
}) : wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_CATEGORY-FOCUSED", {
"%settingCategory%": e,
"%primaryKey%": i(n)
}), t.getMetadata(0) ], Kq = Ii.observer((({setting: e, item: t, telemetryMessage: n, style: r}) => {
const i = Lh(), o = tN(), a = Pj(), {disabled: s} = qq(e), l = cy(), c = H.useCallback((() => {
TT(l, n), i.DeepLink.openSetting({
setting: e
}), o.close(), a();
}), [ o, a, i.DeepLink, l, e, n ]);
return H.createElement(ij, {
style: r,
item: {
isDisabled: s,
action: c,
...t
},
narrationItem: Yq
});
})), Wq = Ii.observer((({title: e, body: t, alwaysAvailable: n, ...r}) => {
const i = pb.availableSettings.includes(r.setting);
return n || i ? H.createElement(Jq, {
title: e,
body: t
}, H.createElement(Kq, {
...r
})) : null;
})), Xq = ({text: e}) => (Du((() => wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_CATEGORY-SELECTED", {
"%settingCategory%": e
})), [ e ], 0), H.createElement(zN, {
text: e,
style: uj
})), Qq = bh.DeepLink.Setting, $q = {
pg_id: "overlay_settings_accessibility",
destination_name: "general_accessibility",
msg_id: "general_accessibility"
}, Zq = {
...$q,
option: "accessibility_settings"
}, eY = () => (OT($q), H.createElement(H.Fragment, null, H.createElement(Xq, {
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_ACCESSIBILITY")
}), H.createElement(Wq, {
title: wh("PHOTON-SOCIAL_SETTINGS_ACCESSIBILITY_SECTION-TITLE"),
body: wh("PHOTON-SOCIAL_SETTINGS_ACCESSIBILITY_GENERAL_DESC"),
setting: Qq.Accessibility,
telemetryMessage: Zq,
item: {
id: "setting-accessibility",
text: wh("PHOTON-SOCIAL_SETTINGS_ACCESSIBILITY_GENERAL_EXT-LINK"),
icon: Sf.OPEN_EXTERNAL
}
}))), tY = bh.DeepLink.Setting, nY = {
pg_id: "overlay_settings_cross_play",
destination_name: "cross_play",
msg_id: "cross_play"
}, rY = {
...nY,
option: "cross_play_settings"
}, iY = () => (OT(nY), H.createElement(H.Fragment, null, H.createElement(Xq, {
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_CROSSPLAY")
}), H.createElement(Wq, {
title: wh("PHOTON-SOCIAL_SETTINGS_CROSSPLAY_SECTION-TITLE"),
body: wh("PHOTON-SOCIAL_SETTINGS_CROSSPLAY_GENERAL_DESC"),
setting: tY.CrossPlay,
item: {
id: "setting-crossplay",
text: wh("PHOTON-SOCIAL_SETTINGS_CROSSPLAY_GENERAL_EXT-LINK"),
icon: Sf.OPEN_EXTERNAL
},
telemetryMessage: rY
}))), oY = Ec({
zOffset: 1,
marginTop: hc(2),
marginStart: hc(gu.RadioInputIcon.Container.marginStart),
flexShrink: 0
}), aY = Ec({
position: "absolute",
top: 0,
left: 0,
right: 0,
bottom: 0
}), sY = {
background: Ec({
texture: Sf.RADIO_INPUT_BACKGROUND
}),
stroke: Ec({
texture: Sf.RADIO_INPUT_STROKE
}),
bullet: Ec({
texture: Sf.RADIO_INPUT_BULLET
})
}, lY = Ec({
width: hc(32),
height: hc(32),
alignItems: "center",
justifyContent: "center"
}), cY = Ec({
width: hc(12),
height: hc(12),
color: gu.RadioInputIcon.Bullet.color
}), dY = H.memo((({isSelected: e, isDisabled: t}) => {
let n;
return n = t ? gu.RadioInputIconDisabled.Stroke.color : e ? gu.RadioInputIconSelected.Stroke.color : gu.RadioInputIcon.Stroke.color, 
H.createElement("surface", {
style: [ oY, Wx.icon ]
}, H.createElement("surface", {
style: [ aY, sY.background, Lc("color", gu.RadioInputIcon.Container.backgroundColor) ]
}), H.createElement("surface", {
style: [ aY, sY.stroke, Lc("color", n) ]
}), e && H.createElement("surface", {
style: [ aY, lY ]
}, H.createElement("surface", {
style: [ sY.bullet, cY ]
})));
})), uY = {
onPress: 4
}, pY = () => Up(2), fY = Ii.observer((e => {
const t = pY(), {isSelected: n, onSelect: r} = e, i = H.useCallback((() => {
n || r();
}), [ n, r ]), o = Jp({
...e,
soundEffectOverride: uY,
onClick: i,
input: {
keyBinding: t,
callback: i
}
});
let a;
if (!e.skipButtonIcon) {
const e = sc(t.primaryButton);
e && (a = H.createElement(RB, {
type: e,
showOnPressedOrFocused: !0,
style: Lc("marginEnd", hc(gu.RadioInput.ButtonIcon.marginEnd))
}));
}
return H.createElement(_B, {
transparent: e.transparent,
interaction: o
}, H.createElement(bB, null, a, "string" == typeof e.label ? H.createElement(CB, {
text: e.label
}) : e.children, H.createElement(dY, {
isSelected: e.isSelected,
isDisabled: e.isDisabled
})));
})), hY = e => "string" == typeof e ? e : e();
function mY(e) {
const {option: t, isSelected: n, index: r, onChange: i, narrationItem: o} = e, a = pY(), s = Qu(e.focusId), l = ej();
Fu((e => o({
label: hY(t.label),
index: r,
isSelected: n,
keyBinding: a,
group: l
}, e)), [ o, t.label, n, r, l, a ], s), H.useEffect((() => l.addFocusId(s)), [ l, s ]);
const c = H.useCallback((() => {
i?.(t.value);
}), [ i, t.value ]);
return H.createElement(fY, {
label: hY(t.label),
id: t.id,
onSelect: c,
isSelected: n,
isDisabled: t.isDisabled,
focusId: s,
transparent: !0
});
}
function gY({value: e, items: t, onChange: n, narrationItem: r, style: i}) {
const o = ej();
return H.useEffect((() => {
o.setMetadata(1, t.length);
}), [ o, t.length ]), H.createElement("surface", {
style: i
}, t.map(((t, i) => H.createElement(mY, {
key: t.id,
isSelected: e === t.value,
option: t,
focusId: t.focusId,
index: i,
onChange: n,
narrationItem: r
}))));
}
var yY = ({label: e, group: t, isSelected: n, index: r, keyBinding: i}, {getKeyBindingText: o}) => [ n ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_ACTIVE-RADIO-BUTTON-FOCUSED", {
"%radioName%": e,
"%radioNumber%": r + 1 + "",
"%radioTotal%": (t.getMetadata(1) ?? "") + ""
}) : wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_INACTIVE-RADIO-BUTTON-FOCUSED", {
"%radioName%": e,
"%radioNumber%": r + 1 + "",
"%radioTotal%": (t.getMetadata(1) ?? "") + "",
"%primaryKey%": o(i)
}), t.getMetadata(0) ], IY = {
1: "online",
2: "offline"
}, _Y = [ {
id: "online",
label: () => wh("PHOTON-SOCIAL_SETTINGS_STATUS_ONLINE_RADIAL"),
value: 1
}, {
id: "offline",
label: () => wh("PHOTON-SOCIAL_SETTINGS_STATUS_OFFLINE_RADIAL"),
value: 2
} ], bY = Ii.observer((() => {
const {playerNetworkId: e} = aP(), t = cy(), n = mp(), r = Os(), i = ws(Zb), {showNotification: o} = oP(), a = yb(), s = zb(e);
OT({
pg_id: "overlay_settings_online_status",
msg_id: "overlay_settings_online_status"
});
const l = H.useCallback((i => {
const s = 2 === i;
s || o(3, 3, {
icon: Sf.INFORMATION,
text: Wb(e, s)
}), TT(t, {
pg_id: "overlay_settings_online_status",
msg_id: "overlay_settings_online_status",
option: IY[i]
}), tS(r, n.localStorage, a, i);
}), [ r, t, o, n, a, e ]);
return H.createElement(Jq, {
title: wh("PHOTON-SOCIAL_SETTINGS_STATUS_HEADLINE"),
body: pb.isFirstPartyAppearOfflineSupported ? wh("PHOTON-SOCIAL_SETTINGS_STATUS_DESC_CASCADING", {
"%platformName%": s
}) : wh("PHOTON-SOCIAL_SETTINGS_STATUS_DESC_PARTITIONED", {
"%platformName%": s
})
}, !pb.isFirstPartyAppearOfflineSupported && H.createElement(gY, {
style: cj,
items: _Y,
value: i,
onChange: l,
narrationItem: yY
}));
})), SY = Ii.observer((() => H.createElement(Qz, {
id: "online-status",
scrollbarAlwaysVisible: dg.isPC
}, H.createElement(Xq, {
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_STATUS")
}), H.createElement(bY, null)))), vY = bh.DeepLink.Setting, TY = bh.InputBindings.Action, EY = bh.XboxPlatform.XboxPermission, PY = bh.XboxPlatform.XUserPrivilege, OY = Ec({
marginTop: hc(Xc.DimensionSpace.largest),
padding: hc(Xc.DimensionSpace.small),
alignSelf: "flex-start"
}), CY = Ec({
texture: Dc("/photon/ElectronicArtsSignInQR-76b8ba05.png"),
width: hc(248),
height: hc(248),
borderRadius: hc(Xc.BorderRadius.smallest)
}), NY = Ec({
width: hc(500),
height: hc(500)
}), AY = [ {
id: "private",
label: () => wh("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_BUTTON_PRIVATE"),
value: !1
}, {
id: "public",
label: () => wh("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_BUTTON_PUBLIC"),
value: !0
} ], LY = () => {
const {closeModal: e} = uT();
return EA({
action: TY.Decline,
callback: e,
label: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK")
}), H.createElement(QN, null, H.createElement("surface", {
style: [ CY, NY ]
}));
}, wY = Ii.observer((() => {
const {showModal: e} = uT(), t = wA(TY.Primary), n = H.useCallback((() => {
e((() => H.createElement(LY, null)), {
opaque: !0
});
}), [ e ]), {focusItem: r, isFocused: i, isPressed: o} = Jp({
id: "qrOpen",
onClick: n,
input: {
callback: n,
keyBinding: t
}
}), a = Cf({
borderColor: Nf({
isFocused: i,
isPressed: o
}),
backgroundColor: void 0
});
return H.createElement("surface", {
style: [ OY, a ],
...r.hooks
}, H.createElement("surface", {
style: CY
}));
})), kY = {
pg_id: "overlay_settings_privacy",
destination_name: "party_and_lobby_privacy",
msg_id: "party_and_lobby_privacy"
}, RY = Ii.observer((() => {
const e = $T(), {showNotification: t} = oP(), n = cy(), r = Os(), i = mb(), o = aP();
OT(kY);
const a = H.useCallback((async a => {
const {isAllowed: s, privacyResult: l} = await DT(r, i.photonPlayerId, [ EY.PlayMultiplayer ], PY.Multiplayer);
return a && !s ? (TT(n, {
pg_id: "overlay_settings_privacy",
destination_name: "party_and_lobby_privacy",
status: "click",
msg_id: "party_and_lobby_privacy",
option: "joinable",
status_code: FT(l)
}), void t(3, 3, {
icon: Sf.INFORMATION,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": zb(o.playerNetworkId)
})
})) : (TT(n, {
pg_id: "overlay_settings_privacy",
destination_name: "party_and_lobby_privacy",
msg_id: "party_and_lobby_privacy",
option: a ? "joinable" : "invite_only"
}), t(3, 3, {
icon: Sf.INFORMATION,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_SETTINGS-UPDATED")
}), e.setSetting(1, 0, a));
}), [ n, e, t, i, r, o ]);
return H.createElement(Jq, {
title: wh("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_HEADING"),
body: wh("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_DESC", {
"%localPlatform%": zb(i.personaInfo.playerNetworkId)
})
}, H.createElement(gY, {
style: cj,
items: AY,
value: e.getSetting(1, 0),
onChange: a,
narrationItem: yY
}));
})), xY = {
pg_id: "overlay_settings_privacy",
destination_name: "ea_account_privacy",
msg_id: "ea_account_privacy"
}, BY = () => {
const e = wh("PHOTON-SOCIAL_SETTINGS_PRIVACY_EA-ACCOUNT-PRIVACY_EXT-LINK"), t = "https://" + e, {showErrorNotification: n} = oP(), r = mp(), i = tN(), o = Pj();
OT(xY);
const a = H.useCallback((() => {
r.bindings.Utilities.openUrl({
url: t
}) ? (i.close(), o()) : n({}, "open ea account portal url", void 0);
}), [ r.bindings.Utilities, t, i, o, n ]);
return H.createElement(H.Fragment, null, H.createElement(Jq, {
title: wh("PHOTON-SOCIAL_SETTINGS_PRIVACY_EA-ACCOUNT-PRIVACY_HEADING"),
body: wh("PHOTON-SOCIAL_SETTINGS_PRIVACY_EA-ACCOUNT-PRIVACY_DESC")
}, dg.isPC ? H.createElement(ij, {
item: {
id: "setting-ea-account-link",
action: a,
text: e,
icon: Sf.OPEN_EXTERNAL
},
narrationItem: Yq
}) : H.createElement(iv, {
text: e
})), H.createElement(wY, null));
}, DY = () => {
const e = pb.availableSettings.includes(vY.Party), t = dg.isPartyEnabled || e;
return H.createElement(Qz, {
id: "settings-privacy",
scrollbarAlwaysVisible: dg.isPC
}, H.createElement(Xq, {
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_PRIVACY")
}), t ? H.createElement(RY, null) : void 0, H.createElement(BY, null));
}, FY = fg("/settings", "overlay_settings"), MY = FY.createSubRoute("/notifications", "overlay_settings_notifications"), UY = FY.createSubRoute("/privacy", "overlay_settings_privacy"), HY = FY.createSubRoute("/voice/:focusOnSetting?", "overlay_settings_voice"), VY = FY.createSubRoute("/accessibility", "overlay_settings_accessibility"), JY = FY.createSubRoute("/crossplay", "overlay_settings_cross_play"), GY = FY.createSubRoute("/online-status", "overlay_settings_online_status"), zY = bh.DeepLink.Setting, jY = bh.DeepLink.ParentalControlSettings, qY = bh.Voip.VoipChannel, YY = {
pg_id: "overlay_settings_voice",
destination_name: "general_voice",
msg_id: "general_voice"
}, KY = {
...YY,
option: "voice_settings"
}, WY = {
...YY,
option: "voice_xbox_parental_settings"
}, XY = "voip-settings-enabled", QY = Ii.observer((() => {
const e = Os(), t = XA(), n = $T(), {showNotification: r} = oP(), i = cy(), o = Rs(rl), {focusOnSetting: a} = HY.useParams(), s = pb.isChild && dg.isPC, l = H.useRef(!1), c = H.useCallback((() => {
a && !l.current && (l.current = !0, o({
focusId: XY,
source: 2
}));
}), [ a, o ]), d = H.useCallback((o => {
r(3, 3, {
icon: o ? Sf.VOIP : Sf.VOIP_DISABLED,
text: wh(o ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-ENABLED" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED")
});
const a = qA(e);
return o || a || t({
channel: qY.None
}, !0), TT(i, {
...YY,
option: o ? "enable" : "disable",
destination_name: "voice_chat",
msg_id: "voice_chat"
}), n.setSetting(2, 0, o);
}), [ e, t, n, r, i ]), u = H.useMemo((() => [ {
id: "enabled",
focusId: XY,
label: () => wh("PHOTON-SOCIAL_SETTINGS_VOICE_RADIO-BUTTON_VOIP-ENABLE"),
value: !0,
isDisabled: s
}, {
id: "disabled",
label: () => wh("PHOTON-SOCIAL_SETTINGS_VOICE_RADIO-BUTTON_VOIP-DISABLE"),
value: !1,
isDisabled: s
} ]), [ s ]);
return H.createElement("surface", {
onBounds: c,
style: Lc("marginTop", hc(Xc.DimensionSpace.larger))
}, H.createElement(Jq, {
title: wh("PHOTON-SOCIAL_SETTINGS_VOICE_VOICE-CHAT_HEADING"),
body: wh(s ? "PHOTON-SOCIAL_SETTINGS_VOICE_UNDERAGE-VOIP-PC_DESC" : "PHOTON-SOCIAL_SETTINGS_VOICE_UNDERAGE-VOIP_DESC")
}, H.createElement(gY, {
style: cj,
items: u,
value: n.getSetting(2, 0),
onChange: d,
narrationItem: yY
})));
})), $Y = Ii.observer((() => {
OT(YY);
const e = Vv()(jY.Voip);
return H.createElement(Qz, {
id: "settings-voice",
scrollbarAlwaysVisible: dg.isPC
}, H.createElement(Xq, {
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_VOICE")
}), H.createElement(Wq, {
title: wh("PHOTON-SOCIAL_SETTINGS_VOICE_AUDIO_HEADING"),
body: wh("PHOTON-SOCIAL_SETTINGS_VOICE_VOICE-CHAT_DESC"),
style: cj,
setting: zY.Audio,
item: {
id: "setting-voice",
text: wh("PHOTON-SOCIAL_SETTINGS_VOICE_VOICE-CHAT_EXT-LINK"),
icon: Sf.OPEN_EXTERNAL
},
telemetryMessage: KY
}), H.createElement(QY, null), $I() ? H.createElement(Wq, {
title: wh("PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_HEADING"),
body: wh(e ? "PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_DISABLED_DESC" : "PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_ENABLED_DESC"),
alwaysAvailable: !0,
setting: zY.FirstPartyParentalVoip,
item: {
id: "setting-parental-control",
text: wh("PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_EXT-LINK"),
icon: Sf.OPEN_EXTERNAL
},
telemetryMessage: WY
}) : void 0);
})), ZY = Ec({
marginStart: hc(Xc.DimensionSpace.large)
}), eK = [ {
id: "toggleMute",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TOGGLE_MUTE"),
value: 2,
telemetryId: "muted"
}, {
id: "toggleUnmute",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TOGGLE_UNMUTE"),
value: 0,
telemetryId: "unmuted"
} ], tK = [ {
id: "always",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_ALWAYS"),
value: 0,
telemetryId: "always"
}, {
id: "notGameplay",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_NOT-GAMEPLAY"),
value: 1,
telemetryId: "not_during_gameplay"
}, {
id: "never",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_NEVER"),
value: 2,
telemetryId: "never"
} ], nK = [ {
id: "weekly",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-REMINDER_RADIO_WEEKLY"),
value: 0,
telemetryId: "weekly"
}, {
id: "never",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_NEVER"),
value: 1,
telemetryId: "never"
} ], rK = [ {
id: "six-seconds",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_6-SEC"),
value: 6,
telemetryId: "6_sec"
}, {
id: "ten-seconds",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_10-SEC"),
value: 10,
telemetryId: "10_sec"
} ], iK = [ {
id: "top-left",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_TOP-LEFT"),
value: 0,
telemetryId: "top_left"
}, {
id: "top-right",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_TOP-RIGHT"),
value: 1,
telemetryId: "top_right"
}, {
id: "bottom-left",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_BOTTOM-LEFT"),
value: 2,
telemetryId: "bottom_left"
}, {
id: "bottom-right",
label: () => wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_BOTTOM-RIGHT"),
value: 3,
telemetryId: "bottom_right"
} ], oK = Ii.observer((e => {
const {body: t, setting: n, options: r, onSuccess: i, destinationName: o} = e, a = $T(), s = cy(), l = H.useCallback((e => (TT(s, {
pg_id: "overlay_settings_notifications",
destination_name: o,
msg_id: o,
status: "click",
option: r.find((t => t.value === e))?.telemetryId,
index: {
item_index: 0,
total_items: 0
}
}), i(), a.setSetting(0, n, e))), [ o, a, i, s, n, r ]);
return H.createElement(Jq, {
body: t,
style: ZY
}, H.createElement(gY, {
style: cj,
items: r,
value: a.getSetting(0, n),
onChange: l,
narrationItem: yY
}));
})), aK = Ec({
rotateZ: -90
}), sK = Ii.observer((e => {
const [t, n] = H.useState(!1), r = H.useCallback((() => {
n((e => !e));
}), []), i = tj();
return Mu((() => e.title), [ e.title ], 1, i), OT({
pg_id: "overlay_settings_notifications",
destination_name: e.destinationName,
msg_id: e.destinationName
}), H.createElement(H.Fragment, null, H.createElement(Zz.Provider, {
value: i
}, H.createElement(ij, {
item: {
id: e.id + "_collapsible",
action: r,
text: e.title,
icon: vf.down,
iconStyle: t ? void 0 : aK,
isActive: t,
isFocusableWhenActive: !0
},
narrationItem: Yq
})), t && e.children);
})), lK = {
pg_id: "overlay_settings_notifications",
destination_name: "restore_defaults",
msg_id: "restore_defaults"
}, cK = Ii.observer((({onSuccess: e, isDisabled: t}) => {
const {showModal: n} = uT(), r = Pj(), i = cy(), o = $T();
OT(lK);
const a = H.useCallback((() => {
n((() => H.createElement(mA, {
title: wh("PHOTON-SOCIAL_SETTINGS_OVERLAY_TITLE_RESTORE-NOTIFICATIONS"),
body: wh("PHOTON-SOCIAL_SETTINGS_OVERLAY_DESC_RESTORE-NOTIFICATIONS"),
onConfirm: () => (TT(i, {
pg_id: "overlay_settings_notifications_restore",
msg_id: "overlay_settings_notifications_restore",
option: "confirm"
}), e(), o.restoreSettings(0)),
onCancel: () => {
TT(i, {
pg_id: "overlay_settings_notifications_restore",
msg_id: "overlay_settings_notifications_restore",
option: "cancel"
});
},
autoClose: !0,
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E
})), {
telemetryId: "overlay_settings_notifications_restore"
}), r(), TT(i, {
pg_id: "overlay_settings_notifications",
destination_name: "restore_defaults",
msg_id: "restore_defaults",
option: "restore"
});
}), [ n, r, i, e, o ]);
return H.createElement(Jq, {
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RESTORE-ALL_HEADING"),
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RESTORE-ALL_DESC"),
style: [ Lc("marginTop", hc(Xc.DimensionSpace.large)), t ? Lc("opacity", .5) : void 0 ]
}, H.createElement(ij, {
item: {
id: "setting-notifications-restore",
action: a,
text: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_BUTTON_RESTORE"),
isDisabled: t
},
narrationItem: Yq
}));
})), dK = Ii.observer((() => {
const e = $T(), {showNotification: t} = oP(), n = Os(), r = 0 !== e.getSetting(0, 0), i = H.useCallback((() => {
t(3, 3, {
icon: Sf.INFORMATION,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_SETTINGS-UPDATED")
});
}), [ t ]), o = n.get(JO);
return H.createElement(Qz, {
id: "settings-notifications",
scrollbarAlwaysVisible: dg.isPC
}, H.createElement(Xq, {
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_NOTIFICATIONS")
}), !r && H.createElement(H.Fragment, null, H.createElement(sK, {
id: "notification-settings-online-favorite-friend",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FAVORITES_HEADING"),
destinationName: "favorite_logged_online"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FAVORITES_DESC"),
setting: 8,
options: tK,
onSuccess: i,
destinationName: "favorite_logged_online"
})), H.createElement(sK, {
id: "notification-settings-online-friend",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FRIEND_HEADING"),
destinationName: "friend_logged_online"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FRIEND_DESC"),
setting: 1,
options: tK,
onSuccess: i,
destinationName: "friend_logged_online"
})), o && H.createElement(sK, {
id: "notification-settings-online-playerlist-member",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-MEMBER_HEADING"),
destinationName: "playerlist_member_logged_online"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-MEMBER_DESC"),
setting: 7,
options: tK,
onSuccess: i,
destinationName: "playerlist_member_logged_online"
})), H.createElement(sK, {
id: "notification-settings-friend-request-received",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-RECEIVED_HEADING"),
destinationName: "friend_request_received"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-RECEIVED_DESC"),
setting: 2,
options: tK,
onSuccess: i,
destinationName: "friend_request_received"
})), H.createElement(sK, {
id: "notification-settings-friend-request-accepted",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-ACCEPTED_HEADING"),
destinationName: "friend_request_accepted"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-ACCEPTED_DESC"),
setting: 3,
options: tK,
onSuccess: i,
destinationName: "friend_request_accepted"
})), H.createElement(sK, {
id: "notification-settings-party-invite-received",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_PARTY-INVITE-RECEIVED_HEADING"),
destinationName: "party_lobby_invite_received"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-ACCEPTED_DESC"),
setting: 5,
options: tK,
onSuccess: i,
destinationName: "party_lobby_invite_received"
})), dg.isPartyEnabled && H.createElement(sK, {
id: "notification-settings-player-promoted",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_PLAYER-PROMOTED_HEADING"),
destinationName: "party_player_promoted"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_PLAYER-PROMOTED_DESC"),
setting: 6,
options: tK,
onSuccess: i,
destinationName: "party_player_promoted"
})), NR(n) && H.createElement(sK, {
id: "notification-settings-friend-request-reminders",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-REMINDER_HEADING"),
destinationName: "fr_reminder"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-REMINDER_DESC"),
setting: 4,
options: nK,
onSuccess: i,
destinationName: "fr_reminder"
})), H.createElement(sK, {
id: "notification-settings-time-and-location",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TIME-LOCATION_HEADING"),
destinationName: "notification_time_location"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TIME_DESC"),
setting: 9,
options: rK,
onSuccess: i,
destinationName: "notification_time"
}), H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_LOCATION_DESC"),
setting: 10,
options: iK,
onSuccess: i,
destinationName: "notification_location"
}))), H.createElement(sK, {
id: "notifications_global_mute",
title: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_MUTE_HEADING"),
destinationName: "mute_all_social_notifications"
}, H.createElement(oK, {
body: wh("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_MUTE_DESC"),
setting: 0,
options: eK,
onSuccess: i,
destinationName: "mute_all_social_notifications"
})), 0 === e.getSetting(0, 0) && H.createElement(cK, {
onSuccess: i,
isDisabled: e.isDefaultSettings(0)
}));
})), uK = bh.InputBindings.Action, pK = bh.DeepLink.Setting, fK = e => ({match: t}) => H.createElement(Tj, {
isVisible: !!t
}, e), hK = H.memo((() => H.createElement(H.Fragment, null, H.createElement(Fo, {
path: GY.path
}, fK(H.createElement(SY, null))), H.createElement(Fo, {
path: MY.path
}, fK(H.createElement(dK, null))), H.createElement(Fo, {
path: UY.path
}, fK(H.createElement(DY, null))), H.createElement(Fo, {
path: HY.path
}, fK(H.createElement($Y, null))), H.createElement(Fo, {
path: VY.path
}, fK(H.createElement(eY, null))), H.createElement(Fo, {
path: JY.path
}, fK(H.createElement(iY, null)))))), mK = ({navigate: e}) => {
const t = qo();
Du((() => wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_SETTINGS-OPENED")), [], 0);
const n = H.useMemo((() => {
const n = [];
return pb.availableSettings.includes(pK.AppearOffline) && n.push({
id: "onlineStatus",
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_STATUS"),
action: () => e(GY.link()),
isActive: !!Bo(t.pathname, GY.path)
}), n.push({
id: "notifications",
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_NOTIFICATIONS"),
action: () => e(MY.link()),
isActive: !!Bo(t.pathname, MY.path)
}), n.push({
id: "privacy",
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_PRIVACY"),
action: () => e(UY.link()),
isActive: !!Bo(t.pathname, UY.path)
}), dg.isPartyEnabled && n.push({
id: "voice",
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_VOICE"),
action: () => e(HY.link()),
isActive: !!Bo(t.pathname, HY.path)
}), pb.availableSettings.includes(pK.Accessibility) && n.push({
id: "accessibility",
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_ACCESSIBILITY"),
action: () => e(VY.link()),
isActive: !!Bo(t.pathname, VY.path)
}), pb.availableSettings.includes(pK.CrossPlay) && n.push({
id: "crossplay",
text: wh("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_CROSSPLAY"),
action: () => e(JY.link()),
isActive: !!Bo(t.pathname, JY.path)
}), [ {
id: "settings",
actions: n
} ];
}), [ t.pathname, e ]);
return H.createElement(H.Fragment, null, H.createElement(zN, {
text: wh("PHOTON-SOCIAL_SETTINGS_ACTION-SHEET_HEAD"),
style: [ dj, Lc("marginBottom", hc(Xc.DimensionSpace.larger)) ]
}), H.createElement(Qz, {
id: "settings"
}, H.createElement(lj, {
items: n,
narrationItem: Yq
})));
}, gK = Ec({
position: "absolute",
right: kp.width,
bottom: kp.height,
textAlign: "end",
enableMouseEvents: !1,
color: Wd(Xc.TextColorStandard.emphasized, .2)
}), yK = Ec({
color: Wd(Xc.TextColorStandard.emphasized, .2)
});
var IK = "main_51551".split("_").pop() || "", _K = H.createElement((() => {
Os();
return H.createElement("surface", {
style: gK
}, H.createElement("surface", {
text: IK,
style: [ Dd, yK ]
}), !1);
}), null), bK = Ii.observer((({match: e}) => {
const t = Os(), {history: n, navigate: r} = Wg(), i = cy(), o = !!e, a = !!e?.isExact;
H.useEffect((() => {
a && TT(i, {
pg_id: "overlay_settings",
status: "impression",
msg_id: "overlay_settings"
});
}), [ a, i ]);
const s = H.useCallback((() => {
a || t.getUntracked(ll) ? (TT(i, {
pg_id: "overlay_settings",
option: "back"
}), r(Qg.link())) : r(FY.link());
}), [ t, r, i, a ]), l = uK.Decline, c = wA(l);
EA(o ? {
action: l,
callback: s,
label: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK")
} : void 0), Du((({getKeyBindingText: e}) => o || a ? wh("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_MENU-EXIT", {
"%backKey%": e(c)
}) : void 0), [ c, o, a ], 2, o);
const d = H.useCallback((e => {
Bo(n.location.pathname, FY.path)?.isExact ? r(e) : n.replace(e);
}), [ n, r ]), u = H.useMemo((() => H.createElement(hK, null)), []);
return H.createElement(Oj, {
isVisible: o,
onDimmerClick: s,
contextualSheet: u,
extraDimmerContent: _K
}, H.createElement(Jf, {
disableForControllerMode: !a,
disable: !o
}, H.createElement(mK, {
navigate: d
})));
})), SK = Ks({
debugName: "settingButtonSurfaceId",
default: null
}), vK = () => {
const {ftueManager: e} = $H(), t = Rs(SK);
return yi.useObserver((() => e.isLoaded && e.isDone("ftue_settings_notification"))) ? void 0 : t;
}, TK = () => {
const {notificationManager: e} = oP(), t = Os(), n = cy(), {ftueManager: r, showFTUENotification: i} = $H(), o = tN(), a = yi.useObserver((() => r.isLoaded && r.isDone("ftue_settings_notification"))), [s, l] = H.useState(!1), [c, d] = H.useState(0);
H.useEffect((() => {
if (s) return ER((() => t.get(SK)), (e => {
i("ftue_settings_button", (async () => {
await r.setAsDone("ftue_settings_notification"), d(0), r.setShowingToast(!1);
}), (() => {
l(!1), d(1), r.setShowingToast(!0);
}), wh("PHOTON-SOCIAL_FTUE_NOTIFICATIONS_ACTIONABLE-TOOLTIP"), {
attachToSurface: {
surfaceId: e,
offsetX: -jH - zH / 2
},
showAsToast: !0,
telemetryInfo: {
pg_id: "ttip_adjust_notif_pref"
}
});
}));
}), [ t, r, i, s ]), H.useEffect((() => {
if (!a && 0 === c) return e.onComplete.subscribe(((e, t) => {
const n = o.isRevealed ? "ftue_settings_button" : "ftue_settings_notification";
if (r.shouldShowFTUE("ftue_settings_notification", n) && 2 === t) if (o.isRevealed) l(!0); else {
i("ftue_settings_notification", (() => {}), (() => {
r.seenThisSession("ftue_settings_notification"), d(2);
}), wh("PHOTON-SOCIAL_FTUE_NOTIFICATIONS_ACTIONABLE-TOAST"), {
withOpenInfo: !0,
telemetryInfo: {
pg_id: "tst_set_notif"
}
});
}
}));
}), [ n, c, r, a, e.onComplete, i, o ]);
}, EK = bh.InputBindings.Action, PK = () => {
const {navigate: e} = Wg("overlay"), {history: t} = Wg("main"), n = cy(), r = Os(), i = vK(), o = H.useCallback((() => (TT(n, {
pg_id: mT(r, t.location),
destination_name: "bottom_bar",
status: "click",
msg_id: "bottom_bar",
option: "social_settings"
}), e(FY.link()))), [ r, t, e, n ]);
EA({
registrationIdOverride: "GlobalSettings",
callback: o,
label: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_SETTINGS"),
action: EK.Settings,
onSurfaceId: i
});
}, OK = {
debugUi: pC + 1,
debugConsole: pC + 2,
dropdown: oC - 1
}, CK = Ii.observer((() => {
const e = ws(Eh), {fullscreenStyle: t} = Ep(), n = ZT(e ? 1 : 0), [r, i] = H.useState(e);
return H.useEffect((() => {
const t = {
duration: Xc.AnimationTime.fastest,
easing: Xc.AnimationEasing.ease
};
e ? (i(!0), n.to(1, t)) : n.to(0, {
...t,
onFinished: () => {
i(!1);
}
});
}), [ e, n ]), r ? H.createElement(PC, {
opacityTween: n,
type: 1,
style: t
}) : null;
})), NK = Ec({
flexDirection: "row",
flex: 1,
zOffset: uC,
enableMouseEvents: !1,
position: "absolute",
top: kp.height,
left: kp.width,
opacity: .3
}), AK = ({text: e}) => {
const t = mb(), {timeout: n, disposeTimeout: r} = Cu(), [i, o] = H.useState(), a = H.useRef(), s = H.useCallback((e => {
a.current || (a.current = {
width: e.width,
height: e.height
});
}), []);
H.useEffect((() => {
const e = () => {
const t = a.current, r = Math.floor(t?.width ?? 0), i = Math.floor(t?.height ?? 0), s = Math.random() * (Rp.width - r), l = Math.random() * (Rp.height - i);
o({
x: s,
y: l
}), n("reposition", (() => {
e();
}), 5e3);
};
return e(), () => r("reposition");
}), [ a, r, n ]);
const l = wc((() => ({
translateX: i?.x ?? -1e3,
translateY: i?.y ?? -1e3,
rotateZ: -15
})), [ i ]);
return i ? H.createElement("surface", {
style: [ NK, l ],
onBounds: s
}, H.createElement(yv, {
playerNetworkId: t.personaInfo.playerNetworkId,
name: t.personaInfo.displayName,
useEllipsis: !1
}), H.createElement(iv, {
text: e,
style: Lc("marginLeft", hc(Xc.DimensionSpace.medium))
})) : null;
}, LK = fs.Input.MouseEventType, wK = bh.InputBindings.Action, kK = Ec({
width: hc(Xc.DimensionSpace.medium),
height: hc(Xc.DimensionSpace.medium),
marginEnd: hc(Xc.DimensionSpace.small)
}), RK = Ec({
texture: Sf.ONLINE_STATUS_INDICATOR,
color: Xc.ColorSystemSuccess._300
}), xK = Ec({
texture: Sf.OFFLINE_STATUS_INDICATOR
}), BK = Ec({
texture: Sf.DO_NOT_DISTURB
}), DK = Ec({
flex: 1
}), FK = Nc((e => ({
rotateZ: e ? 180 : 0
})), {
marginStart: hc(Xc.DimensionSpace.small)
}), MK = Ec({
zOffset: OK.dropdown,
position: "absolute",
top: hc(90),
right: hc(0),
width: hc(530),
backgroundColor: Xc.ColorNeutral._500,
padding: hc(Xc.DimensionSpace.large),
borderRadius: hc(Xc.BorderRadius.small)
}), UK = Ec({
marginBottom: hc(Xc.DimensionSpace.larger)
});
function HK() {}
var VK = ({text: e, iconStyle: t, isSelected: n, onSelect: r}) => H.createElement(fY, {
id: e,
onSelect: r,
isSelected: n,
skipButtonIcon: !0
}, H.createElement("surface", {
style: [ kK, t ]
}), H.createElement(iv, {
color: Xc.TextColorStandard.emphasized,
text: e,
style: DK
})), JK = Ii.observer((({onSurfaceId: e, closeDropdown: t}) => {
EA({
action: wK.Decline,
callback: t
});
const n = Os(), {setOnline: r, setReadyToPlay: i, setDoNotDisturb: o, setAppearOffline: a} = H.useMemo((() => {
function e(e, r) {
hr((() => {
n.set(bU, e), n.set(Yb, r), t();
}));
}
return {
setOnline() {
e(void 0, !1);
},
setReadyToPlay() {
e("DOWN_TO_PLAY", !1);
},
setDoNotDisturb() {
e("DO_NOT_DISTURB", !1);
},
setAppearOffline() {
e(void 0, !0);
}
};
}), [ n, t ]), s = Kb(), l = n.get(bU);
return H.createElement("surface", {
style: MK,
onSurfaceId: e,
onClick: HK
}, H.createElement(Zx, {
text: wh("PHOTON-SOCIAL_STATUS_HEADING"),
color: Xc.TextColorStandard.emphasized,
style: UK
}), H.createElement(VK, {
text: wh("PHOTON-SOCIAL_PRESENCE_ONLINE"),
iconStyle: RK,
onSelect: r,
isSelected: !s && !l
}), H.createElement(VK, {
text: wh("PHOTON-SOCIAL_STATUS_READY-TO-PLAY_RADIO"),
iconStyle: RK,
onSelect: i,
isSelected: "DOWN_TO_PLAY" === l
}), H.createElement(VK, {
text: wh("PHOTON-SOCIAL_STATUS_DO-NOT-DISTURB_RADIO"),
iconStyle: BK,
onSelect: o,
isSelected: "DO_NOT_DISTURB" === l
}), H.createElement(VK, {
text: wh("PHOTON-SOCIAL_SETTINGS_STATUS_OFFLINE_RADIAL"),
iconStyle: xK,
onSelect: a,
isSelected: s
}));
})), GK = Ii.observer((({children: e}) => {
const t = "presence-status", n = Os(), [r, i] = H.useState(!1), o = H.useRef(null), a = mp(), {toggleDropdown: s, openDropdown: l, closeDropdown: c, onDropdownContentSurfaceId: d} = H.useMemo((() => ({
toggleDropdown() {
i((e => !e));
},
openDropdown() {
i(!0);
},
closeDropdown() {
n.set(rl, {
focusId: t,
source: 2
}), i(!1);
},
onDropdownContentSurfaceId(e) {
o.current = e;
}
})), [ n ]);
H.useEffect((() => a.inputHandler.onMouseEventBeforePropagation.subscribe((({event: e, surfaces: t}) => {
null !== o.current && e === LK.Click && (t.find((({surfaceId: e}) => e === o.current)) || i(!1));
}))), [ a ]);
const u = wA(wK.Primary), p = r && !n.get(ll);
return H.createElement(Jf, {
isolate: p
}, H.createElement(SB, {
id: t,
focusId: t,
onClick: r ? void 0 : l,
input: {
keyBinding: u,
callback: s
}
}, e, H.createElement(kB, {
texture: vf.down,
style: FK(r)
})), r && H.createElement(JK, {
onSurfaceId: d,
closeDropdown: c
}));
})), zK = bh.Voip.VoipStatus, jK = Ec({
zOffset: 1,
flexDirection: "row",
alignItems: "center",
justifyContent: "space-between",
marginBottom: hc(Xc.TextSizeHeading.medium)
}), qK = Ec({
alignItems: "center"
}), YK = Ec({
marginRight: hc(Xc.DimensionSpace.small)
}), KK = Ec({
marginRight: hc(Xc.DimensionSpace.small),
fontSize: mc(44),
marginTop: hc(-9),
color: Xc.ColorNeutral._0
}), WK = Ec({
width: hc(32),
height: hc(32),
marginEnd: hc(Xc.DimensionSpace.small),
texture: Sf.PARTY_LEADER
}), XK = Ec({
marginStart: hc(Xc.DimensionSpace.small),
marginEnd: hc(Xc.DimensionSpace.small),
width: hc(Xc.DimensionSpace.micro),
height: hc(Xc.DimensionSpace.larger),
backgroundColor: Xc.ColorNeutral._400
}), QK = Ec({
flexDirection: "row",
alignItems: "center"
}), $K = Ec({
texture: Sf.ONLINE_STATUS_INDICATOR,
color: Xc.ColorSystemSuccess._300
}), ZK = Ec({
texture: Sf.OFFLINE_STATUS_INDICATOR
}), eW = Ec({
texture: Sf.DO_NOT_DISTURB
}), tW = Ec({
width: hc(Xc.DimensionSpace.medium),
height: hc(Xc.DimensionSpace.medium),
marginStart: hc(Xc.DimensionSpace.small)
}), nW = Ii.observer((({photonPlayerId: e}) => {
const t = UF(), {data: n} = ND(e), r = t, i = n && n.status !== zK.Disabled;
return i || r ? H.createElement(H.Fragment, null, H.createElement("surface", {
style: XK
}), r && H.createElement("surface", {
style: WK
}), i && H.createElement(VJ, {
status: n.status
})) : null;
})), rW = Ii.observer((() => {
const e = mb(), t = Kb(), n = e.personaInfo;
return H.createElement(H.Fragment, null, H.createElement("surface", {
style: QK
}, H.createElement(yv, {
playerNetworkId: n.playerNetworkId,
name: n.displayName
}), qb() ? H.createElement("surface", {
style: [ tW, t ? ZK : $K ]
}) : void 0), dg.isPartyEnabled && H.createElement(nW, {
photonPlayerId: e.photonPlayerId
}));
})), iW = Ii.observer((() => {
const e = Os(), t = Kb(), n = e.get(bU), r = [ tW ];
return t ? r.push(ZK) : "DO_NOT_DISTURB" === n ? r.push(eW) : r.push($K), H.createElement(H.Fragment, null, H.createElement("surface", {
style: r
}), "DOWN_TO_PLAY" === n && H.createElement(iv, {
text: wh("PHOTON-SOCIAL_STATUS_READY-TO-PLAY_RADIO"),
style: Lc("marginStart", hc(Xc.DimensionSpace.small))
}));
})), oW = Ii.observer((() => {
const e = mb(), t = e.personaInfo;
return H.createElement(GK, null, H.createElement("surface", {
style: QK
}, H.createElement(yv, {
playerNetworkId: t.playerNetworkId,
name: t.displayName
}), dg.isPartyEnabled && H.createElement(nW, {
photonPlayerId: e.photonPlayerId
}), H.createElement(iW, null)));
})), aW = () => H.createElement("surface", {
style: jK
}, H.createElement("surface", {
style: [ qK, Lc("flexDirection", Sp() ? "row-reverse" : "row") ]
}, H.createElement(bf, {
style: YK
}), H.createElement("surface", {
text: wh("PHOTON-SOCIAL_EA-LAYER_HEADER"),
style: [ xd, KK ]
})), H.createElement("surface", {
style: Lc("flex", 1)
}), VS() ? H.createElement(oW, null) : H.createElement(rW, null)), sW = bh.UserExperience.SoundEffect;
function lW() {
const e = Tx(), t = qh("overlay"), {addZoom: n, removeZoom: r} = Ph();
As((t => {
if (t) return e(sW.OverlayModalOpen), n(), () => {
r(), e(sW.OverlayModalClose);
};
}), [ e, n, r ], lT, !0), H.useEffect((() => t.listen((t => {
"/" === t.pathname ? e(sW.OverlaySlideOut) : e(sW.OverlaySlideIn);
}))), [ t, e ]);
}
var cW = bh.InputBindings.Action, dW = Ec({
zOffset: 1,
position: "absolute",
top: hc(Xc.DangerZone.height),
bottom: hc(Xc.DangerZone.height),
left: hc(Xc.DangerZone.width),
right: hc(Xc.DangerZone.width)
}), uW = Ec({
zOffset: 1,
flex: 1
}), pW = Ii.observer((() => (Oq(), HV(), DH(), kH(), _J(), SJ(), null))), fW = () => {
const e = tN(), t = cy(), n = jo(), r = Os(), {close: i, toggle: o} = H.useMemo((() => {
const i = () => {
e.isRevealed && TT(t, {
pg_id: mT(r, n.location),
msg_id: "bottom_bar",
destination_name: "bottom_bar",
option: "close"
});
};
return {
toggle: () => {
i(), e.toggle();
},
close: () => {
i(), e.close();
}
};
}), [ n, r, t, e ]);
EA({
action: cW.TogglePhoton,
callback: o,
label: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CLOSE"),
registrationIdOverride: "GlobalDismiss",
transcendBoundaries: !0
}), EA({
action: cW.Decline,
callback: i
});
}, hW = Ii.observer((({playerListConfig: e}) => {
const {getUnseenCount: t} = PR(), {getUnseenCountForAll: n} = YV();
fW(), PK();
const r = Uv("fr_1", "FindFriends"), i = H.useMemo((() => {
const i = [];
return i.push({
title: wh("PHOTON-SOCIAL_APP-BAR_FRIENDS"),
route: hg,
content: H.createElement(FV, null)
}), dg.isPartyEnabled ? i.push({
title: wh("PHOTON-SOCIAL_APP-BAR_PARTY"),
route: uw,
content: H.createElement(wG, null),
getUnseenCount: n
}) : i.push({
title: wh("PHOTON-SOCIAL_APP-BAR_INVITES"),
route: nJ,
content: H.createElement(oJ, null),
getUnseenCount: n
}), i.push({
title: wh("PHOTON-SOCIAL_APP-BAR_REQUESTS"),
route: mg,
content: H.createElement(wH, null),
getUnseenCount: t
}), i.push({
title: wh("PHOTON-SOCIAL_APP-BAR_SEARCH"),
route: sR,
content: H.createElement(Gz, null)
}), e && i.push({
title: e.localizedName,
route: hq,
content: H.createElement(Sq, null)
}), i.push({
title: wh(r ? "PHOTON-SOCIAL_APP-BAR_FIND-FRIENDS" : "PHOTON-SOCIAL_APP-BAR_RECENT"),
route: r ? wq : Lq,
content: H.createElement(Fq, null)
}), i;
}), [ r, t, n, e ]);
return H.createElement(H.Fragment, null, H.createElement(aW, null), H.createElement("surface", {
style: uW
}, H.createElement(Mx, {
tabs: i
})));
})), mW = () => {
const e = ZT(1);
return Ns((t => {
e.to(t ? .95 : 1, {
duration: Xc.AnimationTime.faster,
easing: Xc.AnimationEasing.accelerate
});
}), [ e ], Eh, !0), H.useMemo((() => ({
zoomStyle: [ e.propStyle("scaleX"), e.propStyle("scaleY") ]
})), [ e ]);
}, gW = Ii.observer((() => {
lW();
const e = Os(), {zoomStyle: t} = mW();
vJ("app_opened");
const n = dg.playerListsEnabled ? e.get(NO) : void 0;
return H.createElement(H.Fragment, null, Ab.betaWatermark || e.get(JR) ? H.createElement(AK, {
text: "BETA"
}) : null, false, false, false, false, !1, H.createElement(XR, {
router: "main"
}, H.createElement("surface", {
style: [ dW, t ]
}, H.createElement(hW, {
playerListConfig: n
}))), H.createElement(XR, {
router: "overlay",
shouldIsolate: $g.overlay
}, H.createElement(Fo, {
path: [ sD.path, lD.path ]
}, (({match: e}) => H.createElement(xj, {
match: e
}))), H.createElement(Fo, {
path: FY.path
}, (({match: e}) => H.createElement(bK, {
match: e
}))), H.createElement(KR, null)), H.createElement(vq, {
portalId: "InsideContent"
}), H.createElement(rx, null), H.createElement(CK, null));
})), yW = bh.UserExperience.SoundEffect, IW = bh.StateApi.State, _W = {
duration: Xc.AnimationTime.faster,
easing: Xc.AnimationEasing.ease
}, bW = {
duration: Xc.AnimationTime.faster,
easing: Xc.AnimationEasing.accelerate
}, SW = e => e.getUntracked(Sh), vW = () => {
const {StateApi: e} = Lh(), t = Os(), {notificationManager: n} = oP(), [r, i] = Ds(Sh), o = ZT(1.1), a = ZT(0), s = Tx();
Ch("Hidden", H.useCallback((({currentState: r, actions: l}) => {
switch (r) {
case "Hidden":
return l().execute((() => {
var t;
t = n, Ts((() => t.activeItem)) ? e.setState({
state: IW.ShowingNotification
}) : e.setState({
state: IW.Closed
});
}), "StateApi.setState(Closed/ShowingNotification)");

case "Revealing":
{
let n = l().execute((() => {
e.setState({
state: IW.Open
});
}), "StateApi.setState(Open)");
return SW(t) || (n = n.execute((() => i(!0)), "setMounted(true)").wait(50)), n.executeAsync((e => {
const t = setTimeout(e, 1e3);
return o.to(1, _W), a.to(1, {
..._W,
onFinished: () => {
clearTimeout(t), pc.featureFlags.hasTweenStartEndValueRounding || a.set(1), e();
}
}), s(yW.LayerOpen), () => clearTimeout(t);
}), "tween: reveal").transition("Revealed");
}

case "Revealed":
return;

case "Hiding":
{
let e = l().executeAsync((e => {
const t = setTimeout(e, 1e3);
return o.to(1.1, bW), a.to(0, {
...bW,
onFinished: () => {
clearTimeout(t), e();
}
}), s(yW.LayerClose), () => clearTimeout(t);
}), "tween: hide");
return SW(t) && (e = e.execute((() => i(!1)), "setMounted(false)").wait(50)), e.transition("Hidden");
}

default:
ys("Unhandled state");
}
}), [ t, i, o, a, s, e, n ]));
const l = tN();
return H.useEffect((() => {
const t = e.getState({});
return t && t.state === IW.Open && l.open(), e.onStateChanged.subscribe((({newState: e}) => {
switch (e) {
case IW.Open:
l.open();
break;

case IW.Closed:
l.close();
}
}));
}), [ e, l ]), {
isMounted: r,
opacityTween: a,
scaleTween: o
};
}, TW = e => {
H.useEffect((() => (e.init(), () => {
e.dispose();
})), [ e ]);
}, [EW, PW] = Is("FriendPicker"), OW = ({children: e, onSelect: t, request: n}) => {
const r = {
onSelect: t,
request: n
};
return H.createElement(EW.Provider, {
value: r
}, e);
}, CW = bh.InputBindings.Action, NW = bh.DeepLink.PickFriendPlayerInclusion, AW = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, inclusion: r, disableReason: i}) => {
const o = Os(), {data: a} = GM(e, t), {onSelect: s, request: l} = PW(), {name: c, playerNetworkId: d} = yL(e), u = qM(a);
let p;
r === NW.Disable ? p = i : l.showPresence && (p = u);
const f = wA(CW.Primary), h = H.useMemo((() => {
if (r !== NW.Disable) return {
keyBinding: f,
label: wh("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_LIST-ACTIONS_SELECT"),
callback: AT(o, e, t, (() => {
s(e);
}), {
...n,
msg_id: "list_control",
option: "select"
})
};
}), [ r, o, s, e, t, f, n ]), m = UB({
playerName: c,
supplementaryText: p
});
return H.createElement(MB, {
id: "friendpickerfriend-" + e,
narrationItem: m,
onClick: h?.callback,
primaryAction: h,
isDisabled: r === NW.Disable
}, H.createElement(NB, {
playerNetworkId: d,
name: c
}), !!p && H.createElement(TB, {
hideOnPressedOrFocused: !!h,
text: p
}));
})), LW = bh.DeepLink.PickFriendPlayerInclusion, wW = () => {
const {DeepLink: e} = Lh(), t = dN(), n = Os(), r = xs(lN), i = xs(uN), o = xs(pN), a = Hs((({get: t}) => async n => {
i({
loading: !0,
uninitialized: !1
});
const {data: r} = t(cN);
if (!r?.length) return void i({
loading: !1,
uninitialized: !1,
error: new Error("Missing source players")
});
o(r);
const a = [];
r.forEach((e => {
(n.includePartyPlayers && e.inParty || e.isOnline || n.includeOfflinePlayers && !e.isOnline) && a.push(e);
}));
const s = await e.filterFriendsForPicker({
requestId: n.requestId,
players: a
});
if (s) {
const e = new Map;
s.players.forEach((t => {
t.inclusion !== LW.Hide && e.set(UI({
eaPlayerId: t.player.playerId,
playerNetworkId: Yy(t.player.playerNetworkId)
}), t);
})), i({
loading: !1,
uninitialized: !1,
data: e
});
}
}), [ e, i, o ]), s = H.useCallback((r => {
const i = n.getUntracked(lN);
i && (e.pickFriendResponse({
requestId: i.requestId,
...r
}), n.reset(lN), t.stop());
}), [ e, t, n ]), l = H.useCallback((n => {
const r = e.onPickFriendRequest.subscribe((e => {
t.start(), n(e);
}));
return () => {
r(), t.stop();
};
}), [ e.onPickFriendRequest, t ]), c = H.useCallback((r => {
const i = e.onCancelFriendRequest.subscribe((() => {
n.reset(lN), r(), t.stop();
}));
return () => {
i();
};
}), [ e.onCancelFriendRequest, t, n ]);
return H.useEffect((() => () => {
s({
success: !1
});
}), [ n, s ]), {
setFriendPickerRequest: r,
sendPickFriendResponse: s,
subscribeToPickFriendRequest: l,
subscribeToPickFriendCancellation: c,
filterPlayers: a
};
};
async function kW(e, t) {
const n = UP(e, cN);
return await LI(n, t);
}
function RW(e, t) {
const {closeModal: n} = uT(), {showErrorNotification: r} = oP(), i = cy(), {filterPlayers: o, sendPickFriendResponse: a, setFriendPickerRequest: s, subscribeToPickFriendCancellation: l} = wW(), c = Os(), d = _h("SourcePlayers", H.useCallback((({currentState: l, actions: d}) => {
switch (l) {
case "SourcePlayers":
return d().executeAsync((n => {
s(e), kW(c, t).then((e => {
n(e.error || void 0 === e.data ? "Error" : void 0);
}));
}), "getSourcePlayers()").executeAsync((t => {
o(e).then((() => {
t();
}));
}), "filterPlayers()").transition("DisplayPlayers");

case "DisplayPlayers":
return;

case "Error":
return d().execute((() => {
a({
success: !1
}), r(void 0, "friend picker error", void 0);
}), "error()").transition("Close");

case "Cancel":
return d().execute((() => {
a({
success: !1
}), TT(i, {
pg_id: "overlay_friends_dialog",
option: "close",
destination_name: "bottom_bar",
msg_id: "bottom_bar"
});
}), "cancel()").transition("Close");

case "Close":
return d().execute((() => {
n();
}), "closeModal()");

default:
ys("Unhandled state");
}
}), [ n, o, c, t, i, e, a, s, r ]), {
debugName: "FriendPicker"
});
H.useEffect((() => l((() => {
d.interrupt((() => "Close"));
}))), [ d, l ]);
const u = Hs((({get: e}) => t => {
const n = YI(t), r = e(uN).data?.get(n);
a(r ? {
player: r.player,
success: !0
} : {
success: !1
}), d.interrupt((() => "Close"));
}), [ a, d ]);
return {
onSelect: u,
closeAction: H.useMemo((() => ({
id: "close",
label: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CLOSE"),
action: () => {
d.interrupt((() => "Cancel"));
}
})), [ d ])
};
}
var xW = {
0: ju(),
1: ju(),
2: ju()
};
function BW(e, t) {
return "" + (e?.[t].length ?? 0);
}
function DW(e) {
const {isExpanded: t, onToggle: n} = cB({
id: "friendpicker-section-party",
isInitiallyExpanded: !0,
rememberExpandedState: !1,
onToggleCallback: PT("overlay_friends_dialog", "in_your_party")
}), {isExpanded: r, onToggle: i} = cB({
id: "friendpicker-section-online",
isInitiallyExpanded: !0,
rememberExpandedState: !1,
onToggleCallback: PT("overlay_friends_dialog", "online_friends")
}), {isExpanded: o, onToggle: a} = cB({
id: "friendpicker-section-offline",
isInitiallyExpanded: !0,
rememberExpandedState: !1,
onToggleCallback: PT("overlay_friends_dialog", "offline_friends")
});
return H.useMemo((() => {
const s = new lH;
return s.addSection({
id: 0,
isExpanded: t,
onToggle: n,
title: wh("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_SECTION-HEAD_PARTY", {
"%numberPartyMembers%": BW(e, 0)
}),
component: AW,
focusId: xW[0],
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "in_your_party",
msg_id: "in_your_party"
}
}), s.addSection({
id: 1,
isExpanded: r,
onToggle: i,
title: wh("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_SECTION-HEAD_ONLINE-ALL", {
"%numberOnlineFriends%": BW(e, 1)
}),
component: AW,
focusId: xW[1],
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "online_friends",
msg_id: "online_friends"
}
}), s.addSection({
id: 2,
isExpanded: o,
onToggle: a,
title: wh("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_SECTION-HEAD_OFFLINE", {
"%numberOfflineFriends%": BW(e, 2)
}),
component: AW,
focusId: xW[2],
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "offline_friends",
msg_id: "offline_friends"
}
}), s;
}), [ r, o, t, i, a, n, e ]);
}
var FW = oF, MW = Ec({
width: FW
}), UW = fg("/friend-picker/:requestId?", void 0), HW = ({heading: e, body: t}) => H.createElement("surface", null, H.createElement(QN, {
headline: e,
body: t
})), VW = Ec({
width: nA,
height: Rp.height - hc(Xc.DimensionLayout.medium)
}), JW = Ec({
flex: 1,
width: nA
}), GW = ({title: e, headline: t, body: n, style: r, children: i}) => {
const o = Lc("marginTop", hc(n ? Xc.DimensionSpace.largest : Xc.DimensionSpace.larger));
return H.createElement(QN, {
style: VW,
childrenStyle: Lc("flex", 1),
title: e,
headline: t,
body: n
}, H.createElement("surface", {
style: [ o, JW, r ]
}, i));
};
var zW = {
duration: Xc.AnimationTime.fastest,
easing: Xc.AnimationEasing.ease,
delay: 50
};
function jW() {
const e = ZT(0), t = ZT(1.1), n = H.useRef(!1);
return H.useCallback((() => (n.current || (e.to(1, zW), t.to(1, zW), n.current = !0), 
[ t.propStyle("scaleX"), t.propStyle("scaleY"), e.propStyle("opacity") ])), [ e, t ]);
}
var qW = Ii.observer((({request: e}) => {
const {onSelect: t, closeAction: n} = RW(e, 8e3), {data: r, loading: i, uninitialized: o} = ws(fN), a = DW(r), {rows: s} = yH(a, r, UW);
TA("GlobalDismiss");
const l = e.heading ?? wh("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_TITLE"), c = e.description, d = jW();
return H.createElement(OW, {
onSelect: t,
request: e
}, H.createElement(GW, {
title: l,
body: c,
style: MW,
overlayTitleNarrationItem: gA
}, H.createElement(uA, {
closeAction: n
}, H.createElement(Xz, null, (t => i || o ? H.createElement(fB, {
numRows: 1,
numSections: 2
}) : s.length ? t ? H.createElement(AM, {
style: d(),
rows: s,
height: t,
width: FW
}) : null : H.createElement(HW, {
heading: e.emptyHeading || wh("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_EMPTY_TITLE"),
body: e.emptyDescription ?? wh("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_EMPTY_DESC")
}))))));
})), YW = () => {
const {subscribeToPickFriendRequest: e} = wW(), {showModal: t} = uT();
H.useEffect((() => e((e => {
t((() => H.createElement(qW, {
request: e
})), {
telemetryId: "overlay_friends_dialog"
});
}))), [ t, e ]);
}, KW = Ii.observer((({children: e}) => (TK(), H.createElement(H.Fragment, null, e)))), WW = Ii.observer((({children: e}) => {
const t = yb(), {ftueManager: n} = $H(), r = xv();
return H.useEffect((() => mr((() => !r.fragment.loading && !r.fragment.uninitialized), (() => n.init(t)))), [ r.fragment, n, t ]), 
H.createElement(KW, null, e);
}));
function XW() {
const e = Bw(), {playerNetworkId: t} = aP(), n = Os(), r = uT(), i = oP(), o = QA(), a = Lh();
H.useEffect((() => a.PhotonInvite.onFirstPartyInviteAccepted.subscribe((({fromPlayerId: r}) => {
const i = UI({
eaPlayerId: r,
playerNetworkId: t
});
TR((() => e.get().data?.get(i)), (async e => {
const t = gb(n).tokenInfo.userId, {data: r} = await cL(n, a.PresenceSession, a.GameInvite, i, e), o = r?.party, s = r?.lobby, l = await Xw(a.GameInvite, e.gameInviteId, t);
aw(n, i, l.error, void 0, void 0, o, s);
}), {
timeout: 1e4,
onError: () => {}
});
}))), [ a, e, n, r, o, i, t ]);
}
var QW = class extends TI {
constructor() {
super(...arguments), this.blockedMap = new bs({});
}
init(e, t, n) {
if ("EA" === n) return void this.get().update({
loading: !1,
uninitialized: !1,
data: this.blockedMap
});
this.initSeedStrategy(e, t, n), this.reseed = () => this.initSeedStrategy(e, t, n);
const r = [ this.initBlockListUpdate(e) ];
return () => {
r.forEach((e => e?.()));
};
}
initSeedStrategy(e, t, n) {
return Xy((() => e.getBlockList({})), __).then((e => {
bS(t, e.data?.blockList ?? [], n, (t => {
hr((() => {
for (const e of t) this.blockedMap.set(e.photonPlayerId, {
photonPlayerId: e.photonPlayerId
});
this.get().update({
...e,
data: this.blockedMap
});
}));
}));
})).catch((e => {
this.get().update({
error: e,
loading: !1
});
}));
}
initBlockListUpdate(e) {
return e.onBlockListUpdated.subscribe((() => {
this.reseed();
}));
}
}, [$W, ZW] = js({
debugName: "firstPartyBlockedStoreState",
create: () => new QW({
debugName: "FirstPartyBlocked"
})
}), eX = "reconnect";
function tX(e, t) {
const {timeout: n, disposeTimeout: r} = Cu(), i = H.useRef(0), o = H.useCallback((e => {
n("successCheck", (() => {
e === i.current && (i.current = 0);
}), 15e3);
}), [ n ]);
H.useEffect((() => {
if (e) {
const a = rI((() => {
i.current++;
const e = 1 === i.current ? 0 : 5e3;
i.current <= 3 && n(eX, (() => {
o(i.current), t();
}), e);
}), {
trailing: !0,
wait: 1e3
}), s = e.error.subscribe((() => {
a();
})), l = e.end.subscribe((() => {
a();
}));
return () => {
s(), l(), r(eX), a.cancel();
};
}
}), [ e, r, n, t, o ]);
}
var nX = bh.GameInvite.GameInviteNotificationType, rX = Ly.object({
gameInviteId: Ly.string,
senderPlayerId: By,
senderPlayerNetworkId: My,
senderDevicePlatformId: Uy,
senderProductId: Vy,
createdTimestamp: wy,
expiryTimestamp: wy,
purgeTimestamp: wy,
gameJoinTokenTypes: Ly.array(Ly.string)
}, {
revokeTimestamp: wy,
targetPlayerNetworkId: Ly.array(My),
targetDevicePlatformId: Ly.array(Uy),
properties: Ly.map(xy)
}), iX = Ly.enum(nX, nX.GAME_INVITE_NOTIFICATION_TYPE_UNSPECIFIED), oX = Ly.object({
gameInvite: rX,
gameInviteNotificationType: iX
}), aX = Ly.object({
gameInviteNotification: oX
}), sX = Ly.object({}), lX = Ly.object({
stream: Ly.custom(t_()),
response: sX
}), cX = class {
constructor(e, t) {
this.gameInvitesStore = e, this.removeInviteFromSeenState = t, this.expireTimeouts = {};
}
refreshGameInviteStore() {
const e = this.gameInvitesStore.get();
e.update(e.toProps());
}
onExpiredCallback(e) {
const t = e.senderPhotonPlayerId, n = e.expiryTimestampMs + aL - Date.now();
hr((() => {
this.refreshGameInviteStore(), this.removeInviteFromSeenState(e);
})), this.expireTimeouts[t] = setTimeout((() => {
this.onExpiredLongAgoCallback(e);
}), n);
}
onExpiredLongAgoCallback(e) {
const t = e.senderPhotonPlayerId;
this.refreshGameInviteStore(), delete this.expireTimeouts[t];
}
addInvite(e) {
this.removeInvite(e);
const {purged: t, expired: n, expiredLongAgo: r} = Mw(e);
if (t || r) return;
const i = e.senderPhotonPlayerId, o = e.expiryTimestampMs - Date.now();
this.expireTimeouts[i] = n ? setTimeout((() => {
this.onExpiredLongAgoCallback(e);
}), o + aL) : setTimeout((() => {
this.onExpiredCallback(e);
}), o);
}
removeInvite(e) {
const t = e.senderPhotonPlayerId, n = this.expireTimeouts[t];
n && (clearTimeout(n), delete this.expireTimeouts[t]);
}
clearAllTimeouts() {
for (const e of Object.values(this.expireTimeouts)) clearTimeout(e);
this.expireTimeouts = {};
}
}, dX = bh.GameInvite.GameInviteNotificationType, uX = bh.XboxPlatform.XboxPermission, pX = (e, t) => t.createdTimestampMs - e.createdTimestampMs;
function fX(e) {
return e.data || new Uk([], pX);
}
function hX(e) {
let t = Tv(e.expiryTimestamp), n = Tv(e.purgeTimestamp), r = !1;
const i = e.revokeTimestamp && Tv(e.revokeTimestamp);
i && i < t && (t = i, n = i + 72e5, r = !0);
const o = {
isCrossplayEnabled: 0 !== e?.properties?.isCrossplayEnabled?.integerValue
};
e.properties?.lobby && (o.lobby = e.properties.lobby.stringValue), e.properties?.party && (o.party = e.properties.party.stringValue);
const a = e.senderPlayerId.id, s = Yy(e.senderPlayerNetworkId), l = UI({
eaPlayerId: a,
playerNetworkId: s
});
return {
gameInviteId: e.gameInviteId,
targetPlayerNetworkId: e.targetPlayerNetworkId?.map(Yy),
targetDevicePlatformId: e.targetDevicePlatformId?.map(dc),
senderPlayerId: a,
senderPlayerNetworkId: s,
senderDevicePlatformId: dc(e.senderDevicePlatformId),
senderPhotonPlayerId: l,
senderProductId: e.senderProductId.id,
createdTimestampMs: Tv(e.createdTimestamp),
expiryTimestampMs: t,
purgeTimestampMs: n,
gameJoinTokenTypes: e.gameJoinTokenTypes,
isRevoked: r,
properties: o
};
}
async function mX(e, t) {
const {isAllowed: n, privacyResult: r} = await DT(e, t.senderPhotonPlayerId, [ uX.CommunicateUsingText ]);
return n || r && sw(e, t.senderPhotonPlayerId, new Error(FT(r)), t, "invite_received"), 
n;
}
var gX = () => {
const e = Lh(), t = mb(), n = t.tokenInfo.userId, r = t.personaInfo.playerNetworkId, i = Os(), o = j_(), a = kw(), s = Bw(), l = ZW(), c = pS(), d = IJ(), u = RI(), p = YV();
H.useEffect((() => {
const e = new cX(s, p.removeFromAll);
let t = TR((() => s.get().data), (n => {
hr((() => {
n.forEach((t => {
p.addInvite(t), e.addInvite(t);
}));
})), t = n.observe((t => {
switch (t.type) {
case "add":
p.addInvite(t.newValue), e.addInvite(t.newValue);
break;

case "delete":
p.removeFromAll(t.oldValue), e.removeInvite(t.oldValue);
break;

case "update":
p.updateInvite(t.oldValue, t.newValue), e.addInvite(t.newValue);
}
}));
}));
return () => {
t(), e.clearAllTimeouts();
};
}), [ s, p ]);
const f = CI([ i.get(NS).get(), i.get(ES).get(), i.get(uS).get() ]), h = !f.loading && !f.uninitialized, m = ED((() => e.GameInvite.SubscribeToReceivedGameInviteNotifications({
playerId: {
id: n
}
})), [ e, n ], lX, {
queryIsReady: h
});
tX(m.data?.stream, H.useCallback((() => m.fetch?.()), [ m ])), D_("GameInvite.SubscribeToReceivedGameInviteNotifications", m.data?.stream), 
H.useEffect((() => {
if (!m.data) return;
const e = setTimeout((() => {
Ts((() => {
const e = s.get();
e.data || e.update({
...e.toProps(),
uninitialized: !1,
loading: !1,
data: fX(e)
});
}));
}), 8e3), n = s.setStreamStrategy({
stream: new e_(m.data.stream, aX),
updater: async (e, n) => {
const s = fX(e);
if (e.data || e.update({
...n,
data: s
}), !n.data) return;
const p = n.data.gameInviteNotification, f = hX(p.gameInvite), h = f.senderPhotonPlayerId;
if (f.targetDevicePlatformId && f.targetDevicePlatformId.length && !f.targetDevicePlatformId.includes(t.personaInfo.devicePlatformId)) return;
if (await u(c.get(), 8e3), Ts((() => c.get().data?.has(f.senderPlayerId)))) return;
if ("EA" !== r && (await u(l.get(), 8e3), Ts((() => l.get().data?.has(h))))) return;
if (!await mX(i, f)) return;
let m = !1;
switch (p.gameInviteNotificationType) {
case dX.GAME_INVITE_NOTIFICATION_TYPE_REMOVED:
s.delete(h);
break;

case dX.GAME_INVITE_NOTIFICATION_TYPE_ADDED:
s.set(h, f);
break;

case dX.GAME_INVITE_NOTIFICATION_TYPE_REVOKED:
case dX.GAME_INVITE_NOTIFICATION_TYPE_EXISTING:
{
const e = Ts((() => s.get(h)));
if (e) {
const t = (new Date).getTime(), n = t > e.expiryTimestampMs, r = t > f.expiryTimestampMs;
m = n && !r;
}
s.set(h, f);
break;
}
}
if (p.gameInviteNotificationType === dX.GAME_INVITE_NOTIFICATION_TYPE_ADDED || m) {
const e = (await u(o.get(h), 1e4))?.data;
if (!e) return;
const t = (await u(a.get(p.gameInvite.senderProductId.id), 1e4))?.data, n = Ts((() => s.get(h)));
n && d.trigger(n, e, t);
}
}
});
return () => {
n?.(), clearTimeout(e);
};
}), [ c, i, u, s, m.data, o, a, d, p, t, l, r, e ]);
}, yX = Ii.observer((({children: e}) => (XW(), gX(), H.createElement(H.Fragment, null, e)))), IX = ({children: e}) => {
const t = gR("GameInvites"), n = gR("CrossGameInvites"), r = H.useMemo((() => {
function e(e) {
const {expired: r, expiredLongAgo: i, purged: o} = Mw(e);
if (r || i || o) return;
return Uw(e) ? t : n;
}
return {
gameInvites: t,
crossGameInvites: n,
removeFromAll(e) {
const r = Fw(e);
t.removeItem(r), n.removeItem(r);
},
addInvite(t) {
const n = e(t);
n && n.addItem(Fw(t));
},
updateInvite(t, n) {
const r = Fw(t), i = Fw(n);
if (r === i) {
const r = e(t), o = e(n);
if (r === o && void 0 !== o?.isItemSeen(i)) return;
}
hr((() => {
this.removeFromAll(t), this.addInvite(n);
}));
},
getUnseenCountForAll: () => t.getUnseenCount() + n.getUnseenCount()
};
}), [ t, n ]);
return H.createElement(qV.Provider, {
value: r
}, H.createElement(yX, null, e));
}, _X = bh.XboxPlatform.XboxPermission, bX = bh.XboxPlatform.XUserPrivilege, SX = Ly.object({}), vX = e => {
const t = e.get(iO).get();
return {
lobbyJoinable: !!e.get(bP).get().data,
partyJoinable: !!t.data
};
}, TX = (e, t) => Ts((() => ({
loading: !1,
data: vX(e),
error: t
})));
function EX() {
const {GameInvite: e, PhotonInvite: t} = Lh(), n = Os();
H.useEffect((() => {
const r = n.get(hb), i = async (t, r, i, o, a, s, l) => {
const c = UI({
eaPlayerId: r,
playerNetworkId: i
}), {isAllowed: d, privacyResult: u} = await DT(n, c, [ _X.PlayMultiplayer ], bX.Multiplayer), p = Ts((() => ow(n, hN(n, c).data, s.has("party") ? WO(n).data : void 0, s.has("lobby") ? vP(n).data : void 0, "friend_picker")));
if (!d) return p(new Error(FT(u))), {
error: new Error(wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": zb(sP(n).playerNetworkId)
}))
};
const f = iL(s, l), {compatiblePlayerNetworkIds: h, compatibleDevicePlatformIds: m} = jw(), g = await Xy((() => e.SendGameInvite({
playerId: {
id: t
},
targetPlayerId: {
id: r
},
targetPlayerNetworkId: h,
targetDevicePlatformId: m,
senderPlayerNetworkId: {
id: o
},
senderDevicePlatformId: {
id: a
},
senderProductId: {
id: dg.productId
},
gameJoinTokenTypes: Array.from(s.keys()),
properties: f
})), SX);
return p(g.error), g;
};
return t.onSendEaInvite.subscribe((async e => {
const {requestId: o, toPlayerId: a, toPlayerNetworkId: s} = e, l = await new Promise((e => {
mr((() => {
const {lobbyJoinable: e, partyJoinable: t} = vX(n);
return e || t;
}), (() => {
e(TX(n));
}), {
timeout: 1e4,
onError: () => e(TX(n, new Error("TIMEOUT")))
});
}));
if (l.error) return t.sendEaInviteResponse({
requestId: o,
errorMessage: l.error.message
});
const c = zw(l.data?.partyJoinable, l.data?.lobbyJoinable), {isCrossplayEnabled: d, gameJoinTokens: u} = Ck(n, c), p = await i(r.tokenInfo.userId, a, Yy(s), r.personaInfo.playerNetworkId, r.personaInfo.devicePlatformId, u, d);
c.includes("party") && n.set(DL, !0), c.includes("lobby") && n.set(sk, !0), t.sendEaInviteResponse({
requestId: o,
errorMessage: p.error?.message
});
}));
}), [ t.onSendEaInvite, t, n, e ]);
}
var PX = Ly.optional(Ly.object({}));
function OX(e, t) {
return void 0 !== e && void 0 !== t && e !== t;
}
var CX = () => {
const {GameInvite: e} = Lh(), t = mb(), n = Os(), r = H.useCallback((async r => {
r.includes("lobby") && n.set(sk, !1), r.includes("party") && n.set(DL, !1), await Xy((() => e.RevokeGameInvites({
senderPlayerId: {
id: t.tokenInfo.userId
},
senderPlayerNetworkId: {
id: t.personaInfo.playerNetworkId
},
senderProductId: {
id: dg.productId
},
containedGameJoinTokenType: r
})), PX);
}), [ e, n, t.personaInfo.playerNetworkId, t.tokenInfo.userId ]);
Ns((e => {
e && n.getUntracked(sk) && r("lobby");
}), [ n, r ], lk), Ns((e => {
e && n.getUntracked(sk) && r("lobby"), n.set(sk, !1);
}), [ n, r ], ck), Ns(((e, t) => {
OX(e, t) && n.getUntracked(sk) && r("lobby");
}), [ n, r ], dk), Ns((e => {
e && n.getUntracked(DL) && r("party");
}), [ n, r ], UL), Ns(((e, t) => {
OX(e, t) && n.getUntracked(DL) && r("party");
}), [ n, r ], HL);
};
function NX() {
const e = SP(), t = Os();
H.useEffect((() => Fn((() => e.get().data?.lobbyId), (() => {
mk(0, t);
}))), [ t, e ]);
const n = yi.useObserver((() => e.get().data?.members));
H.useEffect((() => n?.observe_((({type: e, name: n}) => {
"add" === e && gk(0, n, t);
}))), [ t, e, n ]);
}
function AX() {
const e = SP();
H.useEffect((() => e.init()), [ e ]);
}
var LX = ({children: e}) => (AX(), NX(), H.createElement(H.Fragment, null, e));
function wX() {
const e = Lh(), {getUnseenCount: t} = PR(), {getUnseenCountForAll: n} = YV();
H.useEffect((() => {
if (!e.hasMethod("Badging", "updateUnseenItemCount")) return;
const r = rI((() => Ts((() => {
const r = t() + n();
e.Badging.updateUnseenItemCount({
unseenItemCount: r
});
}))), {
wait: 3e3,
leading: !0
}), i = Fn((() => t() + n()), r, {
fireImmediately: !0
});
return () => {
i(), r.cancel();
};
}), [ t, n, e ]);
}
var kX = Nc((e => {
return t = {
[0 === e || 1 === e ? "top" : "bottom"]: kp.height,
[0 === e || 2 === e ? "left" : "right"]: kp.width
}, Sp() && ("right" in t ? (t.left = t.right, delete t.right) : (t.right = t.left, 
delete t.left)), t;
var t;
}), {
zOffset: dC,
position: "absolute"
}), RX = ({location: e, options: t, children: n}) => {
const r = mp(), {screenBoundsToLayout: i} = Ep(), o = t?.appearance?.attachToSurface, [a, s] = H.useState(null), l = wc((() => a && o ? {
top: null,
end: null,
bottom: Ap - a.top + hc(Xc.DimensionSpace.small),
start: a.start + a.width / 2 + o.offsetX,
zOffset: iC
} : {}), [ o, a ]);
return H.useEffect((() => {
if (!o) return;
const e = r.reconciler.getSurfaceById(o.surfaceId)?.getBounds();
return e && s(i(e)), r.reconciler.surfaceBindings.onSurfaceBoundsChanged.subscribe((e => {
e.changes.forEach((({bounds: e, surfaceId: t}) => {
t === o.surfaceId && s(i(e));
}));
}));
}), [ o, i, r.reconciler ]), o && !a ? null : H.createElement("surface", {
style: [ kX(e), l ]
}, n);
}, xX = fs.Input.DeviceType, BX = bh.UserExperience.SoundEffect, DX = bh.StateApi.State, FX = bh.StateApi.State, MX = bh.InputBindings.Action, UX = "notifications_in", HX = "notifications_out", VX = "notifications_ready", JX = {
easing: Xc.AnimationEasing.accelerate,
duration: Xc.AnimationTime.slow
}, GX = {
easing: Xc.AnimationEasing.accelerate,
duration: Xc.AnimationTime.slowest
}, zX = {
holdRequired: !1,
holdTimeSeconds: 0
}, jX = Ec({
position: "absolute",
top: 0,
left: 0,
right: 0,
bottom: 0,
flex: 1,
zOffset: lC,
backgroundColor: "#ffffff00"
}), qX = {
4: BX.NotificationOtherPlayerInvite,
2: BX.NotificationOtherPlayerActivity,
1: BX.NotificationTips,
0: BX.NotificationSystemResponseFailure,
3: BX.NotificationSystemResponseSuccess
}, YX = ({text: e, holdRequired: t}) => {
const n = wA(MX.NotificationFocus);
return Du((({getKeyBindingText: r}) => [ wh("PHOTON-SOCIAL_NARRATION_NOTIFICATION_RECEIVED", {
"%notificationText%": e
}), wh(t ? "PHOTON-SOCIAL_NARRATION_NOTIFICATION_HOLD-OPEN" : "PHOTON-SOCIAL_NARRATION_NOTIFICATION_PRESS-OPEN", {
"%key%": r(n)
}) ]), [ t, n, e ], 1), null;
}, KX = hc(60), WX = (e, t) => {
let n = t?.animationOffset ?? KX;
return 1 === t?.animation || 2 !== e && 0 !== e || (n = -n), n;
}, XX = Ii.observer((() => {
const e = mp(), t = sp(), {InputBindings: n, StateApi: r} = Lh(), i = UH(), o = Os(), a = $T(), {notificationManager: s, showNextNotification: l} = oP(), {timeout: c, disposeTimeout: d} = Cu(), u = tN(), [p, f] = Ds(vh), h = cy(), [m, g] = H.useState(!1), [y, I] = H.useState(!1), [_, b] = H.useState(), S = s.activeItem, {animationOffset: v, notificationLocation: T} = H.useMemo((() => {
const e = Ts((() => a.getSetting(0, 10)));
return {
animationOffset: WX(e, S?.item.options?.appearance),
notificationLocation: e
};
}), [ S, a ]), E = H.useRef(!1), P = ZT(v), O = ZT(0), C = Tx(), N = !!_, {notificationFocusableContext: A, onBounds: L} = H.useMemo((() => ({
notificationFocusableContext: {
setFocusable: () => {
I(!0);
}
},
onBounds: e => {
b((t => {
return (n = t) === (r = e) || void 0 !== n && void 0 !== r && n.absHeight === r.absHeight && n.absWidth === r.absWidth && n.absX === r.absX && n.absY === r.absY ? t : e;
var n, r;
}));
}
})), []);
H.useEffect((() => {
if (m) return dp(o, "GlobalDismiss");
}), [ m, o ]), H.useEffect((() => {
S && (g(!1), Ts((() => {
S.item.options?.telemetryInfo && TT(h, {
msg_id: S.item.options.telemetryInfo.pg_id,
...S.item.options.telemetryInfo,
status: "impression",
...S.item.data?.hasActions && {
option: "open",
destination_name: "main"
}
});
})));
}), [ S, h ]), H.useEffect((() => {
const e = (() => {
if (!S && !u.isRevealed) return FX.Closed;
if (!u.isRevealing) {
switch (p) {
case FX.Open:
break;

case FX.Closed:
return y ? FX.ShowingFocusableNotification : FX.ShowingNotification;

case FX.ShowingNotification:
if (y) return FX.ShowingFocusableNotification;
break;

case FX.ShowingFocusableNotification:
if (!y) return FX.ShowingNotification;
if (m) return FX.FocusedNotification;
break;

case FX.FocusedNotification:
if (!y) return FX.ShowingNotification;
break;

default:
ys("Unknown StateApiState");
}
return p;
}
})();
void 0 !== e && e !== p && (f(e), r.setState({
state: e
}));
}), [ S, p, y, m, f, r, u ]);
const w = H.useCallback((e => {
I(!1), g(!1), b(void 0), O.set(0), P.set(v), e.done(), d(UX), d(VX), d(HX), l();
}), [ d, l, O, P, v ]), k = H.useCallback((() => {
S && (O.set(0), w(S));
}), [ S, w, O ]), R = H.useCallback((() => {
S?.item.options?.telemetryInfo && TT(h, {
msg_id: S.item.options.telemetryInfo.pg_id,
...S.item.options.telemetryInfo,
destination_name: "actions",
option: "close"
}), k();
}), [ S?.item.options, k, h ]), x = H.useCallback((() => {
S && (g(!0), O.set(1), P.set(0), S.done(), d(UX), d(VX), d(HX));
}), [ S, d, O, P ]);
H.useEffect((() => {
m && S?.item.options?.telemetryInfo && TT(h, {
msg_id: S.item.options.telemetryInfo.pg_id,
...S.item.options.telemetryInfo,
option: "open",
...S.item.data?.hasActions && {
destination_name: "main"
}
});
}), [ S, m, h ]), H.useEffect((() => {
p === DX.FocusedNotification && !m && y && x();
}), [ p, m, y, x ]), H.useEffect((() => {
if (p === DX.ShowingFocusableNotification && t === xX.MouseAndKeyboard && _) {
E.current = !0;
const {absHeight: e, absWidth: t, absX: r, absY: i} = _;
n.setExclusiveMouseRegion({
exclusiveMouseRegion: {
xTopLeftPixelCoordinate: r,
yTopLeftPixelCoordinate: i,
xBottomRightPixelCoordinate: r + t,
yBottomRightPixelCoordinate: i + e
}
});
} else E.current && (E.current = !1, n.setExclusiveMouseRegion({}));
}), [ n, t, p, _ ]), H.useEffect((() => {
if (S && N) {
const e = () => {
O.transition(1, 0, GX), c(HX, (() => w(S)), GX.duration + 100);
};
(() => {
C(qX[S.item.type]), P.transition(v, 0, JX), O.transition(0, 1, JX), c(VX, (() => S.ready()), JX.duration);
const t = S.getScreenTimeInSeconds();
t && c(UX, e, 1e3 * t + JX.duration - 50);
})();
}
}), [ v, N, S, w, P, O, c, C ]), H.useEffect((() => () => {
r.setState({
state: DX.Closed
}), E.current && (E.current = !1, n.setExclusiveMouseRegion({}));
}), [ n, r ]), H.useEffect((() => s.onDismiss.subscribe((() => {
k();
}))), [ k, s.onDismiss ]);
const B = S?.item?.options?.appearance?.portalId, D = H.useMemo((() => {
if (!S) return null;
const t = S.item.options?.appearance?.animation, n = 1 === t ? P.propStyle("translateY") : P.propStyle("translateX"), {holdRequired: r, holdTimeSeconds: i} = e.bindings.Input.getFocusNotificationConfig({}) || zX;
return H.createElement(H.Fragment, null, m && H.createElement("surface", {
style: jX
}), H.createElement(RX, {
location: T,
options: S.item?.options
}, H.createElement("surface", {
onBounds: L
}, y && !!S.item.data?.text && H.createElement(YX, {
text: S.item.data?.text,
holdRequired: r
}), H.createElement(kE.Provider, {
value: A
}, H.createElement("surface", {
style: [ n, O.propStyle("opacity") ]
}, S.item.content({
id: S.id,
dismiss: k,
onClose: R,
stayActive: x,
isActivated: m,
holdOptions: {
holdRequired: r,
holdTimeMs: i ? 1e3 * i : 0
}
}))))));
}), [ e, S, P, T, y, A, O, k, R, x, m, L ]);
return H.useEffect((() => {
B && D && i.teleport(B, D);
}), [ D, B, i ]), H.useEffect((() => {
if (B) return () => {
i.clear("InsideContent");
};
}), [ B, i ]), B ? null : D;
})), QX = (bh.Voip.VoipStatus, bh.Voip.VoipChannel, bh.XboxPlatform.XboxPermission), $X = bh.XboxPlatform.XUserPrivilege, ZX = Ly.object({}), eQ = async (e, t, n) => {
let r = !1;
const i = e.getUntracked(hb), {eaPlayerId: o} = JI(n);
if ($I() && o) {
const {isAllowed: a} = await DT(e, n, [ QX.CommunicateUsingVoice ], $X.Communications);
if (!a) {
Ts((() => !!e.get(pL).get().data?.get(o))) || await nL((() => Xy((() => t.MutePlayer({
entityId: {
playerId: {
id: i.tokenInfo.userId
}
},
targetEntityId: {
playerId: {
id: o
}
}
})), ZX)), {
maxAttempts: 3,
retryDelay: 1e3
}), r = !0;
}
}
return [ r, n ];
}, tQ = () => {
const e = Os(), t = fL(), n = Lh(), {showNotification: r} = oP(), i = Wg("main").history;
H.useEffect((() => {
const t = e.get(FA).get(), o = e.getUntracked(hb);
let a;
return xn((() => {
const s = t.data?.players;
if (!s) return;
const l = [];
for (const [t] of s) o.photonPlayerId !== t && (a?.has(t) || l.push(eQ(e, n.MuteService, t)));
Promise.all(l).then((t => {
for (const [n, s] of t) if (n) {
r(0, 0, {
icon: Sf.VOIP_DISABLED,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY-MEMBER-RESTRICTED", {
"%localPlatform%": zb(o.personaInfo.playerNetworkId)
})
});
const {eaPlayerId: t} = JI(s);
Ts((() => {
const n = {
pg_id: mT(e, i.location),
destination_name: "info_bar",
status: "impression",
msg_id: "xbox_voip_party_restrict"
};
TT(e.get(ly), {
...n,
context: {
nucleus: a ? t : void 0,
rel: NT(e, s)
}
});
}));
break;
}
})), a = new Map(s);
}));
}), [ i, e, t, n, n.MuteService, r ]);
}, nQ = bh.Voip.VoipChannel, rQ = () => {
const {Voip: e} = Lh(), t = Os(), n = XA(), r = oP();
H.useEffect((() => Fn((() => t.get(iO).get().data?.partyId), (e => {
if (!e) return;
const r = qA(t), i = jA(t);
n({
channel: i || r ? nQ.None : nQ.Party
}, !0);
}))), [ e, t, r, n ]);
}, iQ = Ec({
width: nA
}), oQ = Ec({
marginTop: hc(Xc.DimensionSpace.largest),
width: hc(554)
}), aQ = Ec({
marginBottom: hc(Xc.DimensionSpace.small),
flex: 1
}), sQ = ({actionConfig: e, closeModal: t}) => {
const {id: n, label: r, action: i, autoClose: o} = e, a = H.useCallback((() => {
e.isSelected || i(), o && t();
}), [ i, e.isSelected, o, t ]);
return H.createElement(fY, {
label: r,
id: "modal-" + n,
onSelect: a,
isSelected: e.isSelected,
isDisabled: e.isDisabled
});
};
function lQ(e) {
const {closeModal: t} = uT();
return H.useMemo((() => e.map((e => H.createElement("surface", {
style: aQ,
key: e.id
}, H.createElement(sQ, {
actionConfig: e,
closeModal: t
}))))), [ e, t ]);
}
var cQ = ({title: e, headline: t, body: n, actions: r, closeAction: i, closeLabel: o}) => {
const {closeModal: a} = uT();
tA({
callback: i || a,
label: o,
action: 3
});
const s = lQ(r);
return H.createElement("surface", {
style: iQ
}, H.createElement(QN, {
title: e,
headline: t,
body: n,
bodyStyle: oA
}, H.createElement("surface", {
style: oQ
}, s)));
}, dQ = bh.DeepLink.Setting, uQ = bh.DeepLink.ParentalControlSettings, pQ = [ "XBOX", "PSN" ], fQ = () => {
const e = mb(), {data: t} = ND(e.photonPlayerId), n = Os(), r = t?.channel;
return {
currentChannel: r,
isVoipDisabled: qA(n),
isVoipRestricted: jA(n)
};
}, hQ = {
pg_id: "overlay_voip_toggle",
msg_id: "overlay_voip_toggle"
}, mQ = {
...hQ,
option: "off"
}, gQ = {
...hQ,
option: "team_channel"
}, yQ = {
...hQ,
option: "party_channel"
}, IQ = {
...hQ,
option: "voice_settings"
}, _Q = Ii.observer((() => {
const e = Wg("overlay"), t = cy(), n = H.useMemo((() => [ {
id: "open",
action: ET(t, (() => {
e.navigate(HY.link({
focusOnSetting: "1"
}));
}), IQ),
autoClose: !0,
label: wh("BUTTON_VOICE-SETTINGS")
} ]), [ e, t ]);
return H.createElement(hA, {
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_UNDERAGE-VOIP"),
body: wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_UNDERAGE-VOIP"),
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E,
actions: n,
withoutCloseButton: !0
});
})), bQ = Ii.observer((() => {
const e = Lh(), {playerNetworkId: t} = aP(), n = H.useMemo((() => [ {
id: "open",
action: () => e.DeepLink.openSetting({
setting: dQ.FirstPartyParentalVoip
}),
autoClose: !0,
label: wh("BUTTON_XBOX-SETTINGS"),
icon: Sf.OPEN_EXTERNAL
} ]), [ e.DeepLink ]);
return "XBOX" === t ? H.createElement(hA, {
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_VOIP-RESTRICTED"),
body: wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-RESTRICTED"),
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E,
actions: n,
withoutCloseButton: !0
}) : "PSN" === t ? H.createElement(hA, {
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_VOIP-RESTRICTED-PLAYSTATION"),
body: wh("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-RESTRICTED-PLAYSTATION"),
closeLabel: wh("BUTTON_GOT-IT"),
overlayTitleNarrationItem: gA,
buttonNarrationItem: $E,
actions: []
}) : null;
})), SQ = Ii.observer((() => {
const {data: e} = AD(), {currentChannel: t, isVoipDisabled: n} = fQ(), r = XA(), i = cy(), {playerNetworkId: o} = aP(), a = Vv()(uQ.Voip) && pQ.includes(o), s = !$T().getSetting(2, 0), l = H.useMemo((() => [ {
id: "partyChat",
action: ET(i, (() => r({
channel: bh.Voip.VoipChannel.Party
})), yQ),
autoClose: !0,
label: wh("BUTTON_PARTY-CHAT"),
isSelected: !n && t === bh.Voip.VoipChannel.Party,
isDisabled: !e?.some((e => e.channel === bh.Voip.VoipChannel.Party))
}, {
id: "teamChat",
action: ET(i, (() => r({
channel: bh.Voip.VoipChannel.Game
})), gQ),
autoClose: !0,
label: wh("BUTTON_TEAM-CHAT"),
isSelected: !n && t === bh.Voip.VoipChannel.Game,
isDisabled: !e?.some((e => e.channel === bh.Voip.VoipChannel.Game))
}, {
id: "voipDisabled",
action: ET(i, (() => r({
channel: bh.Voip.VoipChannel.None
})), mQ),
autoClose: !0,
label: wh("BUTTON_VOIP-DISABLE"),
isSelected: n
} ]), [ t, n, i, r, e ]);
if (a) {
const e = H.createElement(bQ, null);
if (e) return e;
}
return s ? H.createElement(_Q, null) : H.createElement(cQ, {
closeLabel: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK"),
actions: l,
title: wh("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_VOIP"),
body: wh(n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-DISABLED" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-ENABLED")
});
}));
function vQ() {
const {currentChannel: e, isVoipDisabled: t, isVoipRestricted: n} = fQ(), {data: r} = AD(), {showModal: i} = uT(), o = cy(), {history: a} = Wg("main"), {timeout: s} = Cu(), l = Os(), c = r && r.length > 0;
let d = "", u = "";
e === bh.Voip.VoipChannel.Party ? (d = wh("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_SPEAK-PARTY"), 
u = "in_party_chat") : e === bh.Voip.VoipChannel.Game && (d = wh("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_SPEAK-TEAM"), 
u = "in_team_chat"), (t || n) && (d = wh("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_SPEAK-OFF"), 
u = "chat_off");
const p = d && wh("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_VOICE-CHANNEL", {
"%voiceChannel%": d
}), f = H.useCallback((() => {
TT(o, {
pg_id: mT(l, a.location),
destination_name: "bottom_bar",
msg_id: "bottom_bar",
option: u,
context: {
tpid: dg.productId
}
}), i((() => H.createElement(SQ, null)), {
telemetryId: "overlay_voip_toggle"
});
}), [ l, a.location, o, i, u ]), [h, m] = H.useState({
toggleVoipChannel: void 0,
voiceBtnLabel: ""
});
return H.useEffect((() => {
s("voip_user", (() => {
m({
toggleVoipChannel: c ? f : void 0,
voiceBtnLabel: p
});
}), 200);
}), [ c, s, f, p ]), h;
}
var TQ = bh.Voip.VoipChannel, [EQ, PQ] = js({
debugName: "voipChannelNotificationState",
create: e => {
const {showNotification: t, showCtaNotification: n} = e.get(iP), r = t => WA(e, {
channel: t
}, !0);
return ({channelsBefore: e, channelsAfter: i, voipIsDisabled: o, voipIsRestricted: a}) => {
const s = e?.map((e => e.channel)), l = i?.map((e => e.channel)), c = s && s.includes(bh.Voip.VoipChannel.Game) && l && !l.includes(bh.Voip.VoipChannel.Game) && l.includes(bh.Voip.VoipChannel.Party), d = s && s.includes(bh.Voip.VoipChannel.Party) && l && !l.includes(bh.Voip.VoipChannel.Party) && l.includes(bh.Voip.VoipChannel.Game), u = s && !s.includes(bh.Voip.VoipChannel.Game) && l && l.includes(bh.Voip.VoipChannel.Game);
c ? o ? a || t(0, 0, {
icon: Sf.VOIP,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED")
}) : (t(3, 3, {
icon: Sf.VOIP,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-PARTY_FORCED")
}), r(TQ.Party)) : d ? o ? a || n(0, 0, {
icon: Sf.VOIP
}, wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_TEAM-AVAILABLE"), wh("PHOTON-SOCIAL_NOTIFICATION_TEAM-VOIP_BUTTON_OPEN"), (() => r(TQ.Game)), {
telemetryInfo: {
pg_id: "tst_team_channel",
option: "hold_to_join"
}
}) : (t(3, 3, {
icon: Sf.VOIP,
text: wh("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-TEAM")
}), r(TQ.Game)) : u && (a || n(0, 0, {
icon: Sf.VOIP
}, wh(o ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_TEAM-AVAILABLE" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-PARTY_TEAM-AVAILABLE"), wh("PHOTON-SOCIAL_NOTIFICATION_TEAM-VOIP_BUTTON_OPEN"), (() => r(TQ.Game)), {
telemetryInfo: {
pg_id: "tst_team_channel",
option: "hold_to_join"
}
}));
};
}
}), OQ = bh.Voip.VoipChannel, CQ = bh.Voip.VoipStatus, NQ = Ly.enum(OQ), AQ = Ly.enum(CQ), LQ = Ly.object({
playerId: Ly.string,
playerNetworkId: Ly.string,
channel: NQ,
status: AQ
}), wQ = Ly.object({
state: Ly.object({
players: Ly.array(LQ)
})
}), kQ = Ly.object({
channel: NQ,
name: Ly.optional(Ly.string)
}), RQ = Ly.object({
channels: Ly.array(kQ)
});
function xQ(e) {
const t = {};
return e.state.players.forEach((e => {
const n = GA(e), r = UI(n);
t[r] && n.status === bh.Voip.VoipStatus.None || (t[r] = n);
})), {
players: new bs(t)
};
}
function BQ() {
const {Voip: e} = Lh();
return PD((async () => e.getVoipState({})), [ e ], wQ, {
transformResponse: xQ
});
}
function DQ() {
const {Voip: e} = Lh();
return PD((async () => e.getVoipChannels({})), [ e ], RQ, {
transformResponse: e => e.channels
});
}
var FQ = class extends as {
constructor(e) {
super({
data: e
});
}
};
function MQ() {
const e = MA(), t = HA(), n = BQ(), r = DQ(), {Voip: i, Lobby: o, Party: a} = Lh(), s = PQ(), l = mb(), c = Os();
BD();
const d = H.useCallback((() => {
Ts((() => {
const n = t.get().data ?? [], r = e.get(), i = r.data?.players;
i?.forEach(((e, t) => {
t === l.photonPlayerId || n.find((t => t.channel === e.channel)) || r.data?.players.delete(t);
}));
}));
}), [ t, e, l ]), u = H.useCallback(((e, t) => {
const n = qA(c), r = jA(c);
s({
channelsBefore: e,
channelsAfter: t,
voipIsDisabled: n,
voipIsRestricted: r
});
}), [ s, c ]);
H.useEffect((() => {
if (r) return t.setSeedStrategy({
fetch: async () => OI(await r()),
updater: (e, t) => {
u(e.data, t.data), fI(e, t), d();
}
});
}), [ u, r, d, t ]);
const p = H.useCallback((t => {
const n = e.get();
t?.forEach((e => {
const t = GA(e), r = UI(t);
n.data?.players.set(r, t);
}));
}), [ e ]);
H.useEffect((() => e.setStreamStrategy({
stream: new FQ(i.onVoipStateUpdated),
updater: (e, t) => {
p(t.data?.players);
}
}, "voipUpdatedStreamStrategy")), [ i.onVoipStateUpdated, p, e ]), H.useEffect((() => {
if (n) return e.setSeedStrategy({
fetch: async () => OI(await n())
});
}), [ n, e ]), H.useEffect((() => t.setStreamStrategy({
stream: new FQ(i.onVoipChannelsUpdated),
updater: (e, t) => {
t.data && (u(e.data, t.data.channels), e.update({
...e.toProps(),
data: t.data.channels
}), d());
}
}, "voipChannelsUpdatedStreamStrategy")), [ u, d, i.onVoipChannelsUpdated, t ]), 
H.useEffect((() => {
async function t() {
const t = await i.getVoipState({});
hr((() => {
Ts((() => {
e.get().data?.players.clear(), p(t?.state.players);
}));
}));
}
const n = o.onLobbyChanged.subscribe(t), r = a.onPartyChanged.subscribe(t);
return () => {
n(), r();
};
}), [ e, p, i, o, a ]);
}
var UQ = bh.InputBindings.Action, HQ = Ii.observer((({children: e}) => {
const {toggleVoipChannel: t, voiceBtnLabel: n} = vQ();
return EA(t && {
registrationIdOverride: "GlobalChatParty",
action: UQ.ToggleMode,
callback: t,
label: n
}, void 0, !!n), H.createElement(H.Fragment, null, e);
})), VQ = Ii.observer((({children: e}) => (MQ(), rQ(), tQ(), H.createElement(H.Fragment, null, e)))), JQ = ({children: e}) => H.createElement(VQ, null, H.createElement(HQ, null, e)), GQ = () => {
const {showNotification: e, showCtaNotification: t} = oP(), {data: n} = FP(pS()), {data: r} = OD(), i = mb(), o = Os(), {mute: a} = JD();
return H.useCallback((s => {
const l = s.eaPlayerId, {isCurrentPhotonUser: c} = Ib(s.photonPlayerId, i);
if (c || !l) return;
const d = Ts((() => n?.has(l))), u = Ts((() => r?.has(l))), p = hv(gP(o, s, i), {
allowEllipsis: !0
});
d ? u ? e(0, 2, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-BLOCKED", {
"%primaryID%": p
}),
icon: Sf.WARNING,
iconColor: Xc.ColorSystem.warning
}) : t(3, 3, {
icon: Sf.WARNING,
iconColor: Xc.ColorSystem.warning
}, wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-BLOCKED_UNMUTED", {
"%primaryID%": p
}), wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_MUTE"), (() => {
a(s.photonPlayerId);
})) : e(2, 2, {
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-JOIN", {
"%primaryID%": p
}),
icon: Sf.PARTY
});
}), [ i, o, n, r, a, e, t ]);
}, zQ = () => {
const {showNotification: e} = oP(), t = mb(), n = Os();
return H.useCallback(((r, i) => {
if (wF(i, t)) return;
const {isCurrentPhotonUser: o} = Ib(r.photonPlayerId, t);
o ? e(0, 2, {
icon: Sf.REMOVE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_KICKED")
}) : e(2, 2, {
icon: Sf.REMOVE,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-EXIT", {
"%primaryID%": hv(gP(n, r, t), {
allowEllipsis: !0
})
})
});
}), [ n, e, t ]);
}, jQ = () => {
const {showNotification: e} = oP(), t = mb(), n = Os();
return H.useCallback((r => {
const {isCurrentPhotonUser: i} = Ib(r.photonPlayerId, t);
i || e(2, 2, {
icon: Sf.EXIT,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-EXIT", {
"%primaryID%": hv(gP(n, r, t), {
allowEllipsis: !0
})
})
});
}), [ e, t, n ]);
}, qQ = () => {
const {showNotification: e} = oP(), t = mb(), n = Os();
return H.useCallback(((r, i) => {
if (wF(i, t)) return;
const {isCurrentPhotonUser: o} = Ib(r.photonPlayerId, t);
o ? e(2, 2, {
icon: Sf.PARTY_LEADER,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_LEADER-CONFIRM")
}, {
telemetryInfo: {
pg_id: "tst_promoted"
}
}) : e(2, 2, {
icon: Sf.PARTY_LEADER,
text: wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_LEADER-ANNOUNCE", {
"%primaryID%": hv(gP(n, r, t), {
allowEllipsis: !0
})
})
}, {
setting: 6,
telemetryInfo: {
pg_id: "tst_promoted_other"
}
});
}), [ n, e, t ]);
}, YQ = () => {
const e = jQ(), t = zQ(), n = GQ(), r = qQ(), i = oO().notificationEvents;
H.useEffect((() => i.setLeader.subscribe(r)), [ r, i ]), H.useEffect((() => i.joined.subscribe(n)), [ n, i ]), 
H.useEffect((() => i.left.subscribe(e)), [ e, i ]), H.useEffect((() => i.kicked.subscribe(t)), [ t, i ]);
}, KQ = async (e, t, n) => {
const r = t.size > 1 ? "tst_blocked_multi" : "tst_blocked_player_current";
let i = wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYERS"), o = !1;
if (t.size > 1 && n.size > 0) i = wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYERS_UNMUTED"); else if (1 === n.size) {
o = !0;
const [t] = n, {data: r} = await LI(hN(e, t), 8e3);
r && (i = wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYER_UNMUTED", {
"%primaryID%": hv({
name: r.displayName,
playerNetworkId: r.playerNetworkId
}, {
allowEllipsis: !0
})
}));
} else if (1 === t.size) {
const [n] = t, {data: r} = await LI(hN(e, n), 8e3);
r && (i = wh("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYER", {
"%primaryID%": hv({
name: r.displayName,
playerNetworkId: r.playerNetworkId
}, {
allowEllipsis: !0
})
}));
}
return {
showMuteCtaNotification: o,
text: i,
telemetryId: r
};
}, WQ = () => {
const e = Os(), {mute: t} = JD(), {showNotification: n, showCtaNotification: r} = oP();
Ns((async i => {
if (!i) return;
const {blockedEaIds: o, blockedAndUnmutedEaIds: a, party: s} = await hL(e);
if (s && o.size > 0) {
const {showMuteCtaNotification: i, text: s, telemetryId: l} = await KQ(e, o, a);
i ? r(3, 3, {
icon: Sf.WARNING,
iconColor: Xc.ColorSystem.warning
}, s, wh("PHOTON-SOCIAL_NOTIFICATION_BUTTON_MUTE"), (() => {
const [e] = a;
t(e);
})) : n(0, 2, {
icon: Sf.WARNING,
iconColor: Xc.ColorSystem.warning,
text: s
}, {
telemetryInfo: {
pg_id: l,
context: {
tpid: dg.productId
}
}
});
}
}), [ e, n, r, t ], ML, !0);
};
function XQ() {
const e = oO(), t = Os();
H.useEffect((() => Fn((() => e.get().data?.partyId), (e => {
e && mk(0, t);
}))), [ t, e ]);
const n = yi.useObserver((() => e.get().data?.members));
H.useEffect((() => n?.observe_((({type: e, name: n}) => {
"add" === e && gk(0, n, t);
}))), [ t, e, n ]);
}
function QQ() {
const e = oO();
H.useEffect((() => e.init()), [ e ]);
}
var $Q = bh.InputBindings.Action, ZQ = Ii.observer((({children: e}) => {
const {leaveParty: t} = rM();
return EA(t && {
registrationIdOverride: "GlobalLeaveParty",
action: $Q.LeaveParty,
callback: t,
label: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_LEAVE-PARTY")
}), H.createElement(H.Fragment, null, e);
})), e$ = Ii.observer((({children: e}) => (eG(), QQ(), YQ(), XQ(), WQ(), H.createElement(H.Fragment, null, e))));
function t$(e, t) {
const n = nN(e), r = rN(e);
let i;
r.start();
const o = n.onHidden((() => {
o(), i?.();
}));
i = t((() => {
o(), r.stop();
}));
}
var n$ = () => {
const e = Lh(), t = cy(), {showModal: n, closeModal: r} = uT(), i = Os();
H.useEffect((() => e.Moderation.onOpenPlayerReporting.subscribe((o => {
t$(i, (i => {
const a = new TF(e, o, t, (t => {
i(), t && e.Moderation.playerReportingCancelled({}), r();
}));
return n((() => H.createElement(CF, {
reportPlayer: a
}))), () => a.abort();
}));
}))), [ t, n, r, i, e ]);
}, [r$, i$] = js({
debugName: "friendRecommendationsClientState",
create: e => {
const t = e.get(ih), n = lg.includes(dg.environment) ? "https://friend-recommendations.k.social.ea.com" : "https://friend-recommendations-int.k.social.ea.com";
return new eg(t.bindings.Http2, n, !0);
}
}), o$ = Ii.observer((({children: e}) => {
const t = Os(), n = Kk(), r = mp(), i = mb(), o = i$(), a = j_(), s = Uv("fr_1", "PlayerSearch"), l = Uv("fr_1", "FindFriends"), c = cy(), d = s || l, u = c.sessionHeaders?.custom.offer_id;
return H.useEffect((() => {
if (i && d && u) return n.init(o, i, a, u, bR(r, i.tokenInfo.userId), SR(r, i.tokenInfo.userId));
}), [ o, d, t, u, a, n, r, i ]), H.createElement(H.Fragment, null, e);
}));
function a$(e) {
return {
eaPlayerId: e.entity.id.playerId.id,
sourcePlayerNetworkId: Yy(e.sourcePlayerNetworkId ?? void 0),
targetPlayerNetworkId: Yy(e.targetPlayerNetworkId ?? void 0),
createTimeMs: Tv(e.createTime)
};
}
var s$ = (e, t) => t.createTimeMs - e.createTimeMs;
function l$(e) {
return new Uk(e.invites.map((e => [ e.entity.id.playerId.id, a$(e) ])), s$);
}
function c$(e, t) {
const n = Lh(), r = yb();
H.useEffect((() => e.setSeedStrategy({
fetch: async () => OI(await Xy((() => n.Invites[t]({
entityId: {
playerId: {
id: r
}
},
view: bh.Invites.RequestedView.REQUESTED_VIEW_DETAILED
})), oS, {
transformResponse: l$
}))
})), [ n, t, e, r ]);
}
var d$ = Ii.observer((({children: e}) => (c$(Yv(), "ListSentFriendInvites"), c$(jv(), "ListReceivedFriendInvites"), 
CR(), MR(), H.createElement(H.Fragment, null, e))));
function u$() {
const e = ZW(), t = j_(), {PlatformFriends: n} = Lh(), r = mb().personaInfo.playerNetworkId;
H.useEffect((() => e.init(n, t, r)), [ e, t, n, r ]);
}
function p$(e, t) {
return (t.createTimeMs || 0) - (e.createTimeMs || 0);
}
function f$(e) {
return new Uk(e.blockedPlayers?.map((e => [ e.entity.id.playerId.id, Kv(e) ])), p$);
}
function h$() {
const {BlockService: e} = Lh(), t = yb();
return PD((() => e.ListBlockedPlayers({
entityId: {
playerId: {
id: t
}
}
})), [ e, t ], v_, {
transformResponse: f$
});
}
function m$() {
const e = h$(), t = pS();
H.useEffect((() => {
if (e) return t.setSeedStrategy({
fetch: async () => OI(await e())
});
}), [ e, t ]);
}
var g$ = ({children: e}) => (m$(), u$(), H.createElement(H.Fragment, null, e)), y$ = bh.Friends.RequestedView;
function I$() {
const {Friends: e} = Lh(), t = yb();
return PD((() => e.ListFriends({
entityId: {
playerId: {
id: t
}
},
view: y$.REQUESTED_VIEW_ID_ONLY
})), [ e, t ], p_);
}
function _$() {
const e = AS(), t = I$();
H.useEffect((() => {
if (t) return e.init(t);
}), [ t, e ]);
}
var b$ = ({children: e}) => (_$(), H.createElement(H.Fragment, null, e));
function S$() {
const e = nT(), t = xv().fragment;
H.useEffect((() => mr((() => !t.loading && !t.uninitialized), (() => {
e.init();
}))), [ e, t ]);
}
var v$ = ({children: e}) => (S$(), H.createElement(H.Fragment, null, e));
function T$() {
const e = PS(), t = jS(), n = j_(), {PlatformFriends: r} = Lh(), i = mb().personaInfo.playerNetworkId;
H.useEffect((() => e.init(t, n, r, i)), [ e, t, n, r, i ]);
}
function E$(e) {
const t = (e.mutedPlayers ?? []).map((e => [ e.entity.id.playerId.id, Kv(e) ]));
return new bs(t);
}
function P$() {
const {MuteService: e} = Lh(), t = yb();
return PD((() => e.ListMutedPlayers({
entityId: {
playerId: {
id: t
}
}
})), [ e, t ], T_, {
transformResponse: E$
});
}
function O$() {
const e = P$(), t = fL();
H.useEffect((() => {
if (e) return t.setSeedStrategy({
fetch: async () => OI(await e())
});
}), [ e, t ]);
}
var C$ = ({children: e}) => (O$(), H.createElement(H.Fragment, null, e));
function N$(e, t, n = !1) {
const r = H.useRef([]), {timeout: i, hasTimeout: o} = Cu(), a = "batcher", s = H.useCallback((() => {
const t = r.current.splice(0, r.current.length);
t.length && e(t);
}), [ e ]);
return H.useCallback((e => {
r.current.push(e), o(a) && !n || i(a, s, t);
}), [ s, o, t, n, i ]);
}
var A$ = bh.FriendsNotificationsService.ListUpdate;
function L$() {
const e = pS();
return H.useCallback((t => Ts((() => {
const n = t.blockedPlayer.entity.id.playerId.id, r = e.get().data;
t.listUpdate === A$.LIST_UPDATE_ITEM_ADDED ? r?.set(n, Kv(t.blockedPlayer)) : t.listUpdate === A$.LIST_UPDATE_ITEM_REMOVED && r?.delete(n);
}))), [ e ]);
}
var w$ = bh.FriendsNotificationsService.ListUpdate;
function k$() {
const e = AS(), t = Yv().get(), n = nT(), r = UV(), i = j_();
return H.useCallback((o => Ts((() => {
const a = o.friend.entity.id.playerId.id;
o.listUpdate === w$.LIST_UPDATE_ITEM_ADDED ? i.fetchPlayerInfosForFriends([ a ], (n => {
hr((() => {
for (const i of n) i.data?.eaPlayerId && (e.addFriend({
photonPlayerId: i.data.photonPlayerId
}), "EA" === i.data.playerNetworkId && (r.trigger(i.data), Ts((() => {
t.data?.delete(a);
}))));
}));
})) : o.listUpdate === w$.LIST_UPDATE_ITEM_REMOVED && (e.removeFriend(a), Ts((() => {
a && n.removeFavoriteFriend(UI({
eaPlayerId: a,
playerNetworkId: "EA"
}));
})));
}))), [ e, i, r, t, n ]);
}
var R$ = bh.FriendsNotificationsService.ListUpdate;
function x$() {
const e = fL();
return H.useCallback((t => Ts((() => {
const n = t.mutedPlayer.entity.id.playerId.id, r = e.get().data;
t.listUpdate === R$.LIST_UPDATE_ITEM_ADDED ? r?.set(n, Kv(t.mutedPlayer)) : t.listUpdate === R$.LIST_UPDATE_ITEM_REMOVED && r?.delete(n);
}))), [ e ]);
}
var B$ = bh.FriendsNotificationsService.ListUpdate;
function D$() {
const e = jv(), t = j_(), n = BH(), r = Cu();
return H.useCallback((i => Ts((async () => {
const o = i.friendInviteDetails.entity.id.playerId.id, a = e.get().data, s = a$(i.friendInviteDetails);
if (i.listUpdate === B$.LIST_UPDATE_ITEM_ADDED || i.listUpdate === B$.LIST_UPDATE_ITEM_UPDATED) {
const e = await LI(t.get(UI({
eaPlayerId: o,
playerNetworkId: s.sourcePlayerNetworkId
})), 1e4);
e?.data && (a?.set(o, s), i.listUpdate === B$.LIST_UPDATE_ITEM_ADDED && (r.disposeTimeout(o), 
n.trigger(e.data)));
} else i.listUpdate === B$.LIST_UPDATE_ITEM_REMOVED && r.timeout(o, (() => {
a?.delete(o);
}), 5e3);
}))), [ n, t, e, r ]);
}
var F$ = bh.FriendsNotificationsService.ListUpdate;
function M$() {
const e = Yv(), t = Cu();
return H.useCallback((n => Ts((() => {
const r = n.friendInviteDetails.entity.id.playerId.id, i = e.get().data;
n.listUpdate === F$.LIST_UPDATE_ITEM_ADDED || n.listUpdate === F$.LIST_UPDATE_ITEM_UPDATED ? (t.disposeTimeout(r), 
i?.set(r, a$(n.friendInviteDetails))) : n.listUpdate === F$.LIST_UPDATE_ITEM_REMOVED && t.timeout(r, (() => {
Ts((() => {
i?.delete(r);
}));
}), 5e3);
}))), [ e, t ]);
}
var U$ = bh.FriendsNotificationsService.SubscriptionType;
function H$() {
const e = RI();
return H.useCallback(((t, n) => {
e(t, 1e4)?.then((() => {
n();
}));
}), [ e ]);
}
function V$() {
const {FriendsNotificationsService: e} = Lh(), t = Os(), n = yb(), r = k$(), i = L$(), o = x$(), a = M$(), s = D$(), l = H$(), c = t.get(NS).get(), d = t.get(uS).get(), u = t.get(pL).get(), p = t.get(zv).get(), f = t.get(qv).get(), h = ED((async () => e.StreamNotifications({
entityId: {
playerId: {
id: n
}
},
subscriptionTypes: [ U$.SUBSCRIPTION_TYPE_BLOCK_LIST, U$.SUBSCRIPTION_TYPE_FRIEND_LIST, U$.SUBSCRIPTION_TYPE_MUTE_LIST, U$.SUBSCRIPTION_TYPE_RECEIVED_INVITE_LIST, U$.SUBSCRIPTION_TYPE_SENT_INVITE_LIST ]
})), [ e, n ], x_), m = N$(H.useCallback((async e => {
try {
for (const t of e) {
const {friendListNotification: e, blockListNotification: n, muteListNotification: h, sentInviteListNotification: m, receivedInviteListNotification: g} = t;
e && l(c, (() => {
r(e);
})), n && l(d, (() => {
i(n);
})), h && l(u, (() => {
o(h);
})), m && l(f, (() => {
a(m);
})), g && l(p, (() => {
s(g);
}));
}
} catch (e) {
console.error("Failed to handle friends notification", e);
}
}), [ d, i, c, r, u, o, s, p, a, f, l ]), 500);
var g, y, I, _;
g = h.data?.stream, y = L_, I = m, H.useEffect((() => {
if (g) {
const e = new e_(g, y), t = e.data.subscribe(I), n = e.error.subscribe((e => {
console.error("Stream error", e), _?.(e);
}));
return e.start(), () => {
t(), n(), e.close();
};
}
}), [ I, _, y, g ]), tX(h.data?.stream, H.useCallback((() => h.fetch?.()), [ h ])), 
D_("FriendsNotificationsService.StreamNotifications", h.data?.stream);
}
var J$ = class {
constructor(e) {
this.toItemId = e, this.previousItemIds = new Set, this.withChangedItems = (e, t) => {
const n = [], r = new Set;
e.forEach((e => {
const t = this.toItemId(e);
r.add(t), this.previousItemIds.has(t) || n.push(e);
}));
const i = Array.from(this.previousItemIds.values()).filter((e => !r.has(e)));
(n.length || i.length) && (this.rememberItems(n), this.forgetItemIds(i), t({
addedItems: n,
removedItemIds: i
}));
}, this.resetItems = () => {
this.previousItemIds.clear();
};
}
rememberItems(e) {
e.forEach((e => {
this.previousItemIds.add(this.toItemId(e));
}));
}
forgetItemIds(e) {
e.forEach((e => {
this.previousItemIds.delete(e);
}));
}
};
var G$ = Js({
debugName: "onlineFriendsFilterPlayersState",
get: function({get: e}) {
const t = e(QC).data, n = new Set;
t?.[0]?.forEach((e => {
const t = YI(e.photonPlayerId);
zI(t) && n.add(t);
}));
const r = e(z_), i = [];
return n.forEach((e => {
const {eaPlayerId: t, playerNetworkId: n} = JI(e), o = r.getMaybeUntracked(e)?.data?.personaId;
t && o && i.push({
playerId: t,
playerNetworkId: n,
personaId: o
});
})), i;
}
});
function z$() {
const e = Os();
return {
addUninvitable: H.useCallback((t => {
const n = new Map(e.getUntracked(gO));
t.forEach((e => {
n.set(e.photonPlayerId, {
uninvitable: !0,
reason: e.reason
});
})), e.set(gO, n);
}), [ e ]),
removeUninvitable: H.useCallback((t => {
const n = new Map(e.getUntracked(gO));
t.forEach((e => {
n.delete(e);
})), e.set(gO, n);
}), [ e ]),
resetUninvitable: H.useCallback((() => {
e.reset(gO);
}), [ e ])
};
}
function j$(e) {
return {
photonPlayerId: HI({
eaPlayerId: e.playerId,
playerNetworkId: Yy(e.playerNetworkId)
}),
reason: e.localizedReason
};
}
var q$ = () => {
const {PhotonInvite: e} = Lh(), t = Os(), {addUninvitable: n, removeUninvitable: r, resetUninvitable: i} = z$(), o = H.useCallback((async () => {
if (Ts((() => t.getUntracked(bP).get().data))) {
const r = t.getUntracked(G$), o = await e.filterUninvitablePlayers({
players: r
});
hr((() => {
i(), o && n(o.uninvitablePlayers.map(j$));
}));
}
}), [ n, e, t, i ]);
H.useEffect((() => e.onUninvitablePlayersChanged.subscribe(o)), [ e.onUninvitablePlayersChanged, o ]);
const a = H.useCallback((async (t, i) => {
const o = t.length ? await e.filterUninvitablePlayers({
players: t
}) : void 0;
hr((() => {
o && n(o.uninvitablePlayers.map(j$)), r(i);
}));
}), [ n, e, r ]), s = H.useCallback((e => HI({
eaPlayerId: e.playerId,
playerNetworkId: Yy(e.playerNetworkId)
})), []), {withChangedItems: l, resetItems: c} = (d = s, H.useRef(new J$(d)).current);
var d;
Us((({get: e}) => {
const t = e(G$);
e(bP).get().data ? l(t, (({addedItems: e, removedItemIds: t}) => {
a(e, t);
})) : (c(), i());
}), [ c, i, a, l ]);
}, Y$ = Js({
debugName: "onlineFriendCountState",
get: function({get: e}) {
const t = e(QC), n = t.data?.[0].length;
return {
...t,
data: t.data ? n : void 0
};
}
});
function K$() {
const e = Lh();
Ns((({data: t}) => {
e.hasMethod("Badging", "updateOnlineFriendCount") && void 0 !== t && e.Badging.updateOnlineFriendCount({
onlineFriendCount: t
});
}), [ e ], Y$);
}
function W$() {
const e = Os(), t = cy();
H.useEffect((() => TR((() => e.get(QC).data && e.get(zv).get().data && e.get(qv).get().data), (() => {
TT(t, {
pg_id: "game_boot_friends_info",
msg_id: "game_boot_friends_info"
});
}))), [ e, t ]);
}
var X$ = Ii.observer((({children: e}) => (V$(), q$(), T$(), K$(), W$(), H.createElement(b$, null, H.createElement(v$, null, H.createElement(g$, null, H.createElement(C$, null, H.createElement(yR, null, H.createElement(d$, null, H.createElement(o$, null, e)))))))))), Q$ = "retries";
function $$(e, t) {
const n = t?.maxRetries ?? 2, r = t?.delay ?? 2e3, i = H.useRef(0), {timeout: o, disposeTimeout: a} = Cu(), {data: s, error: l, fetch: c} = e;
return H.useEffect((() => (l && i.current < n ? (o(Q$, (() => {
c?.();
}), r), i.current += 1) : s && (i.current = 0), () => {
a(Q$);
})), [ a, n, o, l, s, c, r ]), e;
}
function Z$(e) {
const {sessionNotification: t} = e, {properties: n} = t, r = Yy(t.client?.playerNetworkId), i = dc(t.client?.devicePlatformId), o = UI({
eaPlayerId: e.playerId.id,
playerNetworkId: r
}), a = {
sessionId: t.presenceSessionId,
isOnline: !!t.online,
devicePlatformId: i,
photonPlayerId: o,
photonSessionId: qI(o, t.presenceSessionId),
playerNetworkId: r,
isEAPresence: !0,
gameJoinTokenTypes: t.gameJoinTokenTypes,
isMissingClientInfo: !t.client?.playerNetworkId?.id,
updated: t.updated
};
return t.inputTypes && (a.inputType = pU(t.inputTypes)), void 0 !== t.joinable && (a.joinable = t.joinable), 
e.lastSeenOnline && (a.lastSeenOnline = e.lastSeenOnline.seconds), t.updateTimestamp && (a.updateTimestamp = t.updateTimestamp.seconds), 
t.client?.productId?.id && (a.productId = t.client.productId.id), t.client?.locale && (a.locale = t.client.locale.toLowerCase().replace("_", "-")), 
t.activityDescription && (a.activityDescription = t.activityDescription), t.activityDetails && (a.activityDetails = t.activityDetails), 
n && (a.properties = {}, a.properties.currentPartySize = n.photon_currentPartySize?.integerValue, 
a.properties.maxPartySize = n.photon_maxPartySize?.integerValue, a.properties.partyJoinable = n.photon_partyJoinable ? !!n.photon_partyJoinable.integerValue : void 0, 
a.properties.currentLobbySize = n.photon_currentLobbySize?.integerValue, a.properties.maxLobbySize = n.photon_maxLobbySize?.integerValue, 
a.properties.lobbyJoinable = n.photon_lobbyJoinable ? !!n.photon_lobbyJoinable.integerValue : void 0, 
a.properties.crossplayEnabled = 0 !== n.photon_crossplayEnabled?.integerValue, a.properties.lobbyCrossplayEnabled = n.photon_lobbyCrossplayEnabled ? 1 === n.photon_lobbyCrossplayEnabled.integerValue : void 0, 
a.properties.partyCrossplayEnabled = n.photon_partyCrossplayEnabled ? 1 === n.photon_partyCrossplayEnabled.integerValue : void 0, 
a.properties.status = n.photon_status?.stringValue), a;
}
function eZ(e, t) {
return (e.updateTimestamp ?? 0) < (t.updateTimestamp ?? 0);
}
var tZ = e => `${e.isEAPresence}:${e.devicePlatformId}:${e.productId}:${e.photonPlayerId}`;
function nZ(e) {
if (e.length < 2) return e;
const t = [], n = new Map, r = [];
for (const i of e) if (i.isEAPresence) {
const e = tZ(i), r = n.get(e);
r && !eZ(r, i) || (r && i.sessionId !== r.sessionId && t.push(r.sessionId), n.set(e, i));
} else r.push(i);
return [ ...Array.from(n.values()), ...r ];
}
function rZ(e) {
return e ? Object.values(e) : [];
}
function iZ(e, t, n) {
const r = t.data, i = e.getUntracked(q_);
r ? n.forEach((e => {
var t;
if (e.sessionId) if (e.isOnline) {
let n = r.get(e.photonPlayerId) ?? {};
e.isEAPresence ? (t = nZ([ ...rZ(n), e ]), n = Object.fromEntries(t.map((e => [ e.sessionId, e ])))) : n = {
...n,
[e.sessionId]: e
}, r.set(e.photonPlayerId, n);
} else {
const t = Array.from(r?.entries()).find((([, t]) => t[e.sessionId]));
let n = !1;
if (t) {
const [i, o] = t;
n = o[e.sessionId]?.isOnline ?? !1;
const a = {
...o
};
delete a[e.sessionId], Object.keys(a).length > 0 ? r.set(i, a) : r.delete(i);
}
const {eaPlayerId: o} = JI(e.photonPlayerId);
n && o && K_(i, {
eaPlayerId: o,
mostRecentlyLoggedInPersonaDate: Math.floor(Date.now() / 1e3)
});
}
})) : t.update({
...t.toProps(),
data: JS(nZ(n))
});
}
function oZ(e, t, n) {
Ts((() => {
n.uninitialized && n.update({
loading: !0,
uninitialized: !1
});
}));
const r = nI(new uI(e, 1e3, 2e3), {
onStreamData: e => {
Ts((() => t(n, e)));
},
onStreamError: e => {}
}), i = setTimeout((() => {
Ts((() => {
n.loading && t(n, []);
}));
}), 3e3);
return () => {
clearTimeout(i), r();
};
}
var aZ = e => {
const {PresenceSession: t} = Lh(), n = Os();
H.useEffect((() => () => {
t.detachFromPresenceSession({});
}), [ t ]);
const r = ED((() => t.attachToPresenceSession({})), [ t ], uU), i = jS();
return H.useEffect((() => {
r.error && i.get().update({
error: r.error,
loading: !1,
uninitialized: !1
});
}), [ r.error, i ]), $$(ED((() => t.subscribeToFriendsPresence({})), [ t ], nU, {
queryIsReady: !!r.data
})), D_("presenceSession.attachToPresenceSession", r.data?.stream), H.useEffect((() => {
if (r.data?.stream) return oZ(new e_(r.data?.stream, cU, (e => Z$(e.presenceNotification))), e, i.get());
}), [ r, e, n, i ]), H.useEffect((() => oZ(i.firstPartyPresenceStream, ((e, t) => {
t.length && (iZ(n, e, t), e.data || e.update({
...e.toProps()
}));
}), i.get())), [ n, i.firstPartyPresenceStream, i, e ]), !!r.data;
};
function sZ(e, t) {
return !(!dg.playerListsEnabled || !zI(t)) && e.getItemUntracked(VO, t);
}
var lZ = (e, t) => !!e.getItemUntracked(Jv, t).data, cZ = (e, t, n) => {
if (n.updated && n.isOnline && !HS(e, t, n.photonPlayerId, void 0)?.isOnline) {
if (rT(e, n.photonPlayerId)) return 2;
if (!e.getItemUntracked(ZC, n.photonPlayerId).data) return lZ(e, n.photonPlayerId) ? 0 : sZ(e, n.photonPlayerId) ? 1 : void 0;
}
};
function dZ(e) {
const t = new Map;
for (const n of e) t.set(n.sessionId, n);
return Array.from(t.values());
}
var uZ = Ii.observer((({children: e}) => {
const t = Eq(), n = j_(), r = Os(), i = RI(), o = H.useCallback(((e, o) => {
const a = e.data, s = e.loading || e.uninitialized;
s || (o = dZ(o));
let l = 0;
for (const e of o) if (!s) {
const o = cZ(r, a, e);
if (void 0 !== o) {
if (l++, 10 === l) break;
i(n.get(e.photonPlayerId), 1e4)?.then((({data: n}) => {
n && t.trigger(e, n, {
playerType: o
});
}));
}
}
iZ(r, e, o), s && e.update({
...e.toProps(),
loading: !1,
uninitialized: !1
});
}), [ r, i, n, t ]), a = aZ(o);
return wU(a), _U(a), H.createElement(H.Fragment, null, e);
})), pZ = Ly.object({
teamId: Ly.string,
playerId: Ly.string,
playerNetworkId: Ly.string,
timestamp: Ly.number
}, {
primaryContext: Ly.string,
secondaryContext: Ly.string
}), fZ = Ly.object({
teamId: Ly.string,
playerId: Ly.string,
playerNetworkId: Ly.string
}, {
timestamp: Ly.number,
primaryContext: Ly.string,
secondaryContext: Ly.string
}), hZ = Ly.object({
encounters: Ly.array(pZ)
}), mZ = Ly.object({
encounters: Ly.array(fZ)
});
function gZ(e, t, n) {
const r = {}, i = n.encounters.map((e => {
const t = Yy(e.playerNetworkId);
qy(e.playerNetworkId) || (r[e.playerId] = e.playerNetworkId);
const n = UI({
eaPlayerId: e.playerId,
playerNetworkId: t
});
return [ n, {
...e,
photonPlayerId: n,
playerNetworkId: t,
displayName: "",
displayNameLowerCase: ""
} ];
}));
return Vb(e, t, "Invalid PlayerNetworkIds passed to RecentlyMet", r), i;
}
function yZ(e, t, n) {
return () => {
const r = j_(), i = xI(), {RecentlyMet: o} = Lh(), a = e(), s = yb(), l = mp().bindings, c = Gg();
H.useEffect((() => a.setOnDemandStrategy({
fetch: async () => PI(await t(o, s, l, c)),
maxAge: 3e4,
updater: async (e, t) => {
const o = t.data, a = [];
if (o) {
const e = o.map((([e]) => e));
await i(r.getByIds(e), 8e3), Ts((() => {
for (const e of o) {
const [t, n] = e, i = r.get(t).data;
i && (n.displayName = i.displayName, n.displayNameLowerCase = i.displayName.toLowerCase(), 
a.push(e));
}
}));
}
Ts((() => {
hr((() => {
e.data && e.data.replace(a), e.update({
...t,
data: e.data || new Uk(a, n)
});
}));
}));
}
})), [ i, a, r, o, s, l, c ]), As((e => {
if (!e) {
const e = a.getMaybeUntracked();
return e?.onBecomeUnobserved((() => {
e.invalidateTimestamp();
}));
}
}), [ a ], Sh, !1);
};
}
var IZ = yZ(EN, ((e, t, n, r) => Xy((() => e.getRecentlyMetPlayers({
playerId: t
})), hZ, {
transformResponse: e => gZ(n, r, e)
})), (function(e, t) {
return t.timestamp - e.timestamp;
})), _Z = yZ(vN, ((e, t, n, r) => Xy((() => e.getSessionPlayers({
playerId: t
})), mZ, {
transformResponse: e => gZ(n, r, e)
})), pz), bZ = e => (IZ(), _Z(), H.createElement(H.Fragment, null, e.children)), SZ = class extends as {
constructor(e) {
super({
data: e
});
}
};
function vZ(e, t) {
return nI(new SZ(e), t);
}
function TZ() {
const e = j_(), t = xI();
return H.useCallback((async n => {
const r = n.map((e => e.photonPlayerId));
return await t(e.getByIds(r), 8e3), Ts((() => n.filter((t => !!e.get(t.photonPlayerId)?.data))));
}), [ t, e ]);
}
function EZ(e, t) {
const n = e.getUntracked(AO);
hr((() => {
Ts((() => n.clear())), t.forEach(((e, t) => {
n.set(e.id, {
...e,
index: t
});
}));
}));
}
function PZ(e, t) {
return t.personas.length > 100 ? (e.get(ih).bindings.Utilities.showError({
message: `PlayerList: too many personas (${t.personas.length}/100) in list '${t.playerListId}'`
}), t.personas.slice(0, 100)) : t.personas;
}
async function OZ(e, t, n) {
const r = PZ(e, t).map(((e, t) => ({
...e,
photonPlayerId: HI({
eaPlayerId: e.playerId,
playerNetworkId: Yy(e.playerNetworkId)
}),
icons: new Set(e.icons),
index: t
}))), i = await n(r), {data: o} = e.getItemUntracked(LO, t.playerListId), a = o ?? new bs([], "OptimizedObservableMap<playerListPersonas>");
hr((() => {
Ts((() => a.clear())), i.forEach((e => {
a.set(e.photonPlayerId, e);
})), e.setItem(LO, t.playerListId, {
loading: !1,
data: a
});
}));
}
async function CZ(e, t) {
const n = await t.getPlayerListConfig({});
n && e.set(NO, n.playerList);
}
function NZ(e, t) {
const n = e.get(NO);
n && e.set(NO, {
...n,
emptyState: t
});
}
async function AZ(e, t, n) {
const r = await t.getPlayerLists({});
r?.playerLists && (EZ(e, r.playerLists), await Promise.all(r.playerLists.map((async ({id: r}) => {
const i = e.getItemUntracked(LO, r);
e.setItem(LO, r, {
...i,
loading: !0
});
const o = await t.getPlayerListPersonas({
playerListId: r
});
o && await OZ(e, o, n);
}))));
}
var LZ = () => {
const e = Os(), {showNotification: t} = oP(), n = mb().personaInfo.playerNetworkId, r = H.useRef(!0);
H.useEffect((() => {
if (qb() && !VS()) return Fn((() => e.get(Yb)), (e => {
if (e) {
const i = pb.isFirstPartyAppearOfflineSupported ? "tst_online_status_synced" : "tst_online_status_asynced";
t(0, 0, {
icon: Sf.INFORMATION,
text: Wb(n, e, r.current)
}, {
telemetryInfo: {
pg_id: r.current ? i : "tst_online_status"
}
});
}
r.current = !1;
}), {
fireImmediately: !0
});
}), [ t, e, n ]);
};
function wZ() {
const e = kw(), {ContentMart: t} = Lh();
H.useEffect((() => e.init(t)), [ t, e ]);
}
var kZ = e => {
if (!qb()) return {};
const t = e.get(Yb);
let n;
return n = pb.isFirstPartyAppearOfflineSupported ? t ? "offline_sync" : "online_sync" : t ? "offline" : "online", 
{
presence: n
};
};
function RZ(e) {
const t = e.get(qv).get().data?.size, n = e.get(zv).get().data?.size, r = e.get(hR).get("FriendRequests")?.getUnseenCount();
return {
freqs_rcvd: n,
freqs_rcvd_unseen: r,
freqs_sent: t
};
}
function xZ(e, t) {
const n = e.get(LS).data, r = new Set(n?.map((e => e.eaPlayerId))), i = e.get(tT).get().data, o = r.size, a = i?.size ?? 0;
if ("EA" === t) return {
frnds_ea: o,
frnds_loc: o,
frnds_loc_ea: o,
favs_loc_ea: a,
favs_ea: a
};
const s = e.get(wS).data, l = s?.length;
let c = 0, d = 0, u = 0;
if (i?.size) {
const e = new Set(s?.map((e => e.eaPlayerId)));
for (const t of i.keys()) e.has(t) ? ++u : ++d;
}
for (const e of s ?? []) c += r.has(e.eaPlayerId) ? 1 : 0;
return {
frnds_ea: o,
frnds_loc: l,
frnds_loc_ea: c,
favs_loc_ea: u,
favs_ea: d
};
}
function BZ(e, t) {
const n = e.get(QC).data, r = e.get(tT).get().data, i = n?.[0], o = new Map;
let a = 0, s = 0, l = 0, c = 0, d = 0, u = 0;
if (i) for (const e of i) {
const {eaPlayerId: n, firstPartyPlayerId: i, playerNetworkId: p} = JI(e.photonPlayerId), f = n || i;
if (f) {
let e = o.get(f) ?? 0;
o.set(f, ++e), 2 === e && ++a;
}
p === t ? ++s : ++l, e.presence.productId === dg.productId ? ++c : e.presence.productId && ++d, 
n && r?.get(n) && ++u;
}
return {
favs_on: u,
frnds_on: o.size,
frnds_on_mpop: a,
pop_on: i?.length,
pop_on_same: s,
pop_on_other: l,
pop_on_cur_gm: c,
pop_on_oth_gms: d
};
}
function DZ(e, t, n) {
const r = e.get(bP).get().data;
return {
gmplay: !!t,
xplay_opt: e.get(dO),
xplay_supp: r?.crossPlayEnabled,
lobby: r ? `${n}_${r.telemetryType}` : void 0,
lobby_rem: r ? r.maxSize - r.members.size : void 0
};
}
function FZ(e) {
return {
blocked: e.get(uS).get().data?.size ?? 0,
muted: e.get(pL).get().data?.size ?? 0
};
}
var MZ = (e, t, n, r) => {
const i = dg.appName.replace(/\s/gi, "");
let o, a, s = t.Notifications.getInGamePlay({})?.inGamePlay;
n.setGetCustomCoreHeaders((() => Ts((() => ({
...o,
...a,
...RZ(e),
...FZ(e),
...DZ(e, s, i),
...kZ(e)
})))));
const l = t.Notifications.onInGamePlayChanged.subscribe((e => {
s = e.inGamePlay;
})), c = Fn((() => xZ(e, r)), (e => {
o = e;
}), {
delay: 1e4,
fireImmediately: !0
}), d = Fn((() => BZ(e, r)), (e => {
a = e;
}), {
delay: 1e4,
fireImmediately: !0
});
return () => {
l(), c(), d();
};
};
function UZ(e) {
return [ e.get(NS).get(), e.get(ES).get(), e.get(qv).get(), e.get(zv).get(), e.get(xw).get(), e.get(zS).get(), e.get(uS).get(), e.get($W).get(), e.get(pL).get() ];
}
function HZ(e) {
const t = e.get(LS).data;
return {
eaFriends: (t && new Set(t.map((e => e.eaPlayerId))))?.size ?? -1,
eaFriendPersonas: t?.length ?? -1,
firstPartyFriends: e.get(ES).get().data?.size ?? -1,
sentFriendRequests: e.get(qv).get().data?.size ?? -1,
receivedFriendRequests: e.get(zv).get().data?.size ?? -1,
gameInvites: e.get(xw).get().data?.size ?? -1,
playerCards: e.get(z_).size,
recentlyMet: e.get(TN).getMaybeUntracked()?.data?.size ?? -1,
sessionPlayers: e.get(SN).getMaybeUntracked()?.data?.size ?? -1,
presence: e.get(zS).get().data?.size ?? -1,
blockedPlayers: e.get(uS).get().data?.size ?? -1,
firstPartyBlockedPlayers: e.get($W).get().data?.size ?? -1,
mutedPlayers: e.get(pL).get().data?.size ?? -1
};
}
function VZ() {
const e = mp(), t = Os(), n = Gg(), r = tN(), i = xI();
H.useEffect((() => {
if (is.TwinkleNative && e.bindings.hasMethod("Metrics", "getJsMemoryUsage")) {
const o = Date.now();
let a, s = !0;
const l = async () => {
const i = await e.bindings.Metrics.getJsMemoryUsage({});
Ts((() => {
n.addEvent({
eventType: "photon_js_engine_memory_usage",
timeSinceStart: Date.now() - o,
layerOpen: r.isRevealed,
...HZ(t),
...i
});
})), s && (a = setTimeout(l, 3e5));
};
return i(UZ(t), 1e4)?.then((() => {
s && l();
})), () => {
s = !1, a && clearTimeout(a);
};
}
}), [ e, t, n, r, i ]);
}
var {locale: JZ} = dg, GZ = 0, zZ = !1, jZ = Js({
debugName: "telemetryExpInfo",
get: function({get: e}) {
const t = e(Rv).fragment.data, n = [];
return t?.forEach((e => {
n.push({
exp_id: e.experimentId + "",
variant_id: e.variantId + "",
variant_name: e.variantName,
source: "eadp_exp_plat"
});
})), n;
}
});
function qZ() {
const e = Lh(), t = cy(), n = Gg();
H.useEffect((() => {
const r = e => {
GZ = Date.now(), t.updateSessionId(), t.triggerBootStart({
status: "success",
player_status: "online",
source: e ?? "unknown"
});
}, i = e => {
t.triggerBootEnd({
end_reason: e ?? "normal",
sdur: GZ > 0 ? Math.floor((Date.now() - GZ) / 1e3) : void 0
}), t.flushQueue(), n.flushQueue();
}, o = e.Telemetry.getTelemetryAllowed({})?.status ?? !0;
t.setTelemetryEnabled(o), n.setMetricsEnabled(o), zZ || (zZ = !0, r());
const a = [ e.Telemetry.onBootStart.subscribe((async () => {
r();
const t = await e.PlatformPresence.isAppearOffline({});
n.addEvent({
eventType: "photon_boot_start",
status: "source_update",
player_status: t?.appearOffline ? "offline" : "online"
});
})), e.Telemetry.onBootEnd.subscribe((() => i())), e.Telemetry.onTelemetryAllowChanged.subscribe((async e => {
e.status ? r("opt_in_tel") : i("opt_out_tel"), await Promise.all([ t.flushQueue(), n.flushQueue() ]), 
t.setTelemetryEnabled(e.status), n.setMetricsEnabled(e.status);
})) ];
return () => {
a.forEach((e => e())), i();
};
}), [ n, e, t ]);
}
var YZ = Ii.observer((({children: e}) => {
const t = mb(), n = cy(), r = Lh(), i = Os(), {Telemetry: o} = r, a = ws(jZ);
return H.useEffect((() => {
const e = {
platform: WL(t.personaInfo.devicePlatformId),
playerNetworkId: t.personaInfo.playerNetworkId,
personaId: t.personaInfo.personaId,
nucleusId: t.tokenInfo.userId,
versionNumber: "main_51551",
locale: JZ,
expInfo: a
}, s = [], l = o.getSessionHeaderInfo({})?.sessionHeader;
return l && (n.updateSessionInfo({
...l,
...e
}), s.push(MZ(i, r, n, t.personaInfo.playerNetworkId))), r.hasEvent("Telemetry", "onSessionHeaderInformationChanged") && s.push(o.onSessionHeaderInformationChanged.subscribe((({updatedHeader: t}) => {
n.updateSessionInfo({
...t,
...e
});
}))), () => {
s.forEach((e => e()));
};
}), [ o, a, i, r, n, t ]), ST(), qZ(), VZ(), H.createElement(H.Fragment, null, e);
})), KZ = bh.StateApi.State, WZ = () => {
const e = Rs(vh), {StateApi: t} = Lh(), {closeAllModals: n} = uT(), r = Xg("main"), i = Xg("overlay"), o = uh(), a = bT(), s = qf();
H.useEffect((() => {
const l = t.getState({});
l && e(l.state);
return t.onStateChanged.subscribe((({newState: t}) => {
e(t), t === KZ.Closed && (s.resetFocusState(), o.resetPressed(), a.withDisabledEvents((() => {
r.navigate(hg.link()), i.navigate(Qg.link()), n();
})));
}));
}), [ t, r, n, i, s, o, e, a ]);
}, XZ = bh.InputBindings.Action, QZ = Ec({
position: "absolute",
top: 0,
bottom: 0,
left: 0,
right: 0
}), $Z = class extends H.Component {
constructor() {
super(...arguments), this.state = {
hasError: !1
};
}
static getDerivedStateFromError() {
return {
hasError: !0
};
}
componentDidCatch(e) {
this.props.onError?.(e);
}
render() {
return this.state.hasError ? H.createElement("surface", {
style: Dd,
text: wh("PHOTON-SOCIAL_PAGE-ERROR_TITLE_GENERIC")
}) : this.props.children || null;
}
}, ZZ = () => {}, e0 = H.memo((({providers: e, children: t}) => H.createElement(H.Fragment, null, e.reduceRight(((e, t) => H.createElement(t, null, e)), t)))), t0 = [ eC, If ].concat(function(e) {
const t = [];
return e.forEach((e => {
Object.keys(e).forEach((n => {
const r = e[n];
switch (typeof r) {
case "string":
t.push(r);
break;

case "object":
t.push(...Object.keys(r).map((e => r[e])));
}
}));
})), t;
}([ Tf, (e => {
switch (e) {
case "XBOXONE":
case "XBSX":
return Fc;

case "PS4":
case "PS5":
return Gc;

case "NX":
return Uc;

default:
return Wc;
}
})(dg.devicePlatformId), vf, Zc, Yp, Pf, Sf, pf, Af ])), n0 = Ii.observer((({onJsError: e}) => {
const {isMounted: t, opacityTween: n, scaleTween: r} = vW(), {rootStyle: i, contentStyle: o} = Ep(), a = Mp();
bC(), vJ("app_started");
const s = tN();
return EA({
action: XZ.TogglePhoton,
callback: s.toggle
}), H.createElement("surface", {
style: i
}, false, t && H.createElement(PC, {
type: 0,
opacityTween: n,
key: "layer-background"
}), H.createElement("surface", {
style: [ o, a ]
}, H.createElement(pW, null), t && H.createElement("surface", {
style: [ QZ, r.propStyle("scaleX"), r.propStyle("scaleY"), n.propStyle("opacity") ]
}, H.createElement($Z, {
onError: e
}, H.createElement(gW, null))), H.createElement(XX, null)));
})), r0 = [ ({children: e}) => {
const t = xv();
return TW(t), H.createElement(H.Fragment, null, e);
}, RA, ({children: e}) => {
const t = Tx(), n = LA(), r = H.useMemo((() => ({
2: n[XZ.Primary],
3: n[XZ.Decline],
0: n[XZ.NextPage],
1: n[XZ.PreviousPage],
4: n[XZ.NotificationFocus],
5: n[XZ.GoUp],
6: n[XZ.GoDown]
})), [ n ]);
return H.createElement(Dp, {
playSoundEffect: t,
actionKeyBindings: r,
initialRTL: Sp()
}, e);
}, e => {
const t = qf();
return H.useEffect((() => t.init()), [ t ]), H.createElement(Qs.Provider, {
value: t
}, H.createElement(Hu.Provider, {
value: t.defaultNavigation
}, H.createElement(Jf, {
id: t.rootBoundaryId
}, e.children)));
}, ({children: e}) => {
const t = LA(), n = H.useMemo((() => ({
left: t[XZ.GoLeft],
right: t[XZ.GoRight],
down: t[XZ.GoDown],
up: t[XZ.GoUp]
})), [ t ]);
return H.createElement(ph, {
navigationConfig: n
}, e);
}, ({children: e}) => {
const t = Lh(), n = Os(), r = TZ();
return H.useEffect((() => {
if (!dg.playerListsEnabled) return;
let e;
CZ(n, t.PlayerList), t.hasEvent("PlayerList", "onPlayerListEmptyStateChanged") && (e = vZ(t.PlayerList.onPlayerListEmptyStateChanged, {
onStreamData: e => {
NZ(n, e.emptyState);
}
})), AZ(n, t.PlayerList, r);
const i = vZ(t.PlayerList.onPlayerListsChanged, {
onStreamData: e => {
EZ(n, e.playerLists);
}
}), o = vZ(t.PlayerList.onPlayerListPersonasChanged, {
onStreamData: async e => {
await OZ(n, e, r);
}
});
return () => {
e?.(), i(), o();
};
}), [ r, n, t ]), H.createElement(H.Fragment, null, e);
}, YZ, ({children: e}) => {
const t = H.useRef(!0), [n, r] = [ Rs(i = Xf), Fs(i) ];
var i;
const o = H.useCallback((e => {
n((t => {
const n = t.slice();
return e.forEach((e => {
const t = n.indexOf(e);
t > -1 && n.splice(t, 1);
})), n;
}));
}), [ n ]), a = H.useCallback((e => (t.current && n((t => [ ...t, ...e ])), () => t.current && o(e))), [ o, n ]);
H.useEffect((() => () => {
t.current = !1, r();
}), [ r ]);
const s = H.useMemo((() => ({
preloadImages: a
})), [ a ]);
return H.createElement(Qf.Provider, {
value: s
}, H.createElement(th, null), e);
}, ({children: e}) => {
const t = Os(), n = mb(), r = $T(), i = xv().fragment;
return H.useEffect((() => mr((() => !i.loading && !i.uninitialized), (() => {
r.init(n.tokenInfo.userId, n.photonPlayerId, Mv(t, "fo_0", "FriendOnline"));
}))), [ r, t, n, i ]), H.createElement(H.Fragment, null, e);
}, ({children: e}) => H.createElement(H.Fragment, null, e), WW, ({children: e}) => (wZ(), 
H.createElement(H.Fragment, null, e)), ({children: e}) => H.createElement(uZ, null, H.createElement(X$, null, H.createElement(bZ, null, e))), ({children: e}) => H.createElement(GD, null, H.createElement(gD, null, e)), ({children: e}) => (CX(), 
EX(), H.createElement(IX, null, e)), ({children: e}) => dg.isPartyEnabled ? H.createElement(e$, null, H.createElement(JQ, null, H.createElement(ZQ, null, e))) : H.createElement(H.Fragment, null, e), ({children: e}) => dg.isTightlyCoupledParties ? H.createElement(H.Fragment, null, e) : H.createElement(LX, null, e), e => (WZ(), 
LZ(), YW(), n$(), OC(), wX(), Dh(), rh(t0), e.children) ];
((e, t = []) => {
return n = {
roundedRectUrl: eC,
fullscreenResample: {
enable: !1,
width: hc(1920),
height: hc(1080)
},
createOnErrorCallback: (e, t) => (n, r) => {
r.message = n + ": " + r.message, jg(e, r), t(n, r);
},
isAcceptableNativeError: (e, t) => !Ub.DeveloperMode(e.bindings.Utilities) && (t.msg.startsWith("http error status=0") || t.msg.startsWith("Http error, response empty")),
async onStart(n, r) {
const i = new Es;
i.addExternalSingletonState(ih, n);
const o = i.get(Jg), a = new Bb(n.nativeApi, o);
a.registerBinding(), i.addExternalSingletonState(zg, a), ZO(i, a), await fb(a), 
dy(i, a), n.bindings.Telemetry.sendTelemetryEvent.subscribe((e => {
if (e.httpRequestCompleteEvent) {
const {url: t, statusCode: n, requestCompletionDurationMs: r, requestQueueDurationMs: i} = e.httpRequestCompleteEvent;
rC(t) || o.addEvent({
eventType: "photon_http_request",
url: t,
status_code: n,
duration: r,
queue: i
});
} else e.noPublicKeyProvidedEvent && o.addEvent({
eventType: "photon_script_engine",
event: "no_public_key_provided"
});
}));
const s = i.get(Vh);
await jh(0, Kg, s, tC), Oc(n.bindings.Surface, [ Fd ]), n.bindings.Surface.updateSurface({
surfaceId: "<TwinkleLayout::defaultSurface>",
surface: {
alignContent: "stretch",
textureFadeInTime: .3,
textureFadeInCutoff: .01,
textureFadeInEasing: "CubicOut",
styleObjects: [ Fd ]
}
});
const l = [ Ad, Ld, wd, kd ], c = Nd, d = await Hh(n, l, c), u = 0 === d.length, p = Ub.TranslationHost(n.bindings.Utilities), {data: f, error: h} = await db(a.Identity, i, o);
f && i.addExternalSingletonState(hb, f);
const {translationsLoaded: m, errors: g} = await py(n, dg.locale, p);
var y;
y = {
CLOSE: wh("BUTTON_BACK"),
CONFIRM: wh("BUTTON_CONFIRM"),
INPUT_LABEL_CANCEL: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CANCEL"),
INPUT_LABEL_DISMISS: wh("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_DISMISS"),
INPUT_LABEL_DISMISS_NOTIFICATION: wh("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_DISMISS-NOTIFICATION")
}, Bh = y;
const I = !u || !m || !f;
let _ = "";
I && (_ += "boot failure:", u || (_ += " fonts failed to load"), m || (_ += " translations failed to load"), 
f || (_ += " user failed to load (" + h + ")"), o.addCountEvent("js_boot_fail", 1, _));
const b = I ? void 0 : await rS(n, a, i, f.tokenInfo.userId);
d.forEach((({url: e, duration: t}) => {
const n = e.split("/").pop();
o.addEvent({
eventType: "photon_font_fails",
filename: n,
duration: t
});
})), g.forEach((({url: e, duration: t, message: n}) => {
const r = e.split("/").pop();
o.addEvent({
eventType: "photon_translation_fails",
filename: r,
duration: t,
message: n
});
})), o.addEvent({
eventType: "photon_boot_start",
status: I ? "error" : "success",
player_status: b ? "offline" : "online",
error_code: _,
fallback_translation_used: 1 === g.length
}), I && await o.flushQueue(), Jb(n.bindings, o), r((n => {
n(e, [ ...t, e => H.createElement(Cs, {
moby: i
}, H.createElement(Ah.Provider, {
value: a
}, e)) ]);
}), I, _);
}
}, new Promise((e => {
const t = new Hm, r = new Um(t), i = (e, t) => {
const n = "Error during " + e + ": " + t.message;
console.log(n), r.bindings.Utilities.showError({
message: n
});
};
t.onErrorCallback = n.createOnErrorCallback?.(r, i) ?? i, r.bindings.Utilities.onSendErrorToJs.subscribe((e => {
const t = "Error from native: " + e.msg + ":\n" + e.debugStrings.join("\n");
console.log(t), n.isAcceptableNativeError?.(r, e) || r.bindings.Utilities.showError({
message: t
});
})), r.bindings.Layout.SetLayoutMode({
layoutMode: Vm.Yoga
}), r.bindings.Bootflow.onJsBootBegin({}), n.fullscreenResample && r.bindings.Utilities.setFullscreenResample(n.fullscreenResample), 
n?.roundedRectUrl && r.bindings.Texture.loadRoundedRectTexture({
url: n.roundedRectUrl
});
const o = async (t, n) => {
r.rootElementWrapper = e => {
let t = e;
return n?.forEach((e => {
t = e(t);
})), H.createElement(H.StrictMode, null, H.createElement(hp.Provider, {
value: r
}, t));
}, await r.render(t), e(r);
};
r.nativeApi.start((() => {
n.onStart(r, ((t, n = !1, i = "boot failure: unknown reason") => {
r.bindings.Bootflow.onJsBootEnd(n ? {
success: !1,
reason: i
} : {
success: !0
}), n ? (console.error(i), e(r)) : t(o);
}));
}));
}));
var n;
})(H.createElement((function() {
const e = qg(), t = Gg(), n = H.useCallback((n => (t.addCountEvent("js_error", 1), 
t.flushQueue(), e(n))), [ t, e ]);
return H.createElement("surface", {
style: Lc("flex", 1),
onClick: ZZ
}, H.createElement($Z, {
onError: n
}, false, H.createElement(e0, {
providers: r0
}, H.createElement(n0, {
onJsError: n
}))));
}), null));
}();
//# sourceMappingURL=bundle.js.map
